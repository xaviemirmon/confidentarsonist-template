"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0";
exports.ids = ["vendor-chunks/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/index.css":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/index.css ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"e203e105e9ee\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQG1lYXN1cmVkK3B1Y2tAMC4yMC4yX0B0eXBlcytyZWFjdEAxOS4yLjdfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfX3JlYWN0QDE5LjIuMC9ub2RlX21vZHVsZXMvQG1lYXN1cmVkL3B1Y2svZGlzdC9pbmRleC5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mZWRlcmljb2pvcmdlYm9uZWx0b3p6aS9EZXNrdG9wL1dvcmsvcHVjay9jb2RlL2Vjb3N5c3RlbS9wdWNrLWNvbmZpZ3Mvc2hhZGNuLXR3YmxvY2tzL25vZGVfbW9kdWxlcy8ucG5wbS9AbWVhc3VyZWQrcHVja0AwLjIwLjJfQHR5cGVzK3JlYWN0QDE5LjIuN19yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9fcmVhY3RAMTkuMi4wL25vZGVfbW9kdWxlcy9AbWVhc3VyZWQvcHVjay9kaXN0L2luZGV4LmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcImUyMDNlMTA1ZTllZVwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/index.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-OOLYDXKW.mjs":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-OOLYDXKW.mjs ***!
  \**********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SlotRender: () => (/* binding */ SlotRender),\n/* harmony export */   SlotRenderPure: () => (/* binding */ SlotRenderPure),\n/* harmony export */   __async: () => (/* binding */ __async),\n/* harmony export */   __commonJS: () => (/* binding */ __commonJS),\n/* harmony export */   __objRest: () => (/* binding */ __objRest),\n/* harmony export */   __spreadProps: () => (/* binding */ __spreadProps),\n/* harmony export */   __spreadValues: () => (/* binding */ __spreadValues),\n/* harmony export */   __toESM: () => (/* binding */ __toESM),\n/* harmony export */   defaultAppState: () => (/* binding */ defaultAppState),\n/* harmony export */   defaultSlots: () => (/* binding */ defaultSlots),\n/* harmony export */   defaultViewports: () => (/* binding */ defaultViewports),\n/* harmony export */   expandNode: () => (/* binding */ expandNode),\n/* harmony export */   getChanged: () => (/* binding */ getChanged),\n/* harmony export */   getSlotTransform: () => (/* binding */ getSlotTransform),\n/* harmony export */   init_react_import: () => (/* binding */ init_react_import),\n/* harmony export */   migrate: () => (/* binding */ migrate),\n/* harmony export */   resolveAllData: () => (/* binding */ resolveAllData),\n/* harmony export */   resolveComponentData: () => (/* binding */ resolveComponentData),\n/* harmony export */   rootAreaId: () => (/* binding */ rootAreaId),\n/* harmony export */   rootDroppableId: () => (/* binding */ rootDroppableId),\n/* harmony export */   rootZone: () => (/* binding */ rootZone),\n/* harmony export */   setupZone: () => (/* binding */ setupZone),\n/* harmony export */   transformProps: () => (/* binding */ transformProps),\n/* harmony export */   useFieldTransforms: () => (/* binding */ useFieldTransforms),\n/* harmony export */   useSlots: () => (/* binding */ useSlots),\n/* harmony export */   walkAppState: () => (/* binding */ walkAppState),\n/* harmony export */   walkField: () => (/* binding */ walkField),\n/* harmony export */   walkTree: () => (/* binding */ walkTree)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.6_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var flat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flat */ \"(ssr)/./node_modules/.pnpm/flat@5.0.2/node_modules/flat/index.js\");\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fast-deep-equal */ \"(ssr)/./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@15.5.6_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __esm = (fn, res) => function __init() {\n  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../tsup-config/react-import.js\n\nvar init_react_import = __esm({\n  \"../tsup-config/react-import.js\"() {\n    \"use strict\";\n  }\n});\n\n// lib/data/walk-tree.ts\ninit_react_import();\n\n// lib/data/map-fields.ts\ninit_react_import();\n\n// lib/data/default-slots.ts\ninit_react_import();\nvar defaultSlots = (value, fields) => Object.keys(fields).reduce(\n  (acc, fieldName) => fields[fieldName].type === \"slot\" ? __spreadValues({ [fieldName]: [] }, acc) : acc,\n  value\n);\n\n// lib/data/map-fields.ts\nvar isPromise = (v) => !!v && typeof v.then === \"function\";\nvar flatten = (values) => values.reduce((acc, item) => __spreadValues(__spreadValues({}, acc), item), {});\nvar containsPromise = (arr) => arr.some(isPromise);\nvar walkField = ({\n  value,\n  fields,\n  mappers,\n  propKey = \"\",\n  propPath = \"\",\n  id = \"\",\n  config,\n  recurseSlots = false\n}) => {\n  var _a, _b, _c;\n  const fieldType = (_a = fields[propKey]) == null ? void 0 : _a.type;\n  const map = mappers[fieldType];\n  if (map && fieldType === \"slot\") {\n    const content = value || [];\n    const mappedContent = recurseSlots ? content.map((el) => {\n      var _a2;\n      const componentConfig = config.components[el.type];\n      if (!componentConfig) {\n        throw new Error(`Could not find component config for ${el.type}`);\n      }\n      const fields2 = (_a2 = componentConfig.fields) != null ? _a2 : {};\n      return walkField({\n        value: __spreadProps(__spreadValues({}, el), { props: defaultSlots(el.props, fields2) }),\n        fields: fields2,\n        mappers,\n        id: el.props.id,\n        config,\n        recurseSlots\n      });\n    }) : content;\n    if (containsPromise(mappedContent)) {\n      return Promise.all(mappedContent);\n    }\n    return map({\n      value: mappedContent,\n      parentId: id,\n      propName: propPath,\n      field: fields[propKey],\n      propPath\n    });\n  } else if (map && fields[propKey]) {\n    return map({\n      value,\n      parentId: id,\n      propName: propKey,\n      field: fields[propKey],\n      propPath\n    });\n  }\n  if (value && typeof value === \"object\") {\n    if (Array.isArray(value)) {\n      const arrayFields = ((_b = fields[propKey]) == null ? void 0 : _b.type) === \"array\" ? fields[propKey].arrayFields : null;\n      if (!arrayFields) return value;\n      const newValue = value.map(\n        (el, idx) => walkField({\n          value: el,\n          fields: arrayFields,\n          mappers,\n          propKey,\n          propPath: `${propPath}[${idx}]`,\n          id,\n          config,\n          recurseSlots\n        })\n      );\n      if (containsPromise(newValue)) {\n        return Promise.all(newValue);\n      }\n      return newValue;\n    } else if (\"$$typeof\" in value) {\n      return value;\n    } else {\n      const objectFields = ((_c = fields[propKey]) == null ? void 0 : _c.type) === \"object\" ? fields[propKey].objectFields : fields;\n      return walkObject({\n        value,\n        fields: objectFields,\n        mappers,\n        id,\n        getPropPath: (k) => `${propPath}.${k}`,\n        config,\n        recurseSlots\n      });\n    }\n  }\n  return value;\n};\nvar walkObject = ({\n  value,\n  fields,\n  mappers,\n  id,\n  getPropPath,\n  config,\n  recurseSlots\n}) => {\n  const newProps = Object.entries(value).map(([k, v]) => {\n    const opts = {\n      value: v,\n      fields,\n      mappers,\n      propKey: k,\n      propPath: getPropPath(k),\n      id,\n      config,\n      recurseSlots\n    };\n    const newValue = walkField(opts);\n    if (isPromise(newValue)) {\n      return newValue.then((resolvedValue) => ({\n        [k]: resolvedValue\n      }));\n    }\n    return {\n      [k]: newValue\n    };\n  }, {});\n  if (containsPromise(newProps)) {\n    return Promise.all(newProps).then(flatten);\n  }\n  return flatten(newProps);\n};\nfunction mapFields(item, mappers, config, recurseSlots = false) {\n  var _a, _b, _c, _d, _e;\n  const itemType = \"type\" in item ? item.type : \"root\";\n  const componentConfig = itemType === \"root\" ? config.root : (_a = config.components) == null ? void 0 : _a[itemType];\n  const newProps = walkObject({\n    value: defaultSlots((_b = item.props) != null ? _b : {}, (_c = componentConfig == null ? void 0 : componentConfig.fields) != null ? _c : {}),\n    fields: (_d = componentConfig == null ? void 0 : componentConfig.fields) != null ? _d : {},\n    mappers,\n    id: item.props ? (_e = item.props.id) != null ? _e : \"root\" : \"root\",\n    getPropPath: (k) => k,\n    config,\n    recurseSlots\n  });\n  if (isPromise(newProps)) {\n    return newProps.then((resolvedProps) => __spreadProps(__spreadValues({}, item), {\n      props: resolvedProps\n    }));\n  }\n  return __spreadProps(__spreadValues({}, item), {\n    props: newProps\n  });\n}\n\n// lib/data/walk-tree.ts\nfunction walkTree(data, config, callbackFn) {\n  var _a, _b;\n  const walkItem = (item) => {\n    return mapFields(\n      item,\n      {\n        slot: ({ value, parentId, propName }) => {\n          var _a2;\n          const content = value;\n          return (_a2 = callbackFn(content, { parentId, propName })) != null ? _a2 : content;\n        }\n      },\n      config,\n      true\n    );\n  };\n  if (\"props\" in data) {\n    return walkItem(data);\n  }\n  const _data = data;\n  const zones = (_a = _data.zones) != null ? _a : {};\n  const mappedContent = _data.content.map(walkItem);\n  return {\n    root: walkItem(_data.root),\n    content: (_b = callbackFn(mappedContent, {\n      parentId: \"root\",\n      propName: \"default-zone\"\n    })) != null ? _b : mappedContent,\n    zones: Object.keys(zones).reduce(\n      (acc, zoneCompound) => __spreadProps(__spreadValues({}, acc), {\n        [zoneCompound]: zones[zoneCompound].map(walkItem)\n      }),\n      {}\n    )\n  };\n}\n\n// lib/migrate.ts\ninit_react_import();\n\n// store/default-app-state.ts\ninit_react_import();\n\n// components/ViewportControls/default-viewports.ts\ninit_react_import();\nvar defaultViewports = [\n  { width: 360, height: \"auto\", icon: \"Smartphone\", label: \"Small\" },\n  { width: 768, height: \"auto\", icon: \"Tablet\", label: \"Medium\" },\n  { width: 1280, height: \"auto\", icon: \"Monitor\", label: \"Large\" }\n];\n\n// store/default-app-state.ts\nvar defaultAppState = {\n  data: { content: [], root: {}, zones: {} },\n  ui: {\n    leftSideBarVisible: true,\n    rightSideBarVisible: true,\n    arrayState: {},\n    itemSelector: null,\n    componentList: {},\n    isDragging: false,\n    previewMode: \"edit\",\n    viewports: {\n      current: {\n        width: defaultViewports[0].width,\n        height: defaultViewports[0].height || \"auto\"\n      },\n      options: [],\n      controlsVisible: true\n    },\n    field: { focus: null }\n  },\n  indexes: {\n    nodes: {},\n    zones: {}\n  }\n};\n\n// lib/data/walk-app-state.ts\ninit_react_import();\n\n// lib/data/for-related-zones.ts\ninit_react_import();\n\n// lib/get-zone-id.ts\ninit_react_import();\n\n// lib/root-droppable-id.ts\ninit_react_import();\nvar rootAreaId = \"root\";\nvar rootZone = \"default-zone\";\nvar rootDroppableId = `${rootAreaId}:${rootZone}`;\n\n// lib/get-zone-id.ts\nvar getZoneId = (zoneCompound) => {\n  if (!zoneCompound) {\n    return [];\n  }\n  if (zoneCompound && zoneCompound.indexOf(\":\") > -1) {\n    return zoneCompound.split(\":\");\n  }\n  return [rootDroppableId, zoneCompound];\n};\n\n// lib/data/for-related-zones.ts\nfunction forRelatedZones(item, data, cb, path = []) {\n  Object.entries(data.zones || {}).forEach(([zoneCompound, content]) => {\n    const [parentId] = getZoneId(zoneCompound);\n    if (parentId === item.props.id) {\n      cb(path, zoneCompound, content);\n    }\n  });\n}\n\n// lib/data/flatten-node.ts\ninit_react_import();\n\n\n// lib/data/strip-slots.ts\ninit_react_import();\nvar stripSlots = (data, config) => {\n  return mapFields(data, { slot: () => null }, config);\n};\n\n// lib/data/flatten-node.ts\nvar { flatten: flatten2, unflatten } = flat__WEBPACK_IMPORTED_MODULE_1__;\nvar flattenNode = (node, config) => {\n  return __spreadProps(__spreadValues({}, node), {\n    props: flatten2(stripSlots(node, config).props)\n  });\n};\nvar expandNode = (node) => {\n  const props = unflatten(node.props);\n  return __spreadProps(__spreadValues({}, node), {\n    props\n  });\n};\n\n// lib/data/walk-app-state.ts\nfunction walkAppState(state, config, mapContent = (content) => content, mapNodeOrSkip = (item) => item) {\n  var _a;\n  let newZones = {};\n  const newZoneIndex = {};\n  const newNodeIndex = {};\n  const processContent = (path, zoneCompound, content, zoneType, newId) => {\n    var _a2;\n    const [parentId] = zoneCompound.split(\":\");\n    const mappedContent = ((_a2 = mapContent(content, zoneCompound, zoneType)) != null ? _a2 : content) || [];\n    const [_2, zone] = zoneCompound.split(\":\");\n    const newZoneCompound = `${newId || parentId}:${zone}`;\n    const newContent2 = mappedContent.map(\n      (zoneChild, index) => processItem(zoneChild, [...path, newZoneCompound], index)\n    );\n    newZoneIndex[newZoneCompound] = {\n      contentIds: newContent2.map((item) => item.props.id),\n      type: zoneType\n    };\n    return [newZoneCompound, newContent2];\n  };\n  const processRelatedZones = (item, newId, initialPath) => {\n    forRelatedZones(\n      item,\n      state.data,\n      (relatedPath, relatedZoneCompound, relatedContent) => {\n        const [zoneCompound, newContent2] = processContent(\n          relatedPath,\n          relatedZoneCompound,\n          relatedContent,\n          \"dropzone\",\n          newId\n        );\n        newZones[zoneCompound] = newContent2;\n      },\n      initialPath\n    );\n  };\n  const processItem = (item, path, index) => {\n    const mappedItem = mapNodeOrSkip(item, path, index);\n    if (!mappedItem) return item;\n    const id = mappedItem.props.id;\n    const newProps = __spreadProps(__spreadValues({}, mapFields(\n      mappedItem,\n      {\n        slot: ({ value, parentId: parentId2, propPath }) => {\n          const content = value;\n          const zoneCompound = `${parentId2}:${propPath}`;\n          const [_2, newContent2] = processContent(\n            path,\n            zoneCompound,\n            content,\n            \"slot\",\n            parentId2\n          );\n          return newContent2;\n        }\n      },\n      config\n    ).props), {\n      id\n    });\n    processRelatedZones(item, id, path);\n    const newItem = __spreadProps(__spreadValues({}, item), { props: newProps });\n    const thisZoneCompound = path[path.length - 1];\n    const [parentId, zone] = thisZoneCompound ? thisZoneCompound.split(\":\") : [null, \"\"];\n    newNodeIndex[id] = {\n      data: newItem,\n      flatData: flattenNode(newItem, config),\n      path,\n      parentId,\n      zone\n    };\n    const finalData = __spreadProps(__spreadValues({}, newItem), { props: __spreadValues({}, newItem.props) });\n    if (newProps.id === \"root\") {\n      delete finalData[\"type\"];\n      delete finalData.props[\"id\"];\n    }\n    return finalData;\n  };\n  const zones = state.data.zones || {};\n  const [_, newContent] = processContent(\n    [],\n    rootDroppableId,\n    state.data.content,\n    \"root\"\n  );\n  const processedContent = newContent;\n  const zonesAlreadyProcessed = Object.keys(newZones);\n  Object.keys(zones || {}).forEach((zoneCompound) => {\n    const [parentId] = zoneCompound.split(\":\");\n    if (zonesAlreadyProcessed.includes(zoneCompound)) {\n      return;\n    }\n    const [_2, newContent2] = processContent(\n      [rootDroppableId],\n      zoneCompound,\n      zones[zoneCompound],\n      \"dropzone\",\n      parentId\n    );\n    newZones[zoneCompound] = newContent2;\n  }, newZones);\n  const processedRoot = processItem(\n    {\n      type: \"root\",\n      props: __spreadProps(__spreadValues({}, (_a = state.data.root.props) != null ? _a : state.data.root), { id: \"root\" })\n    },\n    [],\n    -1\n  );\n  const root = __spreadProps(__spreadValues({}, state.data.root), {\n    props: processedRoot.props\n  });\n  return __spreadProps(__spreadValues({}, state), {\n    data: {\n      root,\n      content: processedContent,\n      zones: __spreadValues(__spreadValues({}, state.data.zones), newZones)\n    },\n    indexes: {\n      nodes: __spreadValues(__spreadValues({}, state.indexes.nodes), newNodeIndex),\n      zones: __spreadValues(__spreadValues({}, state.indexes.zones), newZoneIndex)\n    }\n  });\n}\n\n// lib/migrate.ts\nvar migrations = [\n  // Migrate root to root.props\n  (data) => {\n    const rootProps = data.root.props || data.root;\n    if (Object.keys(data.root).length > 0 && !data.root.props) {\n      console.warn(\n        \"Migration applied: Root props moved from `root` to `root.props`.\"\n      );\n      return __spreadProps(__spreadValues({}, data), {\n        root: {\n          props: __spreadValues({}, rootProps)\n        }\n      });\n    }\n    return data;\n  },\n  // Migrate zones to slots\n  (data, config, migrationOptions) => {\n    var _a, _b;\n    if (!config) return data;\n    console.log(\"Migrating DropZones to slots...\");\n    const updatedItems = {};\n    const appState = __spreadProps(__spreadValues({}, defaultAppState), { data });\n    const { indexes } = walkAppState(appState, config);\n    const deletedCompounds = [];\n    walkAppState(appState, config, (content, zoneCompound, zoneType) => {\n      var _a2, _b2, _c;\n      if (zoneType === \"dropzone\") {\n        const [id, slotName] = zoneCompound.split(\":\");\n        const nodeData = indexes.nodes[id].data;\n        const componentType = nodeData.type;\n        const configForComponent = id === \"root\" ? config.root : config.components[componentType];\n        if (((_b2 = (_a2 = configForComponent == null ? void 0 : configForComponent.fields) == null ? void 0 : _a2[slotName]) == null ? void 0 : _b2.type) === \"slot\") {\n          updatedItems[id] = __spreadProps(__spreadValues({}, nodeData), {\n            props: __spreadProps(__spreadValues(__spreadValues({}, nodeData.props), (_c = updatedItems[id]) == null ? void 0 : _c.props), {\n              [slotName]: content\n            })\n          });\n          deletedCompounds.push(zoneCompound);\n        }\n        return content;\n      }\n      return content;\n    });\n    const updated = walkAppState(\n      appState,\n      config,\n      (content) => content,\n      (item) => {\n        var _a2;\n        return (_a2 = updatedItems[item.props.id]) != null ? _a2 : item;\n      }\n    );\n    deletedCompounds.forEach((zoneCompound) => {\n      var _a2;\n      const [_, propName] = zoneCompound.split(\":\");\n      console.log(\n        `\\u2713 Success: Migrated \"${zoneCompound}\" from DropZone to slot field \"${propName}\"`\n      );\n      (_a2 = updated.data.zones) == null ? true : delete _a2[zoneCompound];\n    });\n    if (migrationOptions == null ? void 0 : migrationOptions.migrateDynamicZonesForComponent) {\n      const unmigratedZonesGrouped = {};\n      Object.keys((_a = updated.data.zones) != null ? _a : {}).forEach((zoneCompound) => {\n        var _a2;\n        const [componentId, propName] = zoneCompound.split(\":\");\n        const content = (_a2 = updated.data.zones) == null ? void 0 : _a2[zoneCompound];\n        if (!content) {\n          return;\n        }\n        if (!unmigratedZonesGrouped[componentId]) {\n          unmigratedZonesGrouped[componentId] = {};\n        }\n        if (!unmigratedZonesGrouped[componentId][propName]) {\n          unmigratedZonesGrouped[componentId][propName] = content;\n        }\n      });\n      Object.keys(unmigratedZonesGrouped).forEach((componentId) => {\n        updated.data = walkTree(updated.data, config, (content) => {\n          return content.map((child) => {\n            var _a2;\n            if (child.props.id !== componentId) {\n              return child;\n            }\n            const migrateFn = (_a2 = migrationOptions == null ? void 0 : migrationOptions.migrateDynamicZonesForComponent) == null ? void 0 : _a2[child.type];\n            if (!migrateFn) {\n              return child;\n            }\n            const zones = unmigratedZonesGrouped[componentId];\n            const migratedProps = migrateFn(child.props, zones);\n            Object.keys(zones).forEach((propName) => {\n              var _a3;\n              const zoneCompound = `${componentId}:${propName}`;\n              console.log(`\\u2713 Success: Migrated \"${zoneCompound}\" DropZone`);\n              (_a3 = updated.data.zones) == null ? true : delete _a3[zoneCompound];\n            });\n            return __spreadProps(__spreadValues({}, child), {\n              props: migratedProps\n            });\n          });\n        });\n      });\n    }\n    Object.keys((_b = updated.data.zones) != null ? _b : {}).forEach((zoneCompound) => {\n      const [_, propName] = zoneCompound.split(\":\");\n      throw new Error(\n        `Could not migrate DropZone \"${zoneCompound}\" to slot field. No slot exists with the name \"${propName}\".`\n      );\n    });\n    delete updated.data.zones;\n    return updated.data;\n  }\n];\nfunction migrate(data, config, migrationOptions) {\n  return migrations == null ? void 0 : migrations.reduce(\n    (acc, migration) => migration(acc, config, migrationOptions),\n    data\n  );\n}\n\n// lib/transform-props.ts\ninit_react_import();\n\n// lib/data/default-data.ts\ninit_react_import();\nvar defaultData = (data) => __spreadProps(__spreadValues({}, data), {\n  root: data.root || {},\n  content: data.content || []\n});\n\n// lib/transform-props.ts\nfunction transformProps(data, propTransforms, config = { components: {} }) {\n  const mapItem = (item) => {\n    if (propTransforms[item.type]) {\n      return __spreadProps(__spreadValues({}, item), {\n        props: __spreadValues({\n          id: item.props.id\n        }, propTransforms[item.type](item.props))\n      });\n    }\n    return item;\n  };\n  const defaultedData = defaultData(data);\n  const rootProps = defaultedData.root.props || defaultedData.root;\n  let newRoot = __spreadValues({}, defaultedData.root);\n  if (propTransforms[\"root\"]) {\n    newRoot.props = propTransforms[\"root\"](rootProps);\n  }\n  const dataWithUpdatedRoot = __spreadProps(__spreadValues({}, defaultedData), { root: newRoot });\n  const updatedData = walkTree(\n    dataWithUpdatedRoot,\n    config,\n    (content) => content.map(mapItem)\n  );\n  if (!defaultedData.root.props) {\n    updatedData.root = updatedData.root.props;\n  }\n  return updatedData;\n}\n\n// lib/resolve-all-data.ts\ninit_react_import();\n\n// lib/resolve-component-data.ts\ninit_react_import();\n\n// lib/get-changed.ts\ninit_react_import();\n\nvar getChanged = (newItem, oldItem) => {\n  return newItem ? Object.keys(newItem.props || {}).reduce((acc, item) => {\n    const newItemProps = (newItem == null ? void 0 : newItem.props) || {};\n    const oldItemProps = (oldItem == null ? void 0 : oldItem.props) || {};\n    return __spreadProps(__spreadValues({}, acc), {\n      [item]: !fast_deep_equal__WEBPACK_IMPORTED_MODULE_2__(oldItemProps[item], newItemProps[item])\n    });\n  }, {}) : {};\n};\n\n// lib/resolve-component-data.ts\n\nvar cache = { lastChange: {} };\nvar resolveComponentData = (_0, _1, ..._2) => __async(void 0, [_0, _1, ..._2], function* (item, config, metadata = {}, onResolveStart, onResolveEnd, trigger = \"replace\") {\n  const configForItem = \"type\" in item && item.type !== \"root\" ? config.components[item.type] : config.root;\n  const resolvedItem = __spreadValues({}, item);\n  const shouldRunResolver = (configForItem == null ? void 0 : configForItem.resolveData) && item.props;\n  const id = \"id\" in item.props ? item.props.id : \"root\";\n  if (shouldRunResolver) {\n    const { item: oldItem = null, resolved = {} } = cache.lastChange[id] || {};\n    if (trigger !== \"force\" && item && fast_deep_equal__WEBPACK_IMPORTED_MODULE_2__(item, oldItem)) {\n      return { node: resolved, didChange: false };\n    }\n    const changed = getChanged(item, oldItem);\n    if (onResolveStart) {\n      onResolveStart(item);\n    }\n    const { props: resolvedProps, readOnly = {} } = yield configForItem.resolveData(item, {\n      changed,\n      lastData: oldItem,\n      metadata: __spreadValues(__spreadValues({}, metadata), configForItem.metadata),\n      trigger\n    });\n    resolvedItem.props = __spreadValues(__spreadValues({}, item.props), resolvedProps);\n    if (Object.keys(readOnly).length) {\n      resolvedItem.readOnly = readOnly;\n    }\n  }\n  let itemWithResolvedChildren = yield mapFields(\n    resolvedItem,\n    {\n      slot: (_02) => __async(void 0, [_02], function* ({ value }) {\n        const content = value;\n        return yield Promise.all(\n          content.map(\n            (childItem) => __async(void 0, null, function* () {\n              return (yield resolveComponentData(\n                childItem,\n                config,\n                metadata,\n                onResolveStart,\n                onResolveEnd,\n                trigger\n              )).node;\n            })\n          )\n        );\n      })\n    },\n    config\n  );\n  if (shouldRunResolver && onResolveEnd) {\n    onResolveEnd(resolvedItem);\n  }\n  cache.lastChange[id] = {\n    item,\n    resolved: itemWithResolvedChildren\n  };\n  return {\n    node: itemWithResolvedChildren,\n    didChange: !fast_deep_equal__WEBPACK_IMPORTED_MODULE_2__(item, itemWithResolvedChildren)\n  };\n});\n\n// lib/data/to-component.ts\ninit_react_import();\nvar toComponent = (item) => {\n  return \"type\" in item ? item : __spreadProps(__spreadValues({}, item), {\n    props: __spreadProps(__spreadValues({}, item.props), { id: \"root\" }),\n    type: \"root\"\n  });\n};\n\n// lib/resolve-all-data.ts\nfunction resolveAllData(_0, _1) {\n  return __async(this, arguments, function* (data, config, metadata = {}, onResolveStart, onResolveEnd) {\n    var _a;\n    const defaultedData = defaultData(data);\n    const resolveNode = (_node) => __async(this, null, function* () {\n      const node = toComponent(_node);\n      onResolveStart == null ? void 0 : onResolveStart(node);\n      const resolved = (yield resolveComponentData(\n        node,\n        config,\n        metadata,\n        () => {\n        },\n        () => {\n        },\n        \"force\"\n      )).node;\n      const resolvedDeep = yield mapFields(\n        resolved,\n        { slot: ({ value }) => processContent(value) },\n        config\n      );\n      onResolveEnd == null ? void 0 : onResolveEnd(toComponent(resolvedDeep));\n      return resolvedDeep;\n    });\n    const processContent = (content) => __async(this, null, function* () {\n      return Promise.all(content.map(resolveNode));\n    });\n    const processZones = () => __async(this, null, function* () {\n      var _a2;\n      const zones = (_a2 = data.zones) != null ? _a2 : {};\n      Object.entries(zones).forEach((_02) => __async(this, [_02], function* ([zoneKey, content]) {\n        zones[zoneKey] = yield Promise.all(content.map(resolveNode));\n      }));\n      return zones;\n    });\n    const dynamic = {\n      root: yield resolveNode(defaultedData.root),\n      content: yield processContent(defaultedData.content),\n      zones: yield processZones()\n    };\n    Object.keys((_a = defaultedData.zones) != null ? _a : {}).forEach((zoneKey) => __async(this, null, function* () {\n      const content = defaultedData.zones[zoneKey];\n      dynamic.zones[zoneKey] = yield processContent(content);\n    }), {});\n    return dynamic;\n  });\n}\n\n// lib/data/setup-zone.ts\ninit_react_import();\nvar setupZone = (data, zoneKey) => {\n  if (zoneKey === rootDroppableId) {\n    return data;\n  }\n  const newData = __spreadProps(__spreadValues({}, data), {\n    zones: data.zones ? __spreadValues({}, data.zones) : {}\n  });\n  newData.zones[zoneKey] = newData.zones[zoneKey] || [];\n  return newData;\n};\n\n// lib/field-transforms/use-field-transforms.tsx\ninit_react_import();\n\nfunction useFieldTransforms(config, item, transforms, readOnly, forceReadOnly) {\n  const mappers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return Object.keys(transforms).reduce((acc, _fieldType) => {\n      const fieldType = _fieldType;\n      return __spreadProps(__spreadValues({}, acc), {\n        [fieldType]: (_a) => {\n          var _b = _a, {\n            parentId\n          } = _b, params = __objRest(_b, [\n            \"parentId\"\n          ]);\n          const wildcardPath = params.propPath.replace(/\\[\\d+\\]/g, \"[*]\");\n          const isReadOnly = (readOnly == null ? void 0 : readOnly[params.propPath]) || (readOnly == null ? void 0 : readOnly[wildcardPath]) || forceReadOnly || false;\n          const fn = transforms[fieldType];\n          return fn == null ? void 0 : fn(__spreadProps(__spreadValues({}, params), {\n            isReadOnly,\n            componentId: parentId\n          }));\n        }\n      });\n    }, {});\n  }, [transforms, readOnly, forceReadOnly]);\n  const transformedProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const mapped = mapFields(item, mappers, config).props;\n    return mapped;\n  }, [config, item, mappers]);\n  const mergedProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => __spreadValues(__spreadValues({}, item.props), transformedProps),\n    [item.props, transformedProps]\n  );\n  return mergedProps;\n}\n\n// lib/field-transforms/default-transforms/slot-transform.tsx\ninit_react_import();\nvar getSlotTransform = (renderSlotEdit, renderSlotRender = renderSlotEdit) => ({\n  slot: ({ value: content, propName, field, isReadOnly }) => {\n    const render = isReadOnly ? renderSlotRender : renderSlotEdit;\n    const Slot = (dzProps) => render(__spreadProps(__spreadValues({\n      allow: (field == null ? void 0 : field.type) === \"slot\" ? field.allow : [],\n      disallow: (field == null ? void 0 : field.type) === \"slot\" ? field.disallow : []\n    }, dzProps), {\n      zone: propName,\n      content\n    }));\n    return Slot;\n  }\n});\n\n// lib/use-slots.tsx\ninit_react_import();\nfunction useSlots(config, item, renderSlotEdit, renderSlotRender = renderSlotEdit, readOnly, forceReadOnly) {\n  return useFieldTransforms(\n    config,\n    item,\n    getSlotTransform(renderSlotEdit, renderSlotRender),\n    readOnly,\n    forceReadOnly\n  );\n}\n\n// components/SlotRender/server.tsx\ninit_react_import();\n\n\nvar SlotRenderPure = (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(SlotRender, __spreadValues({}, props));\nvar Item = ({\n  config,\n  item,\n  metadata\n}) => {\n  const Component = config.components[item.type];\n  const props = useSlots(config, item, (slotProps) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(SlotRenderPure, __spreadProps(__spreadValues({}, slotProps), { config, metadata })));\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    Component.render,\n    __spreadProps(__spreadValues({}, props), {\n      puck: __spreadProps(__spreadValues({}, props.puck), {\n        metadata: metadata || {}\n      })\n    })\n  );\n};\nvar SlotRender = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(\n  function SlotRenderInternal({ className, style, content, config, metadata }, ref) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className, style, ref, children: content.map((item) => {\n      if (!config.components[item.type]) {\n        return null;\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        Item,\n        {\n          config,\n          item,\n          metadata\n        },\n        item.props.id\n      );\n    }) });\n  }\n);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG1lYXN1cmVkK3B1Y2tAMC4yMC4yX0B0eXBlcytyZWFjdEAxOS4yLjdfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfX3JlYWN0QDE5LjIuMC9ub2RlX21vZHVsZXMvQG1lYXN1cmVkL3B1Y2svZGlzdC9jaHVuay1PT0xZRFhLVy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsaUJBQWlCO0FBQzVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVGQUF1RixpQkFBaUI7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFFBQVE7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFNBQVMsd0NBQXdDO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsU0FBUyxHQUFHLElBQUk7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFNBQVMsR0FBRyxFQUFFO0FBQzdDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG9GQUFvRjtBQUMvSSw4RkFBOEY7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDJFQUEyRTtBQUMzRTtBQUNBLEtBQUs7QUFDTDtBQUNBLHdDQUF3QztBQUN4QztBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyQkFBMkI7QUFDNUM7QUFDQTtBQUNBLDhDQUE4QyxvQkFBb0I7QUFDbEU7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdFQUFnRTtBQUNwRSxJQUFJLDZEQUE2RDtBQUNqRSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLFVBQVUscUJBQXFCLGFBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFdBQVcsR0FBRyxTQUFTOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7O0FBRUE7QUFDQSxNQUFNLCtCQUErQixFQUFFLGlDQUFJO0FBQzNDO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGtCQUFrQixHQUFHLEtBQUs7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBLGlCQUFpQixzQ0FBc0M7QUFDdkQ7QUFDQSxrQ0FBa0MsVUFBVSxHQUFHLFNBQVM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG1EQUFtRCxXQUFXLGlCQUFpQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsY0FBYyx3QkFBd0Isa0JBQWtCO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGtFQUFrRSxZQUFZO0FBQzFILEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSxHQUFHO0FBQ0gsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QyxLQUFLO0FBQ0w7QUFDQSw2Q0FBNkM7QUFDN0MsNkNBQTZDO0FBQzdDO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBLGtDQUFrQztBQUNsQztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxzQkFBc0IsTUFBTTtBQUNoRixZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVELGlFQUFpRTtBQUNqRTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxhQUFhLGlDQUFpQyxTQUFTO0FBQzVGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFlBQVksR0FBRyxTQUFTO0FBQzlELHVEQUF1RCxhQUFhO0FBQ3BFO0FBQ0EsYUFBYTtBQUNiLGtEQUFrRDtBQUNsRDtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0EsdUNBQXVDLGFBQWEsaURBQWlELFNBQVM7QUFDOUc7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNELHVCQUF1QjtBQUN2QjtBQUNBLENBQUM7O0FBRUQ7QUFDQSx5REFBeUQsZ0JBQWdCO0FBQ3pFO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSw2REFBNkQsb0JBQW9CLGVBQWU7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDbUM7QUFDbkM7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBLDBDQUEwQztBQUMxQyxlQUFlLDRDQUFJO0FBQ25CLEtBQUs7QUFDTCxHQUFHLElBQUk7QUFDUDs7QUFFQTtBQUNvQztBQUNwQyxjQUFjO0FBQ2QscUhBQXFIO0FBQ3JIO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0NBQXNDO0FBQ2xELHVDQUF1Qyw0Q0FBSztBQUM1QyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0NBQXNDO0FBQ2xEO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSxLQUFLO0FBQ0wseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELE9BQU87QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNENBQUs7QUFDckI7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRSwwQ0FBMEMsaUJBQWlCLFlBQVk7QUFDdkU7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBLHdFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUyxPQUFPLDRCQUE0QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0EsS0FBSyxLQUFLO0FBQ1Y7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pELHlDQUF5QztBQUN6QyxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDZ0M7QUFDaEM7QUFDQSxrQkFBa0IsOENBQU87QUFDekI7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RTtBQUN6RTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQLEtBQUssSUFBSTtBQUNULEdBQUc7QUFDSCwyQkFBMkIsOENBQU87QUFDbEM7QUFDQTtBQUNBLEdBQUc7QUFDSCxzQkFBc0IsOENBQU87QUFDN0IsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkNBQTZDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ21DO0FBQ0s7QUFDeEMsZ0RBQWdELHNEQUFHLDhCQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHNFQUFzRSxzREFBRyxnREFBZ0QsZ0JBQWdCLGtCQUFrQjtBQUMzSix5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQSxtQ0FBbUM7QUFDbkMsMkNBQTJDO0FBQzNDO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLGlEQUFVO0FBQzNCLGdDQUFnQyw2Q0FBNkM7QUFDN0UsMkJBQTJCLHNEQUFHLFVBQVU7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFHO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUssR0FBRztBQUNSO0FBQ0E7O0FBK0JFIiwic291cmNlcyI6WyIvVXNlcnMvZmVkZXJpY29qb3JnZWJvbmVsdG96emkvRGVza3RvcC9Xb3JrL3B1Y2svY29kZS9lY29zeXN0ZW0vcHVjay1jb25maWdzL3NoYWRjbi10d2Jsb2Nrcy9ub2RlX21vZHVsZXMvLnBucG0vQG1lYXN1cmVkK3B1Y2tAMC4yMC4yX0B0eXBlcytyZWFjdEAxOS4yLjdfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfX3JlYWN0QDE5LjIuMC9ub2RlX21vZHVsZXMvQG1lYXN1cmVkL3B1Y2svZGlzdC9jaHVuay1PT0xZRFhLVy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2dldFByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fb2JqUmVzdCA9IChzb3VyY2UsIGV4Y2x1ZGUpID0+IHtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoc291cmNlLCBwcm9wKSAmJiBleGNsdWRlLmluZGV4T2YocHJvcCkgPCAwKVxuICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICBpZiAoc291cmNlICE9IG51bGwgJiYgX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoc291cmNlKSkge1xuICAgICAgaWYgKGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDAgJiYgX19wcm9wSXNFbnVtLmNhbGwoc291cmNlLCBwcm9wKSlcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgIH1cbiAgcmV0dXJuIHRhcmdldDtcbn07XG52YXIgX19lc20gPSAoZm4sIHJlcykgPT4gZnVuY3Rpb24gX19pbml0KCkge1xuICByZXR1cm4gZm4gJiYgKHJlcyA9ICgwLCBmbltfX2dldE93blByb3BOYW1lcyhmbilbMF1dKShmbiA9IDApKSwgcmVzO1xufTtcbnZhciBfX2NvbW1vbkpTID0gKGNiLCBtb2QpID0+IGZ1bmN0aW9uIF9fcmVxdWlyZSgpIHtcbiAgcmV0dXJuIG1vZCB8fCAoMCwgY2JbX19nZXRPd25Qcm9wTmFtZXMoY2IpWzBdXSkoKG1vZCA9IHsgZXhwb3J0czoge30gfSkuZXhwb3J0cywgbW9kKSwgbW9kLmV4cG9ydHM7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTVxuICAvLyBmaWxlIHRoYXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgQ29tbW9uSlMgZmlsZSB1c2luZyBhIEJhYmVsLVxuICAvLyBjb21wYXRpYmxlIHRyYW5zZm9ybSAoaS5lLiBcIl9fZXNNb2R1bGVcIiBoYXMgbm90IGJlZW4gc2V0KSwgdGhlbiBzZXRcbiAgLy8gXCJkZWZhdWx0XCIgdG8gdGhlIENvbW1vbkpTIFwibW9kdWxlLmV4cG9ydHNcIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LlxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldCwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCxcbiAgbW9kXG4pKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG5cbi8vIC4uL3RzdXAtY29uZmlnL3JlYWN0LWltcG9ydC5qc1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xudmFyIGluaXRfcmVhY3RfaW1wb3J0ID0gX19lc20oe1xuICBcIi4uL3RzdXAtY29uZmlnL3JlYWN0LWltcG9ydC5qc1wiKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICB9XG59KTtcblxuLy8gbGliL2RhdGEvd2Fsay10cmVlLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvZGF0YS9tYXAtZmllbGRzLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvZGF0YS9kZWZhdWx0LXNsb3RzLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGRlZmF1bHRTbG90cyA9ICh2YWx1ZSwgZmllbGRzKSA9PiBPYmplY3Qua2V5cyhmaWVsZHMpLnJlZHVjZShcbiAgKGFjYywgZmllbGROYW1lKSA9PiBmaWVsZHNbZmllbGROYW1lXS50eXBlID09PSBcInNsb3RcIiA/IF9fc3ByZWFkVmFsdWVzKHsgW2ZpZWxkTmFtZV06IFtdIH0sIGFjYykgOiBhY2MsXG4gIHZhbHVlXG4pO1xuXG4vLyBsaWIvZGF0YS9tYXAtZmllbGRzLnRzXG52YXIgaXNQcm9taXNlID0gKHYpID0+ICEhdiAmJiB0eXBlb2Ygdi50aGVuID09PSBcImZ1bmN0aW9uXCI7XG52YXIgZmxhdHRlbiA9ICh2YWx1ZXMpID0+IHZhbHVlcy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGFjYyksIGl0ZW0pLCB7fSk7XG52YXIgY29udGFpbnNQcm9taXNlID0gKGFycikgPT4gYXJyLnNvbWUoaXNQcm9taXNlKTtcbnZhciB3YWxrRmllbGQgPSAoe1xuICB2YWx1ZSxcbiAgZmllbGRzLFxuICBtYXBwZXJzLFxuICBwcm9wS2V5ID0gXCJcIixcbiAgcHJvcFBhdGggPSBcIlwiLFxuICBpZCA9IFwiXCIsXG4gIGNvbmZpZyxcbiAgcmVjdXJzZVNsb3RzID0gZmFsc2Vcbn0pID0+IHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIGNvbnN0IGZpZWxkVHlwZSA9IChfYSA9IGZpZWxkc1twcm9wS2V5XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnR5cGU7XG4gIGNvbnN0IG1hcCA9IG1hcHBlcnNbZmllbGRUeXBlXTtcbiAgaWYgKG1hcCAmJiBmaWVsZFR5cGUgPT09IFwic2xvdFwiKSB7XG4gICAgY29uc3QgY29udGVudCA9IHZhbHVlIHx8IFtdO1xuICAgIGNvbnN0IG1hcHBlZENvbnRlbnQgPSByZWN1cnNlU2xvdHMgPyBjb250ZW50Lm1hcCgoZWwpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICBjb25zdCBjb21wb25lbnRDb25maWcgPSBjb25maWcuY29tcG9uZW50c1tlbC50eXBlXTtcbiAgICAgIGlmICghY29tcG9uZW50Q29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgY29tcG9uZW50IGNvbmZpZyBmb3IgJHtlbC50eXBlfWApO1xuICAgICAgfVxuICAgICAgY29uc3QgZmllbGRzMiA9IChfYTIgPSBjb21wb25lbnRDb25maWcuZmllbGRzKSAhPSBudWxsID8gX2EyIDoge307XG4gICAgICByZXR1cm4gd2Fsa0ZpZWxkKHtcbiAgICAgICAgdmFsdWU6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGVsKSwgeyBwcm9wczogZGVmYXVsdFNsb3RzKGVsLnByb3BzLCBmaWVsZHMyKSB9KSxcbiAgICAgICAgZmllbGRzOiBmaWVsZHMyLFxuICAgICAgICBtYXBwZXJzLFxuICAgICAgICBpZDogZWwucHJvcHMuaWQsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVjdXJzZVNsb3RzXG4gICAgICB9KTtcbiAgICB9KSA6IGNvbnRlbnQ7XG4gICAgaWYgKGNvbnRhaW5zUHJvbWlzZShtYXBwZWRDb250ZW50KSkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG1hcHBlZENvbnRlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gbWFwKHtcbiAgICAgIHZhbHVlOiBtYXBwZWRDb250ZW50LFxuICAgICAgcGFyZW50SWQ6IGlkLFxuICAgICAgcHJvcE5hbWU6IHByb3BQYXRoLFxuICAgICAgZmllbGQ6IGZpZWxkc1twcm9wS2V5XSxcbiAgICAgIHByb3BQYXRoXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAobWFwICYmIGZpZWxkc1twcm9wS2V5XSkge1xuICAgIHJldHVybiBtYXAoe1xuICAgICAgdmFsdWUsXG4gICAgICBwYXJlbnRJZDogaWQsXG4gICAgICBwcm9wTmFtZTogcHJvcEtleSxcbiAgICAgIGZpZWxkOiBmaWVsZHNbcHJvcEtleV0sXG4gICAgICBwcm9wUGF0aFxuICAgIH0pO1xuICB9XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IGFycmF5RmllbGRzID0gKChfYiA9IGZpZWxkc1twcm9wS2V5XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnR5cGUpID09PSBcImFycmF5XCIgPyBmaWVsZHNbcHJvcEtleV0uYXJyYXlGaWVsZHMgOiBudWxsO1xuICAgICAgaWYgKCFhcnJheUZpZWxkcykgcmV0dXJuIHZhbHVlO1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZS5tYXAoXG4gICAgICAgIChlbCwgaWR4KSA9PiB3YWxrRmllbGQoe1xuICAgICAgICAgIHZhbHVlOiBlbCxcbiAgICAgICAgICBmaWVsZHM6IGFycmF5RmllbGRzLFxuICAgICAgICAgIG1hcHBlcnMsXG4gICAgICAgICAgcHJvcEtleSxcbiAgICAgICAgICBwcm9wUGF0aDogYCR7cHJvcFBhdGh9WyR7aWR4fV1gLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICByZWN1cnNlU2xvdHNcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBpZiAoY29udGFpbnNQcm9taXNlKG5ld1ZhbHVlKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobmV3VmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xuICAgIH0gZWxzZSBpZiAoXCIkJHR5cGVvZlwiIGluIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG9iamVjdEZpZWxkcyA9ICgoX2MgPSBmaWVsZHNbcHJvcEtleV0pID09IG51bGwgPyB2b2lkIDAgOiBfYy50eXBlKSA9PT0gXCJvYmplY3RcIiA/IGZpZWxkc1twcm9wS2V5XS5vYmplY3RGaWVsZHMgOiBmaWVsZHM7XG4gICAgICByZXR1cm4gd2Fsa09iamVjdCh7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICBmaWVsZHM6IG9iamVjdEZpZWxkcyxcbiAgICAgICAgbWFwcGVycyxcbiAgICAgICAgaWQsXG4gICAgICAgIGdldFByb3BQYXRoOiAoaykgPT4gYCR7cHJvcFBhdGh9LiR7a31gLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIHJlY3Vyc2VTbG90c1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgd2Fsa09iamVjdCA9ICh7XG4gIHZhbHVlLFxuICBmaWVsZHMsXG4gIG1hcHBlcnMsXG4gIGlkLFxuICBnZXRQcm9wUGF0aCxcbiAgY29uZmlnLFxuICByZWN1cnNlU2xvdHNcbn0pID0+IHtcbiAgY29uc3QgbmV3UHJvcHMgPSBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbaywgdl0pID0+IHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgdmFsdWU6IHYsXG4gICAgICBmaWVsZHMsXG4gICAgICBtYXBwZXJzLFxuICAgICAgcHJvcEtleTogayxcbiAgICAgIHByb3BQYXRoOiBnZXRQcm9wUGF0aChrKSxcbiAgICAgIGlkLFxuICAgICAgY29uZmlnLFxuICAgICAgcmVjdXJzZVNsb3RzXG4gICAgfTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHdhbGtGaWVsZChvcHRzKTtcbiAgICBpZiAoaXNQcm9taXNlKG5ld1ZhbHVlKSkge1xuICAgICAgcmV0dXJuIG5ld1ZhbHVlLnRoZW4oKHJlc29sdmVkVmFsdWUpID0+ICh7XG4gICAgICAgIFtrXTogcmVzb2x2ZWRWYWx1ZVxuICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgW2tdOiBuZXdWYWx1ZVxuICAgIH07XG4gIH0sIHt9KTtcbiAgaWYgKGNvbnRhaW5zUHJvbWlzZShuZXdQcm9wcykpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwobmV3UHJvcHMpLnRoZW4oZmxhdHRlbik7XG4gIH1cbiAgcmV0dXJuIGZsYXR0ZW4obmV3UHJvcHMpO1xufTtcbmZ1bmN0aW9uIG1hcEZpZWxkcyhpdGVtLCBtYXBwZXJzLCBjb25maWcsIHJlY3Vyc2VTbG90cyA9IGZhbHNlKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gIGNvbnN0IGl0ZW1UeXBlID0gXCJ0eXBlXCIgaW4gaXRlbSA/IGl0ZW0udHlwZSA6IFwicm9vdFwiO1xuICBjb25zdCBjb21wb25lbnRDb25maWcgPSBpdGVtVHlwZSA9PT0gXCJyb290XCIgPyBjb25maWcucm9vdCA6IChfYSA9IGNvbmZpZy5jb21wb25lbnRzKSA9PSBudWxsID8gdm9pZCAwIDogX2FbaXRlbVR5cGVdO1xuICBjb25zdCBuZXdQcm9wcyA9IHdhbGtPYmplY3Qoe1xuICAgIHZhbHVlOiBkZWZhdWx0U2xvdHMoKF9iID0gaXRlbS5wcm9wcykgIT0gbnVsbCA/IF9iIDoge30sIChfYyA9IGNvbXBvbmVudENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29tcG9uZW50Q29uZmlnLmZpZWxkcykgIT0gbnVsbCA/IF9jIDoge30pLFxuICAgIGZpZWxkczogKF9kID0gY29tcG9uZW50Q29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBjb21wb25lbnRDb25maWcuZmllbGRzKSAhPSBudWxsID8gX2QgOiB7fSxcbiAgICBtYXBwZXJzLFxuICAgIGlkOiBpdGVtLnByb3BzID8gKF9lID0gaXRlbS5wcm9wcy5pZCkgIT0gbnVsbCA/IF9lIDogXCJyb290XCIgOiBcInJvb3RcIixcbiAgICBnZXRQcm9wUGF0aDogKGspID0+IGssXG4gICAgY29uZmlnLFxuICAgIHJlY3Vyc2VTbG90c1xuICB9KTtcbiAgaWYgKGlzUHJvbWlzZShuZXdQcm9wcykpIHtcbiAgICByZXR1cm4gbmV3UHJvcHMudGhlbigocmVzb2x2ZWRQcm9wcykgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgaXRlbSksIHtcbiAgICAgIHByb3BzOiByZXNvbHZlZFByb3BzXG4gICAgfSkpO1xuICB9XG4gIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBpdGVtKSwge1xuICAgIHByb3BzOiBuZXdQcm9wc1xuICB9KTtcbn1cblxuLy8gbGliL2RhdGEvd2Fsay10cmVlLnRzXG5mdW5jdGlvbiB3YWxrVHJlZShkYXRhLCBjb25maWcsIGNhbGxiYWNrRm4pIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3Qgd2Fsa0l0ZW0gPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiBtYXBGaWVsZHMoXG4gICAgICBpdGVtLFxuICAgICAge1xuICAgICAgICBzbG90OiAoeyB2YWx1ZSwgcGFyZW50SWQsIHByb3BOYW1lIH0pID0+IHtcbiAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gKF9hMiA9IGNhbGxiYWNrRm4oY29udGVudCwgeyBwYXJlbnRJZCwgcHJvcE5hbWUgfSkpICE9IG51bGwgPyBfYTIgOiBjb250ZW50O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29uZmlnLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH07XG4gIGlmIChcInByb3BzXCIgaW4gZGF0YSkge1xuICAgIHJldHVybiB3YWxrSXRlbShkYXRhKTtcbiAgfVxuICBjb25zdCBfZGF0YSA9IGRhdGE7XG4gIGNvbnN0IHpvbmVzID0gKF9hID0gX2RhdGEuem9uZXMpICE9IG51bGwgPyBfYSA6IHt9O1xuICBjb25zdCBtYXBwZWRDb250ZW50ID0gX2RhdGEuY29udGVudC5tYXAod2Fsa0l0ZW0pO1xuICByZXR1cm4ge1xuICAgIHJvb3Q6IHdhbGtJdGVtKF9kYXRhLnJvb3QpLFxuICAgIGNvbnRlbnQ6IChfYiA9IGNhbGxiYWNrRm4obWFwcGVkQ29udGVudCwge1xuICAgICAgcGFyZW50SWQ6IFwicm9vdFwiLFxuICAgICAgcHJvcE5hbWU6IFwiZGVmYXVsdC16b25lXCJcbiAgICB9KSkgIT0gbnVsbCA/IF9iIDogbWFwcGVkQ29udGVudCxcbiAgICB6b25lczogT2JqZWN0LmtleXMoem9uZXMpLnJlZHVjZShcbiAgICAgIChhY2MsIHpvbmVDb21wb3VuZCkgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgYWNjKSwge1xuICAgICAgICBbem9uZUNvbXBvdW5kXTogem9uZXNbem9uZUNvbXBvdW5kXS5tYXAod2Fsa0l0ZW0pXG4gICAgICB9KSxcbiAgICAgIHt9XG4gICAgKVxuICB9O1xufVxuXG4vLyBsaWIvbWlncmF0ZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gc3RvcmUvZGVmYXVsdC1hcHAtc3RhdGUudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGNvbXBvbmVudHMvVmlld3BvcnRDb250cm9scy9kZWZhdWx0LXZpZXdwb3J0cy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBkZWZhdWx0Vmlld3BvcnRzID0gW1xuICB7IHdpZHRoOiAzNjAsIGhlaWdodDogXCJhdXRvXCIsIGljb246IFwiU21hcnRwaG9uZVwiLCBsYWJlbDogXCJTbWFsbFwiIH0sXG4gIHsgd2lkdGg6IDc2OCwgaGVpZ2h0OiBcImF1dG9cIiwgaWNvbjogXCJUYWJsZXRcIiwgbGFiZWw6IFwiTWVkaXVtXCIgfSxcbiAgeyB3aWR0aDogMTI4MCwgaGVpZ2h0OiBcImF1dG9cIiwgaWNvbjogXCJNb25pdG9yXCIsIGxhYmVsOiBcIkxhcmdlXCIgfVxuXTtcblxuLy8gc3RvcmUvZGVmYXVsdC1hcHAtc3RhdGUudHNcbnZhciBkZWZhdWx0QXBwU3RhdGUgPSB7XG4gIGRhdGE6IHsgY29udGVudDogW10sIHJvb3Q6IHt9LCB6b25lczoge30gfSxcbiAgdWk6IHtcbiAgICBsZWZ0U2lkZUJhclZpc2libGU6IHRydWUsXG4gICAgcmlnaHRTaWRlQmFyVmlzaWJsZTogdHJ1ZSxcbiAgICBhcnJheVN0YXRlOiB7fSxcbiAgICBpdGVtU2VsZWN0b3I6IG51bGwsXG4gICAgY29tcG9uZW50TGlzdDoge30sXG4gICAgaXNEcmFnZ2luZzogZmFsc2UsXG4gICAgcHJldmlld01vZGU6IFwiZWRpdFwiLFxuICAgIHZpZXdwb3J0czoge1xuICAgICAgY3VycmVudDoge1xuICAgICAgICB3aWR0aDogZGVmYXVsdFZpZXdwb3J0c1swXS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBkZWZhdWx0Vmlld3BvcnRzWzBdLmhlaWdodCB8fCBcImF1dG9cIlxuICAgICAgfSxcbiAgICAgIG9wdGlvbnM6IFtdLFxuICAgICAgY29udHJvbHNWaXNpYmxlOiB0cnVlXG4gICAgfSxcbiAgICBmaWVsZDogeyBmb2N1czogbnVsbCB9XG4gIH0sXG4gIGluZGV4ZXM6IHtcbiAgICBub2Rlczoge30sXG4gICAgem9uZXM6IHt9XG4gIH1cbn07XG5cbi8vIGxpYi9kYXRhL3dhbGstYXBwLXN0YXRlLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvZGF0YS9mb3ItcmVsYXRlZC16b25lcy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gbGliL2dldC16b25lLWlkLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvcm9vdC1kcm9wcGFibGUtaWQudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgcm9vdEFyZWFJZCA9IFwicm9vdFwiO1xudmFyIHJvb3Rab25lID0gXCJkZWZhdWx0LXpvbmVcIjtcbnZhciByb290RHJvcHBhYmxlSWQgPSBgJHtyb290QXJlYUlkfToke3Jvb3Rab25lfWA7XG5cbi8vIGxpYi9nZXQtem9uZS1pZC50c1xudmFyIGdldFpvbmVJZCA9ICh6b25lQ29tcG91bmQpID0+IHtcbiAgaWYgKCF6b25lQ29tcG91bmQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgaWYgKHpvbmVDb21wb3VuZCAmJiB6b25lQ29tcG91bmQuaW5kZXhPZihcIjpcIikgPiAtMSkge1xuICAgIHJldHVybiB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpO1xuICB9XG4gIHJldHVybiBbcm9vdERyb3BwYWJsZUlkLCB6b25lQ29tcG91bmRdO1xufTtcblxuLy8gbGliL2RhdGEvZm9yLXJlbGF0ZWQtem9uZXMudHNcbmZ1bmN0aW9uIGZvclJlbGF0ZWRab25lcyhpdGVtLCBkYXRhLCBjYiwgcGF0aCA9IFtdKSB7XG4gIE9iamVjdC5lbnRyaWVzKGRhdGEuem9uZXMgfHwge30pLmZvckVhY2goKFt6b25lQ29tcG91bmQsIGNvbnRlbnRdKSA9PiB7XG4gICAgY29uc3QgW3BhcmVudElkXSA9IGdldFpvbmVJZCh6b25lQ29tcG91bmQpO1xuICAgIGlmIChwYXJlbnRJZCA9PT0gaXRlbS5wcm9wcy5pZCkge1xuICAgICAgY2IocGF0aCwgem9uZUNvbXBvdW5kLCBjb250ZW50KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBsaWIvZGF0YS9mbGF0dGVuLW5vZGUudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgZmxhdCBmcm9tIFwiZmxhdFwiO1xuXG4vLyBsaWIvZGF0YS9zdHJpcC1zbG90cy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHJpcFNsb3RzID0gKGRhdGEsIGNvbmZpZykgPT4ge1xuICByZXR1cm4gbWFwRmllbGRzKGRhdGEsIHsgc2xvdDogKCkgPT4gbnVsbCB9LCBjb25maWcpO1xufTtcblxuLy8gbGliL2RhdGEvZmxhdHRlbi1ub2RlLnRzXG52YXIgeyBmbGF0dGVuOiBmbGF0dGVuMiwgdW5mbGF0dGVuIH0gPSBmbGF0O1xudmFyIGZsYXR0ZW5Ob2RlID0gKG5vZGUsIGNvbmZpZykgPT4ge1xuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbm9kZSksIHtcbiAgICBwcm9wczogZmxhdHRlbjIoc3RyaXBTbG90cyhub2RlLCBjb25maWcpLnByb3BzKVxuICB9KTtcbn07XG52YXIgZXhwYW5kTm9kZSA9IChub2RlKSA9PiB7XG4gIGNvbnN0IHByb3BzID0gdW5mbGF0dGVuKG5vZGUucHJvcHMpO1xuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbm9kZSksIHtcbiAgICBwcm9wc1xuICB9KTtcbn07XG5cbi8vIGxpYi9kYXRhL3dhbGstYXBwLXN0YXRlLnRzXG5mdW5jdGlvbiB3YWxrQXBwU3RhdGUoc3RhdGUsIGNvbmZpZywgbWFwQ29udGVudCA9IChjb250ZW50KSA9PiBjb250ZW50LCBtYXBOb2RlT3JTa2lwID0gKGl0ZW0pID0+IGl0ZW0pIHtcbiAgdmFyIF9hO1xuICBsZXQgbmV3Wm9uZXMgPSB7fTtcbiAgY29uc3QgbmV3Wm9uZUluZGV4ID0ge307XG4gIGNvbnN0IG5ld05vZGVJbmRleCA9IHt9O1xuICBjb25zdCBwcm9jZXNzQ29udGVudCA9IChwYXRoLCB6b25lQ29tcG91bmQsIGNvbnRlbnQsIHpvbmVUeXBlLCBuZXdJZCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgY29uc3QgW3BhcmVudElkXSA9IHpvbmVDb21wb3VuZC5zcGxpdChcIjpcIik7XG4gICAgY29uc3QgbWFwcGVkQ29udGVudCA9ICgoX2EyID0gbWFwQ29udGVudChjb250ZW50LCB6b25lQ29tcG91bmQsIHpvbmVUeXBlKSkgIT0gbnVsbCA/IF9hMiA6IGNvbnRlbnQpIHx8IFtdO1xuICAgIGNvbnN0IFtfMiwgem9uZV0gPSB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpO1xuICAgIGNvbnN0IG5ld1pvbmVDb21wb3VuZCA9IGAke25ld0lkIHx8IHBhcmVudElkfToke3pvbmV9YDtcbiAgICBjb25zdCBuZXdDb250ZW50MiA9IG1hcHBlZENvbnRlbnQubWFwKFxuICAgICAgKHpvbmVDaGlsZCwgaW5kZXgpID0+IHByb2Nlc3NJdGVtKHpvbmVDaGlsZCwgWy4uLnBhdGgsIG5ld1pvbmVDb21wb3VuZF0sIGluZGV4KVxuICAgICk7XG4gICAgbmV3Wm9uZUluZGV4W25ld1pvbmVDb21wb3VuZF0gPSB7XG4gICAgICBjb250ZW50SWRzOiBuZXdDb250ZW50Mi5tYXAoKGl0ZW0pID0+IGl0ZW0ucHJvcHMuaWQpLFxuICAgICAgdHlwZTogem9uZVR5cGVcbiAgICB9O1xuICAgIHJldHVybiBbbmV3Wm9uZUNvbXBvdW5kLCBuZXdDb250ZW50Ml07XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NSZWxhdGVkWm9uZXMgPSAoaXRlbSwgbmV3SWQsIGluaXRpYWxQYXRoKSA9PiB7XG4gICAgZm9yUmVsYXRlZFpvbmVzKFxuICAgICAgaXRlbSxcbiAgICAgIHN0YXRlLmRhdGEsXG4gICAgICAocmVsYXRlZFBhdGgsIHJlbGF0ZWRab25lQ29tcG91bmQsIHJlbGF0ZWRDb250ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IFt6b25lQ29tcG91bmQsIG5ld0NvbnRlbnQyXSA9IHByb2Nlc3NDb250ZW50KFxuICAgICAgICAgIHJlbGF0ZWRQYXRoLFxuICAgICAgICAgIHJlbGF0ZWRab25lQ29tcG91bmQsXG4gICAgICAgICAgcmVsYXRlZENvbnRlbnQsXG4gICAgICAgICAgXCJkcm9wem9uZVwiLFxuICAgICAgICAgIG5ld0lkXG4gICAgICAgICk7XG4gICAgICAgIG5ld1pvbmVzW3pvbmVDb21wb3VuZF0gPSBuZXdDb250ZW50MjtcbiAgICAgIH0sXG4gICAgICBpbml0aWFsUGF0aFxuICAgICk7XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NJdGVtID0gKGl0ZW0sIHBhdGgsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgbWFwcGVkSXRlbSA9IG1hcE5vZGVPclNraXAoaXRlbSwgcGF0aCwgaW5kZXgpO1xuICAgIGlmICghbWFwcGVkSXRlbSkgcmV0dXJuIGl0ZW07XG4gICAgY29uc3QgaWQgPSBtYXBwZWRJdGVtLnByb3BzLmlkO1xuICAgIGNvbnN0IG5ld1Byb3BzID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbWFwRmllbGRzKFxuICAgICAgbWFwcGVkSXRlbSxcbiAgICAgIHtcbiAgICAgICAgc2xvdDogKHsgdmFsdWUsIHBhcmVudElkOiBwYXJlbnRJZDIsIHByb3BQYXRoIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gdmFsdWU7XG4gICAgICAgICAgY29uc3Qgem9uZUNvbXBvdW5kID0gYCR7cGFyZW50SWQyfToke3Byb3BQYXRofWA7XG4gICAgICAgICAgY29uc3QgW18yLCBuZXdDb250ZW50Ml0gPSBwcm9jZXNzQ29udGVudChcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICB6b25lQ29tcG91bmQsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgXCJzbG90XCIsXG4gICAgICAgICAgICBwYXJlbnRJZDJcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBuZXdDb250ZW50MjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbmZpZ1xuICAgICkucHJvcHMpLCB7XG4gICAgICBpZFxuICAgIH0pO1xuICAgIHByb2Nlc3NSZWxhdGVkWm9uZXMoaXRlbSwgaWQsIHBhdGgpO1xuICAgIGNvbnN0IG5ld0l0ZW0gPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBpdGVtKSwgeyBwcm9wczogbmV3UHJvcHMgfSk7XG4gICAgY29uc3QgdGhpc1pvbmVDb21wb3VuZCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBbcGFyZW50SWQsIHpvbmVdID0gdGhpc1pvbmVDb21wb3VuZCA/IHRoaXNab25lQ29tcG91bmQuc3BsaXQoXCI6XCIpIDogW251bGwsIFwiXCJdO1xuICAgIG5ld05vZGVJbmRleFtpZF0gPSB7XG4gICAgICBkYXRhOiBuZXdJdGVtLFxuICAgICAgZmxhdERhdGE6IGZsYXR0ZW5Ob2RlKG5ld0l0ZW0sIGNvbmZpZyksXG4gICAgICBwYXRoLFxuICAgICAgcGFyZW50SWQsXG4gICAgICB6b25lXG4gICAgfTtcbiAgICBjb25zdCBmaW5hbERhdGEgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBuZXdJdGVtKSwgeyBwcm9wczogX19zcHJlYWRWYWx1ZXMoe30sIG5ld0l0ZW0ucHJvcHMpIH0pO1xuICAgIGlmIChuZXdQcm9wcy5pZCA9PT0gXCJyb290XCIpIHtcbiAgICAgIGRlbGV0ZSBmaW5hbERhdGFbXCJ0eXBlXCJdO1xuICAgICAgZGVsZXRlIGZpbmFsRGF0YS5wcm9wc1tcImlkXCJdO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWxEYXRhO1xuICB9O1xuICBjb25zdCB6b25lcyA9IHN0YXRlLmRhdGEuem9uZXMgfHwge307XG4gIGNvbnN0IFtfLCBuZXdDb250ZW50XSA9IHByb2Nlc3NDb250ZW50KFxuICAgIFtdLFxuICAgIHJvb3REcm9wcGFibGVJZCxcbiAgICBzdGF0ZS5kYXRhLmNvbnRlbnQsXG4gICAgXCJyb290XCJcbiAgKTtcbiAgY29uc3QgcHJvY2Vzc2VkQ29udGVudCA9IG5ld0NvbnRlbnQ7XG4gIGNvbnN0IHpvbmVzQWxyZWFkeVByb2Nlc3NlZCA9IE9iamVjdC5rZXlzKG5ld1pvbmVzKTtcbiAgT2JqZWN0LmtleXMoem9uZXMgfHwge30pLmZvckVhY2goKHpvbmVDb21wb3VuZCkgPT4ge1xuICAgIGNvbnN0IFtwYXJlbnRJZF0gPSB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpO1xuICAgIGlmICh6b25lc0FscmVhZHlQcm9jZXNzZWQuaW5jbHVkZXMoem9uZUNvbXBvdW5kKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBbXzIsIG5ld0NvbnRlbnQyXSA9IHByb2Nlc3NDb250ZW50KFxuICAgICAgW3Jvb3REcm9wcGFibGVJZF0sXG4gICAgICB6b25lQ29tcG91bmQsXG4gICAgICB6b25lc1t6b25lQ29tcG91bmRdLFxuICAgICAgXCJkcm9wem9uZVwiLFxuICAgICAgcGFyZW50SWRcbiAgICApO1xuICAgIG5ld1pvbmVzW3pvbmVDb21wb3VuZF0gPSBuZXdDb250ZW50MjtcbiAgfSwgbmV3Wm9uZXMpO1xuICBjb25zdCBwcm9jZXNzZWRSb290ID0gcHJvY2Vzc0l0ZW0oXG4gICAge1xuICAgICAgdHlwZTogXCJyb290XCIsXG4gICAgICBwcm9wczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgKF9hID0gc3RhdGUuZGF0YS5yb290LnByb3BzKSAhPSBudWxsID8gX2EgOiBzdGF0ZS5kYXRhLnJvb3QpLCB7IGlkOiBcInJvb3RcIiB9KVxuICAgIH0sXG4gICAgW10sXG4gICAgLTFcbiAgKTtcbiAgY29uc3Qgcm9vdCA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlLmRhdGEucm9vdCksIHtcbiAgICBwcm9wczogcHJvY2Vzc2VkUm9vdC5wcm9wc1xuICB9KTtcbiAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwge1xuICAgIGRhdGE6IHtcbiAgICAgIHJvb3QsXG4gICAgICBjb250ZW50OiBwcm9jZXNzZWRDb250ZW50LFxuICAgICAgem9uZXM6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS5kYXRhLnpvbmVzKSwgbmV3Wm9uZXMpXG4gICAgfSxcbiAgICBpbmRleGVzOiB7XG4gICAgICBub2RlczogX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlLmluZGV4ZXMubm9kZXMpLCBuZXdOb2RlSW5kZXgpLFxuICAgICAgem9uZXM6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS5pbmRleGVzLnpvbmVzKSwgbmV3Wm9uZUluZGV4KVxuICAgIH1cbiAgfSk7XG59XG5cbi8vIGxpYi9taWdyYXRlLnRzXG52YXIgbWlncmF0aW9ucyA9IFtcbiAgLy8gTWlncmF0ZSByb290IHRvIHJvb3QucHJvcHNcbiAgKGRhdGEpID0+IHtcbiAgICBjb25zdCByb290UHJvcHMgPSBkYXRhLnJvb3QucHJvcHMgfHwgZGF0YS5yb290O1xuICAgIGlmIChPYmplY3Qua2V5cyhkYXRhLnJvb3QpLmxlbmd0aCA+IDAgJiYgIWRhdGEucm9vdC5wcm9wcykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIk1pZ3JhdGlvbiBhcHBsaWVkOiBSb290IHByb3BzIG1vdmVkIGZyb20gYHJvb3RgIHRvIGByb290LnByb3BzYC5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBkYXRhKSwge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgcHJvcHM6IF9fc3ByZWFkVmFsdWVzKHt9LCByb290UHJvcHMpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfSxcbiAgLy8gTWlncmF0ZSB6b25lcyB0byBzbG90c1xuICAoZGF0YSwgY29uZmlnLCBtaWdyYXRpb25PcHRpb25zKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoIWNvbmZpZykgcmV0dXJuIGRhdGE7XG4gICAgY29uc29sZS5sb2coXCJNaWdyYXRpbmcgRHJvcFpvbmVzIHRvIHNsb3RzLi4uXCIpO1xuICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IHt9O1xuICAgIGNvbnN0IGFwcFN0YXRlID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdEFwcFN0YXRlKSwgeyBkYXRhIH0pO1xuICAgIGNvbnN0IHsgaW5kZXhlcyB9ID0gd2Fsa0FwcFN0YXRlKGFwcFN0YXRlLCBjb25maWcpO1xuICAgIGNvbnN0IGRlbGV0ZWRDb21wb3VuZHMgPSBbXTtcbiAgICB3YWxrQXBwU3RhdGUoYXBwU3RhdGUsIGNvbmZpZywgKGNvbnRlbnQsIHpvbmVDb21wb3VuZCwgem9uZVR5cGUpID0+IHtcbiAgICAgIHZhciBfYTIsIF9iMiwgX2M7XG4gICAgICBpZiAoem9uZVR5cGUgPT09IFwiZHJvcHpvbmVcIikge1xuICAgICAgICBjb25zdCBbaWQsIHNsb3ROYW1lXSA9IHpvbmVDb21wb3VuZC5zcGxpdChcIjpcIik7XG4gICAgICAgIGNvbnN0IG5vZGVEYXRhID0gaW5kZXhlcy5ub2Rlc1tpZF0uZGF0YTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50VHlwZSA9IG5vZGVEYXRhLnR5cGU7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ZvckNvbXBvbmVudCA9IGlkID09PSBcInJvb3RcIiA/IGNvbmZpZy5yb290IDogY29uZmlnLmNvbXBvbmVudHNbY29tcG9uZW50VHlwZV07XG4gICAgICAgIGlmICgoKF9iMiA9IChfYTIgPSBjb25maWdGb3JDb21wb25lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmZpZ0ZvckNvbXBvbmVudC5maWVsZHMpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbc2xvdE5hbWVdKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLnR5cGUpID09PSBcInNsb3RcIikge1xuICAgICAgICAgIHVwZGF0ZWRJdGVtc1tpZF0gPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBub2RlRGF0YSksIHtcbiAgICAgICAgICAgIHByb3BzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBub2RlRGF0YS5wcm9wcyksIChfYyA9IHVwZGF0ZWRJdGVtc1tpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYy5wcm9wcyksIHtcbiAgICAgICAgICAgICAgW3Nsb3ROYW1lXTogY29udGVudFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkZWxldGVkQ29tcG91bmRzLnB1c2goem9uZUNvbXBvdW5kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB3YWxrQXBwU3RhdGUoXG4gICAgICBhcHBTdGF0ZSxcbiAgICAgIGNvbmZpZyxcbiAgICAgIChjb250ZW50KSA9PiBjb250ZW50LFxuICAgICAgKGl0ZW0pID0+IHtcbiAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgcmV0dXJuIChfYTIgPSB1cGRhdGVkSXRlbXNbaXRlbS5wcm9wcy5pZF0pICE9IG51bGwgPyBfYTIgOiBpdGVtO1xuICAgICAgfVxuICAgICk7XG4gICAgZGVsZXRlZENvbXBvdW5kcy5mb3JFYWNoKCh6b25lQ29tcG91bmQpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICBjb25zdCBbXywgcHJvcE5hbWVdID0gem9uZUNvbXBvdW5kLnNwbGl0KFwiOlwiKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgXFx1MjcxMyBTdWNjZXNzOiBNaWdyYXRlZCBcIiR7em9uZUNvbXBvdW5kfVwiIGZyb20gRHJvcFpvbmUgdG8gc2xvdCBmaWVsZCBcIiR7cHJvcE5hbWV9XCJgXG4gICAgICApO1xuICAgICAgKF9hMiA9IHVwZGF0ZWQuZGF0YS56b25lcykgPT0gbnVsbCA/IHRydWUgOiBkZWxldGUgX2EyW3pvbmVDb21wb3VuZF07XG4gICAgfSk7XG4gICAgaWYgKG1pZ3JhdGlvbk9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG1pZ3JhdGlvbk9wdGlvbnMubWlncmF0ZUR5bmFtaWNab25lc0ZvckNvbXBvbmVudCkge1xuICAgICAgY29uc3QgdW5taWdyYXRlZFpvbmVzR3JvdXBlZCA9IHt9O1xuICAgICAgT2JqZWN0LmtleXMoKF9hID0gdXBkYXRlZC5kYXRhLnpvbmVzKSAhPSBudWxsID8gX2EgOiB7fSkuZm9yRWFjaCgoem9uZUNvbXBvdW5kKSA9PiB7XG4gICAgICAgIHZhciBfYTI7XG4gICAgICAgIGNvbnN0IFtjb21wb25lbnRJZCwgcHJvcE5hbWVdID0gem9uZUNvbXBvdW5kLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IChfYTIgPSB1cGRhdGVkLmRhdGEuem9uZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbem9uZUNvbXBvdW5kXTtcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdW5taWdyYXRlZFpvbmVzR3JvdXBlZFtjb21wb25lbnRJZF0pIHtcbiAgICAgICAgICB1bm1pZ3JhdGVkWm9uZXNHcm91cGVkW2NvbXBvbmVudElkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdW5taWdyYXRlZFpvbmVzR3JvdXBlZFtjb21wb25lbnRJZF1bcHJvcE5hbWVdKSB7XG4gICAgICAgICAgdW5taWdyYXRlZFpvbmVzR3JvdXBlZFtjb21wb25lbnRJZF1bcHJvcE5hbWVdID0gY29udGVudDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBPYmplY3Qua2V5cyh1bm1pZ3JhdGVkWm9uZXNHcm91cGVkKS5mb3JFYWNoKChjb21wb25lbnRJZCkgPT4ge1xuICAgICAgICB1cGRhdGVkLmRhdGEgPSB3YWxrVHJlZSh1cGRhdGVkLmRhdGEsIGNvbmZpZywgKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICByZXR1cm4gY29udGVudC5tYXAoKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgICAgaWYgKGNoaWxkLnByb3BzLmlkICE9PSBjb21wb25lbnRJZCkge1xuICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtaWdyYXRlRm4gPSAoX2EyID0gbWlncmF0aW9uT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogbWlncmF0aW9uT3B0aW9ucy5taWdyYXRlRHluYW1pY1pvbmVzRm9yQ29tcG9uZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EyW2NoaWxkLnR5cGVdO1xuICAgICAgICAgICAgaWYgKCFtaWdyYXRlRm4pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgem9uZXMgPSB1bm1pZ3JhdGVkWm9uZXNHcm91cGVkW2NvbXBvbmVudElkXTtcbiAgICAgICAgICAgIGNvbnN0IG1pZ3JhdGVkUHJvcHMgPSBtaWdyYXRlRm4oY2hpbGQucHJvcHMsIHpvbmVzKTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHpvbmVzKS5mb3JFYWNoKChwcm9wTmFtZSkgPT4ge1xuICAgICAgICAgICAgICB2YXIgX2EzO1xuICAgICAgICAgICAgICBjb25zdCB6b25lQ29tcG91bmQgPSBgJHtjb21wb25lbnRJZH06JHtwcm9wTmFtZX1gO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXFx1MjcxMyBTdWNjZXNzOiBNaWdyYXRlZCBcIiR7em9uZUNvbXBvdW5kfVwiIERyb3Bab25lYCk7XG4gICAgICAgICAgICAgIChfYTMgPSB1cGRhdGVkLmRhdGEuem9uZXMpID09IG51bGwgPyB0cnVlIDogZGVsZXRlIF9hM1t6b25lQ29tcG91bmRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY2hpbGQpLCB7XG4gICAgICAgICAgICAgIHByb3BzOiBtaWdyYXRlZFByb3BzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoKF9iID0gdXBkYXRlZC5kYXRhLnpvbmVzKSAhPSBudWxsID8gX2IgOiB7fSkuZm9yRWFjaCgoem9uZUNvbXBvdW5kKSA9PiB7XG4gICAgICBjb25zdCBbXywgcHJvcE5hbWVdID0gem9uZUNvbXBvdW5kLnNwbGl0KFwiOlwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBtaWdyYXRlIERyb3Bab25lIFwiJHt6b25lQ29tcG91bmR9XCIgdG8gc2xvdCBmaWVsZC4gTm8gc2xvdCBleGlzdHMgd2l0aCB0aGUgbmFtZSBcIiR7cHJvcE5hbWV9XCIuYFxuICAgICAgKTtcbiAgICB9KTtcbiAgICBkZWxldGUgdXBkYXRlZC5kYXRhLnpvbmVzO1xuICAgIHJldHVybiB1cGRhdGVkLmRhdGE7XG4gIH1cbl07XG5mdW5jdGlvbiBtaWdyYXRlKGRhdGEsIGNvbmZpZywgbWlncmF0aW9uT3B0aW9ucykge1xuICByZXR1cm4gbWlncmF0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogbWlncmF0aW9ucy5yZWR1Y2UoXG4gICAgKGFjYywgbWlncmF0aW9uKSA9PiBtaWdyYXRpb24oYWNjLCBjb25maWcsIG1pZ3JhdGlvbk9wdGlvbnMpLFxuICAgIGRhdGFcbiAgKTtcbn1cblxuLy8gbGliL3RyYW5zZm9ybS1wcm9wcy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gbGliL2RhdGEvZGVmYXVsdC1kYXRhLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGRlZmF1bHREYXRhID0gKGRhdGEpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGRhdGEpLCB7XG4gIHJvb3Q6IGRhdGEucm9vdCB8fCB7fSxcbiAgY29udGVudDogZGF0YS5jb250ZW50IHx8IFtdXG59KTtcblxuLy8gbGliL3RyYW5zZm9ybS1wcm9wcy50c1xuZnVuY3Rpb24gdHJhbnNmb3JtUHJvcHMoZGF0YSwgcHJvcFRyYW5zZm9ybXMsIGNvbmZpZyA9IHsgY29tcG9uZW50czoge30gfSkge1xuICBjb25zdCBtYXBJdGVtID0gKGl0ZW0pID0+IHtcbiAgICBpZiAocHJvcFRyYW5zZm9ybXNbaXRlbS50eXBlXSkge1xuICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0pLCB7XG4gICAgICAgIHByb3BzOiBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgaWQ6IGl0ZW0ucHJvcHMuaWRcbiAgICAgICAgfSwgcHJvcFRyYW5zZm9ybXNbaXRlbS50eXBlXShpdGVtLnByb3BzKSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbiAgfTtcbiAgY29uc3QgZGVmYXVsdGVkRGF0YSA9IGRlZmF1bHREYXRhKGRhdGEpO1xuICBjb25zdCByb290UHJvcHMgPSBkZWZhdWx0ZWREYXRhLnJvb3QucHJvcHMgfHwgZGVmYXVsdGVkRGF0YS5yb290O1xuICBsZXQgbmV3Um9vdCA9IF9fc3ByZWFkVmFsdWVzKHt9LCBkZWZhdWx0ZWREYXRhLnJvb3QpO1xuICBpZiAocHJvcFRyYW5zZm9ybXNbXCJyb290XCJdKSB7XG4gICAgbmV3Um9vdC5wcm9wcyA9IHByb3BUcmFuc2Zvcm1zW1wicm9vdFwiXShyb290UHJvcHMpO1xuICB9XG4gIGNvbnN0IGRhdGFXaXRoVXBkYXRlZFJvb3QgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBkZWZhdWx0ZWREYXRhKSwgeyByb290OiBuZXdSb290IH0pO1xuICBjb25zdCB1cGRhdGVkRGF0YSA9IHdhbGtUcmVlKFxuICAgIGRhdGFXaXRoVXBkYXRlZFJvb3QsXG4gICAgY29uZmlnLFxuICAgIChjb250ZW50KSA9PiBjb250ZW50Lm1hcChtYXBJdGVtKVxuICApO1xuICBpZiAoIWRlZmF1bHRlZERhdGEucm9vdC5wcm9wcykge1xuICAgIHVwZGF0ZWREYXRhLnJvb3QgPSB1cGRhdGVkRGF0YS5yb290LnByb3BzO1xuICB9XG4gIHJldHVybiB1cGRhdGVkRGF0YTtcbn1cblxuLy8gbGliL3Jlc29sdmUtYWxsLWRhdGEudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGxpYi9yZXNvbHZlLWNvbXBvbmVudC1kYXRhLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvZ2V0LWNoYW5nZWQudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgZmRlcSBmcm9tIFwiZmFzdC1kZWVwLWVxdWFsXCI7XG52YXIgZ2V0Q2hhbmdlZCA9IChuZXdJdGVtLCBvbGRJdGVtKSA9PiB7XG4gIHJldHVybiBuZXdJdGVtID8gT2JqZWN0LmtleXMobmV3SXRlbS5wcm9wcyB8fCB7fSkucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcbiAgICBjb25zdCBuZXdJdGVtUHJvcHMgPSAobmV3SXRlbSA9PSBudWxsID8gdm9pZCAwIDogbmV3SXRlbS5wcm9wcykgfHwge307XG4gICAgY29uc3Qgb2xkSXRlbVByb3BzID0gKG9sZEl0ZW0gPT0gbnVsbCA/IHZvaWQgMCA6IG9sZEl0ZW0ucHJvcHMpIHx8IHt9O1xuICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhY2MpLCB7XG4gICAgICBbaXRlbV06ICFmZGVxKG9sZEl0ZW1Qcm9wc1tpdGVtXSwgbmV3SXRlbVByb3BzW2l0ZW1dKVxuICAgIH0pO1xuICB9LCB7fSkgOiB7fTtcbn07XG5cbi8vIGxpYi9yZXNvbHZlLWNvbXBvbmVudC1kYXRhLnRzXG5pbXBvcnQgZmRlcTIgZnJvbSBcImZhc3QtZGVlcC1lcXVhbFwiO1xudmFyIGNhY2hlID0geyBsYXN0Q2hhbmdlOiB7fSB9O1xudmFyIHJlc29sdmVDb21wb25lbnREYXRhID0gKF8wLCBfMSwgLi4uXzIpID0+IF9fYXN5bmModm9pZCAwLCBbXzAsIF8xLCAuLi5fMl0sIGZ1bmN0aW9uKiAoaXRlbSwgY29uZmlnLCBtZXRhZGF0YSA9IHt9LCBvblJlc29sdmVTdGFydCwgb25SZXNvbHZlRW5kLCB0cmlnZ2VyID0gXCJyZXBsYWNlXCIpIHtcbiAgY29uc3QgY29uZmlnRm9ySXRlbSA9IFwidHlwZVwiIGluIGl0ZW0gJiYgaXRlbS50eXBlICE9PSBcInJvb3RcIiA/IGNvbmZpZy5jb21wb25lbnRzW2l0ZW0udHlwZV0gOiBjb25maWcucm9vdDtcbiAgY29uc3QgcmVzb2x2ZWRJdGVtID0gX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0pO1xuICBjb25zdCBzaG91bGRSdW5SZXNvbHZlciA9IChjb25maWdGb3JJdGVtID09IG51bGwgPyB2b2lkIDAgOiBjb25maWdGb3JJdGVtLnJlc29sdmVEYXRhKSAmJiBpdGVtLnByb3BzO1xuICBjb25zdCBpZCA9IFwiaWRcIiBpbiBpdGVtLnByb3BzID8gaXRlbS5wcm9wcy5pZCA6IFwicm9vdFwiO1xuICBpZiAoc2hvdWxkUnVuUmVzb2x2ZXIpIHtcbiAgICBjb25zdCB7IGl0ZW06IG9sZEl0ZW0gPSBudWxsLCByZXNvbHZlZCA9IHt9IH0gPSBjYWNoZS5sYXN0Q2hhbmdlW2lkXSB8fCB7fTtcbiAgICBpZiAodHJpZ2dlciAhPT0gXCJmb3JjZVwiICYmIGl0ZW0gJiYgZmRlcTIoaXRlbSwgb2xkSXRlbSkpIHtcbiAgICAgIHJldHVybiB7IG5vZGU6IHJlc29sdmVkLCBkaWRDaGFuZ2U6IGZhbHNlIH07XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZWQgPSBnZXRDaGFuZ2VkKGl0ZW0sIG9sZEl0ZW0pO1xuICAgIGlmIChvblJlc29sdmVTdGFydCkge1xuICAgICAgb25SZXNvbHZlU3RhcnQoaXRlbSk7XG4gICAgfVxuICAgIGNvbnN0IHsgcHJvcHM6IHJlc29sdmVkUHJvcHMsIHJlYWRPbmx5ID0ge30gfSA9IHlpZWxkIGNvbmZpZ0Zvckl0ZW0ucmVzb2x2ZURhdGEoaXRlbSwge1xuICAgICAgY2hhbmdlZCxcbiAgICAgIGxhc3REYXRhOiBvbGRJdGVtLFxuICAgICAgbWV0YWRhdGE6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBtZXRhZGF0YSksIGNvbmZpZ0Zvckl0ZW0ubWV0YWRhdGEpLFxuICAgICAgdHJpZ2dlclxuICAgIH0pO1xuICAgIHJlc29sdmVkSXRlbS5wcm9wcyA9IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBpdGVtLnByb3BzKSwgcmVzb2x2ZWRQcm9wcyk7XG4gICAgaWYgKE9iamVjdC5rZXlzKHJlYWRPbmx5KS5sZW5ndGgpIHtcbiAgICAgIHJlc29sdmVkSXRlbS5yZWFkT25seSA9IHJlYWRPbmx5O1xuICAgIH1cbiAgfVxuICBsZXQgaXRlbVdpdGhSZXNvbHZlZENoaWxkcmVuID0geWllbGQgbWFwRmllbGRzKFxuICAgIHJlc29sdmVkSXRlbSxcbiAgICB7XG4gICAgICBzbG90OiAoXzAyKSA9PiBfX2FzeW5jKHZvaWQgMCwgW18wMl0sIGZ1bmN0aW9uKiAoeyB2YWx1ZSB9KSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHlpZWxkIFByb21pc2UuYWxsKFxuICAgICAgICAgIGNvbnRlbnQubWFwKFxuICAgICAgICAgICAgKGNoaWxkSXRlbSkgPT4gX19hc3luYyh2b2lkIDAsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoeWllbGQgcmVzb2x2ZUNvbXBvbmVudERhdGEoXG4gICAgICAgICAgICAgICAgY2hpbGRJdGVtLFxuICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBvblJlc29sdmVTdGFydCxcbiAgICAgICAgICAgICAgICBvblJlc29sdmVFbmQsXG4gICAgICAgICAgICAgICAgdHJpZ2dlclxuICAgICAgICAgICAgICApKS5ub2RlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgIH0sXG4gICAgY29uZmlnXG4gICk7XG4gIGlmIChzaG91bGRSdW5SZXNvbHZlciAmJiBvblJlc29sdmVFbmQpIHtcbiAgICBvblJlc29sdmVFbmQocmVzb2x2ZWRJdGVtKTtcbiAgfVxuICBjYWNoZS5sYXN0Q2hhbmdlW2lkXSA9IHtcbiAgICBpdGVtLFxuICAgIHJlc29sdmVkOiBpdGVtV2l0aFJlc29sdmVkQ2hpbGRyZW5cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBub2RlOiBpdGVtV2l0aFJlc29sdmVkQ2hpbGRyZW4sXG4gICAgZGlkQ2hhbmdlOiAhZmRlcTIoaXRlbSwgaXRlbVdpdGhSZXNvbHZlZENoaWxkcmVuKVxuICB9O1xufSk7XG5cbi8vIGxpYi9kYXRhL3RvLWNvbXBvbmVudC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciB0b0NvbXBvbmVudCA9IChpdGVtKSA9PiB7XG4gIHJldHVybiBcInR5cGVcIiBpbiBpdGVtID8gaXRlbSA6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0pLCB7XG4gICAgcHJvcHM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0ucHJvcHMpLCB7IGlkOiBcInJvb3RcIiB9KSxcbiAgICB0eXBlOiBcInJvb3RcIlxuICB9KTtcbn07XG5cbi8vIGxpYi9yZXNvbHZlLWFsbC1kYXRhLnRzXG5mdW5jdGlvbiByZXNvbHZlQWxsRGF0YShfMCwgXzEpIHtcbiAgcmV0dXJuIF9fYXN5bmModGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiogKGRhdGEsIGNvbmZpZywgbWV0YWRhdGEgPSB7fSwgb25SZXNvbHZlU3RhcnQsIG9uUmVzb2x2ZUVuZCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBkZWZhdWx0ZWREYXRhID0gZGVmYXVsdERhdGEoZGF0YSk7XG4gICAgY29uc3QgcmVzb2x2ZU5vZGUgPSAoX25vZGUpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSB0b0NvbXBvbmVudChfbm9kZSk7XG4gICAgICBvblJlc29sdmVTdGFydCA9PSBudWxsID8gdm9pZCAwIDogb25SZXNvbHZlU3RhcnQobm9kZSk7XG4gICAgICBjb25zdCByZXNvbHZlZCA9ICh5aWVsZCByZXNvbHZlQ29tcG9uZW50RGF0YShcbiAgICAgICAgbm9kZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZm9yY2VcIlxuICAgICAgKSkubm9kZTtcbiAgICAgIGNvbnN0IHJlc29sdmVkRGVlcCA9IHlpZWxkIG1hcEZpZWxkcyhcbiAgICAgICAgcmVzb2x2ZWQsXG4gICAgICAgIHsgc2xvdDogKHsgdmFsdWUgfSkgPT4gcHJvY2Vzc0NvbnRlbnQodmFsdWUpIH0sXG4gICAgICAgIGNvbmZpZ1xuICAgICAgKTtcbiAgICAgIG9uUmVzb2x2ZUVuZCA9PSBudWxsID8gdm9pZCAwIDogb25SZXNvbHZlRW5kKHRvQ29tcG9uZW50KHJlc29sdmVkRGVlcCkpO1xuICAgICAgcmV0dXJuIHJlc29sdmVkRGVlcDtcbiAgICB9KTtcbiAgICBjb25zdCBwcm9jZXNzQ29udGVudCA9IChjb250ZW50KSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoY29udGVudC5tYXAocmVzb2x2ZU5vZGUpKTtcbiAgICB9KTtcbiAgICBjb25zdCBwcm9jZXNzWm9uZXMgPSAoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgY29uc3Qgem9uZXMgPSAoX2EyID0gZGF0YS56b25lcykgIT0gbnVsbCA/IF9hMiA6IHt9O1xuICAgICAgT2JqZWN0LmVudHJpZXMoem9uZXMpLmZvckVhY2goKF8wMikgPT4gX19hc3luYyh0aGlzLCBbXzAyXSwgZnVuY3Rpb24qIChbem9uZUtleSwgY29udGVudF0pIHtcbiAgICAgICAgem9uZXNbem9uZUtleV0gPSB5aWVsZCBQcm9taXNlLmFsbChjb250ZW50Lm1hcChyZXNvbHZlTm9kZSkpO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIHpvbmVzO1xuICAgIH0pO1xuICAgIGNvbnN0IGR5bmFtaWMgPSB7XG4gICAgICByb290OiB5aWVsZCByZXNvbHZlTm9kZShkZWZhdWx0ZWREYXRhLnJvb3QpLFxuICAgICAgY29udGVudDogeWllbGQgcHJvY2Vzc0NvbnRlbnQoZGVmYXVsdGVkRGF0YS5jb250ZW50KSxcbiAgICAgIHpvbmVzOiB5aWVsZCBwcm9jZXNzWm9uZXMoKVxuICAgIH07XG4gICAgT2JqZWN0LmtleXMoKF9hID0gZGVmYXVsdGVkRGF0YS56b25lcykgIT0gbnVsbCA/IF9hIDoge30pLmZvckVhY2goKHpvbmVLZXkpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBkZWZhdWx0ZWREYXRhLnpvbmVzW3pvbmVLZXldO1xuICAgICAgZHluYW1pYy56b25lc1t6b25lS2V5XSA9IHlpZWxkIHByb2Nlc3NDb250ZW50KGNvbnRlbnQpO1xuICAgIH0pLCB7fSk7XG4gICAgcmV0dXJuIGR5bmFtaWM7XG4gIH0pO1xufVxuXG4vLyBsaWIvZGF0YS9zZXR1cC16b25lLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHNldHVwWm9uZSA9IChkYXRhLCB6b25lS2V5KSA9PiB7XG4gIGlmICh6b25lS2V5ID09PSByb290RHJvcHBhYmxlSWQpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBjb25zdCBuZXdEYXRhID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGF0YSksIHtcbiAgICB6b25lczogZGF0YS56b25lcyA/IF9fc3ByZWFkVmFsdWVzKHt9LCBkYXRhLnpvbmVzKSA6IHt9XG4gIH0pO1xuICBuZXdEYXRhLnpvbmVzW3pvbmVLZXldID0gbmV3RGF0YS56b25lc1t6b25lS2V5XSB8fCBbXTtcbiAgcmV0dXJuIG5ld0RhdGE7XG59O1xuXG4vLyBsaWIvZmllbGQtdHJhbnNmb3Jtcy91c2UtZmllbGQtdHJhbnNmb3Jtcy50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VGaWVsZFRyYW5zZm9ybXMoY29uZmlnLCBpdGVtLCB0cmFuc2Zvcm1zLCByZWFkT25seSwgZm9yY2VSZWFkT25seSkge1xuICBjb25zdCBtYXBwZXJzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRyYW5zZm9ybXMpLnJlZHVjZSgoYWNjLCBfZmllbGRUeXBlKSA9PiB7XG4gICAgICBjb25zdCBmaWVsZFR5cGUgPSBfZmllbGRUeXBlO1xuICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGFjYyksIHtcbiAgICAgICAgW2ZpZWxkVHlwZV06IChfYSkgPT4ge1xuICAgICAgICAgIHZhciBfYiA9IF9hLCB7XG4gICAgICAgICAgICBwYXJlbnRJZFxuICAgICAgICAgIH0gPSBfYiwgcGFyYW1zID0gX19vYmpSZXN0KF9iLCBbXG4gICAgICAgICAgICBcInBhcmVudElkXCJcbiAgICAgICAgICBdKTtcbiAgICAgICAgICBjb25zdCB3aWxkY2FyZFBhdGggPSBwYXJhbXMucHJvcFBhdGgucmVwbGFjZSgvXFxbXFxkK1xcXS9nLCBcIlsqXVwiKTtcbiAgICAgICAgICBjb25zdCBpc1JlYWRPbmx5ID0gKHJlYWRPbmx5ID09IG51bGwgPyB2b2lkIDAgOiByZWFkT25seVtwYXJhbXMucHJvcFBhdGhdKSB8fCAocmVhZE9ubHkgPT0gbnVsbCA/IHZvaWQgMCA6IHJlYWRPbmx5W3dpbGRjYXJkUGF0aF0pIHx8IGZvcmNlUmVhZE9ubHkgfHwgZmFsc2U7XG4gICAgICAgICAgY29uc3QgZm4gPSB0cmFuc2Zvcm1zW2ZpZWxkVHlwZV07XG4gICAgICAgICAgcmV0dXJuIGZuID09IG51bGwgPyB2b2lkIDAgOiBmbihfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwYXJhbXMpLCB7XG4gICAgICAgICAgICBpc1JlYWRPbmx5LFxuICAgICAgICAgICAgY29tcG9uZW50SWQ6IHBhcmVudElkXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7fSk7XG4gIH0sIFt0cmFuc2Zvcm1zLCByZWFkT25seSwgZm9yY2VSZWFkT25seV0pO1xuICBjb25zdCB0cmFuc2Zvcm1lZFByb3BzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgbWFwcGVkID0gbWFwRmllbGRzKGl0ZW0sIG1hcHBlcnMsIGNvbmZpZykucHJvcHM7XG4gICAgcmV0dXJuIG1hcHBlZDtcbiAgfSwgW2NvbmZpZywgaXRlbSwgbWFwcGVyc10pO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0ucHJvcHMpLCB0cmFuc2Zvcm1lZFByb3BzKSxcbiAgICBbaXRlbS5wcm9wcywgdHJhbnNmb3JtZWRQcm9wc11cbiAgKTtcbiAgcmV0dXJuIG1lcmdlZFByb3BzO1xufVxuXG4vLyBsaWIvZmllbGQtdHJhbnNmb3Jtcy9kZWZhdWx0LXRyYW5zZm9ybXMvc2xvdC10cmFuc2Zvcm0udHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGdldFNsb3RUcmFuc2Zvcm0gPSAocmVuZGVyU2xvdEVkaXQsIHJlbmRlclNsb3RSZW5kZXIgPSByZW5kZXJTbG90RWRpdCkgPT4gKHtcbiAgc2xvdDogKHsgdmFsdWU6IGNvbnRlbnQsIHByb3BOYW1lLCBmaWVsZCwgaXNSZWFkT25seSB9KSA9PiB7XG4gICAgY29uc3QgcmVuZGVyID0gaXNSZWFkT25seSA/IHJlbmRlclNsb3RSZW5kZXIgOiByZW5kZXJTbG90RWRpdDtcbiAgICBjb25zdCBTbG90ID0gKGR6UHJvcHMpID0+IHJlbmRlcihfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGFsbG93OiAoZmllbGQgPT0gbnVsbCA/IHZvaWQgMCA6IGZpZWxkLnR5cGUpID09PSBcInNsb3RcIiA/IGZpZWxkLmFsbG93IDogW10sXG4gICAgICBkaXNhbGxvdzogKGZpZWxkID09IG51bGwgPyB2b2lkIDAgOiBmaWVsZC50eXBlKSA9PT0gXCJzbG90XCIgPyBmaWVsZC5kaXNhbGxvdyA6IFtdXG4gICAgfSwgZHpQcm9wcyksIHtcbiAgICAgIHpvbmU6IHByb3BOYW1lLFxuICAgICAgY29udGVudFxuICAgIH0pKTtcbiAgICByZXR1cm4gU2xvdDtcbiAgfVxufSk7XG5cbi8vIGxpYi91c2Utc2xvdHMudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuZnVuY3Rpb24gdXNlU2xvdHMoY29uZmlnLCBpdGVtLCByZW5kZXJTbG90RWRpdCwgcmVuZGVyU2xvdFJlbmRlciA9IHJlbmRlclNsb3RFZGl0LCByZWFkT25seSwgZm9yY2VSZWFkT25seSkge1xuICByZXR1cm4gdXNlRmllbGRUcmFuc2Zvcm1zKFxuICAgIGNvbmZpZyxcbiAgICBpdGVtLFxuICAgIGdldFNsb3RUcmFuc2Zvcm0ocmVuZGVyU2xvdEVkaXQsIHJlbmRlclNsb3RSZW5kZXIpLFxuICAgIHJlYWRPbmx5LFxuICAgIGZvcmNlUmVhZE9ubHlcbiAgKTtcbn1cblxuLy8gY29tcG9uZW50cy9TbG90UmVuZGVyL3NlcnZlci50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBmb3J3YXJkUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTbG90UmVuZGVyUHVyZSA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIGpzeChTbG90UmVuZGVyLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbnZhciBJdGVtID0gKHtcbiAgY29uZmlnLFxuICBpdGVtLFxuICBtZXRhZGF0YVxufSkgPT4ge1xuICBjb25zdCBDb21wb25lbnQgPSBjb25maWcuY29tcG9uZW50c1tpdGVtLnR5cGVdO1xuICBjb25zdCBwcm9wcyA9IHVzZVNsb3RzKGNvbmZpZywgaXRlbSwgKHNsb3RQcm9wcykgPT4gLyogQF9fUFVSRV9fICovIGpzeChTbG90UmVuZGVyUHVyZSwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc2xvdFByb3BzKSwgeyBjb25maWcsIG1ldGFkYXRhIH0pKSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIENvbXBvbmVudC5yZW5kZXIsXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpLCB7XG4gICAgICBwdWNrOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcy5wdWNrKSwge1xuICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEgfHwge31cbiAgICAgIH0pXG4gICAgfSlcbiAgKTtcbn07XG52YXIgU2xvdFJlbmRlciA9IGZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIFNsb3RSZW5kZXJJbnRlcm5hbCh7IGNsYXNzTmFtZSwgc3R5bGUsIGNvbnRlbnQsIGNvbmZpZywgbWV0YWRhdGEgfSwgcmVmKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWUsIHN0eWxlLCByZWYsIGNoaWxkcmVuOiBjb250ZW50Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKCFjb25maWcuY29tcG9uZW50c1tpdGVtLnR5cGVdKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgIEl0ZW0sXG4gICAgICAgIHtcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgaXRlbSxcbiAgICAgICAgICBtZXRhZGF0YVxuICAgICAgICB9LFxuICAgICAgICBpdGVtLnByb3BzLmlkXG4gICAgICApO1xuICAgIH0pIH0pO1xuICB9XG4pO1xuXG5leHBvcnQge1xuICBfX3NwcmVhZFZhbHVlcyxcbiAgX19zcHJlYWRQcm9wcyxcbiAgX19vYmpSZXN0LFxuICBfX2NvbW1vbkpTLFxuICBfX3RvRVNNLFxuICBfX2FzeW5jLFxuICBpbml0X3JlYWN0X2ltcG9ydCxcbiAgcm9vdEFyZWFJZCxcbiAgcm9vdFpvbmUsXG4gIHJvb3REcm9wcGFibGVJZCxcbiAgZGVmYXVsdFNsb3RzLFxuICB3YWxrRmllbGQsXG4gIGV4cGFuZE5vZGUsXG4gIHdhbGtBcHBTdGF0ZSxcbiAgd2Fsa1RyZWUsXG4gIHNldHVwWm9uZSxcbiAgZGVmYXVsdFZpZXdwb3J0cyxcbiAgZ2V0Q2hhbmdlZCxcbiAgcmVzb2x2ZUNvbXBvbmVudERhdGEsXG4gIGRlZmF1bHRBcHBTdGF0ZSxcbiAgdXNlRmllbGRUcmFuc2Zvcm1zLFxuICBnZXRTbG90VHJhbnNmb3JtLFxuICB1c2VTbG90cyxcbiAgU2xvdFJlbmRlclB1cmUsXG4gIFNsb3RSZW5kZXIsXG4gIG1pZ3JhdGUsXG4gIHRyYW5zZm9ybVByb3BzLFxuICByZXNvbHZlQWxsRGF0YVxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-OOLYDXKW.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-QIGVND56.mjs":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-QIGVND56.mjs ***!
  \**********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Action: () => (/* binding */ Action),\n/* harmony export */   ActionBar: () => (/* binding */ ActionBar),\n/* harmony export */   AutoField: () => (/* binding */ AutoField),\n/* harmony export */   Button: () => (/* binding */ Button),\n/* harmony export */   Drawer: () => (/* binding */ Drawer),\n/* harmony export */   DropZone: () => (/* binding */ DropZone),\n/* harmony export */   FieldLabel: () => (/* binding */ FieldLabel),\n/* harmony export */   Group: () => (/* binding */ Group),\n/* harmony export */   IconButton: () => (/* binding */ IconButton),\n/* harmony export */   Label: () => (/* binding */ Label),\n/* harmony export */   Puck: () => (/* binding */ Puck),\n/* harmony export */   Render: () => (/* binding */ Render),\n/* harmony export */   createUsePuck: () => (/* binding */ createUsePuck),\n/* harmony export */   overrideKeys: () => (/* binding */ overrideKeys),\n/* harmony export */   registerOverlayPortal: () => (/* binding */ registerOverlayPortal),\n/* harmony export */   renderContext: () => (/* binding */ renderContext),\n/* harmony export */   setDeep: () => (/* binding */ setDeep),\n/* harmony export */   useGetPuck: () => (/* binding */ useGetPuck),\n/* harmony export */   usePuck: () => (/* binding */ usePuck)\n/* harmony export */ });\n/* harmony import */ var _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-OOLYDXKW.mjs */ \"(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-OOLYDXKW.mjs\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@15.5.6_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.6_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/.pnpm/zustand@5.0.8_@types+react@19.2.7_react@19.2.0/node_modules/zustand/esm/react.mjs\");\n/* harmony import */ var zustand_middleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zustand/middleware */ \"(ssr)/./node_modules/.pnpm/zustand@5.0.8_@types+react@19.2.7_react@19.2.0/node_modules/zustand/esm/middleware.mjs\");\n/* harmony import */ var _dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @dnd-kit/react */ \"(ssr)/./node_modules/.pnpm/@dnd-kit+react@0.1.18_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@dnd-kit/react/index.js\");\n/* harmony import */ var _dnd_kit_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @dnd-kit/dom */ \"(ssr)/./node_modules/.pnpm/@dnd-kit+dom@0.1.21/node_modules/@dnd-kit/dom/index.js\");\n/* harmony import */ var _dnd_kit_dom_utilities__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @dnd-kit/dom/utilities */ \"(ssr)/./node_modules/.pnpm/@dnd-kit+dom@0.1.21/node_modules/@dnd-kit/dom/utilities.js\");\n/* harmony import */ var _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @dnd-kit/abstract */ \"(ssr)/./node_modules/.pnpm/@dnd-kit+abstract@0.1.21/node_modules/@dnd-kit/abstract/index.js\");\n/* harmony import */ var _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @dnd-kit/geometry */ \"(ssr)/./node_modules/.pnpm/@dnd-kit+geometry@0.1.21/node_modules/@dnd-kit/geometry/dist/index.mjs\");\n/* harmony import */ var zustand_vanilla__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/.pnpm/zustand@5.0.8_@types+react@19.2.7_react@19.2.0/node_modules/zustand/esm/vanilla.mjs\");\n/* harmony import */ var _dnd_kit_react_sortable__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @dnd-kit/react/sortable */ \"(ssr)/./node_modules/.pnpm/@dnd-kit+react@0.1.18_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@dnd-kit/react/sortable.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/.pnpm/next@15.5.6_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zustand/react/shallow */ \"(ssr)/./node_modules/.pnpm/zustand@5.0.8_@types+react@19.2.7_react@19.2.0/node_modules/zustand/esm/react/shallow.mjs\");\n/* harmony import */ var use_debounce__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! use-debounce */ \"(ssr)/./node_modules/.pnpm/use-debounce@9.0.4_react@19.2.0/node_modules/use-debounce/dist/index.module.js\");\n/* harmony import */ var _dnd_kit_state__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @dnd-kit/state */ \"(ssr)/./node_modules/.pnpm/@preact+signals-core@1.12.1/node_modules/@preact/signals-core/dist/signals-core.mjs\");\n/* harmony import */ var object_hash__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! object-hash */ \"(ssr)/./node_modules/.pnpm/object-hash@3.0.0/node_modules/object-hash/index.js\");\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! fast-deep-equal */ \"(ssr)/./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js\");\n\n\n// ../../node_modules/classnames/index.js\nvar require_classnames = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__commonJS)({\n  \"../../node_modules/classnames/index.js\"(exports, module) {\n    \"use strict\";\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n    (function() {\n      \"use strict\";\n      var hasOwn = {}.hasOwnProperty;\n      function classNames() {\n        var classes = \"\";\n        for (var i = 0; i < arguments.length; i++) {\n          var arg = arguments[i];\n          if (arg) {\n            classes = appendClass(classes, parseValue(arg));\n          }\n        }\n        return classes;\n      }\n      function parseValue(arg) {\n        if (typeof arg === \"string\" || typeof arg === \"number\") {\n          return arg;\n        }\n        if (typeof arg !== \"object\") {\n          return \"\";\n        }\n        if (Array.isArray(arg)) {\n          return classNames.apply(null, arg);\n        }\n        if (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes(\"[native code]\")) {\n          return arg.toString();\n        }\n        var classes = \"\";\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes = appendClass(classes, key);\n          }\n        }\n        return classes;\n      }\n      function appendClass(value, newClass) {\n        if (!newClass) {\n          return value;\n        }\n        if (value) {\n          return value + \" \" + newClass;\n        }\n        return value + newClass;\n      }\n      if (typeof module !== \"undefined\" && module.exports) {\n        classNames.default = classNames;\n        module.exports = classNames;\n      } else if (typeof define === \"function\" && typeof define.amd === \"object\" && define.amd) {\n        define(\"classnames\", [], function() {\n          return classNames;\n        });\n      } else {\n        window.classNames = classNames;\n      }\n    })();\n  }\n});\n\n// types/API/Overrides.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar overrideKeys = [\n  \"header\",\n  \"headerActions\",\n  \"fields\",\n  \"fieldLabel\",\n  \"drawer\",\n  \"drawerItem\",\n  \"componentOverlay\",\n  \"outline\",\n  \"puck\",\n  \"preview\"\n];\n\n// components/ActionBar/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/get-class-name-factory.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar import_classnames = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__toESM)(require_classnames());\nvar getClassNameFactory = (rootClass, styles2, config = { baseClass: \"\" }) => (options = {}) => {\n  if (typeof options === \"string\") {\n    const descendant = options;\n    const style = styles2[`${rootClass}-${descendant}`];\n    if (style) {\n      return config.baseClass + styles2[`${rootClass}-${descendant}`] || \"\";\n    }\n    return \"\";\n  } else if (typeof options === \"object\") {\n    const modifiers = options;\n    const prefixedModifiers = {};\n    for (let modifier in modifiers) {\n      prefixedModifiers[styles2[`${rootClass}--${modifier}`]] = modifiers[modifier];\n    }\n    const c = styles2[rootClass];\n    return config.baseClass + (0, import_classnames.default)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      [c]: !!c\n    }, prefixedModifiers));\n  } else {\n    return config.baseClass + styles2[rootClass] || \"\";\n  }\n};\nvar get_class_name_factory_default = getClassNameFactory;\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/ActionBar/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default = { \"ActionBar\": \"_ActionBar_rvadt_1\", \"ActionBar-label\": \"_ActionBar-label_rvadt_18\", \"ActionBar-action\": \"_ActionBar-action_rvadt_30\", \"ActionBar-group\": \"_ActionBar-group_rvadt_38\" };\n\n// components/ActionBar/index.tsx\n\nvar getClassName = get_class_name_factory_default(\"ActionBar\", styles_module_default);\nvar ActionBar = ({\n  label,\n  children\n}) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n  \"div\",\n  {\n    className: getClassName(),\n    onClick: (e) => {\n      e.stopPropagation();\n    },\n    children: [\n      label && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ActionBar.Group, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName(\"label\"), children: label }) }),\n      children\n    ]\n  }\n);\nvar Action = ({\n  children,\n  label,\n  onClick\n}) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n  \"button\",\n  {\n    type: \"button\",\n    className: getClassName(\"action\"),\n    onClick,\n    title: label,\n    children\n  }\n);\nvar Group = ({ children }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName(\"group\"), children });\nvar Label = ({ label }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName(\"label\"), children: label });\nActionBar.Action = Action;\nActionBar.Label = Label;\nActionBar.Group = Group;\n\n// components/IconButton/IconButton.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/IconButton/IconButton.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar IconButton_module_default = { \"IconButton\": \"_IconButton_swpni_1\", \"IconButton--disabled\": \"_IconButton--disabled_swpni_20\", \"IconButton-title\": \"_IconButton-title_swpni_33\" };\n\n// components/Loader/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/filter.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/data/reorder.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n  return result;\n};\n\n// lib/data/replace.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar replace = (list, index, newItem) => {\n  const result = Array.from(list);\n  result.splice(index, 1);\n  result.splice(index, 0, newItem);\n  return result;\n};\n\n// lib/use-reset-auto-zoom.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// store/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// reducer/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// reducer/actions/set.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar setAction = (state, action, appStore) => {\n  if (typeof action.state === \"object\") {\n    const newState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), action.state);\n    if (action.state.indexes) {\n      return newState;\n    }\n    console.warn(\n      \"`set` is expensive and may cause unnecessary re-renders. Consider using a more atomic action instead.\"\n    );\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(newState, appStore.config);\n  }\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), action.state(state));\n};\n\n// reducer/actions/insert.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/data/insert.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar insert = (list, index, item) => {\n  const result = Array.from(list || []);\n  result.splice(index, 0, item);\n  return result;\n};\n\n// lib/generate-id.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar generateId = (type) => type ? `${type}-${(0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])()}` : (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n\n// lib/data/get-ids-for-parent.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar getIdsForParent = (zoneCompound, state) => {\n  const [parentId] = zoneCompound.split(\":\");\n  const node = state.indexes.nodes[parentId];\n  return ((node == null ? void 0 : node.path) || []).map((p) => p.split(\":\")[0]);\n};\n\n// lib/data/populate-ids.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar populateIds = (data, config, override = false) => {\n  const id = generateId(data.type);\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkTree)(\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data), {\n      props: override ? (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data.props), { id }) : (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data.props)\n    }),\n    config,\n    (contents) => contents.map((item) => {\n      const id2 = generateId(item.type);\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, item), {\n        props: override ? (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, item.props), { id: id2 }) : (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({ id: id2 }, item.props)\n      });\n    })\n  );\n};\n\n// reducer/actions/insert.ts\nfunction insertAction(state, action, appStore) {\n  const id = action.id || generateId(action.componentType);\n  const emptyComponentData = populateIds(\n    {\n      type: action.componentType,\n      props: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, appStore.config.components[action.componentType].defaultProps || {}), {\n        id\n      })\n    },\n    appStore.config\n  );\n  const [parentId] = action.destinationZone.split(\":\");\n  const idsInPath = getIdsForParent(action.destinationZone, state);\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    state,\n    appStore.config,\n    (content, zoneCompound) => {\n      if (zoneCompound === action.destinationZone) {\n        return insert(\n          content || [],\n          action.destinationIndex,\n          emptyComponentData\n        );\n      }\n      return content;\n    },\n    (childItem, path) => {\n      if (childItem.props.id === id || childItem.props.id === parentId) {\n        return childItem;\n      } else if (idsInPath.includes(childItem.props.id)) {\n        return childItem;\n      } else if (path.includes(action.destinationZone)) {\n        return childItem;\n      }\n      return null;\n    }\n  );\n}\n\n// reducer/actions/replace.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar replaceAction = (state, action, appStore) => {\n  const [parentId] = action.destinationZone.split(\":\");\n  const idsInPath = getIdsForParent(action.destinationZone, state);\n  const originalId = state.indexes.zones[action.destinationZone].contentIds[action.destinationIndex];\n  const idChanged = originalId !== action.data.props.id;\n  if (idChanged) {\n    throw new Error(\n      `Can't change the id during a replace action. Please us \"remove\" and \"insert\" to define a new node.`\n    );\n  }\n  const newSlotIds = [];\n  const data = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkTree)(action.data, appStore.config, (contents, opts) => {\n    newSlotIds.push(`${opts.parentId}:${opts.propName}`);\n    return contents.map((item) => {\n      const id = generateId(item.type);\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, item), {\n        props: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({ id }, item.props)\n      });\n    });\n  });\n  const stateWithDeepSlotsRemoved = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state);\n  Object.keys(state.indexes.zones).forEach((zoneCompound) => {\n    const id = zoneCompound.split(\":\")[0];\n    if (id === originalId) {\n      if (!newSlotIds.includes(zoneCompound)) {\n        delete stateWithDeepSlotsRemoved.indexes.zones[zoneCompound];\n      }\n    }\n  });\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    stateWithDeepSlotsRemoved,\n    appStore.config,\n    (content, zoneCompound) => {\n      const newContent = [...content];\n      if (zoneCompound === action.destinationZone) {\n        newContent[action.destinationIndex] = data;\n      }\n      return newContent;\n    },\n    (childItem, path) => {\n      const pathIds = path.map((p) => p.split(\":\")[0]);\n      if (childItem.props.id === data.props.id) {\n        return data;\n      } else if (childItem.props.id === parentId) {\n        return childItem;\n      } else if (idsInPath.indexOf(childItem.props.id) > -1) {\n        return childItem;\n      } else if (pathIds.indexOf(data.props.id) > -1) {\n        return childItem;\n      }\n      return null;\n    }\n  );\n};\n\n// reducer/actions/replace-root.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar replaceRootAction = (state, action, appStore) => {\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    state,\n    appStore.config,\n    (content) => content,\n    (childItem) => {\n      if (childItem.props.id === \"root\") {\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, childItem), {\n          props: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, childItem.props), action.root.props),\n          readOnly: action.root.readOnly\n        });\n      }\n      return childItem;\n    }\n  );\n};\n\n// reducer/actions/duplicate.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/data/get-item.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction getItem(selector, state) {\n  var _a, _b;\n  const zone = (_a = state.indexes.zones) == null ? void 0 : _a[selector.zone || _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId];\n  return zone ? (_b = state.indexes.nodes[zone.contentIds[selector.index]]) == null ? void 0 : _b.data : void 0;\n}\n\n// reducer/actions/duplicate.ts\nfunction duplicateAction(state, action, appStore) {\n  const item = getItem(\n    { index: action.sourceIndex, zone: action.sourceZone },\n    state\n  );\n  const idsInPath = getIdsForParent(action.sourceZone, state);\n  const newItem = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, item), {\n    props: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, item.props), {\n      id: generateId(item.type)\n    })\n  });\n  const modified = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    state,\n    appStore.config,\n    (content, zoneCompound) => {\n      if (zoneCompound === action.sourceZone) {\n        return insert(content, action.sourceIndex + 1, item);\n      }\n      return content;\n    },\n    (childItem, path, index) => {\n      const zoneCompound = path[path.length - 1];\n      const parents = path.map((p) => p.split(\":\")[0]);\n      if (parents.indexOf(newItem.props.id) > -1) {\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, childItem), {\n          props: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, childItem.props), {\n            id: generateId(childItem.type)\n          })\n        });\n      }\n      if (zoneCompound === action.sourceZone && index === action.sourceIndex + 1) {\n        return newItem;\n      }\n      const [sourceZoneParent] = action.sourceZone.split(\":\");\n      if (sourceZoneParent === childItem.props.id || idsInPath.indexOf(childItem.props.id) > -1) {\n        return childItem;\n      }\n      return null;\n    }\n  );\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, modified), {\n    ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, modified.ui), {\n      itemSelector: {\n        index: action.sourceIndex + 1,\n        zone: action.sourceZone\n      }\n    })\n  });\n}\n\n// reducer/actions/reorder.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// reducer/actions/move.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/data/remove.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar remove = (list, index) => {\n  const result = Array.from(list);\n  result.splice(index, 1);\n  return result;\n};\n\n// reducer/actions/move.ts\nvar moveAction = (state, action, appStore) => {\n  if (action.sourceZone === action.destinationZone && action.sourceIndex === action.destinationIndex) {\n    return state;\n  }\n  const item = getItem(\n    { zone: action.sourceZone, index: action.sourceIndex },\n    state\n  );\n  if (!item) return state;\n  const idsInSourcePath = getIdsForParent(action.sourceZone, state);\n  const idsInDestinationPath = getIdsForParent(action.destinationZone, state);\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    state,\n    appStore.config,\n    (content, zoneCompound) => {\n      if (zoneCompound === action.sourceZone && zoneCompound === action.destinationZone) {\n        return insert(\n          remove(content, action.sourceIndex),\n          action.destinationIndex,\n          item\n        );\n      } else if (zoneCompound === action.sourceZone) {\n        return remove(content, action.sourceIndex);\n      } else if (zoneCompound === action.destinationZone) {\n        return insert(content, action.destinationIndex, item);\n      }\n      return content;\n    },\n    (childItem, path) => {\n      const [sourceZoneParent] = action.sourceZone.split(\":\");\n      const [destinationZoneParent] = action.destinationZone.split(\":\");\n      const childId = childItem.props.id;\n      if (sourceZoneParent === childId || destinationZoneParent === childId || item.props.id === childId || idsInSourcePath.indexOf(childId) > -1 || idsInDestinationPath.indexOf(childId) > -1 || path.includes(action.destinationZone)) {\n        return childItem;\n      }\n      return null;\n    }\n  );\n};\n\n// reducer/actions/reorder.ts\nvar reorderAction = (state, action, appStore) => {\n  return moveAction(\n    state,\n    {\n      type: \"move\",\n      sourceIndex: action.sourceIndex,\n      sourceZone: action.destinationZone,\n      destinationIndex: action.destinationIndex,\n      destinationZone: action.destinationZone\n    },\n    appStore\n  );\n};\n\n// reducer/actions/remove.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar removeAction = (state, action, appStore) => {\n  const item = getItem({ index: action.index, zone: action.zone }, state);\n  const nodesToDelete = Object.entries(state.indexes.nodes).reduce(\n    (acc, [nodeId, nodeData]) => {\n      const pathIds = nodeData.path.map((p) => p.split(\":\")[0]);\n      if (pathIds.includes(item.props.id)) {\n        return [...acc, nodeId];\n      }\n      return acc;\n    },\n    [item.props.id]\n  );\n  const newState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    state,\n    appStore.config,\n    (content, zoneCompound) => {\n      if (zoneCompound === action.zone) {\n        return remove(content, action.index);\n      }\n      return content;\n    }\n  );\n  Object.keys(newState.data.zones || {}).forEach((zoneCompound) => {\n    const parentId = zoneCompound.split(\":\")[0];\n    if (nodesToDelete.includes(parentId) && newState.data.zones) {\n      delete newState.data.zones[zoneCompound];\n    }\n  });\n  Object.keys(newState.indexes.zones).forEach((zoneCompound) => {\n    const parentId = zoneCompound.split(\":\")[0];\n    if (nodesToDelete.includes(parentId)) {\n      delete newState.indexes.zones[zoneCompound];\n    }\n  });\n  nodesToDelete.forEach((id) => {\n    delete newState.indexes.nodes[id];\n  });\n  return newState;\n};\n\n// reducer/actions/register-zone.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar zoneCache = {};\nfunction registerZoneAction(state, action) {\n  if (zoneCache[action.zone]) {\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n      data: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.data), {\n        zones: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.data.zones), {\n          [action.zone]: zoneCache[action.zone]\n        })\n      }),\n      indexes: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.indexes), {\n        zones: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.indexes.zones), {\n          [action.zone]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.indexes.zones[action.zone]), {\n            contentIds: zoneCache[action.zone].map((item) => item.props.id),\n            type: \"dropzone\"\n          })\n        })\n      })\n    });\n  }\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), { data: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.setupZone)(state.data, action.zone) });\n}\nfunction unregisterZoneAction(state, action) {\n  const _zones = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.data.zones || {});\n  const zoneIndex = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.indexes.zones || {});\n  if (_zones[action.zone]) {\n    zoneCache[action.zone] = _zones[action.zone];\n    delete _zones[action.zone];\n  }\n  delete zoneIndex[action.zone];\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n    data: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.data), {\n      zones: _zones\n    }),\n    indexes: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.indexes), {\n      zones: zoneIndex\n    })\n  });\n}\n\n// reducer/actions/set-data.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar setDataAction = (state, action, appStore) => {\n  if (typeof action.data === \"object\") {\n    console.warn(\n      \"`setData` is expensive and may cause unnecessary re-renders. Consider using a more atomic action instead.\"\n    );\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n      (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n        data: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.data), action.data)\n      }),\n      appStore.config\n    );\n  }\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n      data: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.data), action.data(state.data))\n    }),\n    appStore.config\n  );\n};\n\n// reducer/actions/set-ui.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar setUiAction = (state, action) => {\n  if (typeof action.ui === \"object\") {\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n      ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.ui), action.ui)\n    });\n  }\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n    ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.ui), action.ui(state.ui))\n  });\n};\n\n// lib/data/make-state-public.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar makeStatePublic = (state) => {\n  const { data, ui } = state;\n  return { data, ui };\n};\n\n// reducer/actions.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// reducer/index.ts\nfunction storeInterceptor(reducer, record, onAction) {\n  return (state, action) => {\n    const newAppState = reducer(state, action);\n    const isValidType = ![\n      \"registerZone\",\n      \"unregisterZone\",\n      \"setData\",\n      \"setUi\",\n      \"set\"\n    ].includes(action.type);\n    if (typeof action.recordHistory !== \"undefined\" ? action.recordHistory : isValidType) {\n      if (record) record(newAppState);\n    }\n    onAction == null ? void 0 : onAction(action, makeStatePublic(newAppState), makeStatePublic(state));\n    return newAppState;\n  };\n}\nfunction createReducer({\n  record,\n  onAction,\n  appStore\n}) {\n  return storeInterceptor(\n    (state, action) => {\n      if (action.type === \"set\") {\n        return setAction(state, action, appStore);\n      }\n      if (action.type === \"insert\") {\n        return insertAction(state, action, appStore);\n      }\n      if (action.type === \"replace\") {\n        return replaceAction(state, action, appStore);\n      }\n      if (action.type === \"replaceRoot\") {\n        return replaceRootAction(state, action, appStore);\n      }\n      if (action.type === \"duplicate\") {\n        return duplicateAction(state, action, appStore);\n      }\n      if (action.type === \"reorder\") {\n        return reorderAction(state, action, appStore);\n      }\n      if (action.type === \"move\") {\n        return moveAction(state, action, appStore);\n      }\n      if (action.type === \"remove\") {\n        return removeAction(state, action, appStore);\n      }\n      if (action.type === \"registerZone\") {\n        return registerZoneAction(state, action);\n      }\n      if (action.type === \"unregisterZone\") {\n        return unregisterZoneAction(state, action);\n      }\n      if (action.type === \"setData\") {\n        return setDataAction(state, action, appStore);\n      }\n      if (action.type === \"setUi\") {\n        return setUiAction(state, action);\n      }\n      return state;\n    },\n    record,\n    onAction\n  );\n}\n\n// store/index.ts\n\n\n\n\n// store/slices/history.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/use-hotkey.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\nvar keyCodeMap = {\n  ControlLeft: \"ctrl\",\n  ControlRight: \"ctrl\",\n  MetaLeft: \"meta\",\n  MetaRight: \"meta\",\n  ShiftLeft: \"shift\",\n  ShiftRight: \"shift\",\n  KeyA: \"a\",\n  KeyB: \"b\",\n  KeyC: \"c\",\n  KeyD: \"d\",\n  KeyE: \"e\",\n  KeyF: \"f\",\n  KeyG: \"g\",\n  KeyH: \"h\",\n  KeyI: \"i\",\n  KeyJ: \"j\",\n  KeyK: \"k\",\n  KeyL: \"l\",\n  KeyM: \"m\",\n  KeyN: \"n\",\n  KeyO: \"o\",\n  KeyP: \"p\",\n  KeyQ: \"q\",\n  KeyR: \"r\",\n  KeyS: \"s\",\n  KeyT: \"t\",\n  KeyU: \"u\",\n  KeyV: \"v\",\n  KeyW: \"w\",\n  KeyX: \"x\",\n  KeyY: \"y\",\n  KeyZ: \"z\"\n};\nvar useHotkeyStore = (0,zustand__WEBPACK_IMPORTED_MODULE_4__.create)()(\n  (0,zustand_middleware__WEBPACK_IMPORTED_MODULE_5__.subscribeWithSelector)((set) => ({\n    held: {},\n    hold: (key) => set((s) => s.held[key] ? s : { held: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.held), { [key]: true }) }),\n    release: (key) => set((s) => s.held[key] ? { held: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.held), { [key]: false }) } : s),\n    reset: (held = {}) => set(() => ({ held })),\n    triggers: {}\n  }))\n);\nvar monitorHotkeys = (doc) => {\n  const onKeyDown = (e) => {\n    const key = keyCodeMap[e.code];\n    if (key) {\n      useHotkeyStore.getState().hold(key);\n      const { held, triggers } = useHotkeyStore.getState();\n      Object.values(triggers).forEach(({ combo, cb }) => {\n        const conditionMet = Object.entries(combo).every(\n          ([key2, value]) => value === !!held[key2]\n        ) && Object.entries(held).every(\n          ([key2, value]) => value === !!combo[key2]\n        );\n        if (conditionMet) {\n          e.preventDefault();\n          cb();\n        }\n      });\n      if (key !== \"meta\" && key !== \"ctrl\" && key !== \"shift\") {\n        useHotkeyStore.getState().release(key);\n      }\n    }\n  };\n  const onKeyUp = (e) => {\n    const key = keyCodeMap[e.code];\n    if (key) {\n      if (key === \"meta\") {\n        useHotkeyStore.getState().reset();\n      } else {\n        useHotkeyStore.getState().release(key);\n      }\n    }\n  };\n  const onVisibilityChanged = (e) => {\n    if (document.visibilityState === \"hidden\") {\n      useHotkeyStore.getState().reset();\n    }\n  };\n  doc.addEventListener(\"keydown\", onKeyDown);\n  doc.addEventListener(\"keyup\", onKeyUp);\n  doc.addEventListener(\"visibilitychange\", onVisibilityChanged);\n  return () => {\n    doc.removeEventListener(\"keydown\", onKeyDown);\n    doc.removeEventListener(\"keyup\", onKeyUp);\n    doc.removeEventListener(\"visibilitychange\", onVisibilityChanged);\n  };\n};\nvar useMonitorHotkeys = () => {\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => monitorHotkeys(document), []);\n};\nvar useHotkey = (combo, cb) => {\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(\n    () => useHotkeyStore.setState((s) => ({\n      triggers: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.triggers), {\n        [`${Object.keys(combo).join(\"+\")}`]: { combo, cb }\n      })\n    })),\n    []\n  );\n};\n\n// store/slices/history.ts\nvar EMPTY_HISTORY_INDEX = 0;\nfunction debounce(func, timeout3 = 300) {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      func(...args);\n    }, timeout3);\n  };\n}\nvar tidyState = (state) => {\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state), {\n    ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.ui), {\n      field: {\n        focus: null\n      }\n    })\n  });\n};\nvar createHistorySlice = (set, get) => {\n  const record = debounce((state) => {\n    const { histories, index } = get().history;\n    const history = {\n      state,\n      id: generateId(\"history\")\n    };\n    const newHistories = [...histories.slice(0, index + 1), history];\n    set({\n      history: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, get().history), {\n        histories: newHistories,\n        index: newHistories.length - 1\n      })\n    });\n  }, 250);\n  return {\n    initialAppState: {},\n    index: EMPTY_HISTORY_INDEX,\n    histories: [],\n    hasPast: () => get().history.index > EMPTY_HISTORY_INDEX,\n    hasFuture: () => get().history.index < get().history.histories.length - 1,\n    prevHistory: () => {\n      const { history } = get();\n      return history.hasPast() ? history.histories[history.index - 1] : null;\n    },\n    nextHistory: () => {\n      const s = get().history;\n      return s.hasFuture() ? s.histories[s.index + 1] : null;\n    },\n    currentHistory: () => get().history.histories[get().history.index],\n    back: () => {\n      var _a;\n      const { history, dispatch } = get();\n      if (history.hasPast()) {\n        const state = tidyState(\n          ((_a = history.prevHistory()) == null ? void 0 : _a.state) || history.initialAppState\n        );\n        dispatch({\n          type: \"set\",\n          state\n        });\n        set({ history: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, history), { index: history.index - 1 }) });\n      }\n    },\n    forward: () => {\n      var _a;\n      const { history, dispatch } = get();\n      if (history.hasFuture()) {\n        const state = (_a = history.nextHistory()) == null ? void 0 : _a.state;\n        dispatch({ type: \"set\", state: state ? tidyState(state) : {} });\n        set({ history: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, history), { index: history.index + 1 }) });\n      }\n    },\n    setHistories: (histories) => {\n      var _a;\n      const { dispatch, history } = get();\n      dispatch({\n        type: \"set\",\n        state: ((_a = histories[histories.length - 1]) == null ? void 0 : _a.state) || history.initialAppState\n      });\n      set({ history: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, history), { histories, index: histories.length - 1 }) });\n    },\n    setHistoryIndex: (index) => {\n      var _a;\n      const { dispatch, history } = get();\n      dispatch({\n        type: \"set\",\n        state: ((_a = history.histories[index]) == null ? void 0 : _a.state) || history.initialAppState\n      });\n      set({ history: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, history), { index }) });\n    },\n    record\n  };\n};\nfunction useRegisterHistorySlice(appStore, {\n  histories,\n  index,\n  initialAppState\n}) {\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(\n    () => appStore.setState({\n      history: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, appStore.getState().history), {\n        histories,\n        index,\n        initialAppState\n      })\n    }),\n    [histories, index, initialAppState]\n  );\n  const back = () => {\n    appStore.getState().history.back();\n  };\n  const forward = () => {\n    appStore.getState().history.forward();\n  };\n  useHotkey({ meta: true, z: true }, back);\n  useHotkey({ meta: true, shift: true, z: true }, forward);\n  useHotkey({ meta: true, y: true }, forward);\n  useHotkey({ ctrl: true, z: true }, back);\n  useHotkey({ ctrl: true, shift: true, z: true }, forward);\n  useHotkey({ ctrl: true, y: true }, forward);\n}\n\n// store/slices/nodes.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar createNodesSlice = (set, get) => ({\n  nodes: {},\n  registerNode: (id, node) => {\n    const s = get().nodes;\n    const emptyNode = {\n      id,\n      methods: {\n        sync: () => null,\n        hideOverlay: () => null,\n        showOverlay: () => null\n      },\n      element: null\n    };\n    const existingNode = s.nodes[id];\n    set({\n      nodes: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s), {\n        nodes: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.nodes), {\n          [id]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, emptyNode), existingNode), node), {\n            id\n          })\n        })\n      })\n    });\n  },\n  unregisterNode: (id) => {\n    const s = get().nodes;\n    const existingNode = s.nodes[id];\n    if (existingNode) {\n      const newNodes = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.nodes);\n      delete newNodes[id];\n      set({\n        nodes: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s), {\n          nodes: newNodes\n        })\n      });\n    }\n  }\n});\n\n// store/slices/permissions.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/data/flatten-data.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar flattenData = (state, config) => {\n  const data = [];\n  (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n    state,\n    config,\n    (content) => content,\n    (item) => {\n      data.push(item);\n      return null;\n    }\n  );\n  return data;\n};\n\n// store/slices/permissions.ts\nvar createPermissionsSlice = (set, get) => {\n  const resolvePermissions = (..._0) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, [..._0], function* (params = {}, force) {\n    const { state, permissions, config } = get();\n    const { cache, globalPermissions } = permissions;\n    const resolveDataForItem = (item2, force2 = false) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n      var _a, _b, _c;\n      const { config: config2, state: appState, setComponentLoading } = get();\n      const componentConfig = item2.type === \"root\" ? config2.root : config2.components[item2.type];\n      if (!componentConfig) {\n        return;\n      }\n      const initialPermissions = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, globalPermissions), componentConfig.permissions);\n      if (componentConfig.resolvePermissions) {\n        const changed = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.getChanged)(item2, (_a = cache[item2.props.id]) == null ? void 0 : _a.lastData);\n        if (Object.values(changed).some((el) => el === true) || force2) {\n          const clearTimeout2 = setComponentLoading(item2.props.id, true, 50);\n          const resolvedPermissions = yield componentConfig.resolvePermissions(\n            item2,\n            {\n              changed,\n              lastPermissions: ((_b = cache[item2.props.id]) == null ? void 0 : _b.lastPermissions) || null,\n              permissions: initialPermissions,\n              appState: makeStatePublic(appState),\n              lastData: ((_c = cache[item2.props.id]) == null ? void 0 : _c.lastData) || null\n            }\n          );\n          const latest = get().permissions;\n          set({\n            permissions: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, latest), {\n              cache: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, latest.cache), {\n                [item2.props.id]: {\n                  lastData: item2,\n                  lastPermissions: resolvedPermissions\n                }\n              }),\n              resolvedPermissions: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, latest.resolvedPermissions), {\n                [item2.props.id]: resolvedPermissions\n              })\n            })\n          });\n          clearTimeout2();\n        }\n      }\n    });\n    const resolveDataForRoot = (force2 = false) => {\n      const { state: appState } = get();\n      resolveDataForItem(\n        // Shim the root data in by conforming to component data shape\n        {\n          type: \"root\",\n          props: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, appState.data.root.props), { id: \"root\" })\n        },\n        force2\n      );\n    };\n    const { item, type, root } = params;\n    if (item) {\n      yield resolveDataForItem(item, force);\n    } else if (type) {\n      flattenData(state, config).filter((item2) => item2.type === type).map((item2) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n        yield resolveDataForItem(item2, force);\n      }));\n    } else if (root) {\n      resolveDataForRoot(force);\n    } else {\n      flattenData(state, config).map((item2) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n        yield resolveDataForItem(item2, force);\n      }));\n    }\n  });\n  const refreshPermissions = (params) => resolvePermissions(params, true);\n  return {\n    cache: {},\n    globalPermissions: {\n      drag: true,\n      edit: true,\n      delete: true,\n      duplicate: true,\n      insert: true\n    },\n    resolvedPermissions: {},\n    getPermissions: ({ item, type, root } = {}) => {\n      const { config, permissions } = get();\n      const { globalPermissions, resolvedPermissions } = permissions;\n      if (item) {\n        const componentConfig = config.components[item.type];\n        const initialPermissions = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, globalPermissions), componentConfig == null ? void 0 : componentConfig.permissions);\n        const resolvedForItem = resolvedPermissions[item.props.id];\n        return resolvedForItem ? (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, globalPermissions), resolvedForItem) : initialPermissions;\n      } else if (type) {\n        const componentConfig = config.components[type];\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, globalPermissions), componentConfig == null ? void 0 : componentConfig.permissions);\n      } else if (root) {\n        const rootConfig = config.root;\n        const initialPermissions = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, globalPermissions), rootConfig == null ? void 0 : rootConfig.permissions);\n        const resolvedForItem = resolvedPermissions[\"root\"];\n        return resolvedForItem ? (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, globalPermissions), resolvedForItem) : initialPermissions;\n      }\n      return globalPermissions;\n    },\n    resolvePermissions,\n    refreshPermissions\n  };\n};\nvar useRegisterPermissionsSlice = (appStore, globalPermissions) => {\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const { permissions } = appStore.getState();\n    const { globalPermissions: existingGlobalPermissions } = permissions;\n    appStore.setState({\n      permissions: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, permissions), {\n        globalPermissions: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, existingGlobalPermissions), globalPermissions)\n      })\n    });\n    permissions.resolvePermissions();\n  }, [globalPermissions]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    return appStore.subscribe(\n      (s) => s.state.data,\n      () => {\n        appStore.getState().permissions.resolvePermissions();\n      }\n    );\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    return appStore.subscribe(\n      (s) => s.config,\n      () => {\n        appStore.getState().permissions.resolvePermissions();\n      }\n    );\n  }, []);\n};\n\n// store/slices/fields.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar createFieldsSlice = (_set, _get) => {\n  return {\n    fields: {},\n    loading: false,\n    lastResolvedData: {},\n    id: void 0\n  };\n};\nvar useRegisterFieldsSlice = (appStore, id) => {\n  const resolveFields = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (reset) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n      var _a, _b;\n      const { fields, lastResolvedData } = appStore.getState().fields;\n      const nodes = appStore.getState().state.indexes.nodes;\n      const node = nodes[id || \"root\"];\n      const componentData = node == null ? void 0 : node.data;\n      const parentNode = (node == null ? void 0 : node.parentId) ? nodes[node.parentId] : null;\n      const parent = (parentNode == null ? void 0 : parentNode.data) || null;\n      const { getComponentConfig, state } = appStore.getState();\n      const componentConfig = getComponentConfig(componentData == null ? void 0 : componentData.type);\n      if (!componentData || !componentConfig) return;\n      const defaultFields2 = componentConfig.fields || {};\n      const resolver = componentConfig.resolveFields;\n      let lastFields = fields;\n      if (reset) {\n        appStore.setState((s) => ({\n          fields: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.fields), { fields: defaultFields2, id })\n        }));\n        lastFields = defaultFields2;\n      }\n      if (resolver) {\n        const timeout3 = setTimeout(() => {\n          appStore.setState((s) => ({\n            fields: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.fields), { loading: true })\n          }));\n        }, 50);\n        const lastData = ((_a = lastResolvedData.props) == null ? void 0 : _a.id) === id ? lastResolvedData : null;\n        const changed = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.getChanged)(componentData, lastData);\n        const newFields = yield resolver(componentData, {\n          changed,\n          fields: defaultFields2,\n          lastFields,\n          lastData,\n          appState: makeStatePublic(state),\n          parent\n        });\n        clearTimeout(timeout3);\n        if (((_b = appStore.getState().selectedItem) == null ? void 0 : _b.props.id) !== id) {\n          return;\n        }\n        appStore.setState({\n          fields: {\n            fields: newFields,\n            loading: false,\n            lastResolvedData: componentData,\n            id\n          }\n        });\n      } else {\n        appStore.setState((s) => ({\n          fields: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s.fields), { fields: defaultFields2, id })\n        }));\n      }\n    }),\n    [id]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    resolveFields(true);\n    return appStore.subscribe(\n      (s) => s.state.indexes.nodes[id || \"root\"],\n      () => resolveFields()\n    );\n  }, [id]);\n};\n\n// lib/data/to-root.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar toRoot = (item) => {\n  if (\"type\" in item && item.type !== \"root\") {\n    throw new Error(\"Converting non-root item to root.\");\n  }\n  const { readOnly } = item;\n  if (item.props) {\n    if (\"id\" in item.props) {\n      const _a = item.props, { id } = _a, props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_a, [\"id\"]);\n      return { props, readOnly };\n    }\n    return { props: item.props, readOnly };\n  }\n  return { props: {}, readOnly };\n};\n\n// store/index.ts\nvar defaultPageFields = {\n  title: { type: \"text\" }\n};\nvar createAppStore = (initialAppStore) => (0,zustand__WEBPACK_IMPORTED_MODULE_4__.create)()(\n  (0,zustand_middleware__WEBPACK_IMPORTED_MODULE_5__.subscribeWithSelector)((set, get) => {\n    var _a, _b;\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      state: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAppState,\n      config: { components: {} },\n      componentState: {},\n      plugins: [],\n      overrides: {},\n      viewports: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultViewports,\n      zoomConfig: {\n        autoZoom: 1,\n        rootHeight: 0,\n        zoom: 1\n      },\n      status: \"LOADING\",\n      iframe: {},\n      metadata: {},\n      fieldTransforms: {}\n    }, initialAppStore), {\n      fields: createFieldsSlice(set, get),\n      history: createHistorySlice(set, get),\n      nodes: createNodesSlice(set, get),\n      permissions: createPermissionsSlice(set, get),\n      getComponentConfig: (type) => {\n        var _a2;\n        const { config, selectedItem } = get();\n        const rootFields = ((_a2 = config.root) == null ? void 0 : _a2.fields) || defaultPageFields;\n        return type && type !== \"root\" ? config.components[type] : selectedItem ? config.components[selectedItem.type] : (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, config.root), { fields: rootFields });\n      },\n      selectedItem: ((_a = initialAppStore == null ? void 0 : initialAppStore.state) == null ? void 0 : _a.ui.itemSelector) ? getItem(\n        (_b = initialAppStore == null ? void 0 : initialAppStore.state) == null ? void 0 : _b.ui.itemSelector,\n        initialAppStore.state\n      ) : null,\n      dispatch: (action) => set((s) => {\n        var _a2, _b2;\n        const { record } = get().history;\n        const dispatch = createReducer({\n          record,\n          appStore: s\n        });\n        const state = dispatch(s.state, action);\n        const selectedItem = state.ui.itemSelector ? getItem(state.ui.itemSelector, state) : null;\n        (_b2 = (_a2 = get()).onAction) == null ? void 0 : _b2.call(_a2, action, state, get().state);\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s), { state, selectedItem });\n      }),\n      setZoomConfig: (zoomConfig) => set({ zoomConfig }),\n      setStatus: (status) => set({ status }),\n      setComponentState: (componentState) => set({ componentState }),\n      pendingLoadTimeouts: {},\n      setComponentLoading: (id, loading = true, defer2 = 0) => {\n        const { setComponentState, pendingLoadTimeouts } = get();\n        const loadId = generateId();\n        const setLoading = () => {\n          var _a2;\n          const { componentState } = get();\n          setComponentState((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentState), {\n            [id]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentState[id]), {\n              loadingCount: (((_a2 = componentState[id]) == null ? void 0 : _a2.loadingCount) || 0) + 1\n            })\n          }));\n        };\n        const unsetLoading = () => {\n          var _a2;\n          const { componentState } = get();\n          clearTimeout(timeout3);\n          delete pendingLoadTimeouts[loadId];\n          set({ pendingLoadTimeouts });\n          setComponentState((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentState), {\n            [id]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentState[id]), {\n              loadingCount: Math.max(\n                (((_a2 = componentState[id]) == null ? void 0 : _a2.loadingCount) || 0) - 1,\n                0\n              )\n            })\n          }));\n        };\n        const timeout3 = setTimeout(() => {\n          if (loading) {\n            setLoading();\n          } else {\n            unsetLoading();\n          }\n          delete pendingLoadTimeouts[loadId];\n          set({ pendingLoadTimeouts });\n        }, defer2);\n        set({\n          pendingLoadTimeouts: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, pendingLoadTimeouts), {\n            [id]: timeout3\n          })\n        });\n        return unsetLoading;\n      },\n      unsetComponentLoading: (id) => {\n        const { setComponentLoading } = get();\n        setComponentLoading(id, false);\n      },\n      // Helper\n      setUi: (ui, recordHistory) => set((s) => {\n        const dispatch = createReducer({\n          record: () => {\n          },\n          appStore: s\n        });\n        const state = dispatch(s.state, {\n          type: \"setUi\",\n          ui,\n          recordHistory\n        });\n        const selectedItem = state.ui.itemSelector ? getItem(state.ui.itemSelector, state) : null;\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, s), { state, selectedItem });\n      }),\n      resolveComponentData: (componentData, trigger) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n        const { config, metadata, setComponentLoading, permissions } = get();\n        const timeouts = {};\n        return yield (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.resolveComponentData)(\n          componentData,\n          config,\n          metadata,\n          (item) => {\n            const id = \"id\" in item.props ? item.props.id : \"root\";\n            timeouts[id] = setComponentLoading(id, true, 50);\n          },\n          (item) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n            const id = \"id\" in item.props ? item.props.id : \"root\";\n            if (\"type\" in item) {\n              yield permissions.refreshPermissions({ item });\n            } else {\n              yield permissions.refreshPermissions({ root: true });\n            }\n            timeouts[id]();\n          }),\n          trigger\n        );\n      }),\n      resolveAndCommitData: () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n        const { config, state, dispatch, resolveComponentData: resolveComponentData2 } = get();\n        (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(\n          state,\n          config,\n          (content) => content,\n          (childItem) => {\n            resolveComponentData2(childItem, \"load\").then((resolved) => {\n              const { state: state2 } = get();\n              const node = state2.indexes.nodes[resolved.node.props.id];\n              if (node && resolved.didChange) {\n                if (resolved.node.props.id === \"root\") {\n                  dispatch({\n                    type: \"replaceRoot\",\n                    root: toRoot(resolved.node)\n                  });\n                } else {\n                  const zoneCompound = `${node.parentId}:${node.zone}`;\n                  const parentZone = state2.indexes.zones[zoneCompound];\n                  const index = parentZone.contentIds.indexOf(\n                    resolved.node.props.id\n                  );\n                  dispatch({\n                    type: \"replace\",\n                    data: resolved.node,\n                    destinationIndex: index,\n                    destinationZone: zoneCompound\n                  });\n                }\n              }\n            });\n            return childItem;\n          }\n        );\n      })\n    });\n  })\n);\nvar appStoreContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(createAppStore());\nfunction useAppStore(selector) {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(appStoreContext);\n  return (0,zustand__WEBPACK_IMPORTED_MODULE_4__.useStore)(context, selector);\n}\nfunction useAppStoreApi() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(appStoreContext);\n}\n\n// lib/get-zoom-config.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// ../../node_modules/css-box-model/dist/css-box-model.esm.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// ../../node_modules/tiny-invariant/dist/esm/tiny-invariant.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar isProduction = \"development\" === \"production\";\nvar prefix = \"Invariant failed\";\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n  if (isProduction) {\n    throw new Error(prefix);\n  }\n  var provided = typeof message === \"function\" ? message() : message;\n  var value = provided ? \"\".concat(prefix, \": \").concat(provided) : prefix;\n  throw new Error(value);\n}\n\n// ../../node_modules/css-box-model/dist/css-box-model.esm.js\nvar getRect = function getRect2(_ref) {\n  var top = _ref.top, right = _ref.right, bottom = _ref.bottom, left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top,\n    right,\n    bottom,\n    left,\n    width,\n    height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\nvar expand = function expand2(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\nvar shrink = function shrink2(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nvar createBox = function createBox2(_ref2) {\n  var borderBox = _ref2.borderBox, _ref2$margin = _ref2.margin, margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin, _ref2$border = _ref2.border, border = _ref2$border === void 0 ? noSpacing : _ref2$border, _ref2$padding = _ref2.padding, padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox,\n    contentBox,\n    margin,\n    border,\n    padding\n  };\n};\nvar parse = function parse2(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n  if (suffix !== \"px\") {\n    return 0;\n  }\n  var result = Number(value);\n  !!isNaN(result) ?  true ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : 0 : void 0;\n  return result;\n};\nvar calculateBox = function calculateBox2(borderBox, styles2) {\n  var margin = {\n    top: parse(styles2.marginTop),\n    right: parse(styles2.marginRight),\n    bottom: parse(styles2.marginBottom),\n    left: parse(styles2.marginLeft)\n  };\n  var padding = {\n    top: parse(styles2.paddingTop),\n    right: parse(styles2.paddingRight),\n    bottom: parse(styles2.paddingBottom),\n    left: parse(styles2.paddingLeft)\n  };\n  var border = {\n    top: parse(styles2.borderTopWidth),\n    right: parse(styles2.borderRightWidth),\n    bottom: parse(styles2.borderBottomWidth),\n    left: parse(styles2.borderLeftWidth)\n  };\n  return createBox({\n    borderBox,\n    margin,\n    padding,\n    border\n  });\n};\nvar getBox = function getBox2(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles2 = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles2);\n};\n\n// lib/get-zoom-config.ts\nvar RESET_ZOOM_SMALLER_THAN_FRAME = true;\nvar getZoomConfig = (uiViewport, frame, zoom) => {\n  const box = getBox(frame);\n  const { width: frameWidth, height: frameHeight } = box.contentBox;\n  const viewportHeight = uiViewport.height === \"auto\" ? frameHeight : uiViewport.height;\n  let rootHeight = 0;\n  let autoZoom = 1;\n  if (uiViewport.width > frameWidth || viewportHeight > frameHeight) {\n    const widthZoom = Math.min(frameWidth / uiViewport.width, 1);\n    const heightZoom = Math.min(frameHeight / viewportHeight, 1);\n    zoom = widthZoom;\n    if (widthZoom < heightZoom) {\n      rootHeight = viewportHeight / zoom;\n    } else {\n      rootHeight = viewportHeight;\n      zoom = heightZoom;\n    }\n    autoZoom = zoom;\n  } else {\n    if (RESET_ZOOM_SMALLER_THAN_FRAME) {\n      autoZoom = 1;\n      zoom = 1;\n      rootHeight = viewportHeight;\n    }\n  }\n  return { autoZoom, rootHeight, zoom };\n};\n\n// lib/use-reset-auto-zoom.ts\nvar useResetAutoZoom = (frameRef) => {\n  const appStoreApi = useAppStoreApi();\n  const resetAutoZoom = (options) => {\n    const { state, zoomConfig, setZoomConfig } = appStoreApi.getState();\n    const { viewports } = state.ui;\n    const newViewports = (options == null ? void 0 : options.viewports) || viewports;\n    if (frameRef.current) {\n      setZoomConfig(\n        getZoomConfig(newViewports == null ? void 0 : newViewports.current, frameRef.current, zoomConfig.zoom)\n      );\n    }\n  };\n  return resetAutoZoom;\n};\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Loader/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default2 = { \"Loader\": \"_Loader_nacdm_13\", \"loader-animation\": \"_loader-animation_nacdm_1\" };\n\n// components/Loader/index.tsx\n\nvar getClassName2 = get_class_name_factory_default(\"Loader\", styles_module_default2);\nvar Loader = (_a) => {\n  var _b = _a, {\n    color,\n    size = 16\n  } = _b, props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_b, [\n    \"color\",\n    \"size\"\n  ]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"span\",\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      className: getClassName2(),\n      style: {\n        width: size,\n        height: size,\n        color\n      },\n      \"aria-label\": \"loading\"\n    }, props)\n  );\n};\n\n// components/IconButton/IconButton.tsx\n\nvar getClassName3 = get_class_name_factory_default(\"IconButton\", IconButton_module_default);\nvar IconButton = ({\n  children,\n  href,\n  onClick,\n  variant = \"primary\",\n  type,\n  disabled,\n  tabIndex,\n  newTab,\n  fullWidth,\n  title\n}) => {\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const ElementType = href ? \"a\" : \"button\";\n  const el = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    ElementType,\n    {\n      className: getClassName3({\n        primary: variant === \"primary\",\n        secondary: variant === \"secondary\",\n        disabled,\n        fullWidth\n      }),\n      onClick: (e) => {\n        if (!onClick) return;\n        setLoading(true);\n        Promise.resolve(onClick(e)).then(() => {\n          setLoading(false);\n        });\n      },\n      type,\n      disabled: disabled || loading,\n      tabIndex,\n      target: newTab ? \"_blank\" : void 0,\n      rel: newTab ? \"noreferrer\" : void 0,\n      href,\n      title,\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", { className: getClassName3(\"title\"), children: title }),\n        children,\n        loading && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [\n          \"\\xA0\\xA0\",\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, { size: 14 })\n        ] })\n      ]\n    }\n  );\n  return el;\n};\n\n// components/Button/Button.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Button/Button.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Button_module_default = { \"Button\": \"_Button_10byl_1\", \"Button--medium\": \"_Button--medium_10byl_29\", \"Button--large\": \"_Button--large_10byl_37\", \"Button-icon\": \"_Button-icon_10byl_44\", \"Button--primary\": \"_Button--primary_10byl_48\", \"Button--secondary\": \"_Button--secondary_10byl_67\", \"Button--flush\": \"_Button--flush_10byl_84\", \"Button--disabled\": \"_Button--disabled_10byl_88\", \"Button--fullWidth\": \"_Button--fullWidth_10byl_95\", \"Button-spinner\": \"_Button-spinner_10byl_100\" };\n\n// lib/filter-data-attrs.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar dataAttrRe = /^(data-.*)$/;\nvar filterDataAttrs = (props) => {\n  let filteredProps = {};\n  for (const prop in props) {\n    if (Object.prototype.hasOwnProperty.call(props, prop) && dataAttrRe.test(prop)) {\n      filteredProps[prop] = props[prop];\n    }\n  }\n  return filteredProps;\n};\n\n// components/Button/Button.tsx\n\nvar getClassName4 = get_class_name_factory_default(\"Button\", Button_module_default);\nvar Button = (_a) => {\n  var _b = _a, {\n    children,\n    href,\n    onClick,\n    variant = \"primary\",\n    type,\n    disabled,\n    tabIndex,\n    newTab,\n    fullWidth,\n    icon,\n    size = \"medium\",\n    loading: loadingProp = false\n  } = _b, props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_b, [\n    \"children\",\n    \"href\",\n    \"onClick\",\n    \"variant\",\n    \"type\",\n    \"disabled\",\n    \"tabIndex\",\n    \"newTab\",\n    \"fullWidth\",\n    \"icon\",\n    \"size\",\n    \"loading\"\n  ]);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(loadingProp);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => setLoading(loadingProp), [loadingProp]);\n  const ElementType = href ? \"a\" : type ? \"button\" : \"span\";\n  const dataAttrs = filterDataAttrs(props);\n  const el = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    ElementType,\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      className: getClassName4({\n        primary: variant === \"primary\",\n        secondary: variant === \"secondary\",\n        disabled,\n        fullWidth,\n        [size]: true\n      }),\n      onClick: (e) => {\n        if (!onClick) return;\n        setLoading(true);\n        Promise.resolve(onClick(e)).then(() => {\n          setLoading(false);\n        });\n      },\n      type,\n      disabled: disabled || loading,\n      tabIndex,\n      target: newTab ? \"_blank\" : void 0,\n      rel: newTab ? \"noreferrer\" : void 0,\n      href\n    }, dataAttrs), {\n      children: [\n        icon && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName4(\"icon\"), children: icon }),\n        children,\n        loading && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName4(\"spinner\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, { size: 14 }) })\n      ]\n    })\n  );\n  return el;\n};\n\n// components/AutoField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/AutoField/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default3 = { \"InputWrapper\": \"_InputWrapper_bsxfo_1\", \"Input-label\": \"_Input-label_bsxfo_5\", \"Input-labelIcon\": \"_Input-labelIcon_bsxfo_14\", \"Input-disabledIcon\": \"_Input-disabledIcon_bsxfo_21\", \"Input-input\": \"_Input-input_bsxfo_26\", \"Input\": \"_Input_bsxfo_1\", \"Input--readOnly\": \"_Input--readOnly_bsxfo_82\", \"Input-radioGroupItems\": \"_Input-radioGroupItems_bsxfo_93\", \"Input-radio\": \"_Input-radio_bsxfo_93\", \"Input-radioInner\": \"_Input-radioInner_bsxfo_110\", \"Input-radioInput\": \"_Input-radioInput_bsxfo_155\" };\n\n// components/AutoField/index.tsx\n\n\n// components/AutoField/fields/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/AutoField/fields/ArrayField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/AutoField/fields/ArrayField/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default4 = { \"ArrayField\": \"_ArrayField_14u8o_5\", \"ArrayField--isDraggingFrom\": \"_ArrayField--isDraggingFrom_14u8o_13\", \"ArrayField-addButton\": \"_ArrayField-addButton_14u8o_18\", \"ArrayField--hasItems\": \"_ArrayField--hasItems_14u8o_33\", \"ArrayField-inner\": \"_ArrayField-inner_14u8o_59\", \"ArrayFieldItem\": \"_ArrayFieldItem_14u8o_67\", \"ArrayFieldItem--isDragging\": \"_ArrayFieldItem--isDragging_14u8o_78\", \"ArrayFieldItem--isExpanded\": \"_ArrayFieldItem--isExpanded_14u8o_82\", \"ArrayFieldItem-summary\": \"_ArrayFieldItem-summary_14u8o_97\", \"ArrayField--addDisabled\": \"_ArrayField--addDisabled_14u8o_127\", \"ArrayFieldItem-body\": \"_ArrayFieldItem-body_14u8o_166\", \"ArrayFieldItem-fieldset\": \"_ArrayFieldItem-fieldset_14u8o_175\", \"ArrayFieldItem-rhs\": \"_ArrayFieldItem-rhs_14u8o_183\", \"ArrayFieldItem-actions\": \"_ArrayFieldItem-actions_14u8o_189\" };\n\n// ../../node_modules/lucide-react/dist/esm/lucide-react.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// ../../node_modules/lucide-react/dist/esm/createLucideIcon.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// ../../node_modules/lucide-react/dist/esm/shared/src/utils.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nvar mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\n// ../../node_modules/lucide-react/dist/esm/Icon.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// ../../node_modules/lucide-react/dist/esm/defaultAttributes.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\n// ../../node_modules/lucide-react/dist/esm/Icon.js\nvar Icon = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(\n  (_a, ref) => {\n    var _b = _a, {\n      color = \"currentColor\",\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = \"\",\n      children,\n      iconNode\n    } = _b, rest = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_b, [\n      \"color\",\n      \"size\",\n      \"strokeWidth\",\n      \"absoluteStrokeWidth\",\n      \"className\",\n      \"children\",\n      \"iconNode\"\n    ]);\n    return (0,react__WEBPACK_IMPORTED_MODULE_2__.createElement)(\n      \"svg\",\n      (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n        ref\n      }, defaultAttributes), {\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className)\n      }), rest),\n      [\n        ...iconNode.map(([tag, attrs]) => (0,react__WEBPACK_IMPORTED_MODULE_2__.createElement)(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\n// ../../node_modules/lucide-react/dist/esm/createLucideIcon.js\nvar createLucideIcon = (iconName, iconNode) => {\n  const Component = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(\n    (_a, ref) => {\n      var _b = _a, { className } = _b, props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_b, [\"className\"]);\n      return (0,react__WEBPACK_IMPORTED_MODULE_2__.createElement)(Icon, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n        ref,\n        iconNode,\n        className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className)\n      }, props));\n    }\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\n// ../../node_modules/lucide-react/dist/esm/icons/chevron-down.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar ChevronDown = createLucideIcon(\"ChevronDown\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/chevron-right.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/chevron-up.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar ChevronUp = createLucideIcon(\"ChevronUp\", [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/circle-check-big.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar CircleCheckBig = createLucideIcon(\"CircleCheckBig\", [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/copy.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/corner-left-up.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar CornerLeftUp = createLucideIcon(\"CornerLeftUp\", [\n  [\"polyline\", { points: \"14 9 9 4 4 9\", key: \"m9oyvo\" }],\n  [\"path\", { d: \"M20 20h-7a4 4 0 0 1-4-4V4\", key: \"1blwi3\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar EllipsisVertical = createLucideIcon(\"EllipsisVertical\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/globe.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/hash.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Hash = createLucideIcon(\"Hash\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"9\", y2: \"9\", key: \"4lhtct\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"15\", y2: \"15\", key: \"vyu0kd\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"3\", y2: \"21\", key: \"1ggp8o\" }],\n  [\"line\", { x1: \"16\", x2: \"14\", y1: \"3\", y2: \"21\", key: \"weycgp\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/layers.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Layers = createLucideIcon(\"Layers\", [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/layout-grid.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar LayoutGrid = createLucideIcon(\"LayoutGrid\", [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/link.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Link = createLucideIcon(\"Link\", [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/list.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar List = createLucideIcon(\"List\", [\n  [\"path\", { d: \"M3 12h.01\", key: \"nlz23k\" }],\n  [\"path\", { d: \"M3 18h.01\", key: \"1tta3j\" }],\n  [\"path\", { d: \"M3 6h.01\", key: \"1rqtza\" }],\n  [\"path\", { d: \"M8 12h13\", key: \"1za7za\" }],\n  [\"path\", { d: \"M8 18h13\", key: \"1lx6n3\" }],\n  [\"path\", { d: \"M8 6h13\", key: \"ik3vkj\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/lock-open.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar LockOpen = createLucideIcon(\"LockOpen\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/lock.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/monitor.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Monitor = createLucideIcon(\"Monitor\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"3\", rx: \"2\", key: \"48i651\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"21\", y2: \"21\", key: \"1svkeh\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"17\", y2: \"21\", key: \"vw1qmm\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/panel-left.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar PanelLeft = createLucideIcon(\"PanelLeft\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M9 3v18\", key: \"fh3hqa\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/panel-right.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar PanelRight = createLucideIcon(\"PanelRight\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M15 3v18\", key: \"14nvp0\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/plus.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/redo-2.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Redo2 = createLucideIcon(\"Redo2\", [\n  [\"path\", { d: \"m15 14 5-5-5-5\", key: \"12vg1m\" }],\n  [\"path\", { d: \"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13\", key: \"6uklza\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/search.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/sliders-horizontal.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar SlidersHorizontal = createLucideIcon(\"SlidersHorizontal\", [\n  [\"line\", { x1: \"21\", x2: \"14\", y1: \"4\", y2: \"4\", key: \"obuewd\" }],\n  [\"line\", { x1: \"10\", x2: \"3\", y1: \"4\", y2: \"4\", key: \"1q6298\" }],\n  [\"line\", { x1: \"21\", x2: \"12\", y1: \"12\", y2: \"12\", key: \"1iu8h1\" }],\n  [\"line\", { x1: \"8\", x2: \"3\", y1: \"12\", y2: \"12\", key: \"ntss68\" }],\n  [\"line\", { x1: \"21\", x2: \"16\", y1: \"20\", y2: \"20\", key: \"14d8ph\" }],\n  [\"line\", { x1: \"12\", x2: \"3\", y1: \"20\", y2: \"20\", key: \"m0wm8r\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"2\", y2: \"6\", key: \"14e1ph\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"10\", y2: \"14\", key: \"1i6ji0\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"18\", y2: \"22\", key: \"1lctlv\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/smartphone.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Smartphone = createLucideIcon(\"Smartphone\", [\n  [\"rect\", { width: \"14\", height: \"20\", x: \"5\", y: \"2\", rx: \"2\", ry: \"2\", key: \"1yt0o3\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/tablet.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Tablet = createLucideIcon(\"Tablet\", [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", ry: \"2\", key: \"76otgf\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"18\", y2: \"18\", key: \"1dp563\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/trash.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Trash = createLucideIcon(\"Trash\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/type.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Type = createLucideIcon(\"Type\", [\n  [\"polyline\", { points: \"4 7 4 4 20 4 20 7\", key: \"1nosan\" }],\n  [\"line\", { x1: \"9\", x2: \"15\", y1: \"20\", y2: \"20\", key: \"swin9y\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"4\", y2: \"20\", key: \"1tx1rr\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/undo-2.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar Undo2 = createLucideIcon(\"Undo2\", [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\"path\", { d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11\", key: \"f3b9sd\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/zoom-in.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar ZoomIn = createLucideIcon(\"ZoomIn\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\n// ../../node_modules/lucide-react/dist/esm/icons/zoom-out.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar ZoomOut = createLucideIcon(\"ZoomOut\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\n// components/IconButton/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/AutoField/fields/ArrayField/index.tsx\n\n\n// components/DragIcon/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/DragIcon/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default5 = { \"DragIcon\": \"_DragIcon_17p8x_1\", \"DragIcon--disabled\": \"_DragIcon--disabled_17p8x_8\" };\n\n// components/DragIcon/index.tsx\n\nvar getClassName5 = get_class_name_factory_default(\"DragIcon\", styles_module_default5);\nvar DragIcon = ({ isDragDisabled }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName5({ disabled: isDragDisabled }), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"svg\", { viewBox: \"0 0 20 20\", width: \"12\", fill: \"currentColor\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"path\", { d: \"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z\" }) }) });\n\n// components/Sortable/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/dnd/use-sensors.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\nvar touchDefault = { delay: { value: 200, tolerance: 10 } };\nvar otherDefault = {\n  delay: { value: 200, tolerance: 10 },\n  distance: { value: 5 }\n};\nvar useSensors = ({\n  other = otherDefault,\n  mouse,\n  touch = touchDefault\n} = {\n  touch: touchDefault,\n  other: otherDefault\n}) => {\n  const [sensors] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => [\n    _dnd_kit_react__WEBPACK_IMPORTED_MODULE_6__.PointerSensor.configure({\n      activationConstraints(event, source) {\n        var _a;\n        const { pointerType, target } = event;\n        if (pointerType === \"mouse\" && (0,_dnd_kit_dom_utilities__WEBPACK_IMPORTED_MODULE_7__.isElement)(target) && (source.handle === target || ((_a = source.handle) == null ? void 0 : _a.contains(target)))) {\n          return mouse;\n        }\n        if (pointerType === \"touch\") {\n          return touch;\n        }\n        return other;\n      }\n    })\n  ]);\n  return sensors;\n};\n\n// lib/dnd/collision/dynamic/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/dnd/collision/directional/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/dnd/collision/collision-debug.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar DEBUG = false;\nvar debugElements = {};\nvar timeout;\nvar collisionDebug = (a, b, id, color, label) => {\n  if (!DEBUG) return;\n  const debugId = `${id}-debug`;\n  clearTimeout(timeout);\n  timeout = setTimeout(() => {\n    Object.entries(debugElements).forEach(([id2, { svg }]) => {\n      svg.remove();\n      delete debugElements[id2];\n    });\n  }, 1e3);\n  requestAnimationFrame(() => {\n    var _a, _b;\n    const existingEl = debugElements[debugId];\n    let line = (_a = debugElements[debugId]) == null ? void 0 : _a.line;\n    let text = (_b = debugElements[debugId]) == null ? void 0 : _b.text;\n    if (!existingEl) {\n      const svgNs = \"http://www.w3.org/2000/svg\";\n      const svg = document.createElementNS(svgNs, \"svg\");\n      line = document.createElementNS(svgNs, \"line\");\n      text = document.createElementNS(svgNs, \"text\");\n      svg.setAttribute(\"id\", debugId);\n      svg.setAttribute(\n        \"style\",\n        \"position: fixed; height: 100%; width: 100%; pointer-events: none; top: 0px; left: 0px;\"\n      );\n      svg.appendChild(line);\n      svg.appendChild(text);\n      text.setAttribute(\"fill\", `black`);\n      document.body.appendChild(svg);\n      debugElements[debugId] = { svg, line, text };\n    }\n    line.setAttribute(\"x1\", a.x.toString());\n    line.setAttribute(\"x2\", b.x.toString());\n    line.setAttribute(\"y1\", a.y.toString());\n    line.setAttribute(\"y2\", b.y.toString());\n    line.setAttribute(\"style\", `stroke:${color};stroke-width:2`);\n    text.setAttribute(\"x\", (a.x - (a.x - b.x) / 2).toString());\n    text.setAttribute(\"y\", (a.y - (a.y - b.y) / 2).toString());\n    if (label) {\n      text.innerHTML = label;\n    }\n  });\n};\n\n// lib/dnd/collision/directional/index.ts\nvar distanceChange = \"increasing\";\nvar directionalCollision = (input, previous) => {\n  var _a;\n  const { dragOperation, droppable } = input;\n  const { shape: dropShape } = droppable;\n  const { position } = dragOperation;\n  const dragShape = (_a = dragOperation.shape) == null ? void 0 : _a.current;\n  if (!dragShape || !dropShape) return null;\n  const dropCenter = dropShape.center;\n  const distanceToPrevious = Math.sqrt(\n    Math.pow(dropCenter.x - previous.x, 2) + Math.pow(dropCenter.y - previous.y, 2)\n  );\n  const distanceToCurrent = Math.sqrt(\n    Math.pow(dropCenter.x - position.current.x, 2) + Math.pow(dropCenter.y - position.current.y, 2)\n  );\n  distanceChange = distanceToCurrent === distanceToPrevious ? distanceChange : distanceToCurrent < distanceToPrevious ? \"decreasing\" : \"increasing\";\n  collisionDebug(\n    dragShape.center,\n    dropCenter,\n    droppable.id.toString(),\n    \"rebeccapurple\"\n  );\n  if (distanceChange === \"decreasing\") {\n    return {\n      id: droppable.id,\n      value: 1,\n      type: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionType.Collision\n    };\n  }\n  return null;\n};\n\n// lib/dnd/collision/dynamic/get-direction.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar getDirection = (dragAxis, delta) => {\n  if (dragAxis === \"dynamic\") {\n    if (Math.abs(delta.y) > Math.abs(delta.x)) {\n      return delta.y === 0 ? null : delta.y > 0 ? \"down\" : \"up\";\n    } else {\n      return delta.x === 0 ? null : delta.x > 0 ? \"right\" : \"left\";\n    }\n  } else if (dragAxis === \"x\") {\n    return delta.x === 0 ? null : delta.x > 0 ? \"right\" : \"left\";\n  }\n  return delta.y === 0 ? null : delta.y > 0 ? \"down\" : \"up\";\n};\n\n// lib/dnd/collision/dynamic/get-midpoint-impact.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar getMidpointImpact = (dragShape, dropShape, direction, offsetMultiplier = 0) => {\n  const dragRect = dragShape.boundingRectangle;\n  const dropCenter = dropShape.center;\n  if (direction === \"down\") {\n    const offset2 = offsetMultiplier * dropShape.boundingRectangle.height;\n    return dragRect.bottom >= dropCenter.y + offset2;\n  } else if (direction === \"up\") {\n    const offset2 = offsetMultiplier * dropShape.boundingRectangle.height;\n    return dragRect.top < dropCenter.y - offset2;\n  } else if (direction === \"left\") {\n    const offset2 = offsetMultiplier * dropShape.boundingRectangle.width;\n    return dropCenter.x - offset2 >= dragRect.left;\n  }\n  const offset = offsetMultiplier * dropShape.boundingRectangle.width;\n  return dragRect.right - offset >= dropCenter.x;\n};\n\n// lib/dnd/collision/dynamic/track-movement-interval.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar INTERVAL_SENSITIVITY = 10;\nvar intervalCache = {\n  current: { x: 0, y: 0 },\n  delta: { x: 0, y: 0 },\n  previous: { x: 0, y: 0 },\n  direction: null\n};\nvar trackMovementInterval = (point, dragAxis = \"dynamic\") => {\n  intervalCache.current = point;\n  intervalCache.delta = {\n    x: point.x - intervalCache.previous.x,\n    y: point.y - intervalCache.previous.y\n  };\n  intervalCache.direction = getDirection(dragAxis, intervalCache.delta) || intervalCache.direction;\n  if (Math.abs(intervalCache.delta.x) > INTERVAL_SENSITIVITY || Math.abs(intervalCache.delta.y) > INTERVAL_SENSITIVITY) {\n    intervalCache.previous = _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__.Point.from(point);\n  }\n  return intervalCache;\n};\n\n// ../../node_modules/@dnd-kit/collision/dist/index.js\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\n\n\n\n\n\n\n\n\n\nvar pointerIntersection = ({\n  dragOperation,\n  droppable\n}) => {\n  const pointerCoordinates = dragOperation.position.current;\n  if (!pointerCoordinates) {\n    return null;\n  }\n  const { id } = droppable;\n  if (!droppable.shape) {\n    return null;\n  }\n  if (droppable.shape.containsPoint(pointerCoordinates)) {\n    const distance = _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__.Point.distance(droppable.shape.center, pointerCoordinates);\n    return {\n      id,\n      value: 1 / distance,\n      type: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionType.PointerIntersection,\n      priority: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionPriority.High\n    };\n  }\n  return null;\n};\nvar closestCorners = (input) => {\n  const { dragOperation, droppable } = input;\n  const { shape, position } = dragOperation;\n  if (!droppable.shape) {\n    return null;\n  }\n  const shapeCorners = shape ? _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__.Rectangle.from(shape.current.boundingRectangle).corners : void 0;\n  const distance = _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__.Rectangle.from(\n    droppable.shape.boundingRectangle\n  ).corners.reduce(\n    (acc, corner, index) => {\n      var _a;\n      return acc + _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__.Point.distance(\n        _dnd_kit_geometry__WEBPACK_IMPORTED_MODULE_9__.Point.from(corner),\n        (_a = shapeCorners == null ? void 0 : shapeCorners[index]) != null ? _a : position.current\n      );\n    },\n    0\n  );\n  const value = distance / 4;\n  return {\n    id: droppable.id,\n    value: 1 / value,\n    type: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionType.Collision,\n    priority: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionPriority.Normal\n  };\n};\n\n// lib/dnd/collision/dynamic/store.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar collisionStore = (0,zustand_vanilla__WEBPACK_IMPORTED_MODULE_10__.createStore)(() => ({\n  fallbackEnabled: false\n}));\n\n// lib/dnd/collision/dynamic/index.ts\nvar flushNext = \"\";\nvar createDynamicCollisionDetector = (dragAxis, midpointOffset = 0.05) => (input) => {\n  var _a, _b, _c, _d, _e;\n  const { dragOperation, droppable } = input;\n  const { position } = dragOperation;\n  const dragShape = (_a = dragOperation.shape) == null ? void 0 : _a.current;\n  const { shape: dropShape } = droppable;\n  if (!dragShape || !dropShape) {\n    return null;\n  }\n  const { center: dragCenter } = dragShape;\n  const { fallbackEnabled } = collisionStore.getState();\n  const interval = trackMovementInterval(position.current, dragAxis);\n  const data = {\n    direction: interval.direction\n  };\n  const { center: dropCenter } = dropShape;\n  const overMidpoint = getMidpointImpact(\n    dragShape,\n    dropShape,\n    interval.direction,\n    midpointOffset\n  );\n  if (((_b = dragOperation.source) == null ? void 0 : _b.id) === droppable.id) {\n    const collision = directionalCollision(input, interval.previous);\n    collisionDebug(dragCenter, dropCenter, droppable.id.toString(), \"yellow\");\n    if (collision) {\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, collision), {\n        priority: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionPriority.Highest,\n        data\n      });\n    }\n  }\n  const intersectionArea = dragShape.intersectionArea(dropShape);\n  const intersectionRatio = intersectionArea / dropShape.area;\n  if (intersectionArea && overMidpoint) {\n    collisionDebug(\n      dragCenter,\n      dropCenter,\n      droppable.id.toString(),\n      \"green\",\n      interval.direction\n    );\n    const collision = {\n      id: droppable.id,\n      value: intersectionRatio,\n      priority: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionPriority.High,\n      type: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionType.Collision\n    };\n    const shouldFlushId = flushNext === droppable.id;\n    flushNext = \"\";\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, collision), { id: shouldFlushId ? \"flush\" : collision.id, data });\n  }\n  if (fallbackEnabled && ((_c = dragOperation.source) == null ? void 0 : _c.id) !== droppable.id) {\n    const xAxisIntersection = dropShape.boundingRectangle.right > dragShape.boundingRectangle.left && dropShape.boundingRectangle.left < dragShape.boundingRectangle.right;\n    const yAxisIntersection = dropShape.boundingRectangle.bottom > dragShape.boundingRectangle.top && dropShape.boundingRectangle.top < dragShape.boundingRectangle.bottom;\n    if (dragAxis === \"y\" && xAxisIntersection || yAxisIntersection) {\n      const fallbackCollision = closestCorners(input);\n      if (fallbackCollision) {\n        const direction = getDirection(dragAxis, {\n          x: dragShape.center.x - (((_d = droppable.shape) == null ? void 0 : _d.center.x) || 0),\n          y: dragShape.center.y - (((_e = droppable.shape) == null ? void 0 : _e.center.y) || 0)\n        });\n        data.direction = direction;\n        if (intersectionArea) {\n          collisionDebug(\n            dragCenter,\n            dropCenter,\n            droppable.id.toString(),\n            \"red\",\n            direction || \"\"\n          );\n          flushNext = droppable.id;\n          return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, fallbackCollision), {\n            priority: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionPriority.Low,\n            data\n          });\n        }\n        collisionDebug(\n          dragCenter,\n          dropCenter,\n          droppable.id.toString(),\n          \"orange\",\n          direction || \"\"\n        );\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, fallbackCollision), {\n          priority: _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.CollisionPriority.Lowest,\n          data\n        });\n      }\n    }\n  }\n  collisionDebug(dragCenter, dropCenter, droppable.id.toString(), \"hotpink\");\n  return null;\n};\n\n// components/Sortable/index.tsx\n\n\nvar SortableProvider = ({\n  children,\n  onDragStart,\n  onDragEnd,\n  onMove\n}) => {\n  const sensors = useSensors({\n    mouse: { distance: { value: 5 } }\n  });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    _dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__.DragDropProvider,\n    {\n      sensors,\n      onDragStart: (event) => {\n        var _a, _b;\n        return onDragStart((_b = (_a = event.operation.source) == null ? void 0 : _a.id.toString()) != null ? _b : \"\");\n      },\n      onDragOver: (event, manager) => {\n        var _a;\n        event.preventDefault();\n        const { operation } = event;\n        const { source, target } = operation;\n        if (!source || !target) return;\n        let sourceIndex = source.data.index;\n        let targetIndex = target.data.index;\n        const collisionData = (_a = manager.collisionObserver.collisions[0]) == null ? void 0 : _a.data;\n        if (sourceIndex !== targetIndex && source.id !== target.id) {\n          const collisionPosition = (collisionData == null ? void 0 : collisionData.direction) === \"up\" ? \"before\" : \"after\";\n          if (targetIndex >= sourceIndex) {\n            targetIndex = targetIndex - 1;\n          }\n          if (collisionPosition === \"after\") {\n            targetIndex = targetIndex + 1;\n          }\n          onMove({\n            source: sourceIndex,\n            target: targetIndex\n          });\n        }\n      },\n      onDragEnd: () => {\n        setTimeout(() => {\n          onDragEnd();\n        }, 250);\n      },\n      children\n    }\n  );\n};\nvar Sortable = ({\n  id,\n  index,\n  disabled,\n  children,\n  type = \"item\"\n}) => {\n  const {\n    ref: sortableRef,\n    isDragging,\n    isDropping,\n    handleRef\n  } = (0,_dnd_kit_react_sortable__WEBPACK_IMPORTED_MODULE_12__.useSortable)({\n    id,\n    type,\n    index,\n    disabled,\n    data: { index },\n    collisionDetector: createDynamicCollisionDetector(\"y\")\n  });\n  return children({ isDragging, isDropping, ref: sortableRef, handleRef });\n};\n\n// components/AutoField/context.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\nvar NestedFieldContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({});\nvar useNestedFieldContext = () => {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(NestedFieldContext);\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, context), {\n    readOnlyFields: context.readOnlyFields || {}\n  });\n};\nvar NestedFieldProvider = ({\n  children,\n  name,\n  subName,\n  wildcardName = name,\n  readOnlyFields\n}) => {\n  const subPath = `${name}.${subName}`;\n  const wildcardSubPath = `${wildcardName}.${subName}`;\n  const subReadOnlyFields = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => Object.keys(readOnlyFields).reduce((acc, readOnlyKey) => {\n      const isLocal = readOnlyKey.indexOf(subPath) > -1 || readOnlyKey.indexOf(wildcardSubPath) > -1;\n      if (isLocal) {\n        const subPathPattern = new RegExp(\n          `^(${name}|${wildcardName}).`.replace(/\\[/g, \"\\\\[\").replace(/\\]/g, \"\\\\]\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \"\\\\*\")\n        );\n        const localName = readOnlyKey.replace(subPathPattern, \"\");\n        return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, acc), {\n          [localName]: readOnlyFields[readOnlyKey]\n        });\n      }\n      return acc;\n    }, {}),\n    [name, subName, wildcardName, readOnlyFields]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    NestedFieldContext.Provider,\n    {\n      value: { readOnlyFields: subReadOnlyFields, localName: subName },\n      children\n    }\n  );\n};\n\n// components/AutoField/fields/ArrayField/index.tsx\n\nvar getClassName6 = get_class_name_factory_default(\"ArrayField\", styles_module_default4);\nvar getClassNameItem = get_class_name_factory_default(\"ArrayFieldItem\", styles_module_default4);\nvar ArrayField = ({\n  field,\n  onChange,\n  value: _value,\n  name,\n  label,\n  labelIcon,\n  readOnly,\n  id,\n  Label: Label2 = (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props))\n}) => {\n  const thisArrayState = useAppStore((s) => s.state.ui.arrayState[id]);\n  const setUi = useAppStore((s) => s.setUi);\n  const { readOnlyFields, localName = name } = useNestedFieldContext();\n  const value = _value;\n  const arrayState = thisArrayState || {\n    items: Array.from(value || []).map((item, idx) => {\n      return {\n        _originalIndex: idx,\n        _arrayId: `${id}-${idx}`\n      };\n    }),\n    openId: \"\"\n  };\n  const [localState, setLocalState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({ arrayState, value });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a;\n    const _arrayState = (_a = appStore.getState().state.ui.arrayState[id]) != null ? _a : arrayState;\n    setLocalState({ arrayState: _arrayState, value });\n  }, [value]);\n  const appStore = useAppStoreApi();\n  const mapArrayStateToUi = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (partialArrayState) => {\n      const state = appStore.getState().state;\n      return {\n        arrayState: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.ui.arrayState), {\n          [id]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, arrayState), partialArrayState)\n        })\n      };\n    },\n    [arrayState, appStore]\n  );\n  const getHighestIndex = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    return arrayState.items.reduce(\n      (acc, item) => item._originalIndex > acc ? item._originalIndex : acc,\n      -1\n    );\n  }, [arrayState]);\n  const regenerateArrayState = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (value2) => {\n      let highestIndex = getHighestIndex();\n      const newItems = Array.from(value2 || []).map((item, idx) => {\n        var _a;\n        const arrayStateItem = arrayState.items[idx];\n        const newItem = {\n          _originalIndex: typeof (arrayStateItem == null ? void 0 : arrayStateItem._originalIndex) !== \"undefined\" ? arrayStateItem._originalIndex : highestIndex + 1,\n          _arrayId: ((_a = arrayState.items[idx]) == null ? void 0 : _a._arrayId) || `${id}-${highestIndex + 1}`\n        };\n        if (newItem._originalIndex > highestIndex) {\n          highestIndex = newItem._originalIndex;\n        }\n        return newItem;\n      });\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, arrayState), { items: newItems });\n    },\n    [arrayState]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (arrayState.items.length > 0) {\n      setUi(mapArrayStateToUi(arrayState));\n    }\n  }, []);\n  const [draggedItem, setDraggedItem] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n  const isDraggingAny = !!draggedItem;\n  const canEdit = useAppStore(\n    (s) => s.permissions.getPermissions({ item: s.selectedItem }).edit\n  );\n  const forceReadOnly = !canEdit;\n  const valueRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(value);\n  const uniqifyItem = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (val) => {\n      if (field.type !== \"array\" || !field.arrayFields) return;\n      const config = appStore.getState().config;\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkField)({\n        value: val,\n        fields: field.arrayFields,\n        mappers: {\n          slot: ({ value: value2 }) => {\n            const content = value2;\n            return content.map((item) => populateIds(item, config, true));\n          }\n        },\n        config\n      });\n    },\n    [appStore, field]\n  );\n  if (field.type !== \"array\" || !field.arrayFields) {\n    return null;\n  }\n  const addDisabled = field.max !== void 0 && localState.arrayState.items.length >= field.max || readOnly;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      label: label || name,\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(List, { size: 16 }),\n      el: \"div\",\n      readOnly,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        SortableProvider,\n        {\n          onDragStart: (id2) => setDraggedItem(id2),\n          onDragEnd: () => {\n            setDraggedItem(\"\");\n            onChange(valueRef.current);\n          },\n          onMove: (move) => {\n            if (arrayState.items[move.source]._arrayId !== draggedItem) {\n              return;\n            }\n            const newValue = reorder(localState.value, move.source, move.target);\n            const newArrayStateItems = reorder(\n              arrayState.items,\n              move.source,\n              move.target\n            );\n            const state = appStore.getState().state;\n            const newUi = {\n              arrayState: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, state.ui.arrayState), {\n                [id]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, arrayState), { items: newArrayStateItems })\n              })\n            };\n            setUi(newUi, false);\n            setLocalState({\n              value: newValue,\n              arrayState: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, arrayState), { items: newArrayStateItems })\n            });\n            valueRef.current = newValue;\n          },\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n            \"div\",\n            {\n              className: getClassName6({\n                hasItems: Array.isArray(value) && value.length > 0,\n                addDisabled\n              }),\n              children: [\n                localState.arrayState.items.length > 0 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName6(\"inner\"), \"data-dnd-container\": true, children: localState.arrayState.items.map((item, i) => {\n                  const { _arrayId = `${id}-${i}`, _originalIndex = i } = item;\n                  const data = Array.from(localState.value || [])[i] || {};\n                  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                    Sortable,\n                    {\n                      id: _arrayId,\n                      index: i,\n                      disabled: readOnly,\n                      children: ({ isDragging, ref, handleRef }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n                        \"div\",\n                        {\n                          ref,\n                          className: getClassNameItem({\n                            isExpanded: arrayState.openId === _arrayId,\n                            isDragging,\n                            readOnly\n                          }),\n                          children: [\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n                              \"div\",\n                              {\n                                ref: handleRef,\n                                onClick: (e) => {\n                                  if (isDragging) return;\n                                  e.preventDefault();\n                                  e.stopPropagation();\n                                  if (arrayState.openId === _arrayId) {\n                                    setUi(\n                                      mapArrayStateToUi({\n                                        openId: \"\"\n                                      })\n                                    );\n                                  } else {\n                                    setUi(\n                                      mapArrayStateToUi({\n                                        openId: _arrayId\n                                      })\n                                    );\n                                  }\n                                },\n                                className: getClassNameItem(\"summary\"),\n                                children: [\n                                  field.getItemSummary ? field.getItemSummary(data, i) : `Item #${_originalIndex}`,\n                                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameItem(\"rhs\"), children: [\n                                    !readOnly && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameItem(\"actions\"), children: [\n                                      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem(\"action\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                                        IconButton,\n                                        {\n                                          type: \"button\",\n                                          disabled: !!addDisabled,\n                                          onClick: (e) => {\n                                            e.stopPropagation();\n                                            const existingValue = [...value || []];\n                                            const newItem = uniqifyItem(\n                                              existingValue[i]\n                                            );\n                                            existingValue.splice(i, 0, newItem);\n                                            const newUi = mapArrayStateToUi(\n                                              regenerateArrayState(existingValue)\n                                            );\n                                            setUi(newUi, false);\n                                            onChange(existingValue);\n                                          },\n                                          title: \"Duplicate\",\n                                          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Copy, { size: 16 })\n                                        }\n                                      ) }),\n                                      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem(\"action\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                                        IconButton,\n                                        {\n                                          type: \"button\",\n                                          disabled: field.min !== void 0 && field.min >= localState.arrayState.items.length,\n                                          onClick: (e) => {\n                                            e.stopPropagation();\n                                            const existingValue = [...value || []];\n                                            const existingItems = [\n                                              ...arrayState.items || []\n                                            ];\n                                            existingValue.splice(i, 1);\n                                            existingItems.splice(i, 1);\n                                            setUi(\n                                              mapArrayStateToUi({\n                                                items: existingItems\n                                              }),\n                                              false\n                                            );\n                                            onChange(existingValue);\n                                          },\n                                          title: \"Delete\",\n                                          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Trash, { size: 16 })\n                                        }\n                                      ) })\n                                    ] }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DragIcon, {}) })\n                                  ] })\n                                ]\n                              }\n                            ),\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem(\"body\"), children: arrayState.openId === _arrayId && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"fieldset\", { className: getClassNameItem(\"fieldset\"), children: Object.keys(field.arrayFields).map(\n                              (subName) => {\n                                const subField = field.arrayFields[subName];\n                                const indexName = `${name}[${i}]`;\n                                const subPath = `${indexName}.${subName}`;\n                                const localIndexName = `${localName}[${i}]`;\n                                const localWildcardName = `${localName}[*]`;\n                                const localSubPath = `${localIndexName}.${subName}`;\n                                const localWildcardSubPath = `${localWildcardName}.${subName}`;\n                                const subReadOnly = forceReadOnly ? forceReadOnly : typeof readOnlyFields[subPath] !== \"undefined\" ? readOnlyFields[localSubPath] : readOnlyFields[localWildcardSubPath];\n                                const label2 = subField.label || subName;\n                                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                                  NestedFieldProvider,\n                                  {\n                                    name: localIndexName,\n                                    wildcardName: localWildcardName,\n                                    subName,\n                                    readOnlyFields,\n                                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                                      AutoFieldPrivate,\n                                      {\n                                        name: subPath,\n                                        label: label2,\n                                        id: `${_arrayId}_${subName}`,\n                                        readOnly: subReadOnly,\n                                        field: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, subField), {\n                                          label: label2\n                                          // May be used by custom fields\n                                        }),\n                                        value: data[subName],\n                                        onChange: (val, ui) => {\n                                          onChange(\n                                            replace(value, i, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data), {\n                                              [subName]: val\n                                            })),\n                                            ui\n                                          );\n                                        }\n                                      }\n                                    )\n                                  },\n                                  subPath\n                                );\n                              }\n                            ) }) })\n                          ]\n                        }\n                      )\n                    },\n                    _arrayId\n                  );\n                }) }),\n                !addDisabled && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                  \"button\",\n                  {\n                    type: \"button\",\n                    className: getClassName6(\"addButton\"),\n                    onClick: () => {\n                      var _a;\n                      if (isDraggingAny) return;\n                      const existingValue = value || [];\n                      const newItem = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultSlots)(\n                        uniqifyItem((_a = field.defaultItemProps) != null ? _a : {}),\n                        field.arrayFields\n                      );\n                      const newValue = [...existingValue, newItem];\n                      const newArrayState = regenerateArrayState(newValue);\n                      setUi(mapArrayStateToUi(newArrayState), false);\n                      onChange(newValue);\n                    },\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Plus, { size: 21 })\n                  }\n                )\n              ]\n            }\n          )\n        }\n      )\n    }\n  );\n};\n\n// components/AutoField/fields/DefaultField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar getClassName7 = get_class_name_factory_default(\"Input\", styles_module_default3);\nvar DefaultField = ({\n  field,\n  onChange,\n  readOnly,\n  value: _value,\n  name,\n  label,\n  labelIcon,\n  Label: Label2,\n  id\n}) => {\n  const value = _value;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      label: label || name,\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [\n        field.type === \"text\" && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Type, { size: 16 }),\n        field.type === \"number\" && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Hash, { size: 16 })\n      ] }),\n      readOnly,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        \"input\",\n        {\n          className: getClassName7(\"input\"),\n          autoComplete: \"off\",\n          type: field.type,\n          title: label || name,\n          name,\n          value: (value == null ? void 0 : value.toString) ? value.toString() : \"\",\n          onChange: (e) => {\n            if (field.type === \"number\") {\n              const numberValue = Number(e.currentTarget.value);\n              if (typeof field.min !== \"undefined\" && numberValue < field.min) {\n                return;\n              }\n              if (typeof field.max !== \"undefined\" && numberValue > field.max) {\n                return;\n              }\n              onChange(numberValue);\n            } else {\n              onChange(e.currentTarget.value);\n            }\n          },\n          readOnly,\n          tabIndex: readOnly ? -1 : void 0,\n          id,\n          min: field.type === \"number\" ? field.min : void 0,\n          max: field.type === \"number\" ? field.max : void 0,\n          placeholder: field.type === \"text\" || field.type === \"number\" ? field.placeholder : void 0,\n          step: field.type === \"number\" ? field.step : void 0\n        }\n      )\n    }\n  );\n};\n\n// components/AutoField/fields/ExternalField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/ExternalInput/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/ExternalInput/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default6 = { \"ExternalInput-actions\": \"_ExternalInput-actions_91ls0_1\", \"ExternalInput-button\": \"_ExternalInput-button_91ls0_5\", \"ExternalInput--dataSelected\": \"_ExternalInput--dataSelected_91ls0_24\", \"ExternalInput--readOnly\": \"_ExternalInput--readOnly_91ls0_31\", \"ExternalInput-detachButton\": \"_ExternalInput-detachButton_91ls0_35\", \"ExternalInput\": \"_ExternalInput_91ls0_1\", \"ExternalInputModal\": \"_ExternalInputModal_91ls0_79\", \"ExternalInputModal-grid\": \"_ExternalInputModal-grid_91ls0_89\", \"ExternalInputModal--filtersToggled\": \"_ExternalInputModal--filtersToggled_91ls0_100\", \"ExternalInputModal-filters\": \"_ExternalInputModal-filters_91ls0_105\", \"ExternalInputModal-masthead\": \"_ExternalInputModal-masthead_91ls0_124\", \"ExternalInputModal-tableWrapper\": \"_ExternalInputModal-tableWrapper_91ls0_133\", \"ExternalInputModal-table\": \"_ExternalInputModal-table_91ls0_133\", \"ExternalInputModal-thead\": \"_ExternalInputModal-thead_91ls0_149\", \"ExternalInputModal-th\": \"_ExternalInputModal-th_91ls0_149\", \"ExternalInputModal-td\": \"_ExternalInputModal-td_91ls0_164\", \"ExternalInputModal-tr\": \"_ExternalInputModal-tr_91ls0_169\", \"ExternalInputModal-tbody\": \"_ExternalInputModal-tbody_91ls0_176\", \"ExternalInputModal--hasData\": \"_ExternalInputModal--hasData_91ls0_202\", \"ExternalInputModal-loadingBanner\": \"_ExternalInputModal-loadingBanner_91ls0_206\", \"ExternalInputModal--isLoading\": \"_ExternalInputModal--isLoading_91ls0_223\", \"ExternalInputModal-searchForm\": \"_ExternalInputModal-searchForm_91ls0_227\", \"ExternalInputModal-search\": \"_ExternalInputModal-search_91ls0_227\", \"ExternalInputModal-searchIcon\": \"_ExternalInputModal-searchIcon_91ls0_264\", \"ExternalInputModal-searchIconText\": \"_ExternalInputModal-searchIconText_91ls0_289\", \"ExternalInputModal-searchInput\": \"_ExternalInputModal-searchInput_91ls0_299\", \"ExternalInputModal-searchActions\": \"_ExternalInputModal-searchActions_91ls0_313\", \"ExternalInputModal-searchActionIcon\": \"_ExternalInputModal-searchActionIcon_91ls0_326\", \"ExternalInputModal-footerContainer\": \"_ExternalInputModal-footerContainer_91ls0_330\", \"ExternalInputModal-footer\": \"_ExternalInputModal-footer_91ls0_330\", \"ExternalInputModal-field\": \"_ExternalInputModal-field_91ls0_343\" };\n\n// components/Modal/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Modal/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default7 = { \"Modal\": \"_Modal_ikbaj_1\", \"Modal--isOpen\": \"_Modal--isOpen_ikbaj_15\", \"Modal-inner\": \"_Modal-inner_ikbaj_19\" };\n\n// components/Modal/index.tsx\n\n\nvar getClassName8 = get_class_name_factory_default(\"Modal\", styles_module_default7);\nvar Modal = ({\n  children,\n  onClose,\n  isOpen\n}) => {\n  const [rootEl, setRootEl] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setRootEl(document.getElementById(\"puck-portal-root\"));\n  }, []);\n  if (!rootEl) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {});\n  }\n  return (0,react_dom__WEBPACK_IMPORTED_MODULE_13__.createPortal)(\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName8({ isOpen }), onClick: onClose, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      \"div\",\n      {\n        className: getClassName8(\"inner\"),\n        onClick: (e) => e.stopPropagation(),\n        children\n      }\n    ) }),\n    rootEl\n  );\n};\n\n// components/Heading/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Heading/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default8 = { \"Heading\": \"_Heading_qxrry_1\", \"Heading--xxxxl\": \"_Heading--xxxxl_qxrry_12\", \"Heading--xxxl\": \"_Heading--xxxl_qxrry_18\", \"Heading--xxl\": \"_Heading--xxl_qxrry_22\", \"Heading--xl\": \"_Heading--xl_qxrry_26\", \"Heading--l\": \"_Heading--l_qxrry_30\", \"Heading--m\": \"_Heading--m_qxrry_34\", \"Heading--s\": \"_Heading--s_qxrry_38\", \"Heading--xs\": \"_Heading--xs_qxrry_42\" };\n\n// components/Heading/index.tsx\n\nvar getClassName9 = get_class_name_factory_default(\"Heading\", styles_module_default8);\nvar Heading = ({ children, rank, size = \"m\" }) => {\n  const Tag = rank ? `h${rank}` : \"span\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Tag,\n    {\n      className: getClassName9({\n        [size]: true\n      }),\n      children\n    }\n  );\n};\n\n// components/Button/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/ExternalInput/index.tsx\n\nvar getClassName10 = get_class_name_factory_default(\"ExternalInput\", styles_module_default6);\nvar getClassNameModal = get_class_name_factory_default(\"ExternalInputModal\", styles_module_default6);\nvar dataCache = {};\nvar ExternalInput = ({\n  field,\n  onChange,\n  value = null,\n  name,\n  id,\n  readOnly\n}) => {\n  const {\n    mapProp = (val) => val,\n    mapRow = (val) => val,\n    filterFields\n  } = field || {};\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n  const [isOpen, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n  const hasFilterFields = !!filterFields;\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(field.initialFilters || {});\n  const [filtersToggled, setFiltersToggled] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(hasFilterFields);\n  const mappedData = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return data.map(mapRow);\n  }, [data]);\n  const keys = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const validKeys = /* @__PURE__ */ new Set();\n    for (const item of mappedData) {\n      for (const key of Object.keys(item)) {\n        if (typeof item[key] === \"string\" || typeof item[key] === \"number\" || (0,react__WEBPACK_IMPORTED_MODULE_2__.isValidElement)(item[key])) {\n          validKeys.add(key);\n        }\n      }\n    }\n    return Array.from(validKeys);\n  }, [mappedData]);\n  const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(field.initialQuery || \"\");\n  const search = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (query, filters2) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n      setIsLoading(true);\n      const cacheKey = `${id}-${query}-${JSON.stringify(filters2)}`;\n      const listData = dataCache[cacheKey] || (yield field.fetchList({ query, filters: filters2 }));\n      if (listData) {\n        setData(listData);\n        setIsLoading(false);\n        dataCache[cacheKey] = listData;\n      }\n    }),\n    [id, field]\n  );\n  const Footer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (props) => field.renderFooter ? field.renderFooter(props) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"span\", { className: getClassNameModal(\"footer\"), children: [\n      props.items.length,\n      \" result\",\n      props.items.length === 1 ? \"\" : \"s\"\n    ] }),\n    [field.renderFooter]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    search(searchQuery, filters);\n  }, []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    \"div\",\n    {\n      className: getClassName10({\n        dataSelected: !!value,\n        modalVisible: isOpen,\n        readOnly\n      }),\n      id,\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName10(\"actions\"), children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            \"button\",\n            {\n              type: \"button\",\n              onClick: () => setOpen(true),\n              className: getClassName10(\"button\"),\n              disabled: readOnly,\n              children: value ? field.getItemSummary ? field.getItemSummary(value) : \"External item\" : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Link, { size: \"16\" }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", { children: field.placeholder })\n              ] })\n            }\n          ),\n          value && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            \"button\",\n            {\n              type: \"button\",\n              className: getClassName10(\"detachButton\"),\n              onClick: () => {\n                onChange(null);\n              },\n              disabled: readOnly,\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LockOpen, { size: 16 })\n            }\n          )\n        ] }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Modal, { onClose: () => setOpen(false), isOpen, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n          \"form\",\n          {\n            className: getClassNameModal({\n              isLoading,\n              loaded: !isLoading,\n              hasData: mappedData.length > 0,\n              filtersToggled\n            }),\n            onSubmit: (e) => {\n              e.preventDefault();\n              search(searchQuery, filters);\n            },\n            children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameModal(\"masthead\"), children: field.showSearch ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameModal(\"searchForm\"), children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"label\", { className: getClassNameModal(\"search\"), children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", { className: getClassNameModal(\"searchIconText\"), children: \"Search\" }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameModal(\"searchIcon\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Search, { size: \"18\" }) }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                    \"input\",\n                    {\n                      className: getClassNameModal(\"searchInput\"),\n                      name: \"q\",\n                      type: \"search\",\n                      placeholder: field.placeholder,\n                      onChange: (e) => {\n                        setSearchQuery(e.currentTarget.value);\n                      },\n                      autoComplete: \"off\",\n                      value: searchQuery\n                    }\n                  )\n                ] }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameModal(\"searchActions\"), children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Button, { type: \"submit\", loading: isLoading, fullWidth: true, children: \"Search\" }),\n                  hasFilterFields && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameModal(\"searchActionIcon\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                    IconButton,\n                    {\n                      type: \"button\",\n                      title: \"Toggle filters\",\n                      onClick: (e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        setFiltersToggled(!filtersToggled);\n                      },\n                      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SlidersHorizontal, { size: 20 })\n                    }\n                  ) })\n                ] })\n              ] }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Heading, { rank: \"2\", size: \"xs\", children: field.placeholder || \"Select data\" }) }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameModal(\"grid\"), children: [\n                hasFilterFields && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameModal(\"filters\"), children: hasFilterFields && Object.keys(filterFields).map((fieldName) => {\n                  const filterField = filterFields[fieldName];\n                  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                    \"div\",\n                    {\n                      className: getClassNameModal(\"field\"),\n                      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                        AutoFieldPrivate,\n                        {\n                          field: filterField,\n                          name: fieldName,\n                          id: `external_field_${fieldName}_filter`,\n                          label: filterField.label || fieldName,\n                          value: filters[fieldName],\n                          onChange: (value2) => {\n                            const newFilters = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, filters), {\n                              [fieldName]: value2\n                            });\n                            setFilters(newFilters);\n                            search(searchQuery, newFilters);\n                          }\n                        }\n                      )\n                    },\n                    fieldName\n                  );\n                }) }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameModal(\"tableWrapper\"), children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"table\", { className: getClassNameModal(\"table\"), children: [\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"thead\", { className: getClassNameModal(\"thead\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"tr\", { className: getClassNameModal(\"tr\"), children: keys.map((key) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                      \"th\",\n                      {\n                        className: getClassNameModal(\"th\"),\n                        style: { textAlign: \"left\" },\n                        children: key\n                      },\n                      key\n                    )) }) }),\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"tbody\", { className: getClassNameModal(\"tbody\"), children: mappedData.map((item, i) => {\n                      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                        \"tr\",\n                        {\n                          style: { whiteSpace: \"nowrap\" },\n                          className: getClassNameModal(\"tr\"),\n                          onClick: () => {\n                            onChange(mapProp(data[i]));\n                            setOpen(false);\n                          },\n                          children: keys.map((key) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"td\", { className: getClassNameModal(\"td\"), children: item[key] }, key))\n                        },\n                        i\n                      );\n                    }) })\n                  ] }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameModal(\"loadingBanner\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, { size: 24 }) })\n                ] })\n              ] }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameModal(\"footerContainer\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Footer, { items: mappedData }) })\n            ]\n          }\n        ) })\n      ]\n    }\n  );\n};\n\n// components/AutoField/fields/ExternalField/index.tsx\n\nvar ExternalField = ({\n  field,\n  onChange,\n  value,\n  name,\n  label,\n  labelIcon,\n  Label: Label2,\n  id,\n  readOnly\n}) => {\n  var _a, _b, _c;\n  const validField = field;\n  const deprecatedField = field;\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (deprecatedField.adaptor) {\n      console.error(\n        \"Warning: The `adaptor` API is deprecated. Please use updated APIs on the `external` field instead. This will be a breaking change in a future release.\"\n      );\n    }\n  }, []);\n  if (field.type !== \"external\") {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      label: label || name,\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Link, { size: 16 }),\n      el: \"div\",\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        ExternalInput,\n        {\n          name,\n          field: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, validField), {\n            // DEPRECATED\n            placeholder: ((_a = deprecatedField.adaptor) == null ? void 0 : _a.name) ? `Select from ${deprecatedField.adaptor.name}` : validField.placeholder || \"Select data\",\n            mapProp: ((_b = deprecatedField.adaptor) == null ? void 0 : _b.mapProp) || validField.mapProp,\n            mapRow: validField.mapRow,\n            fetchList: ((_c = deprecatedField.adaptor) == null ? void 0 : _c.fetchList) ? () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n              return yield deprecatedField.adaptor.fetchList(\n                deprecatedField.adaptorParams\n              );\n            }) : validField.fetchList\n          }),\n          onChange,\n          value,\n          id,\n          readOnly\n        }\n      )\n    }\n  );\n};\n\n// components/AutoField/fields/RadioField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar getClassName11 = get_class_name_factory_default(\"Input\", styles_module_default3);\nvar RadioField = ({\n  field,\n  onChange,\n  readOnly,\n  value,\n  name,\n  id,\n  label,\n  labelIcon,\n  Label: Label2\n}) => {\n  if (field.type !== \"radio\" || !field.options) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CircleCheckBig, { size: 16 }),\n      label: label || name,\n      readOnly,\n      el: \"div\",\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName11(\"radioGroupItems\"), id, children: field.options.map((option) => {\n        var _a;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n          \"label\",\n          {\n            className: getClassName11(\"radio\"),\n            children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                \"input\",\n                {\n                  type: \"radio\",\n                  className: getClassName11(\"radioInput\"),\n                  value: JSON.stringify({ value: option.value }),\n                  name,\n                  onChange: (e) => {\n                    onChange(JSON.parse(e.target.value).value);\n                  },\n                  disabled: readOnly,\n                  checked: value === option.value\n                }\n              ),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName11(\"radioInner\"), children: option.label || ((_a = option.value) == null ? void 0 : _a.toString()) })\n            ]\n          },\n          option.label + option.value\n        );\n      }) })\n    }\n  );\n};\n\n// components/AutoField/fields/SelectField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar getClassName12 = get_class_name_factory_default(\"Input\", styles_module_default3);\nvar SelectField = ({\n  field,\n  onChange,\n  label,\n  labelIcon,\n  Label: Label2,\n  value,\n  name,\n  readOnly,\n  id\n}) => {\n  if (field.type !== \"select\" || !field.options) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      label: label || name,\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronDown, { size: 16 }),\n      readOnly,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        \"select\",\n        {\n          id,\n          title: label || name,\n          className: getClassName12(\"input\"),\n          disabled: readOnly,\n          onChange: (e) => {\n            onChange(JSON.parse(e.target.value).value);\n          },\n          value: JSON.stringify({ value }),\n          children: field.options.map((option) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            \"option\",\n            {\n              label: option.label,\n              value: JSON.stringify({ value: option.value })\n            },\n            option.label + JSON.stringify(option.value)\n          ))\n        }\n      )\n    }\n  );\n};\n\n// components/AutoField/fields/TextareaField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar getClassName13 = get_class_name_factory_default(\"Input\", styles_module_default3);\nvar TextareaField = ({\n  field,\n  onChange,\n  readOnly,\n  value,\n  name,\n  label,\n  labelIcon,\n  Label: Label2,\n  id\n}) => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      label: label || name,\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Type, { size: 16 }),\n      readOnly,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        \"textarea\",\n        {\n          id,\n          className: getClassName13(\"input\"),\n          autoComplete: \"off\",\n          name,\n          value: typeof value === \"undefined\" ? \"\" : value,\n          onChange: (e) => onChange(e.currentTarget.value),\n          readOnly,\n          tabIndex: readOnly ? -1 : void 0,\n          rows: 5,\n          placeholder: field.type === \"textarea\" ? field.placeholder : void 0\n        }\n      )\n    }\n  );\n};\n\n// components/AutoField/fields/ObjectField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/AutoField/fields/ObjectField/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default9 = { \"ObjectField\": \"_ObjectField_1ua3y_5\", \"ObjectField-fieldset\": \"_ObjectField-fieldset_1ua3y_13\" };\n\n// components/AutoField/fields/ObjectField/index.tsx\n\nvar getClassName14 = get_class_name_factory_default(\"ObjectField\", styles_module_default9);\nvar ObjectField = ({\n  field,\n  onChange,\n  value,\n  name,\n  label,\n  labelIcon,\n  Label: Label2,\n  readOnly,\n  id\n}) => {\n  const { readOnlyFields, localName = name } = useNestedFieldContext();\n  if (field.type !== \"object\" || !field.objectFields) {\n    return null;\n  }\n  const data = value || {};\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Label2,\n    {\n      label: label || name,\n      icon: labelIcon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(EllipsisVertical, { size: 16 }),\n      el: \"div\",\n      readOnly,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName14(), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"fieldset\", { className: getClassName14(\"fieldset\"), children: Object.keys(field.objectFields).map((subName) => {\n        const subField = field.objectFields[subName];\n        const subPath = `${localName}.${subName}`;\n        const subReadOnly = readOnly ? readOnly : readOnlyFields[subPath];\n        const label2 = subField.label || subName;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n          NestedFieldProvider,\n          {\n            name: localName || id,\n            subName,\n            readOnlyFields,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n              AutoFieldPrivate,\n              {\n                name: subPath,\n                label: subPath,\n                id: `${id}_${subName}`,\n                readOnly: subReadOnly,\n                field: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, subField), {\n                  label: label2\n                  // May be used by custom fields\n                }),\n                value: data[subName],\n                onChange: (val, ui) => {\n                  onChange(\n                    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data), {\n                      [subName]: val\n                    }),\n                    ui\n                  );\n                }\n              }\n            )\n          },\n          subPath\n        );\n      }) }) })\n    }\n  );\n};\n\n// lib/use-safe-id.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar useSafeId = () => {\n  if (typeof react__WEBPACK_IMPORTED_MODULE_2__.useId !== \"undefined\") {\n    return react__WEBPACK_IMPORTED_MODULE_2__.useId();\n  }\n  const [id] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(generateId());\n  return id;\n};\n\n// components/AutoField/index.tsx\n\nvar getClassName15 = get_class_name_factory_default(\"Input\", styles_module_default3);\nvar getClassNameWrapper = get_class_name_factory_default(\"InputWrapper\", styles_module_default3);\nvar FieldLabel = ({\n  children,\n  icon,\n  label,\n  el = \"label\",\n  readOnly,\n  className\n}) => {\n  const El = el;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(El, { className, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName15(\"label\"), children: [\n      icon ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName15(\"labelIcon\"), children: icon }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {}),\n      label,\n      readOnly && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName15(\"disabledIcon\"), title: \"Read-only\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Lock, { size: \"12\" }) })\n    ] }),\n    children\n  ] });\n};\nvar FieldLabelInternal = ({\n  children,\n  icon,\n  label,\n  el = \"label\",\n  readOnly\n}) => {\n  const overrides = useAppStore((s) => s.overrides);\n  const Wrapper = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => overrides.fieldLabel || FieldLabel,\n    [overrides]\n  );\n  if (!label) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Wrapper,\n    {\n      label,\n      icon,\n      className: getClassName15({ readOnly }),\n      readOnly,\n      el,\n      children\n    }\n  );\n};\nvar defaultFields = {\n  array: ArrayField,\n  external: ExternalField,\n  object: ObjectField,\n  select: SelectField,\n  textarea: TextareaField,\n  radio: RadioField,\n  text: DefaultField,\n  number: DefaultField\n};\nfunction AutoFieldInternal(props) {\n  var _a;\n  const dispatch = useAppStore((s) => s.dispatch);\n  const overrides = useAppStore((s) => s.overrides);\n  const readOnly = useAppStore((s) => {\n    var _a2;\n    return (_a2 = s.selectedItem) == null ? void 0 : _a2.readOnly;\n  });\n  const nestedFieldContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(NestedFieldContext);\n  const { id, Label: Label2 = FieldLabelInternal } = props;\n  const field = props.field;\n  const label = field.label;\n  const labelIcon = field.labelIcon;\n  const defaultId = useSafeId();\n  const resolvedId = id || defaultId;\n  const render = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => {\n      var _a2, _b, _c, _d, _e, _f, _g, _h;\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, overrides.fieldTypes), {\n        array: ((_a2 = overrides.fieldTypes) == null ? void 0 : _a2.array) || defaultFields.array,\n        external: ((_b = overrides.fieldTypes) == null ? void 0 : _b.external) || defaultFields.external,\n        object: ((_c = overrides.fieldTypes) == null ? void 0 : _c.object) || defaultFields.object,\n        select: ((_d = overrides.fieldTypes) == null ? void 0 : _d.select) || defaultFields.select,\n        textarea: ((_e = overrides.fieldTypes) == null ? void 0 : _e.textarea) || defaultFields.textarea,\n        radio: ((_f = overrides.fieldTypes) == null ? void 0 : _f.radio) || defaultFields.radio,\n        text: ((_g = overrides.fieldTypes) == null ? void 0 : _g.text) || defaultFields.text,\n        number: ((_h = overrides.fieldTypes) == null ? void 0 : _h.number) || defaultFields.number\n      });\n    },\n    [overrides]\n  );\n  const mergedProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), {\n      field,\n      label,\n      labelIcon,\n      Label: Label2,\n      id: resolvedId\n    }),\n    [props, field, label, labelIcon, Label2, resolvedId]\n  );\n  const onFocus = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (e) => {\n      if (mergedProps.name && (e.target.nodeName === \"INPUT\" || e.target.nodeName === \"TEXTAREA\")) {\n        e.stopPropagation();\n        dispatch({\n          type: \"setUi\",\n          ui: {\n            field: { focus: mergedProps.name }\n          }\n        });\n      }\n    },\n    [mergedProps.name]\n  );\n  const onBlur = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((e) => {\n    if (\"name\" in e.target) {\n      dispatch({\n        type: \"setUi\",\n        ui: {\n          field: { focus: null }\n        }\n      });\n    }\n  }, []);\n  let Children = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (field.type !== \"custom\" && field.type !== \"slot\") {\n      return defaultFields[field.type];\n    }\n    return (_props) => null;\n  }, [field.type]);\n  let FieldComponent = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (field.type === \"custom\") {\n      if (!field.render) {\n        return null;\n      }\n      return field.render;\n    } else if (field.type !== \"slot\") {\n      return render[field.type];\n    }\n  }, [field.type, render]);\n  const { visible = true } = props.field;\n  if (!visible) {\n    return null;\n  }\n  if (field.type === \"slot\") {\n    return null;\n  }\n  if (!FieldComponent) {\n    throw new Error(`Field type for ${field.type} did not exist.`);\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    NestedFieldContext.Provider,\n    {\n      value: {\n        readOnlyFields: nestedFieldContext.readOnlyFields || readOnly || {},\n        localName: (_a = nestedFieldContext.localName) != null ? _a : mergedProps.name\n      },\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        \"div\",\n        {\n          className: getClassNameWrapper(),\n          onFocus,\n          onBlur,\n          onClick: (e) => {\n            e.stopPropagation();\n          },\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(FieldComponent, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, mergedProps), { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Children, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, mergedProps)) }))\n        }\n      )\n    }\n  );\n}\nfunction AutoFieldPrivate(props) {\n  const isFocused = useAppStore((s) => s.state.ui.field.focus === props.name);\n  const { value, onChange } = props;\n  const [localValue, setLocalValue] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(value);\n  const onChangeLocal = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (val, ui) => {\n      setLocalValue(val);\n      onChange(val, ui);\n    },\n    [onChange]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!isFocused) {\n      setLocalValue(value);\n    }\n  }, [value]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!isFocused) {\n      if (value !== localValue) {\n        setLocalValue(value);\n      }\n    }\n  }, [isFocused, value, localValue]);\n  const localProps = {\n    value: localValue,\n    onChange: onChangeLocal\n  };\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(AutoFieldInternal, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), localProps));\n}\nfunction AutoField(props) {\n  const DefaultLabel = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const DefaultLabel2 = (labelProps) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      \"div\",\n      (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, labelProps), {\n        className: getClassName15({ readOnly: props.readOnly })\n      })\n    );\n    return DefaultLabel2;\n  }, [props.readOnly]);\n  if (props.field.type === \"slot\") {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(AutoFieldInternal, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { Label: DefaultLabel }));\n}\n\n// components/Render/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/DropZone/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/DraggableComponent/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/DraggableComponent/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default10 = { \"DraggableComponent\": \"_DraggableComponent_1vaqy_1\", \"DraggableComponent-overlayWrapper\": \"_DraggableComponent-overlayWrapper_1vaqy_12\", \"DraggableComponent-overlay\": \"_DraggableComponent-overlay_1vaqy_12\", \"DraggableComponent-loadingOverlay\": \"_DraggableComponent-loadingOverlay_1vaqy_34\", \"DraggableComponent--hover\": \"_DraggableComponent--hover_1vaqy_50\", \"DraggableComponent--isSelected\": \"_DraggableComponent--isSelected_1vaqy_57\", \"DraggableComponent-actionsOverlay\": \"_DraggableComponent-actionsOverlay_1vaqy_71\", \"DraggableComponent-actions\": \"_DraggableComponent-actions_1vaqy_71\" };\n\n// components/DraggableComponent/index.tsx\n\n\n// lib/get-deep-scroll-position.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction getDeepScrollPosition(element) {\n  let totalScroll = {\n    x: 0,\n    y: 0\n  };\n  let current = element;\n  while (current && current !== document.documentElement) {\n    const parent = current.parentElement;\n    if (parent) {\n      totalScroll.x += parent.scrollLeft;\n      totalScroll.y += parent.scrollTop;\n    }\n    current = parent;\n  }\n  return totalScroll;\n}\n\n// components/DropZone/context.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\nvar dropZoneContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nvar ZoneStoreContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(\n  (0,zustand_vanilla__WEBPACK_IMPORTED_MODULE_10__.createStore)(() => ({\n    zoneDepthIndex: {},\n    nextZoneDepthIndex: {},\n    areaDepthIndex: {},\n    nextAreaDepthIndex: {},\n    draggedItem: null,\n    previewIndex: {},\n    enabledIndex: {},\n    hoveringComponent: null\n  }))\n);\nvar ZoneStoreProvider = ({\n  children,\n  store\n}) => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ZoneStoreContext.Provider, { value: store, children });\n};\nvar DropZoneProvider = ({\n  children,\n  value\n}) => {\n  const dispatch = useAppStore((s) => s.dispatch);\n  const registerZone = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (zoneCompound) => {\n      dispatch({\n        type: \"registerZone\",\n        zone: zoneCompound\n      });\n    },\n    [dispatch]\n  );\n  const memoValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      registerZone\n    }, value),\n    [value]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: memoValue && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(dropZoneContext.Provider, { value: memoValue, children }) });\n};\n\n// components/DraggableComponent/index.tsx\n\n\n\n// lib/accumulate-transform.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction accumulateTransform(el) {\n  let matrix = new DOMMatrixReadOnly();\n  let n = el.parentElement;\n  while (n && n !== document.documentElement) {\n    const t = getComputedStyle(n).transform;\n    if (t && t !== \"none\") {\n      matrix = new DOMMatrixReadOnly(t).multiply(matrix);\n    }\n    n = n.parentElement;\n  }\n  return { scaleX: matrix.a, scaleY: matrix.d };\n}\n\n// lib/use-context-store.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\nfunction useContextStore(context, selector) {\n  const store = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(context);\n  if (!store) {\n    throw new Error(\"useContextStore must be used inside context\");\n  }\n  return (0,zustand__WEBPACK_IMPORTED_MODULE_4__.useStore)(store, (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)(selector));\n}\n\n// lib/dnd/use-on-drag-finished.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar useOnDragFinished = (cb, deps = []) => {\n  const appStore = useAppStoreApi();\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    let dispose = () => {\n    };\n    const processDragging = (isDragging2) => {\n      if (isDragging2) {\n        cb(false);\n      } else {\n        setTimeout(() => {\n          cb(true);\n        }, 0);\n        if (dispose) dispose();\n      }\n    };\n    const isDragging = appStore.getState().state.ui.isDragging;\n    processDragging(isDragging);\n    if (isDragging) {\n      dispose = appStore.subscribe(\n        (s) => s.state.ui.isDragging,\n        (isDragging2) => {\n          processDragging(isDragging2);\n        }\n      );\n    }\n    return dispose;\n  }, [appStore, ...deps]);\n};\n\n// components/DraggableComponent/index.tsx\n\nvar getClassName16 = get_class_name_factory_default(\"DraggableComponent\", styles_module_default10);\nvar DEBUG2 = false;\nvar space = 8;\nvar actionsOverlayTop = space * 6.5;\nvar actionsTop = -(actionsOverlayTop - 8);\nvar actionsSide = space;\nvar DefaultActionBar = ({\n  label,\n  children,\n  parentAction\n}) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(ActionBar, { children: [\n  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(ActionBar.Group, { children: [\n    parentAction,\n    label && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ActionBar.Label, { label })\n  ] }),\n  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ActionBar.Group, { children })\n] });\nvar DefaultOverlay = ({\n  children\n}) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children });\nvar DraggableComponent = ({\n  children,\n  depth,\n  componentType,\n  id,\n  index,\n  zoneCompound,\n  isLoading = false,\n  isSelected = false,\n  debug,\n  label,\n  autoDragAxis,\n  userDragAxis,\n  inDroppableZone = true\n}) => {\n  const zoom = useAppStore(\n    (s) => {\n      var _a;\n      return ((_a = s.selectedItem) == null ? void 0 : _a.props.id) === id ? s.zoomConfig.zoom : 1;\n    }\n  );\n  const overrides = useAppStore((s) => s.overrides);\n  const dispatch = useAppStore((s) => s.dispatch);\n  const iframe = useAppStore((s) => s.iframe);\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(dropZoneContext);\n  const [localZones, setLocalZones] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({});\n  const registerLocalZone = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (zoneCompound2, active) => {\n      var _a;\n      (_a = ctx == null ? void 0 : ctx.registerLocalZone) == null ? void 0 : _a.call(ctx, zoneCompound2, active);\n      setLocalZones((obj) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, obj), {\n        [zoneCompound2]: active\n      }));\n    },\n    [setLocalZones]\n  );\n  const unregisterLocalZone = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (zoneCompound2) => {\n      var _a;\n      (_a = ctx == null ? void 0 : ctx.unregisterLocalZone) == null ? void 0 : _a.call(ctx, zoneCompound2);\n      setLocalZones((obj) => {\n        const newLocalZones = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, obj);\n        delete newLocalZones[zoneCompound2];\n        return newLocalZones;\n      });\n    },\n    [setLocalZones]\n  );\n  const containsActiveZone = Object.values(localZones).filter(Boolean).length > 0;\n  const path = useAppStore((0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n    var _a;\n    return (_a = s.state.indexes.nodes[id]) == null ? void 0 : _a.path;\n  }));\n  const permissions = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n      const item = getItem({ index, zone: zoneCompound }, s.state);\n      return s.permissions.getPermissions({ item });\n    })\n  );\n  const zoneStore = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ZoneStoreContext);\n  const [dragAxis, setDragAxis] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(userDragAxis || autoDragAxis);\n  const dynamicCollisionDetector = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => createDynamicCollisionDetector(dragAxis),\n    [dragAxis]\n  );\n  const {\n    ref: sortableRef,\n    isDragging: thisIsDragging,\n    sortable\n  } = (0,_dnd_kit_react_sortable__WEBPACK_IMPORTED_MODULE_12__.useSortable)({\n    id,\n    index,\n    group: zoneCompound,\n    type: \"component\",\n    data: {\n      areaId: ctx == null ? void 0 : ctx.areaId,\n      zone: zoneCompound,\n      index,\n      componentType,\n      containsActiveZone,\n      depth,\n      path: path || [],\n      inDroppableZone\n    },\n    collisionPriority: depth,\n    collisionDetector: dynamicCollisionDetector,\n    // \"Out of the way\" transition from react-beautiful-dnd\n    transition: {\n      duration: 200,\n      easing: \"cubic-bezier(0.2, 0, 0, 1)\"\n    },\n    feedback: \"clone\"\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const isEnabled = zoneStore.getState().enabledIndex[zoneCompound];\n    sortable.droppable.disabled = !isEnabled;\n    sortable.draggable.disabled = !permissions.drag;\n    const cleanup = zoneStore.subscribe((s) => {\n      sortable.droppable.disabled = !s.enabledIndex[zoneCompound];\n    });\n    if (ref.current && !permissions.drag) {\n      ref.current.setAttribute(\"data-puck-disabled\", \"\");\n      return () => {\n        var _a;\n        (_a = ref.current) == null ? void 0 : _a.removeAttribute(\"data-puck-disabled\");\n        cleanup();\n      };\n    }\n    return cleanup;\n  }, [permissions.drag, zoneCompound]);\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const refSetter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (el) => {\n      sortableRef(el);\n      if (el) {\n        ref.current = el;\n      }\n    },\n    [sortableRef]\n  );\n  const [portalEl, setPortalEl] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a, _b, _c;\n    setPortalEl(\n      iframe.enabled ? (_a = ref.current) == null ? void 0 : _a.ownerDocument.body : (_c = (_b = ref.current) == null ? void 0 : _b.closest(\"[data-puck-preview]\")) != null ? _c : document.body\n    );\n  }, [iframe.enabled, ref.current]);\n  const getStyle = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    var _a, _b, _c;\n    if (!ref.current) return;\n    const rect = ref.current.getBoundingClientRect();\n    const deepScrollPosition = getDeepScrollPosition(ref.current);\n    const portalContainerEl = iframe.enabled ? null : (_a = ref.current) == null ? void 0 : _a.closest(\"[data-puck-preview]\");\n    const portalContainerRect = portalContainerEl == null ? void 0 : portalContainerEl.getBoundingClientRect();\n    const portalScroll = portalContainerEl ? getDeepScrollPosition(portalContainerEl) : { x: 0, y: 0 };\n    const scroll = {\n      x: deepScrollPosition.x - portalScroll.x - ((_b = portalContainerRect == null ? void 0 : portalContainerRect.left) != null ? _b : 0),\n      y: deepScrollPosition.y - portalScroll.y - ((_c = portalContainerRect == null ? void 0 : portalContainerRect.top) != null ? _c : 0)\n    };\n    const untransformed = {\n      height: ref.current.offsetHeight,\n      width: ref.current.offsetWidth\n    };\n    const transform = accumulateTransform(ref.current);\n    const style2 = {\n      left: `${(rect.left + scroll.x) / transform.scaleX}px`,\n      top: `${(rect.top + scroll.y) / transform.scaleY}px`,\n      height: `${untransformed.height}px`,\n      width: `${untransformed.width}px`\n    };\n    return style2;\n  }, [ref.current]);\n  const [style, setStyle] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  const sync = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setStyle(getStyle());\n  }, [ref.current, iframe]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (ref.current) {\n      const observer = new ResizeObserver(sync);\n      observer.observe(ref.current);\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [ref.current]);\n  const registerNode = useAppStore((s) => s.nodes.registerNode);\n  const hideOverlay = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setIsVisible(false);\n  }, []);\n  const showOverlay = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    setIsVisible(true);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a;\n    registerNode(id, {\n      methods: { sync, showOverlay, hideOverlay },\n      element: (_a = ref.current) != null ? _a : null\n    });\n    return () => {\n      registerNode(id, {\n        methods: {\n          sync: () => null,\n          hideOverlay: () => null,\n          showOverlay: () => null\n        },\n        element: null\n      });\n    };\n  }, [id, zoneCompound, index, componentType, sync]);\n  const CustomActionBar = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => overrides.actionBar || DefaultActionBar,\n    [overrides.actionBar]\n  );\n  const CustomOverlay = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => overrides.componentOverlay || DefaultOverlay,\n    [overrides.componentOverlay]\n  );\n  const onClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (e) => {\n      const el = e.target;\n      if (!el.closest(\"[data-puck-overlay-portal]\")) {\n        e.stopPropagation();\n      }\n      dispatch({\n        type: \"setUi\",\n        ui: {\n          itemSelector: { index, zone: zoneCompound }\n        }\n      });\n    },\n    [index, zoneCompound, id]\n  );\n  const appStore = useAppStoreApi();\n  const onSelectParent = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    const { nodes, zones } = appStore.getState().state.indexes;\n    const node = nodes[id];\n    const parentNode = (node == null ? void 0 : node.parentId) ? nodes[node == null ? void 0 : node.parentId] : null;\n    if (!parentNode || !node.parentId) {\n      return;\n    }\n    const parentZoneCompound = `${parentNode.parentId}:${parentNode.zone}`;\n    const parentIndex = zones[parentZoneCompound].contentIds.indexOf(\n      node.parentId\n    );\n    dispatch({\n      type: \"setUi\",\n      ui: {\n        itemSelector: {\n          zone: parentZoneCompound,\n          index: parentIndex\n        }\n      }\n    });\n  }, [ctx, path]);\n  const onDuplicate = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    dispatch({\n      type: \"duplicate\",\n      sourceIndex: index,\n      sourceZone: zoneCompound\n    });\n  }, [index, zoneCompound]);\n  const onDelete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    dispatch({\n      type: \"remove\",\n      index,\n      zone: zoneCompound\n    });\n  }, [index, zoneCompound]);\n  const [hover, setHover] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const indicativeHover = useContextStore(\n    ZoneStoreContext,\n    (s) => s.hoveringComponent === id\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!ref.current) {\n      return;\n    }\n    const el = ref.current;\n    const _onMouseOver = (e) => {\n      const userIsDragging = !!zoneStore.getState().draggedItem;\n      if (userIsDragging) {\n        if (thisIsDragging) {\n          setHover(true);\n        } else {\n          setHover(false);\n        }\n      } else {\n        setHover(true);\n      }\n      e.stopPropagation();\n    };\n    const _onMouseOut = (e) => {\n      e.stopPropagation();\n      setHover(false);\n    };\n    el.setAttribute(\"data-puck-component\", id);\n    el.setAttribute(\"data-puck-dnd\", id);\n    el.style.position = \"relative\";\n    el.addEventListener(\"click\", onClick);\n    el.addEventListener(\"mouseover\", _onMouseOver);\n    el.addEventListener(\"mouseout\", _onMouseOut);\n    return () => {\n      el.removeAttribute(\"data-puck-component\");\n      el.removeAttribute(\"data-puck-dnd\");\n      el.removeEventListener(\"click\", onClick);\n      el.removeEventListener(\"mouseover\", _onMouseOver);\n      el.removeEventListener(\"mouseout\", _onMouseOut);\n    };\n  }, [\n    ref.current,\n    // Remount attributes if the element changes\n    onClick,\n    containsActiveZone,\n    zoneCompound,\n    id,\n    thisIsDragging,\n    inDroppableZone\n  ]);\n  const [isVisible, setIsVisible] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [dragFinished, setDragFinished] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n  const [_, startTransition] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useTransition)();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    startTransition(() => {\n      if (hover || indicativeHover || isSelected) {\n        sync();\n        setIsVisible(true);\n        setThisWasDragging(false);\n      } else {\n        setIsVisible(false);\n      }\n    });\n  }, [hover, indicativeHover, isSelected, iframe]);\n  const [thisWasDragging, setThisWasDragging] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const onDragFinished = useOnDragFinished((finished) => {\n    if (finished) {\n      startTransition(() => {\n        sync();\n        setDragFinished(true);\n      });\n    } else {\n      setDragFinished(false);\n    }\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (thisIsDragging) {\n      setThisWasDragging(true);\n    }\n  }, [thisIsDragging]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (thisWasDragging) return onDragFinished();\n  }, [thisWasDragging, onDragFinished]);\n  const syncActionsPosition = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (el) => {\n      if (el) {\n        const view = el.ownerDocument.defaultView;\n        if (view) {\n          const rect = el.getBoundingClientRect();\n          const diffLeft = rect.x;\n          const exceedsBoundsLeft = diffLeft < 0;\n          const diffTop = rect.y;\n          const exceedsBoundsTop = diffTop < 0;\n          if (exceedsBoundsLeft) {\n            el.style.transformOrigin = \"left top\";\n            el.style.left = \"0px\";\n          }\n          if (exceedsBoundsTop) {\n            el.style.top = \"12px\";\n            if (!exceedsBoundsLeft) {\n              el.style.transformOrigin = \"right top\";\n            }\n          }\n        }\n      }\n    },\n    [zoom]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (userDragAxis) {\n      setDragAxis(userDragAxis);\n      return;\n    }\n    if (ref.current) {\n      const computedStyle = window.getComputedStyle(ref.current);\n      if (computedStyle.display === \"inline\" || computedStyle.display === \"inline-block\") {\n        setDragAxis(\"x\");\n        return;\n      }\n    }\n    setDragAxis(autoDragAxis);\n  }, [ref, userDragAxis, autoDragAxis]);\n  const parentAction = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (ctx == null ? void 0 : ctx.areaId) && (ctx == null ? void 0 : ctx.areaId) !== \"root\" && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ActionBar.Action, { onClick: onSelectParent, label: \"Select parent\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CornerLeftUp, { size: 16 }) }),\n    [ctx == null ? void 0 : ctx.areaId]\n  );\n  const nextContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, ctx), {\n      areaId: id,\n      zoneCompound,\n      index,\n      depth: depth + 1,\n      registerLocalZone,\n      unregisterLocalZone\n    }),\n    [\n      ctx,\n      id,\n      zoneCompound,\n      index,\n      depth,\n      registerLocalZone,\n      unregisterLocalZone\n    ]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(DropZoneProvider, { value: nextContextValue, children: [\n    dragFinished && isVisible && (0,react_dom__WEBPACK_IMPORTED_MODULE_13__.createPortal)(\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n        \"div\",\n        {\n          className: getClassName16({\n            isSelected,\n            isDragging: thisIsDragging,\n            hover: hover || indicativeHover\n          }),\n          style: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, style),\n          \"data-puck-overlay\": true,\n          children: [\n            debug,\n            isLoading && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName16(\"loadingOverlay\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, {}) }),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n              \"div\",\n              {\n                className: getClassName16(\"actionsOverlay\"),\n                style: {\n                  top: actionsOverlayTop / zoom\n                },\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                  \"div\",\n                  {\n                    className: getClassName16(\"actions\"),\n                    style: {\n                      transform: `scale(${1 / zoom}`,\n                      top: actionsTop / zoom,\n                      right: 0,\n                      paddingLeft: actionsSide,\n                      paddingRight: actionsSide\n                    },\n                    ref: syncActionsPosition,\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n                      CustomActionBar,\n                      {\n                        parentAction,\n                        label: DEBUG2 ? id : label,\n                        children: [\n                          permissions.duplicate && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ActionBar.Action, { onClick: onDuplicate, label: \"Duplicate\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Copy, { size: 16 }) }),\n                          permissions.delete && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ActionBar.Action, { onClick: onDelete, label: \"Delete\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Trash, { size: 16 }) })\n                        ]\n                      }\n                    )\n                  }\n                )\n              }\n            ),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName16(\"overlayWrapper\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n              CustomOverlay,\n              {\n                componentId: id,\n                componentType,\n                hover,\n                isSelected,\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName16(\"overlay\") })\n              }\n            ) })\n          ]\n        }\n      ),\n      portalEl || document.body\n    ),\n    children(refSetter)\n  ] });\n};\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/DropZone/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default11 = { \"DropZone\": \"_DropZone_1i2sv_1\", \"DropZone--hasChildren\": \"_DropZone--hasChildren_1i2sv_11\", \"DropZone--isAreaSelected\": \"_DropZone--isAreaSelected_1i2sv_24\", \"DropZone--hoveringOverArea\": \"_DropZone--hoveringOverArea_1i2sv_25\", \"DropZone--isRootZone\": \"_DropZone--isRootZone_1i2sv_25\", \"DropZone--isDestination\": \"_DropZone--isDestination_1i2sv_35\", \"DropZone-item\": \"_DropZone-item_1i2sv_47\", \"DropZone-hitbox\": \"_DropZone-hitbox_1i2sv_51\", \"DropZone--isEnabled\": \"_DropZone--isEnabled_1i2sv_59\", \"DropZone--isAnimating\": \"_DropZone--isAnimating_1i2sv_68\" };\n\n// components/DropZone/index.tsx\n\n\n// components/Drawer/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Drawer/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default12 = { \"Drawer\": \"_Drawer_pl7z0_1\", \"Drawer-draggable\": \"_Drawer-draggable_pl7z0_8\", \"Drawer-draggableBg\": \"_Drawer-draggableBg_pl7z0_12\", \"DrawerItem-draggable\": \"_DrawerItem-draggable_pl7z0_22\", \"DrawerItem--disabled\": \"_DrawerItem--disabled_pl7z0_35\", \"DrawerItem\": \"_DrawerItem_pl7z0_22\", \"Drawer--isDraggingFrom\": \"_Drawer--isDraggingFrom_pl7z0_45\", \"DrawerItem-name\": \"_DrawerItem-name_pl7z0_63\" };\n\n// components/Drawer/index.tsx\n\n\n// components/DragDropContext/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\n\n// lib/dnd/NestedDroppablePlugin.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/throttle.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction timeout2(callback, duration) {\n  const id = setTimeout(callback, duration);\n  return () => clearTimeout(id);\n}\nfunction throttle(func, limit) {\n  const time = () => performance.now();\n  let cancel;\n  let lastRan = 0;\n  return function(...args) {\n    const now = time();\n    const context = this;\n    if (now - lastRan >= limit) {\n      func.apply(context, args);\n      lastRan = now;\n    } else {\n      cancel == null ? void 0 : cancel();\n      cancel = timeout2(() => {\n        func.apply(context, args);\n        lastRan = time();\n      }, limit - (now - lastRan));\n    }\n  };\n}\n\n// lib/get-frame.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar getFrame = () => {\n  if (typeof window === \"undefined\") return;\n  let frameEl = document.querySelector(\"#preview-frame\");\n  if ((frameEl == null ? void 0 : frameEl.tagName) === \"IFRAME\") {\n    return frameEl.contentDocument || document;\n  }\n  return (frameEl == null ? void 0 : frameEl.ownerDocument) || document;\n};\n\n// lib/global-position.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar GlobalPosition = class {\n  constructor(target, original) {\n    this.scaleFactor = 1;\n    this.frameEl = null;\n    this.frameRect = null;\n    var _a;\n    this.target = target;\n    this.original = original;\n    this.frameEl = document.querySelector(\"iframe#preview-frame\");\n    if (this.frameEl) {\n      this.frameRect = this.frameEl.getBoundingClientRect();\n      this.scaleFactor = this.frameRect.width / (((_a = this.frameEl.contentWindow) == null ? void 0 : _a.innerWidth) || 1);\n    }\n  }\n  get x() {\n    return this.original.x;\n  }\n  get y() {\n    return this.original.y;\n  }\n  get global() {\n    if (document !== this.target.ownerDocument && this.frameRect) {\n      return {\n        x: this.x * this.scaleFactor + this.frameRect.left,\n        y: this.y * this.scaleFactor + this.frameRect.top\n      };\n    }\n    return this.original;\n  }\n  get frame() {\n    if (document === this.target.ownerDocument && this.frameRect) {\n      return {\n        x: (this.x - this.frameRect.left) / this.scaleFactor,\n        y: (this.y - this.frameRect.top) / this.scaleFactor\n      };\n    }\n    return this.original;\n  }\n};\n\n// lib/bubble-pointer-event.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar BaseEvent = typeof PointerEvent !== \"undefined\" ? PointerEvent : Event;\nvar BubbledPointerEvent = class extends BaseEvent {\n  constructor(type, data) {\n    super(type, data);\n    this._originalTarget = null;\n    this.originalTarget = data.originalTarget;\n  }\n  // Necessary for Firefox\n  set originalTarget(target) {\n    this._originalTarget = target;\n  }\n  // Necessary for Firefox\n  get originalTarget() {\n    return this._originalTarget;\n  }\n};\n\n// lib/dnd/NestedDroppablePlugin.ts\nvar depthSort = (candidates) => {\n  return candidates.sort((a, b) => {\n    const aData = a.data;\n    const bData = b.data;\n    if (aData.depth > bData.depth) {\n      return 1;\n    }\n    if (bData.depth > aData.depth) {\n      return -1;\n    }\n    return 0;\n  });\n};\nvar getZoneId = (candidate) => {\n  let id = candidate == null ? void 0 : candidate.id;\n  if (!candidate) return null;\n  if (candidate.type === \"component\") {\n    const data = candidate.data;\n    if (data.containsActiveZone) {\n      id = null;\n    } else {\n      id = data.zone;\n    }\n  } else if (candidate.type === \"void\") {\n    return \"void\";\n  }\n  return id;\n};\nvar BUFFER = 6;\nvar getPointerCollisions = (position, manager) => {\n  const candidates = [];\n  let elements = position.target.ownerDocument.elementsFromPoint(\n    position.x,\n    position.y\n  );\n  const previewFrame = elements.find(\n    (el) => el.getAttribute(\"data-puck-preview\")\n  );\n  const drawer = elements.find((el) => el.getAttribute(\"data-puck-drawer\"));\n  if (drawer) {\n    elements = [drawer];\n  }\n  if (previewFrame) {\n    const frame = getFrame();\n    if (frame) {\n      elements = frame.elementsFromPoint(position.frame.x, position.frame.y);\n    }\n  }\n  if (elements) {\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      const dropzoneId = element.getAttribute(\"data-puck-dropzone\");\n      const id = element.getAttribute(\"data-puck-dnd\");\n      const isVoid = element.hasAttribute(\"data-puck-dnd-void\");\n      if (BUFFER && (dropzoneId || id) && !isVoid) {\n        const box = element.getBoundingClientRect();\n        const contractedBox = {\n          left: box.left + BUFFER,\n          right: box.right - BUFFER,\n          top: box.top + BUFFER,\n          bottom: box.bottom - BUFFER\n        };\n        if (position.frame.x < contractedBox.left || position.frame.x > contractedBox.right || position.frame.y > contractedBox.bottom || position.frame.y < contractedBox.top) {\n          continue;\n        }\n      }\n      if (dropzoneId) {\n        const droppable = manager.registry.droppables.get(dropzoneId);\n        if (droppable) {\n          candidates.push(droppable);\n        }\n      }\n      if (id) {\n        const droppable = manager.registry.droppables.get(id);\n        if (droppable) {\n          candidates.push(droppable);\n        }\n      }\n    }\n  }\n  return candidates;\n};\nvar findDeepestCandidate = (position, manager) => {\n  var _a;\n  const candidates = getPointerCollisions(position, manager);\n  if (candidates.length > 0) {\n    const sortedCandidates = depthSort(candidates);\n    const draggable = manager.dragOperation.source;\n    const draggedCandidateIndex = sortedCandidates.findIndex(\n      (candidate) => candidate.id === (draggable == null ? void 0 : draggable.id)\n    );\n    const draggedCandidateId = draggable == null ? void 0 : draggable.id;\n    let filteredCandidates = [...sortedCandidates];\n    if (draggedCandidateId && draggedCandidateIndex > -1) {\n      filteredCandidates.splice(draggedCandidateIndex, 1);\n    }\n    filteredCandidates = filteredCandidates.filter((candidate) => {\n      const candidateData = candidate.data;\n      if (draggedCandidateId && draggedCandidateIndex > -1) {\n        if (candidateData.path.indexOf(draggedCandidateId) > -1) {\n          return false;\n        }\n      }\n      if (candidate.type === \"dropzone\") {\n        const candidateData2 = candidate.data;\n        if (!candidateData2.isDroppableTarget) {\n          return false;\n        }\n        if (candidateData2.areaId === draggedCandidateId) {\n          return false;\n        }\n      } else if (candidate.type === \"component\") {\n        const candidateData2 = candidate.data;\n        if (!candidateData2.inDroppableZone) {\n          return false;\n        }\n      }\n      return true;\n    });\n    filteredCandidates.reverse();\n    const primaryCandidate = filteredCandidates[0];\n    if (!primaryCandidate) return { zone: null, area: null };\n    const primaryCandidateData = primaryCandidate.data;\n    const primaryCandidateIsComponent = \"containsActiveZone\" in primaryCandidateData;\n    const zone = getZoneId(primaryCandidate);\n    const area = primaryCandidateIsComponent && primaryCandidateData.containsActiveZone ? filteredCandidates[0].id : (_a = filteredCandidates[0]) == null ? void 0 : _a.data.areaId;\n    return { zone, area };\n  }\n  return {\n    zone: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId,\n    area: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootAreaId\n  };\n};\nvar createNestedDroppablePlugin = ({ onChange }, id) => class NestedDroppablePlugin extends _dnd_kit_abstract__WEBPACK_IMPORTED_MODULE_8__.Plugin {\n  constructor(manager, options) {\n    super(manager);\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    this.registerEffect(() => {\n      const handleMove = (event) => {\n        const target = event instanceof BubbledPointerEvent ? event.originalTarget || event.target : event.target;\n        const position = new GlobalPosition(target, {\n          x: event.clientX,\n          y: event.clientY\n        });\n        const elements = document.elementsFromPoint(\n          position.global.x,\n          position.global.y\n        );\n        const overEl = elements.some((el) => el.id === id);\n        if (overEl) {\n          onChange(findDeepestCandidate(position, manager), manager);\n        }\n      };\n      const handleMoveThrottled = throttle(handleMove, 50);\n      const handlePointerMove = (event) => {\n        handleMoveThrottled(event);\n      };\n      document.body.addEventListener(\"pointermove\", handlePointerMove, {\n        capture: true\n        // dndkit's PointerSensor prevents propagation during drag\n      });\n      const cleanup = () => {\n        document.body.removeEventListener(\"pointermove\", handlePointerMove, {\n          capture: true\n        });\n      };\n      return cleanup;\n    });\n  }\n};\n\n// lib/insert-component.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar insertComponent = (componentType, zone, index, appStore) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n  const id = generateId(componentType);\n  const insertActionData = {\n    type: \"insert\",\n    componentType,\n    destinationIndex: index,\n    destinationZone: zone,\n    id\n  };\n  const { state, dispatch, resolveComponentData: resolveComponentData2 } = appStore;\n  const insertedState = insertAction(state, insertActionData, appStore);\n  dispatch((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, insertActionData), {\n    // Dispatch insert rather set, as user's may rely on this via onAction\n    // We must always record history here so the insert is added to user history\n    // If the user has defined a resolveData method, they will end up with 2 history\n    // entries on insert - one for the initial insert, and one when the data resolves\n    recordHistory: true\n  }));\n  const itemSelector = {\n    index,\n    zone\n  };\n  dispatch({ type: \"setUi\", ui: { itemSelector } });\n  const itemData = getItem(itemSelector, insertedState);\n  if (itemData) {\n    const resolved = yield resolveComponentData2(itemData, \"insert\");\n    if (resolved.didChange) {\n      dispatch({\n        type: \"replace\",\n        destinationZone: itemSelector.zone,\n        destinationIndex: itemSelector.index,\n        data: resolved.node\n      });\n    }\n  }\n});\n\n// components/DragDropContext/index.tsx\n\n\n\n// lib/get-deep-dir.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction getDeepDir(el) {\n  function findDir(node) {\n    if (!node) return \"ltr\";\n    const d = node.getAttribute(\"dir\");\n    return d || findDir(node.parentElement);\n  }\n  return el ? findDir(el) : \"ltr\";\n}\n\n// components/DragDropContext/index.tsx\n\n\nvar DEBUG3 = false;\nvar dragListenerContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({\n  dragListeners: {}\n});\nfunction useDragListener(type, fn, deps = []) {\n  const { setDragListeners } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(dragListenerContext);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (setDragListeners) {\n      setDragListeners((old) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, old), {\n        [type]: [...old[type] || [], fn]\n      }));\n    }\n  }, deps);\n}\nvar AREA_CHANGE_DEBOUNCE_MS = 100;\nvar useTempDisableFallback = (timeout3) => {\n  const lastFallbackDisable = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((manager) => {\n    collisionStore.setState({ fallbackEnabled: false });\n    const fallbackId = generateId();\n    lastFallbackDisable.current = fallbackId;\n    setTimeout(() => {\n      if (lastFallbackDisable.current === fallbackId) {\n        collisionStore.setState({ fallbackEnabled: true });\n        manager.collisionObserver.forceUpdate(true);\n      }\n    }, timeout3);\n  }, []);\n};\nvar DragDropContextClient = ({\n  children,\n  disableAutoScroll\n}) => {\n  const dispatch = useAppStore((s) => s.dispatch);\n  const appStore = useAppStoreApi();\n  const id = useSafeId();\n  const debouncedParamsRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const tempDisableFallback = useTempDisableFallback(100);\n  const [zoneStore] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    () => (0,zustand_vanilla__WEBPACK_IMPORTED_MODULE_10__.createStore)(() => ({\n      zoneDepthIndex: {},\n      nextZoneDepthIndex: {},\n      areaDepthIndex: {},\n      nextAreaDepthIndex: {},\n      draggedItem: null,\n      previewIndex: {},\n      enabledIndex: {},\n      hoveringComponent: null\n    }))\n  );\n  const getChanged2 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (params, id2) => {\n      const { zoneDepthIndex = {}, areaDepthIndex = {} } = zoneStore.getState() || {};\n      const stateHasZone = Object.keys(zoneDepthIndex).length > 0;\n      const stateHasArea = Object.keys(areaDepthIndex).length > 0;\n      let zoneChanged = false;\n      let areaChanged = false;\n      if (params.zone && !zoneDepthIndex[params.zone]) {\n        zoneChanged = true;\n      } else if (!params.zone && stateHasZone) {\n        zoneChanged = true;\n      }\n      if (params.area && !areaDepthIndex[params.area]) {\n        areaChanged = true;\n      } else if (!params.area && stateHasArea) {\n        areaChanged = true;\n      }\n      return { zoneChanged, areaChanged };\n    },\n    [zoneStore]\n  );\n  const setDeepestAndCollide = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (params, manager) => {\n      const { zoneChanged, areaChanged } = getChanged2(params, id);\n      if (!zoneChanged && !areaChanged) return;\n      zoneStore.setState({\n        zoneDepthIndex: params.zone ? { [params.zone]: true } : {},\n        areaDepthIndex: params.area ? { [params.area]: true } : {}\n      });\n      tempDisableFallback(manager);\n      setTimeout(() => {\n        manager.collisionObserver.forceUpdate(true);\n      }, 50);\n      debouncedParamsRef.current = null;\n    },\n    [zoneStore]\n  );\n  const setDeepestDb = (0,use_debounce__WEBPACK_IMPORTED_MODULE_15__.useDebouncedCallback)(\n    setDeepestAndCollide,\n    AREA_CHANGE_DEBOUNCE_MS\n  );\n  const cancelDb = () => {\n    setDeepestDb.cancel();\n    debouncedParamsRef.current = null;\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (DEBUG3) {\n      zoneStore.subscribe(\n        (s) => {\n          var _a, _b;\n          return console.log(\n            s.previewIndex,\n            (_a = Object.entries(s.zoneDepthIndex || {})[0]) == null ? void 0 : _a[0],\n            (_b = Object.entries(s.areaDepthIndex || {})[0]) == null ? void 0 : _b[0]\n          );\n        }\n      );\n    }\n  }, []);\n  const [plugins] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => [\n    ...disableAutoScroll ? _dnd_kit_react__WEBPACK_IMPORTED_MODULE_6__.defaultPreset.plugins.filter((plugin) => plugin !== _dnd_kit_react__WEBPACK_IMPORTED_MODULE_6__.AutoScroller) : _dnd_kit_react__WEBPACK_IMPORTED_MODULE_6__.defaultPreset.plugins,\n    createNestedDroppablePlugin(\n      {\n        onChange: (params, manager) => {\n          const state = zoneStore.getState();\n          const { zoneChanged, areaChanged } = getChanged2(params, id);\n          const isDragging = manager.dragOperation.status.dragging;\n          if (areaChanged || zoneChanged) {\n            let nextZoneDepthIndex = {};\n            let nextAreaDepthIndex = {};\n            if (params.zone) {\n              nextZoneDepthIndex = { [params.zone]: true };\n            }\n            if (params.area) {\n              nextAreaDepthIndex = { [params.area]: true };\n            }\n            zoneStore.setState({ nextZoneDepthIndex, nextAreaDepthIndex });\n          }\n          if (params.zone !== \"void\" && (state == null ? void 0 : state.zoneDepthIndex[\"void\"])) {\n            setDeepestAndCollide(params, manager);\n            return;\n          }\n          if (areaChanged) {\n            if (isDragging) {\n              const debouncedParams = debouncedParamsRef.current;\n              const isSameParams = debouncedParams && debouncedParams.area === params.area && debouncedParams.zone === params.zone;\n              if (!isSameParams) {\n                cancelDb();\n                setDeepestDb(params, manager);\n                debouncedParamsRef.current = params;\n              }\n            } else {\n              cancelDb();\n              setDeepestAndCollide(params, manager);\n            }\n            return;\n          }\n          if (zoneChanged) {\n            setDeepestAndCollide(params, manager);\n          }\n          cancelDb();\n        }\n      },\n      id\n    )\n  ]);\n  const sensors = useSensors();\n  const [dragListeners, setDragListeners] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({});\n  const dragMode = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const initialSelector = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(void 0);\n  const nextContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      mode: \"edit\",\n      areaId: \"root\",\n      depth: 0\n    }),\n    []\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { id, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    dragListenerContext.Provider,\n    {\n      value: {\n        dragListeners,\n        setDragListeners\n      },\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        _dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__.DragDropProvider,\n        {\n          plugins,\n          sensors,\n          onDragEnd: (event, manager) => {\n            var _a, _b;\n            const entryEl = (_a = getFrame()) == null ? void 0 : _a.querySelector(\"[data-puck-entry]\");\n            entryEl == null ? void 0 : entryEl.removeAttribute(\"data-puck-dragging\");\n            const { source, target } = event.operation;\n            if (!source) {\n              zoneStore.setState({ draggedItem: null });\n              return;\n            }\n            const { zone, index } = source.data;\n            const { previewIndex = {} } = zoneStore.getState() || {};\n            const thisPreview = ((_b = previewIndex[zone]) == null ? void 0 : _b.props.id) === source.id ? previewIndex[zone] : null;\n            const onAnimationEnd = () => {\n              var _a2, _b2;\n              zoneStore.setState({ draggedItem: null });\n              if (event.canceled || (target == null ? void 0 : target.type) === \"void\") {\n                zoneStore.setState({ previewIndex: {} });\n                (_a2 = dragListeners.dragend) == null ? void 0 : _a2.forEach((fn) => {\n                  fn(event, manager);\n                });\n                dispatch({\n                  type: \"setUi\",\n                  ui: {\n                    itemSelector: null,\n                    isDragging: false\n                  }\n                });\n                return;\n              }\n              if (thisPreview) {\n                zoneStore.setState({ previewIndex: {} });\n                if (thisPreview.type === \"insert\") {\n                  insertComponent(\n                    thisPreview.componentType,\n                    thisPreview.zone,\n                    thisPreview.index,\n                    appStore.getState()\n                  );\n                } else if (initialSelector.current) {\n                  dispatch({\n                    type: \"move\",\n                    sourceIndex: initialSelector.current.index,\n                    sourceZone: initialSelector.current.zone,\n                    destinationIndex: thisPreview.index,\n                    destinationZone: thisPreview.zone,\n                    recordHistory: false\n                  });\n                }\n              }\n              dispatch({\n                type: \"setUi\",\n                ui: {\n                  itemSelector: { index, zone },\n                  isDragging: false\n                },\n                recordHistory: true\n              });\n              (_b2 = dragListeners.dragend) == null ? void 0 : _b2.forEach((fn) => {\n                fn(event, manager);\n              });\n            };\n            let dispose;\n            dispose = (0,_dnd_kit_state__WEBPACK_IMPORTED_MODULE_16__.effect)(() => {\n              if (source.status === \"idle\") {\n                onAnimationEnd();\n                dispose == null ? void 0 : dispose();\n              }\n            });\n          },\n          onDragOver: (event, manager) => {\n            var _a, _b, _c, _d;\n            event.preventDefault();\n            const draggedItem = (_a = zoneStore.getState()) == null ? void 0 : _a.draggedItem;\n            if (!draggedItem) return;\n            cancelDb();\n            const { source, target } = event.operation;\n            if (!target || !source || target.type === \"void\") return;\n            const [sourceId] = source.id.split(\":\");\n            const [targetId] = target.id.split(\":\");\n            const sourceData = source.data;\n            let sourceZone = sourceData.zone;\n            let sourceIndex = sourceData.index;\n            let targetZone = \"\";\n            let targetIndex = 0;\n            if (target.type === \"component\") {\n              const targetData = target.data;\n              targetZone = targetData.zone;\n              targetIndex = targetData.index;\n              const collisionData = (_b = manager.collisionObserver.collisions[0]) == null ? void 0 : _b.data;\n              const dir = getDeepDir(target.element);\n              const collisionPosition = (collisionData == null ? void 0 : collisionData.direction) === \"up\" || dir === \"ltr\" && (collisionData == null ? void 0 : collisionData.direction) === \"left\" || dir === \"rtl\" && (collisionData == null ? void 0 : collisionData.direction) === \"right\" ? \"before\" : \"after\";\n              if (targetIndex >= sourceIndex && sourceZone === targetZone) {\n                targetIndex = targetIndex - 1;\n              }\n              if (collisionPosition === \"after\") {\n                targetIndex = targetIndex + 1;\n              }\n            } else {\n              targetZone = target.id.toString();\n              targetIndex = 0;\n            }\n            const path = ((_c = appStore.getState().state.indexes.nodes[target.id]) == null ? void 0 : _c.path) || [];\n            if (targetId === sourceId || path.find((path2) => {\n              const [pathId] = path2.split(\":\");\n              return pathId === sourceId;\n            })) {\n              return;\n            }\n            if (dragMode.current === \"new\") {\n              zoneStore.setState({\n                previewIndex: {\n                  [targetZone]: {\n                    componentType: sourceData.componentType,\n                    type: \"insert\",\n                    index: targetIndex,\n                    zone: targetZone,\n                    element: source.element,\n                    props: {\n                      id: source.id.toString()\n                    }\n                  }\n                }\n              });\n            } else {\n              if (!initialSelector.current) {\n                initialSelector.current = {\n                  zone: sourceData.zone,\n                  index: sourceData.index\n                };\n              }\n              const item = getItem(\n                initialSelector.current,\n                appStore.getState().state\n              );\n              if (item) {\n                zoneStore.setState({\n                  previewIndex: {\n                    [targetZone]: {\n                      componentType: sourceData.componentType,\n                      type: \"move\",\n                      index: targetIndex,\n                      zone: targetZone,\n                      props: item.props,\n                      element: source.element\n                    }\n                  }\n                });\n              }\n            }\n            (_d = dragListeners.dragover) == null ? void 0 : _d.forEach((fn) => {\n              fn(event, manager);\n            });\n          },\n          onDragStart: (event, manager) => {\n            var _a;\n            const { source } = event.operation;\n            if (source && source.type !== \"void\") {\n              const sourceData = source.data;\n              const item = getItem(\n                {\n                  zone: sourceData.zone,\n                  index: sourceData.index\n                },\n                appStore.getState().state\n              );\n              if (item) {\n                zoneStore.setState({\n                  previewIndex: {\n                    [sourceData.zone]: {\n                      componentType: sourceData.componentType,\n                      type: \"move\",\n                      index: sourceData.index,\n                      zone: sourceData.zone,\n                      props: item.props,\n                      element: source.element\n                    }\n                  }\n                });\n              }\n            }\n            (_a = dragListeners.dragstart) == null ? void 0 : _a.forEach((fn) => {\n              fn(event, manager);\n            });\n          },\n          onBeforeDragStart: (event) => {\n            var _a, _b, _c, _d;\n            const isNewComponent = ((_a = event.operation.source) == null ? void 0 : _a.type) === \"drawer\";\n            dragMode.current = isNewComponent ? \"new\" : \"existing\";\n            initialSelector.current = void 0;\n            zoneStore.setState({ draggedItem: event.operation.source });\n            if (((_b = appStore.getState().selectedItem) == null ? void 0 : _b.props.id) !== ((_c = event.operation.source) == null ? void 0 : _c.id)) {\n              dispatch({\n                type: \"setUi\",\n                ui: {\n                  itemSelector: null,\n                  isDragging: true\n                },\n                recordHistory: false\n              });\n            } else {\n              dispatch({\n                type: \"setUi\",\n                ui: {\n                  isDragging: true\n                },\n                recordHistory: false\n              });\n            }\n            const entryEl = (_d = getFrame()) == null ? void 0 : _d.querySelector(\"[data-puck-entry]\");\n            entryEl == null ? void 0 : entryEl.setAttribute(\"data-puck-dragging\", \"true\");\n          },\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ZoneStoreProvider, { store: zoneStore, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneProvider, { value: nextContextValue, children }) })\n        }\n      )\n    }\n  ) });\n};\nvar DragDropContext = ({\n  children,\n  disableAutoScroll\n}) => {\n  const status = useAppStore((s) => s.status);\n  if (status === \"LOADING\") {\n    return children;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DragDropContextClient, { disableAutoScroll, children });\n};\n\n// components/Drawer/index.tsx\n\n\nvar getClassName17 = get_class_name_factory_default(\"Drawer\", styles_module_default12);\nvar getClassNameItem2 = get_class_name_factory_default(\"DrawerItem\", styles_module_default12);\nvar DrawerItemInner = ({\n  children,\n  name,\n  label,\n  dragRef,\n  isDragDisabled\n}) => {\n  const CustomInner = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => children || (({ children: children2 }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem2(\"default\"), children: children2 })),\n    [children]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"div\",\n    {\n      className: getClassNameItem2({ disabled: isDragDisabled }),\n      ref: dragRef,\n      onMouseDown: (e) => e.preventDefault(),\n      \"data-testid\": dragRef ? `drawer-item:${name}` : \"\",\n      \"data-puck-drawer-item\": true,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CustomInner, { name, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem2(\"draggableWrapper\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameItem2(\"draggable\"), children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem2(\"name\"), children: label != null ? label : name }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameItem2(\"icon\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DragIcon, {}) })\n      ] }) }) })\n    }\n  );\n};\nvar DrawerItemDraggable = ({\n  children,\n  name,\n  label,\n  id,\n  isDragDisabled\n}) => {\n  const { ref } = (0,_dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__.useDraggable)({\n    id,\n    data: { componentType: name },\n    disabled: isDragDisabled,\n    type: \"drawer\"\n  });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName17(\"draggable\"), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName17(\"draggableBg\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DrawerItemInner, { name, label, children }) }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName17(\"draggableFg\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      DrawerItemInner,\n      {\n        name,\n        label,\n        dragRef: ref,\n        isDragDisabled,\n        children\n      }\n    ) })\n  ] });\n};\nvar DrawerItem = ({\n  name,\n  children,\n  id,\n  label,\n  index,\n  isDragDisabled\n}) => {\n  const resolvedId = id || name;\n  const [dynamicId, setDynamicId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(generateId(resolvedId));\n  if (typeof index !== \"undefined\") {\n    console.error(\n      \"Warning: The `index` prop on Drawer.Item is deprecated and no longer required.\"\n    );\n  }\n  useDragListener(\n    \"dragend\",\n    () => {\n      setDynamicId(generateId(resolvedId));\n    },\n    [resolvedId]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    DrawerItemDraggable,\n    {\n      name,\n      label,\n      id: dynamicId,\n      isDragDisabled,\n      children\n    }\n  ) }, dynamicId);\n};\nvar Drawer = ({\n  children,\n  droppableId,\n  direction\n}) => {\n  if (droppableId) {\n    console.error(\n      \"Warning: The `droppableId` prop on Drawer is deprecated and no longer required.\"\n    );\n  }\n  if (direction) {\n    console.error(\n      \"Warning: The `direction` prop on Drawer is deprecated and no longer required to achieve multi-directional dragging.\"\n    );\n  }\n  const id = useSafeId();\n  const { ref } = (0,_dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__.useDroppable)({\n    id,\n    type: \"void\",\n    collisionPriority: 0\n    // Never collide with this, but we use it so NestedDroppablePlugin respects the Drawer\n  });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"div\",\n    {\n      className: getClassName17(),\n      ref,\n      \"data-puck-dnd\": id,\n      \"data-puck-drawer\": true,\n      \"data-puck-dnd-void\": true,\n      children\n    }\n  );\n};\nDrawer.Item = DrawerItem;\n\n// components/DropZone/lib/use-min-empty-height.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar getNumItems = (appStore, zoneCompound) => appStore.getState().state.indexes.zones[zoneCompound].contentIds.length;\nvar useMinEmptyHeight = ({\n  zoneCompound,\n  userMinEmptyHeight,\n  ref\n}) => {\n  const appStore = useAppStoreApi();\n  const [prevHeight, setPrevHeight] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0);\n  const [isAnimating, setIsAnimating] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const { draggedItem, isZone } = useContextStore(ZoneStoreContext, (s) => {\n    var _a, _b;\n    return {\n      draggedItem: ((_a = s.draggedItem) == null ? void 0 : _a.data.zone) === zoneCompound ? s.draggedItem : null,\n      isZone: ((_b = s.draggedItem) == null ? void 0 : _b.data.zone) === zoneCompound\n    };\n  });\n  const numItems = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n  const onDragFinished = useOnDragFinished(\n    (finished) => {\n      var _a;\n      if (finished) {\n        const newNumItems = getNumItems(appStore, zoneCompound);\n        setPrevHeight(0);\n        if (newNumItems || numItems.current === 0) {\n          setIsAnimating(false);\n          return;\n        }\n        const selectedItem = appStore.getState().selectedItem;\n        const zones = appStore.getState().state.indexes.zones;\n        const nodes = appStore.getState().nodes;\n        (_a = nodes.nodes[selectedItem == null ? void 0 : selectedItem.props.id]) == null ? void 0 : _a.methods.hideOverlay();\n        setTimeout(() => {\n          var _a2;\n          const contentIds = ((_a2 = zones[zoneCompound]) == null ? void 0 : _a2.contentIds) || [];\n          contentIds.forEach((contentId) => {\n            const node = nodes.nodes[contentId];\n            node == null ? void 0 : node.methods.sync();\n          });\n          if (selectedItem) {\n            setTimeout(() => {\n              var _a3, _b;\n              (_a3 = nodes.nodes[selectedItem.props.id]) == null ? void 0 : _a3.methods.sync();\n              (_b = nodes.nodes[selectedItem.props.id]) == null ? void 0 : _b.methods.showOverlay();\n            }, 200);\n          }\n          setIsAnimating(false);\n        }, 100);\n      }\n    },\n    [appStore, prevHeight, zoneCompound]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (draggedItem && ref.current) {\n      if (isZone) {\n        const rect = ref.current.getBoundingClientRect();\n        numItems.current = getNumItems(appStore, zoneCompound);\n        setPrevHeight(rect.height);\n        setIsAnimating(true);\n        return onDragFinished();\n      }\n    }\n  }, [ref.current, draggedItem, onDragFinished]);\n  return [prevHeight || userMinEmptyHeight, isAnimating];\n};\n\n// lib/assign-refs.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction assignRef(ref, node) {\n  if (typeof ref === \"function\") {\n    ref(node);\n  } else if (ref && typeof ref === \"object\" && \"current\" in ref) {\n    ref.current = node;\n  }\n}\nfunction assignRefs(refs, node) {\n  refs.forEach((ref) => {\n    assignRef(ref, node);\n  });\n}\n\n// components/DropZone/lib/use-content-with-preview.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/dnd/use-rendered-callback.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\nfunction useRenderedCallback(callback, deps) {\n  const manager = (0,_dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__.useDragDropManager)();\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (...args) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(this, null, function* () {\n      yield manager == null ? void 0 : manager.renderer.rendering;\n      return callback(...args);\n    }),\n    [...deps, manager]\n  );\n}\n\n// components/DropZone/lib/use-content-with-preview.ts\nvar useContentIdsWithPreview = (contentIds, zoneCompound) => {\n  const zoneStore = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ZoneStoreContext);\n  const preview = useContextStore(\n    ZoneStoreContext,\n    (s) => s.previewIndex[zoneCompound]\n  );\n  const isDragging = useAppStore((s) => s.state.ui.isDragging);\n  const [contentIdsWithPreview, setContentIdsWithPreview] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(contentIds);\n  const [localPreview, setLocalPreview] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    preview\n  );\n  const updateContent = useRenderedCallback(\n    (contentIds2, preview2, isDragging2, draggedItemId, previewExists) => {\n      if (isDragging2 && !previewExists) {\n        return;\n      }\n      if (preview2) {\n        if (preview2.type === \"insert\") {\n          setContentIdsWithPreview(\n            insert(\n              contentIds2.filter((id) => id !== preview2.props.id),\n              preview2.index,\n              preview2.props.id\n            )\n          );\n        } else {\n          setContentIdsWithPreview(\n            insert(\n              contentIds2.filter((id) => id !== preview2.props.id),\n              preview2.index,\n              preview2.props.id\n            )\n          );\n        }\n      } else {\n        setContentIdsWithPreview(\n          previewExists ? contentIds2.filter((id) => id !== draggedItemId) : contentIds2\n        );\n      }\n      setLocalPreview(preview2);\n    },\n    []\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a;\n    const s = zoneStore.getState();\n    const draggedItemId = (_a = s.draggedItem) == null ? void 0 : _a.id;\n    const previewExists = Object.keys(s.previewIndex || {}).length > 0;\n    updateContent(\n      contentIds,\n      preview,\n      isDragging,\n      draggedItemId,\n      previewExists\n    );\n  }, [contentIds, preview, isDragging]);\n  return [contentIdsWithPreview, localPreview];\n};\n\n// components/DropZone/lib/use-drag-axis.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar GRID_DRAG_AXIS = \"dynamic\";\nvar FLEX_ROW_DRAG_AXIS = \"x\";\nvar DEFAULT_DRAG_AXIS = \"y\";\nvar useDragAxis = (ref, collisionAxis) => {\n  const status = useAppStore((s) => s.status);\n  const [dragAxis, setDragAxis] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    collisionAxis || DEFAULT_DRAG_AXIS\n  );\n  const calculateDragAxis = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (ref.current) {\n      const computedStyle = window.getComputedStyle(ref.current);\n      if (computedStyle.display === \"grid\") {\n        setDragAxis(GRID_DRAG_AXIS);\n      } else if (computedStyle.display === \"flex\" && computedStyle.flexDirection === \"row\") {\n        setDragAxis(FLEX_ROW_DRAG_AXIS);\n      } else {\n        setDragAxis(DEFAULT_DRAG_AXIS);\n      }\n    }\n  }, [ref.current]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const onViewportChange = () => {\n      calculateDragAxis();\n    };\n    window.addEventListener(\"viewportchange\", onViewportChange);\n    return () => {\n      window.removeEventListener(\"viewportchange\", onViewportChange);\n    };\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(calculateDragAxis, [status, collisionAxis]);\n  return [dragAxis, calculateDragAxis];\n};\n\n// components/DropZone/index.tsx\n\n\n// components/SlotRender/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\nvar ContextSlotRender = ({\n  componentId,\n  zone\n}) => {\n  const config = useAppStore((s) => s.config);\n  const metadata = useAppStore((s) => s.metadata);\n  const slotContent = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n      var _a, _b;\n      const indexes = s.state.indexes;\n      const contentIds = (_b = (_a = indexes.zones[`${componentId}:${zone}`]) == null ? void 0 : _a.contentIds) != null ? _b : [];\n      return contentIds.map((contentId) => indexes.nodes[contentId].flatData);\n    })\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.SlotRenderPure,\n    {\n      content: slotContent,\n      zone,\n      config,\n      metadata\n    }\n  );\n};\n\n// lib/field-transforms/default-transforms/inline-text-transform.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/InlineTextField/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/overlay-portal/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar registerOverlayPortal = (el, opts = {}) => {\n  if (!el) return;\n  const { disableDrag = false, disableDragOnFocus = true } = opts;\n  const stopPropagation = (e) => {\n    e.stopPropagation();\n  };\n  el.addEventListener(\"mouseover\", stopPropagation, {\n    capture: true\n  });\n  const onFocus = () => {\n    setTimeout(() => {\n      el.addEventListener(\"pointerdown\", stopPropagation, {\n        capture: true\n      });\n    }, 200);\n  };\n  const onBlur = () => {\n    el.removeEventListener(\"pointerdown\", stopPropagation, {\n      capture: true\n    });\n  };\n  if (disableDragOnFocus) {\n    el.addEventListener(\"focus\", onFocus, { capture: true });\n    el.addEventListener(\"blur\", onBlur, { capture: true });\n  } else if (disableDrag) {\n    el.addEventListener(\"pointerdown\", stopPropagation, {\n      capture: true\n    });\n  }\n  el.setAttribute(\"data-puck-overlay-portal\", \"true\");\n  return () => {\n    el.removeEventListener(\"mouseover\", stopPropagation, {\n      capture: true\n    });\n    if (disableDragOnFocus) {\n      el.removeEventListener(\"focus\", onFocus, { capture: true });\n      el.removeEventListener(\"blur\", onFocus, { capture: true });\n    } else if (disableDrag) {\n      el.removeEventListener(\"pointerdown\", stopPropagation, {\n        capture: true\n      });\n    }\n    el.removeAttribute(\"data-puck-overlay-portal\");\n  };\n};\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/InlineTextField/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default13 = { \"InlineTextField\": \"_InlineTextField_1xph6_1\" };\n\n// lib/data/set-deep.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nfunction setDeep(node, path, newVal) {\n  const parts = path.split(\".\");\n  const newNode = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, node);\n  let cur = newNode;\n  for (let i = 0; i < parts.length; i++) {\n    const [prop, idxStr] = parts[i].replace(\"]\", \"\").split(\"[\");\n    const isLast = i === parts.length - 1;\n    if (idxStr !== void 0) {\n      if (!Array.isArray(cur[prop])) {\n        cur[prop] = [];\n      }\n      const idx = Number(idxStr);\n      if (isLast) {\n        cur[prop][idx] = newVal;\n        continue;\n      }\n      if (cur[prop][idx] === void 0) cur[prop][idx] = {};\n      cur = cur[prop][idx];\n      continue;\n    }\n    if (isLast) {\n      cur[prop] = newVal;\n      continue;\n    }\n    if (cur[prop] === void 0) {\n      cur[prop] = {};\n    }\n    cur = cur[prop];\n  }\n  return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, node), newNode);\n}\n\n// lib/get-selector-for-id.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar getSelectorForId = (state, id) => {\n  const node = state.indexes.nodes[id];\n  if (!node) return;\n  const zoneCompound = `${node.parentId}:${node.zone}`;\n  const index = state.indexes.zones[zoneCompound].contentIds.indexOf(id);\n  return { zone: zoneCompound, index };\n};\n\n// components/InlineTextField/index.tsx\n\nvar getClassName18 = get_class_name_factory_default(\"InlineTextField\", styles_module_default13);\nvar InlineTextFieldInternal = ({\n  propPath,\n  componentId,\n  value,\n  isReadOnly,\n  opts = {}\n}) => {\n  var _a;\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const appStoreApi = useAppStoreApi();\n  const disableLineBreaks = (_a = opts.disableLineBreaks) != null ? _a : false;\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const appStore = appStoreApi.getState();\n    const data = appStore.state.indexes.nodes[componentId].data;\n    const componentConfig = appStore.getComponentConfig(data.type);\n    if (!componentConfig) {\n      throw new Error(\n        `InlineTextField Error: No config defined for ${data.type}`\n      );\n    }\n    if (ref.current) {\n      if (value !== ref.current.innerText) {\n        ref.current.replaceChildren(value);\n      }\n      const cleanupPortal = registerOverlayPortal(ref.current);\n      const handleInput = (e) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n        var _a2;\n        const appStore2 = appStoreApi.getState();\n        const node = appStore2.state.indexes.nodes[componentId];\n        const zoneCompound = `${node.parentId}:${node.zone}`;\n        const index = (_a2 = appStore2.state.indexes.zones[zoneCompound]) == null ? void 0 : _a2.contentIds.indexOf(\n          componentId\n        );\n        let value2 = e.target.innerText;\n        if (disableLineBreaks) {\n          value2 = value2.replaceAll(/\\n/gm, \"\");\n        }\n        const newProps = setDeep(node.data.props, propPath, value2);\n        const resolvedData = yield appStore2.resolveComponentData(\n          (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, node.data), { props: newProps }),\n          \"replace\"\n        );\n        appStore2.dispatch({\n          type: \"replace\",\n          data: resolvedData.node,\n          destinationIndex: index,\n          destinationZone: zoneCompound\n        });\n      });\n      ref.current.addEventListener(\"input\", handleInput);\n      return () => {\n        var _a2;\n        (_a2 = ref.current) == null ? void 0 : _a2.removeEventListener(\"input\", handleInput);\n        cleanupPortal == null ? void 0 : cleanupPortal();\n      };\n    }\n  }, [appStoreApi, ref.current, value, disableLineBreaks]);\n  const [isHovering, setIsHovering] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [isFocused, setIsFocused] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"span\",\n    {\n      className: getClassName18(),\n      ref,\n      contentEditable: isHovering || isFocused ? \"plaintext-only\" : \"false\",\n      onClick: (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      },\n      onClickCapture: (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const itemSelector = getSelectorForId(\n          appStoreApi.getState().state,\n          componentId\n        );\n        appStoreApi.getState().setUi({ itemSelector });\n      },\n      onKeyDown: (e) => {\n        e.stopPropagation();\n        if (disableLineBreaks && e.key === \"Enter\" || isReadOnly) {\n          e.preventDefault();\n        }\n      },\n      onKeyUp: (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n      },\n      onMouseOverCapture: () => setIsHovering(true),\n      onMouseOutCapture: () => setIsHovering(false),\n      onFocus: () => setIsFocused(true),\n      onBlur: () => setIsFocused(false)\n    }\n  );\n};\nvar InlineTextField = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(InlineTextFieldInternal);\n\n// lib/field-transforms/default-transforms/inline-text-transform.tsx\n\nvar getInlineTextTransform = () => ({\n  text: ({ value, componentId, field, propPath, isReadOnly }) => {\n    if (field.contentEditable) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        InlineTextField,\n        {\n          propPath,\n          componentId,\n          value,\n          opts: { disableLineBreaks: true },\n          isReadOnly\n        }\n      );\n    }\n    return value;\n  },\n  textarea: ({ value, componentId, field, propPath, isReadOnly }) => {\n    if (field.contentEditable) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        InlineTextField,\n        {\n          propPath,\n          componentId,\n          value,\n          isReadOnly\n        }\n      );\n    }\n    return value;\n  },\n  custom: ({ value, componentId, field, propPath, isReadOnly }) => {\n    if (field.contentEditable && typeof value === \"string\") {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        InlineTextField,\n        {\n          propPath,\n          componentId,\n          value,\n          isReadOnly\n        }\n      );\n    }\n    return value;\n  }\n});\n\n// components/DropZone/index.tsx\n\nvar getClassName19 = get_class_name_factory_default(\"DropZone\", styles_module_default11);\nvar getRandomColor = () => `#${Math.floor(Math.random() * 16777215).toString(16)}`;\nvar RENDER_DEBUG = false;\nvar DropZoneEditPure = (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneEdit, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props));\nvar DropZoneChild = ({\n  zoneCompound,\n  componentId,\n  index,\n  dragAxis,\n  collisionAxis,\n  inDroppableZone\n}) => {\n  var _a, _b;\n  const metadata = useAppStore((s) => s.metadata);\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(dropZoneContext);\n  const { depth = 1 } = ctx != null ? ctx : {};\n  const zoneStore = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ZoneStoreContext);\n  const nodeProps = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n      var _a2;\n      return (_a2 = s.state.indexes.nodes[componentId]) == null ? void 0 : _a2.flatData.props;\n    })\n  );\n  const nodeType = useAppStore(\n    (s) => {\n      var _a2;\n      return (_a2 = s.state.indexes.nodes[componentId]) == null ? void 0 : _a2.data.type;\n    }\n  );\n  const nodeReadOnly = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n      var _a2;\n      return (_a2 = s.state.indexes.nodes[componentId]) == null ? void 0 : _a2.data.readOnly;\n    })\n  );\n  const appStore = useAppStoreApi();\n  const item = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (nodeProps) {\n      const expanded = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.expandNode)({\n        type: nodeType,\n        props: nodeProps\n      });\n      return expanded;\n    }\n    const preview = zoneStore.getState().previewIndex[zoneCompound];\n    if (componentId === (preview == null ? void 0 : preview.props.id)) {\n      return {\n        type: preview.componentType,\n        props: preview.props,\n        previewType: preview.type,\n        element: preview.element\n      };\n    }\n    return null;\n  }, [appStore, componentId, zoneCompound, nodeType, nodeProps]);\n  const componentConfig = useAppStore(\n    (s) => (item == null ? void 0 : item.type) ? s.config.components[item.type] : null\n  );\n  const puckProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      renderDropZone: DropZoneEditPure,\n      isEditing: true,\n      dragRef: null,\n      metadata: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, metadata), componentConfig == null ? void 0 : componentConfig.metadata)\n    }),\n    [metadata, componentConfig == null ? void 0 : componentConfig.metadata]\n  );\n  const overrides = useAppStore((s) => s.overrides);\n  const isLoading = useAppStore(\n    (s) => {\n      var _a2;\n      return ((_a2 = s.componentState[componentId]) == null ? void 0 : _a2.loadingCount) > 0;\n    }\n  );\n  const isSelected = useAppStore(\n    (s) => {\n      var _a2;\n      return ((_a2 = s.selectedItem) == null ? void 0 : _a2.props.id) === componentId || false;\n    }\n  );\n  let label = (_b = (_a = componentConfig == null ? void 0 : componentConfig.label) != null ? _a : item == null ? void 0 : item.type.toString()) != null ? _b : \"Component\";\n  const renderPreview = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => function Preview3() {\n      var _a2;\n      if (item && \"element\" in item && item.element) {\n        return (\n          // Safe to use this since the HTML is set by the user\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { dangerouslySetInnerHTML: { __html: item.element.outerHTML } })\n        );\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DrawerItemInner, { name: label, children: (_a2 = overrides.componentItem) != null ? _a2 : overrides.drawerItem });\n    },\n    [componentId, label, overrides]\n  );\n  const defaultsProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentConfig == null ? void 0 : componentConfig.defaultProps), item == null ? void 0 : item.props), {\n      puck: puckProps,\n      editMode: true\n      // DEPRECATED\n    }),\n    [componentConfig == null ? void 0 : componentConfig.defaultProps, item == null ? void 0 : item.props, puckProps]\n  );\n  const defaultedNode = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => {\n      var _a2;\n      return { type: (_a2 = item == null ? void 0 : item.type) != null ? _a2 : nodeType, props: defaultsProps };\n    },\n    [item == null ? void 0 : item.type, nodeType, defaultsProps]\n  );\n  const config = useAppStore((s) => s.config);\n  const plugins = useAppStore((s) => s.plugins);\n  const userFieldTransforms = useAppStore((s) => s.fieldTransforms);\n  const combinedFieldTransforms = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.getSlotTransform)(DropZoneEditPure, (slotProps) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ContextSlotRender, { componentId, zone: slotProps.zone }))), getInlineTextTransform()), plugins.reduce(\n      (acc, plugin) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, acc), plugin.fieldTransforms),\n      {}\n    )), userFieldTransforms),\n    [plugins, userFieldTransforms]\n  );\n  const transformedProps = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.useFieldTransforms)(\n    config,\n    defaultedNode,\n    combinedFieldTransforms,\n    nodeReadOnly,\n    isLoading\n  );\n  if (!item) return;\n  let Render2 = componentConfig ? componentConfig.render : () => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { style: { padding: 48, textAlign: \"center\" }, children: [\n    \"No configuration for \",\n    item.type\n  ] });\n  let componentType = item.type;\n  const isInserting = \"previewType\" in item ? item.previewType === \"insert\" : false;\n  if (isInserting) {\n    Render2 = renderPreview;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    DraggableComponent,\n    {\n      id: componentId,\n      componentType,\n      zoneCompound,\n      depth: depth + 1,\n      index,\n      isLoading,\n      isSelected,\n      label,\n      autoDragAxis: dragAxis,\n      userDragAxis: collisionAxis,\n      inDroppableZone,\n      children: (dragRef) => (componentConfig == null ? void 0 : componentConfig.inline) && !isInserting ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        Render2,\n        (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, transformedProps), {\n          puck: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, transformedProps.puck), {\n            dragRef\n          })\n        })\n      ) }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { ref: dragRef, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Render2, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, transformedProps)) })\n    }\n  );\n};\nvar DropZoneChildMemo = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(DropZoneChild);\nvar DropZoneEdit = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(\n  function DropZoneEditInternal({\n    zone,\n    allow,\n    disallow,\n    style,\n    className,\n    minEmptyHeight: userMinEmptyHeight = 128,\n    collisionAxis\n  }, userRef) {\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(dropZoneContext);\n    const appStoreApi = useAppStoreApi();\n    const {\n      // These all need setting via context\n      areaId,\n      depth = 0,\n      registerLocalZone,\n      unregisterLocalZone\n    } = ctx != null ? ctx : {};\n    const path = useAppStore(\n      (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n        var _a;\n        return areaId ? (_a = s.state.indexes.nodes[areaId]) == null ? void 0 : _a.path : null;\n      })\n    );\n    let zoneCompound = _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId;\n    if (areaId) {\n      if (zone !== _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId) {\n        zoneCompound = `${areaId}:${zone}`;\n      }\n    }\n    const isRootZone = zoneCompound === _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId || zone === _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId || areaId === \"root\";\n    const inNextDeepestArea = useContextStore(\n      ZoneStoreContext,\n      (s) => s.nextAreaDepthIndex[areaId || \"\"]\n    );\n    const zoneContentIds = useAppStore(\n      (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n        var _a;\n        return (_a = s.state.indexes.zones[zoneCompound]) == null ? void 0 : _a.contentIds;\n      })\n    );\n    const zoneType = useAppStore(\n      (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n        var _a;\n        return (_a = s.state.indexes.zones[zoneCompound]) == null ? void 0 : _a.type;\n      })\n    );\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n      if (!zoneType || zoneType === \"dropzone\") {\n        if (ctx == null ? void 0 : ctx.registerZone) {\n          ctx == null ? void 0 : ctx.registerZone(zoneCompound);\n        }\n      }\n    }, [zoneType, appStoreApi]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n      if (zoneType === \"dropzone\") {\n        if (zoneCompound !== _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId) {\n          console.warn(\n            \"DropZones have been deprecated in favor of slot fields and will be removed in a future version of Puck. Please see the migration guide: https://www.puckeditor.com/docs/guides/migrations/dropzones-to-slots\"\n          );\n        }\n      }\n    }, [zoneType]);\n    const contentIds = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n      return zoneContentIds || [];\n    }, [zoneContentIds]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const acceptsTarget = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n      (componentType) => {\n        if (!componentType) {\n          return true;\n        }\n        if (disallow) {\n          const defaultedAllow = allow || [];\n          const filteredDisallow = (disallow || []).filter(\n            (item) => defaultedAllow.indexOf(item) === -1\n          );\n          if (filteredDisallow.indexOf(componentType) !== -1) {\n            return false;\n          }\n        } else if (allow) {\n          if (allow.indexOf(componentType) === -1) {\n            return false;\n          }\n        }\n        return true;\n      },\n      [allow, disallow]\n    );\n    const targetAccepted = useContextStore(ZoneStoreContext, (s) => {\n      var _a;\n      const draggedComponentType = (_a = s.draggedItem) == null ? void 0 : _a.data.componentType;\n      return acceptsTarget(draggedComponentType);\n    });\n    const hoveringOverArea = inNextDeepestArea || isRootZone;\n    const isEnabled = useContextStore(ZoneStoreContext, (s) => {\n      var _a;\n      let _isEnabled = true;\n      const isDeepestZone = (_a = s.zoneDepthIndex[zoneCompound]) != null ? _a : false;\n      _isEnabled = isDeepestZone;\n      if (_isEnabled) {\n        _isEnabled = targetAccepted;\n      }\n      return _isEnabled;\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n      if (registerLocalZone) {\n        registerLocalZone(zoneCompound, targetAccepted || isEnabled);\n      }\n      return () => {\n        if (unregisterLocalZone) {\n          unregisterLocalZone(zoneCompound);\n        }\n      };\n    }, [targetAccepted, isEnabled, zoneCompound]);\n    const [contentIdsWithPreview, preview] = useContentIdsWithPreview(\n      contentIds,\n      zoneCompound\n    );\n    const isDropEnabled = isEnabled && (preview ? contentIdsWithPreview.length === 1 : contentIdsWithPreview.length === 0);\n    const zoneStore = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ZoneStoreContext);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n      const { enabledIndex } = zoneStore.getState();\n      zoneStore.setState({\n        enabledIndex: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, enabledIndex), { [zoneCompound]: isEnabled })\n      });\n    }, [isEnabled, zoneStore, zoneCompound]);\n    const droppableConfig = {\n      id: zoneCompound,\n      collisionPriority: isEnabled ? depth : 0,\n      disabled: !isDropEnabled,\n      collisionDetector: pointerIntersection,\n      type: \"dropzone\",\n      data: {\n        areaId,\n        depth,\n        isDroppableTarget: targetAccepted,\n        path: path || []\n      }\n    };\n    const { ref: dropRef } = (0,_dnd_kit_react__WEBPACK_IMPORTED_MODULE_11__.useDroppable)(droppableConfig);\n    const isAreaSelected = useAppStore(\n      (s) => (s == null ? void 0 : s.selectedItem) && areaId === (s == null ? void 0 : s.selectedItem.props.id)\n    );\n    const [dragAxis] = useDragAxis(ref, collisionAxis);\n    const [minEmptyHeight, isAnimating] = useMinEmptyHeight({\n      zoneCompound,\n      userMinEmptyHeight,\n      ref\n    });\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      \"div\",\n      {\n        className: `${getClassName19({\n          isRootZone,\n          hoveringOverArea,\n          isEnabled,\n          isAreaSelected,\n          hasChildren: contentIds.length > 0,\n          isAnimating\n        })}${className ? ` ${className}` : \"\"}`,\n        ref: (node) => {\n          assignRefs([ref, dropRef, userRef], node);\n        },\n        \"data-testid\": `dropzone:${zoneCompound}`,\n        \"data-puck-dropzone\": zoneCompound,\n        style: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, style), {\n          \"--min-empty-height\": `${minEmptyHeight}px`,\n          backgroundColor: RENDER_DEBUG ? getRandomColor() : style == null ? void 0 : style.backgroundColor\n        }),\n        children: contentIdsWithPreview.map((componentId, i) => {\n          return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            DropZoneChildMemo,\n            {\n              zoneCompound,\n              componentId,\n              dragAxis,\n              index: i,\n              collisionAxis,\n              inDroppableZone: targetAccepted\n            },\n            componentId\n          );\n        })\n      }\n    );\n  }\n);\nvar DropZoneRenderItem = ({\n  config,\n  item,\n  metadata\n}) => {\n  const Component = config.components[item.type];\n  const props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.useSlots)(config, item, (slotProps) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.SlotRenderPure, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, slotProps), { config, metadata })));\n  const nextContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      areaId: props.id,\n      depth: 1\n    }),\n    [props]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneProvider, { value: nextContextValue, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Component.render,\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), {\n      puck: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props.puck), {\n        renderDropZone: DropZoneRenderPure,\n        metadata: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, metadata), Component.metadata)\n      })\n    })\n  ) }, props.id);\n};\nvar DropZoneRenderPure = (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneRender, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props));\nvar DropZoneRender = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(\n  function DropZoneRenderInternal({ className, style, zone }, ref) {\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(dropZoneContext);\n    const { areaId = \"root\" } = ctx || {};\n    const { config, data, metadata } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(renderContext);\n    let zoneCompound = `${areaId}:${zone}`;\n    let content = (data == null ? void 0 : data.content) || [];\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n      if (!content) {\n        if (ctx == null ? void 0 : ctx.registerZone) {\n          ctx == null ? void 0 : ctx.registerZone(zoneCompound);\n        }\n      }\n    }, [content]);\n    if (!data || !config) {\n      return null;\n    }\n    if (zoneCompound !== _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId) {\n      content = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.setupZone)(data, zoneCompound).zones[zoneCompound];\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className, style, ref, children: content.map((item) => {\n      const Component = config.components[item.type];\n      if (Component) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n          DropZoneRenderItem,\n          {\n            config,\n            item,\n            metadata\n          },\n          item.props.id\n        );\n      }\n      return null;\n    }) });\n  }\n);\nvar DropZonePure = (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZone, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props));\nvar DropZone = (0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(\n  function DropZone2(props, ref) {\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(dropZoneContext);\n    if ((ctx == null ? void 0 : ctx.mode) === \"edit\") {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneEdit, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { ref })) });\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneRender, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { ref })) });\n  }\n);\n\n// components/Render/index.tsx\n\n\nvar renderContext = react__WEBPACK_IMPORTED_MODULE_2__.createContext({\n  config: { components: {} },\n  data: { root: {}, content: [] },\n  metadata: {}\n});\nfunction Render({\n  config,\n  data,\n  metadata = {}\n}) {\n  var _a;\n  const defaultedData = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data), {\n    root: data.root || {},\n    content: data.content || []\n  });\n  const rootProps = \"props\" in defaultedData.root ? defaultedData.root.props : defaultedData.root;\n  const title = (rootProps == null ? void 0 : rootProps.title) || \"\";\n  const pageProps = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, rootProps), {\n    puck: {\n      renderDropZone: DropZonePure,\n      isEditing: false,\n      dragRef: null,\n      metadata\n    },\n    title,\n    editMode: false,\n    id: \"puck-root\"\n  });\n  const propsWithSlots = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.useSlots)(\n    config,\n    { type: \"root\", props: pageProps },\n    (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.SlotRender, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { config, metadata }))\n  );\n  const nextContextValue = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      mode: \"render\",\n      depth: 0\n    }),\n    []\n  );\n  if ((_a = config.root) == null ? void 0 : _a.render) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(renderContext.Provider, { value: { config, data: defaultedData, metadata }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneProvider, { value: nextContextValue, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(config.root.render, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, propsWithSlots), { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneRenderPure, { zone: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootZone }) })) }) });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(renderContext.Provider, { value: { config, data: defaultedData, metadata }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneProvider, { value: nextContextValue, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZoneRenderPure, { zone: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootZone }) }) });\n}\n\n// lib/use-puck.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\nvar generateUsePuck = (store) => {\n  const history = {\n    back: store.history.back,\n    forward: store.history.forward,\n    setHistories: store.history.setHistories,\n    setHistoryIndex: store.history.setHistoryIndex,\n    hasPast: store.history.hasPast(),\n    hasFuture: store.history.hasFuture(),\n    histories: store.history.histories,\n    index: store.history.index\n  };\n  const storeData = {\n    appState: makeStatePublic(store.state),\n    config: store.config,\n    dispatch: store.dispatch,\n    getPermissions: store.permissions.getPermissions,\n    refreshPermissions: store.permissions.refreshPermissions,\n    history,\n    selectedItem: store.selectedItem || null,\n    getItemBySelector: (selector) => getItem(selector, store.state),\n    getItemById: (id) => store.state.indexes.nodes[id].data,\n    getSelectorForId: (id) => getSelectorForId(store.state, id)\n  };\n  return storeData;\n};\nvar UsePuckStoreContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(\n  null\n);\nvar convertToPickedStore = (store) => {\n  return {\n    state: store.state,\n    config: store.config,\n    dispatch: store.dispatch,\n    permissions: store.permissions,\n    history: store.history,\n    selectedItem: store.selectedItem\n  };\n};\nvar useRegisterUsePuckStore = (appStore) => {\n  const [usePuckStore] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    () => (0,zustand_vanilla__WEBPACK_IMPORTED_MODULE_10__.createStore)(\n      () => generateUsePuck(convertToPickedStore(appStore.getState()))\n    )\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    return appStore.subscribe(\n      (store) => convertToPickedStore(store),\n      (pickedStore) => {\n        usePuckStore.setState(generateUsePuck(pickedStore));\n      }\n    );\n  }, []);\n  return usePuckStore;\n};\nfunction createUsePuck() {\n  return function usePuck2(selector) {\n    const usePuckApi = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(UsePuckStoreContext);\n    if (!usePuckApi) {\n      throw new Error(\"usePuck must be used inside <Puck>.\");\n    }\n    const result = (0,zustand__WEBPACK_IMPORTED_MODULE_4__.useStore)(\n      usePuckApi,\n      selector != null ? selector : (s) => s\n    );\n    return result;\n  };\n}\nfunction usePuck() {\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    console.warn(\n      \"You're using the `usePuck` method without a selector, which may cause unnecessary re-renders. Replace with `createUsePuck` and provide a selector for improved performance.\"\n    );\n  }, []);\n  return createUsePuck()((s) => s);\n}\nfunction useGetPuck() {\n  const usePuckApi = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(UsePuckStoreContext);\n  if (!usePuckApi) {\n    throw new Error(\"usePuckGet must be used inside <Puck>.\");\n  }\n  return usePuckApi.getState;\n}\n\n// components/Puck/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/SidebarSection/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/SidebarSection/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default14 = { \"SidebarSection\": \"_SidebarSection_8boj8_1\", \"SidebarSection-title\": \"_SidebarSection-title_8boj8_12\", \"SidebarSection--noBorderTop\": \"_SidebarSection--noBorderTop_8boj8_20\", \"SidebarSection-content\": \"_SidebarSection-content_8boj8_24\", \"SidebarSection--noPadding\": \"_SidebarSection--noPadding_8boj8_28\", \"SidebarSection-breadcrumbLabel\": \"_SidebarSection-breadcrumbLabel_8boj8_41\", \"SidebarSection-breadcrumbs\": \"_SidebarSection-breadcrumbs_8boj8_70\", \"SidebarSection-breadcrumb\": \"_SidebarSection-breadcrumb_8boj8_41\", \"SidebarSection-heading\": \"_SidebarSection-heading_8boj8_82\", \"SidebarSection-loadingOverlay\": \"_SidebarSection-loadingOverlay_8boj8_86\" };\n\n// lib/use-breadcrumbs.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar useBreadcrumbs = (renderCount) => {\n  const selectedId = useAppStore((s) => {\n    var _a;\n    return (_a = s.selectedItem) == null ? void 0 : _a.props.id;\n  });\n  const config = useAppStore((s) => s.config);\n  const path = useAppStore((s) => {\n    var _a;\n    return (_a = s.state.indexes.nodes[selectedId]) == null ? void 0 : _a.path;\n  });\n  const appStore = useAppStoreApi();\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const breadcrumbs = (path == null ? void 0 : path.map((zoneCompound) => {\n      var _a, _b, _c;\n      const [componentId] = zoneCompound.split(\":\");\n      if (componentId === \"root\") {\n        return {\n          label: \"Page\",\n          selector: null\n        };\n      }\n      const node = appStore.getState().state.indexes.nodes[componentId];\n      const parentId = node.path[node.path.length - 1];\n      const contentIds = ((_a = appStore.getState().state.indexes.zones[parentId]) == null ? void 0 : _a.contentIds) || [];\n      const index = contentIds.indexOf(componentId);\n      const label = node ? (_c = (_b = config.components[node.data.type]) == null ? void 0 : _b.label) != null ? _c : node.data.type : \"Component\";\n      return {\n        label,\n        selector: node ? {\n          index,\n          zone: node.path[node.path.length - 1]\n        } : null\n      };\n    })) || [];\n    if (renderCount) {\n      return breadcrumbs.slice(breadcrumbs.length - renderCount);\n    }\n    return breadcrumbs;\n  }, [path, renderCount]);\n};\n\n// components/SidebarSection/index.tsx\n\nvar getClassName20 = get_class_name_factory_default(\"SidebarSection\", styles_module_default14);\nvar SidebarSection = ({\n  children,\n  title,\n  background,\n  showBreadcrumbs,\n  noBorderTop,\n  noPadding,\n  isLoading\n}) => {\n  const setUi = useAppStore((s) => s.setUi);\n  const breadcrumbs = useBreadcrumbs(1);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    \"div\",\n    {\n      className: getClassName20({ noBorderTop, noPadding }),\n      style: { background },\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName20(\"title\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName20(\"breadcrumbs\"), children: [\n          showBreadcrumbs ? breadcrumbs.map((breadcrumb, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName20(\"breadcrumb\"), children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n              \"button\",\n              {\n                type: \"button\",\n                className: getClassName20(\"breadcrumbLabel\"),\n                onClick: () => setUi({ itemSelector: breadcrumb.selector }),\n                children: breadcrumb.label\n              }\n            ),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronRight, { size: 16 })\n          ] }, i)) : null,\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName20(\"heading\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Heading, { rank: \"2\", size: \"xs\", children: title }) })\n        ] }) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName20(\"content\"), children }),\n        isLoading && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName20(\"loadingOverlay\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, { size: 32 }) })\n      ]\n    }\n  );\n};\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default15 = { \"Puck\": \"_Puck_1yxlw_19\", \"Puck-portal\": \"_Puck-portal_1yxlw_31\", \"PuckLayout-inner\": \"_PuckLayout-inner_1yxlw_38\", \"PuckLayout--mounted\": \"_PuckLayout--mounted_1yxlw_59\", \"PuckLayout--leftSideBarVisible\": \"_PuckLayout--leftSideBarVisible_1yxlw_63\", \"PuckLayout--rightSideBarVisible\": \"_PuckLayout--rightSideBarVisible_1yxlw_69\", \"PuckLayout-mounted\": \"_PuckLayout-mounted_1yxlw_83\", \"PuckLayout\": \"_PuckLayout_1yxlw_38\" };\n\n// components/Puck/components/Fields/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/components/Fields/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default16 = { \"PuckFields\": \"_PuckFields_10bh7_1\", \"PuckFields--isLoading\": \"_PuckFields--isLoading_10bh7_6\", \"PuckFields-loadingOverlay\": \"_PuckFields-loadingOverlay_10bh7_10\", \"PuckFields-loadingOverlayInner\": \"_PuckFields-loadingOverlayInner_10bh7_25\", \"PuckFields-field\": \"_PuckFields-field_10bh7_32\", \"PuckFields--wrapFields\": \"_PuckFields--wrapFields_10bh7_36\" };\n\n// components/Puck/components/Fields/index.tsx\n\n\n\nvar getClassName21 = get_class_name_factory_default(\"PuckFields\", styles_module_default16);\nvar DefaultFields = ({\n  children\n}) => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children });\n};\nvar createOnChange = (fieldName, appStore) => (value, updatedUi) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n  let currentProps;\n  const { dispatch, state, selectedItem, resolveComponentData: resolveComponentData2 } = appStore.getState();\n  const { data, ui } = state;\n  const { itemSelector } = ui;\n  const rootProps = data.root.props || data.root;\n  if (selectedItem) {\n    currentProps = selectedItem.props;\n  } else {\n    currentProps = rootProps;\n  }\n  const newProps = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, currentProps), {\n    [fieldName]: value\n  });\n  if (selectedItem && itemSelector) {\n    dispatch({\n      type: \"replace\",\n      destinationIndex: itemSelector.index,\n      destinationZone: itemSelector.zone || _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId,\n      data: (yield resolveComponentData2(\n        (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, selectedItem), { props: newProps }),\n        \"replace\"\n      )).node,\n      ui: updatedUi\n    });\n  } else {\n    if (data.root.props) {\n      dispatch({\n        type: \"replaceRoot\",\n        root: (yield resolveComponentData2(\n          (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, data.root), { props: newProps }),\n          \"replace\"\n        )).node,\n        ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, ui), updatedUi),\n        recordHistory: true\n      });\n    } else {\n      dispatch({\n        type: \"setData\",\n        data: { root: newProps }\n      });\n    }\n  }\n});\nvar FieldsChild = ({ fieldName }) => {\n  const field = useAppStore((s) => s.fields.fields[fieldName]);\n  const isReadOnly = useAppStore(\n    (s) => ((s.selectedItem ? s.selectedItem.readOnly : s.state.data.root.readOnly) || {})[fieldName]\n  );\n  const value = useAppStore((s) => {\n    const rootProps = s.state.data.root.props || s.state.data.root;\n    return s.selectedItem ? s.selectedItem.props[fieldName] : rootProps[fieldName];\n  });\n  const id = useAppStore((s) => {\n    if (!field) return null;\n    return s.selectedItem ? `${s.selectedItem.props.id}_${field.type}_${fieldName}` : `root_${field.type}_${fieldName}`;\n  });\n  const permissions = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n      const { selectedItem, permissions: permissions2 } = s;\n      return selectedItem ? permissions2.getPermissions({ item: selectedItem }) : permissions2.getPermissions({ root: true });\n    })\n  );\n  const appStore = useAppStoreApi();\n  const onChange = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(createOnChange(fieldName, appStore), [\n    fieldName\n  ]);\n  const { visible = true } = field != null ? field : {};\n  if (!field || !id || !visible) return null;\n  if (field.type === \"slot\") return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName21(\"field\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    AutoFieldPrivate,\n    {\n      field,\n      name: fieldName,\n      id,\n      readOnly: !permissions.edit || isReadOnly,\n      value,\n      onChange\n    }\n  ) }, id);\n};\nvar FieldsChildMemo = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(FieldsChild);\nvar FieldsInternal = ({ wrapFields = true }) => {\n  const overrides = useAppStore((s) => s.overrides);\n  const componentResolving = useAppStore((s) => {\n    var _a, _b;\n    const loadingCount = s.selectedItem ? (_a = s.componentState[s.selectedItem.props.id]) == null ? void 0 : _a.loadingCount : (_b = s.componentState[\"root\"]) == null ? void 0 : _b.loadingCount;\n    return (loadingCount != null ? loadingCount : 0) > 0;\n  });\n  const itemSelector = useAppStore((0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => s.state.ui.itemSelector));\n  const id = useAppStore((s) => {\n    var _a;\n    return (_a = s.selectedItem) == null ? void 0 : _a.props.id;\n  });\n  const appStore = useAppStoreApi();\n  useRegisterFieldsSlice(appStore, id);\n  const fieldsLoading = useAppStore((s) => s.fields.loading);\n  const fieldNames = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => {\n      if (s.fields.id === id) {\n        return Object.keys(s.fields.fields);\n      }\n      return [];\n    })\n  );\n  const isLoading = fieldsLoading || componentResolving;\n  const Wrapper = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => overrides.fields || DefaultFields, [overrides]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    \"form\",\n    {\n      className: getClassName21({ wrapFields }),\n      onSubmit: (e) => {\n        e.preventDefault();\n      },\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Wrapper, { isLoading, itemSelector, children: fieldNames.map((fieldName) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(FieldsChildMemo, { fieldName }, fieldName)) }),\n        isLoading && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName21(\"loadingOverlay\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName21(\"loadingOverlayInner\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, { size: 16 }) }) })\n      ]\n    }\n  );\n};\nvar Fields = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(FieldsInternal);\n\n// components/Puck/components/Components/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// lib/use-component-list.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/ComponentList/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/ComponentList/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default17 = { \"ComponentList\": \"_ComponentList_1rrlt_1\", \"ComponentList--isExpanded\": \"_ComponentList--isExpanded_1rrlt_5\", \"ComponentList-content\": \"_ComponentList-content_1rrlt_9\", \"ComponentList-title\": \"_ComponentList-title_1rrlt_17\", \"ComponentList-titleIcon\": \"_ComponentList-titleIcon_1rrlt_53\" };\n\n// components/ComponentList/index.tsx\n\n\nvar getClassName22 = get_class_name_factory_default(\"ComponentList\", styles_module_default17);\nvar ComponentListItem = ({\n  name,\n  label\n}) => {\n  var _a;\n  const overrides = useAppStore((s) => s.overrides);\n  const canInsert = useAppStore(\n    (s) => s.permissions.getPermissions({\n      type: name\n    }).insert\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (overrides.componentItem) {\n      console.warn(\n        \"The `componentItem` override has been deprecated and renamed to `drawerItem`\"\n      );\n    }\n  }, [overrides]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Drawer.Item, { label, name, isDragDisabled: !canInsert, children: (_a = overrides.componentItem) != null ? _a : overrides.drawerItem });\n};\nvar ComponentList = ({\n  children,\n  title,\n  id\n}) => {\n  const config = useAppStore((s) => s.config);\n  const setUi = useAppStore((s) => s.setUi);\n  const componentList = useAppStore((s) => s.state.ui.componentList);\n  const { expanded = true } = componentList[id] || {};\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName22({ isExpanded: expanded }), children: [\n    title && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n      \"button\",\n      {\n        type: \"button\",\n        className: getClassName22(\"title\"),\n        onClick: () => setUi({\n          componentList: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentList), {\n            [id]: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, componentList[id]), {\n              expanded: !expanded\n            })\n          })\n        }),\n        title: expanded ? `Collapse${title ? ` ${title}` : \"\"}` : `Expand${title ? ` ${title}` : \"\"}`,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { children: title }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName22(\"titleIcon\"), children: expanded ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronUp, { size: 12 }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronDown, { size: 12 }) })\n        ]\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName22(\"content\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Drawer, { children: children || Object.keys(config.components).map((componentKey) => {\n      var _a;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        ComponentListItem,\n        {\n          label: (_a = config.components[componentKey][\"label\"]) != null ? _a : componentKey,\n          name: componentKey\n        },\n        componentKey\n      );\n    }) }) })\n  ] });\n};\nComponentList.Item = ComponentListItem;\n\n// lib/use-component-list.tsx\n\nvar useComponentList = () => {\n  const [componentList, setComponentList] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  const config = useAppStore((s) => s.config);\n  const uiComponentList = useAppStore((s) => s.state.ui.componentList);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a, _b, _c;\n    if (Object.keys(uiComponentList).length > 0) {\n      const matchedComponents = [];\n      let _componentList;\n      _componentList = Object.entries(uiComponentList).map(\n        ([categoryKey, category]) => {\n          if (!category.components) {\n            return null;\n          }\n          category.components.forEach((componentName) => {\n            matchedComponents.push(componentName);\n          });\n          if (category.visible === false) {\n            return null;\n          }\n          return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            ComponentList,\n            {\n              id: categoryKey,\n              title: category.title || categoryKey,\n              children: category.components.map((componentName, i) => {\n                var _a2;\n                const componentConf = config.components[componentName] || {};\n                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                  ComponentList.Item,\n                  {\n                    label: (_a2 = componentConf[\"label\"]) != null ? _a2 : componentName,\n                    name: componentName,\n                    index: i\n                  },\n                  componentName\n                );\n              })\n            },\n            categoryKey\n          );\n        }\n      );\n      const remainingComponents = Object.keys(config.components).filter(\n        (component) => matchedComponents.indexOf(component) === -1\n      );\n      if (remainingComponents.length > 0 && !((_a = uiComponentList.other) == null ? void 0 : _a.components) && ((_b = uiComponentList.other) == null ? void 0 : _b.visible) !== false) {\n        _componentList.push(\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            ComponentList,\n            {\n              id: \"other\",\n              title: ((_c = uiComponentList.other) == null ? void 0 : _c.title) || \"Other\",\n              children: remainingComponents.map((componentName, i) => {\n                var _a2;\n                const componentConf = config.components[componentName] || {};\n                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                  ComponentList.Item,\n                  {\n                    name: componentName,\n                    label: (_a2 = componentConf[\"label\"]) != null ? _a2 : componentName,\n                    index: i\n                  },\n                  componentName\n                );\n              })\n            },\n            \"other\"\n          )\n        );\n      }\n      setComponentList(_componentList);\n    }\n  }, [config.categories, config.components, uiComponentList]);\n  return componentList;\n};\n\n// components/Puck/components/Components/index.tsx\n\n\nvar Components = () => {\n  const overrides = useAppStore((s) => s.overrides);\n  const componentList = useComponentList();\n  const Wrapper = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (overrides.components) {\n      console.warn(\n        \"The `components` override has been deprecated and renamed to `drawer`\"\n      );\n    }\n    return overrides.components || overrides.drawer || \"div\";\n  }, [overrides]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Wrapper, { children: componentList ? componentList : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ComponentList, { id: \"all\" }) });\n};\n\n// components/Puck/components/Preview/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/AutoFrame/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n\n\nvar styleSelector = 'style, link[rel=\"stylesheet\"]';\nvar collectStyles = (doc) => {\n  const collected = [];\n  doc.querySelectorAll(styleSelector).forEach((style) => {\n    if (style.tagName === \"STYLE\") {\n      const hasContent = !!style.innerHTML.trim();\n      if (hasContent) {\n        collected.push(style);\n      }\n    } else {\n      collected.push(style);\n    }\n  });\n  return collected;\n};\nvar getStyleSheet = (el) => {\n  return Array.from(document.styleSheets).find((ss) => {\n    const ownerNode = ss.ownerNode;\n    return ownerNode.href === el.href;\n  });\n};\nvar getStyles = (styleSheet) => {\n  if (styleSheet) {\n    try {\n      return [...Array.from(styleSheet.cssRules)].map((rule) => rule.cssText).join(\"\");\n    } catch (e) {\n      console.warn(\n        \"Access to stylesheet %s is denied. Ignoring\\u2026\",\n        styleSheet.href\n      );\n    }\n  }\n  return \"\";\n};\nvar syncAttributes = (sourceElement, targetElement) => {\n  const attributes = sourceElement.attributes;\n  if ((attributes == null ? void 0 : attributes.length) > 0) {\n    Array.from(attributes).forEach((attribute) => {\n      targetElement.setAttribute(attribute.name, attribute.value);\n    });\n  }\n};\nvar defer = (fn) => setTimeout(fn, 0);\nvar CopyHostStyles = ({\n  children,\n  debug = false,\n  onStylesLoaded = () => null\n}) => {\n  const { document: doc, window: win } = useFrame();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!win || !doc) {\n      return () => {\n      };\n    }\n    let elements = [];\n    const hashes = {};\n    const lookupEl = (el) => elements.findIndex((elementMap) => elementMap.original === el);\n    const mirrorEl = (el, inlineStyles = false) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n      let mirror;\n      if (el.nodeName === \"LINK\" && inlineStyles) {\n        mirror = document.createElement(\"style\");\n        mirror.type = \"text/css\";\n        let styleSheet = getStyleSheet(el);\n        if (!styleSheet) {\n          yield new Promise((resolve) => {\n            const fn = () => {\n              resolve();\n              el.removeEventListener(\"load\", fn);\n            };\n            el.addEventListener(\"load\", fn);\n          });\n          styleSheet = getStyleSheet(el);\n        }\n        const styles2 = getStyles(styleSheet);\n        if (!styles2) {\n          if (debug) {\n            console.warn(\n              `Tried to load styles for link element, but couldn't find them. Skipping...`\n            );\n          }\n          return;\n        }\n        mirror.innerHTML = styles2;\n        mirror.setAttribute(\"data-href\", el.getAttribute(\"href\"));\n      } else {\n        mirror = el.cloneNode(true);\n      }\n      return mirror;\n    });\n    const addEl = (el) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n      const index = lookupEl(el);\n      if (index > -1) {\n        if (debug)\n          console.log(\n            `Tried to add an element that was already mirrored. Updating instead...`\n          );\n        elements[index].mirror.innerText = el.innerText;\n        return;\n      }\n      const mirror = yield mirrorEl(el);\n      if (!mirror) {\n        return;\n      }\n      const elHash = object_hash__WEBPACK_IMPORTED_MODULE_17__(mirror.outerHTML);\n      if (hashes[elHash]) {\n        if (debug)\n          console.log(\n            `iframe already contains element that is being mirrored. Skipping...`\n          );\n        return;\n      }\n      hashes[elHash] = true;\n      doc.head.append(mirror);\n      elements.push({ original: el, mirror });\n      if (debug) console.log(`Added style node ${el.outerHTML}`);\n    });\n    const removeEl = (el) => {\n      var _a, _b;\n      const index = lookupEl(el);\n      if (index === -1) {\n        if (debug)\n          console.log(\n            `Tried to remove an element that did not exist. Skipping...`\n          );\n        return;\n      }\n      const elHash = object_hash__WEBPACK_IMPORTED_MODULE_17__(el.outerHTML);\n      (_b = (_a = elements[index]) == null ? void 0 : _a.mirror) == null ? void 0 : _b.remove();\n      delete hashes[elHash];\n      if (debug) console.log(`Removed style node ${el.outerHTML}`);\n    };\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.type === \"childList\") {\n          mutation.addedNodes.forEach((node) => {\n            if (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE) {\n              const el = node.nodeType === Node.TEXT_NODE ? node.parentElement : node;\n              if (el && el.matches(styleSelector)) {\n                defer(() => addEl(el));\n              }\n            }\n          });\n          mutation.removedNodes.forEach((node) => {\n            if (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE) {\n              const el = node.nodeType === Node.TEXT_NODE ? node.parentElement : node;\n              if (el && el.matches(styleSelector)) {\n                defer(() => removeEl(el));\n              }\n            }\n          });\n        }\n      });\n    });\n    const parentDocument = win.parent.document;\n    const collectedStyles = collectStyles(parentDocument);\n    const hrefs = [];\n    let stylesLoaded = 0;\n    const parentHtml = parentDocument.getElementsByTagName(\"html\")[0];\n    syncAttributes(parentHtml, doc.documentElement);\n    const parentBody = parentDocument.getElementsByTagName(\"body\")[0];\n    syncAttributes(parentBody, doc.body);\n    Promise.all(\n      collectedStyles.map((styleNode, i) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__async)(void 0, null, function* () {\n        if (styleNode.nodeName === \"LINK\") {\n          const linkHref = styleNode.href;\n          if (hrefs.indexOf(linkHref) > -1) {\n            return;\n          }\n          hrefs.push(linkHref);\n        }\n        const mirror = yield mirrorEl(styleNode);\n        if (!mirror) return;\n        elements.push({ original: styleNode, mirror });\n        return mirror;\n      }))\n    ).then((mirrorStyles) => {\n      const filtered = mirrorStyles.filter(\n        (el) => typeof el !== \"undefined\"\n      );\n      filtered.forEach((mirror) => {\n        mirror.onload = () => {\n          stylesLoaded = stylesLoaded + 1;\n          if (stylesLoaded >= elements.length) {\n            onStylesLoaded();\n          }\n        };\n        mirror.onerror = () => {\n          console.warn(`AutoFrame couldn't load a stylesheet`);\n          stylesLoaded = stylesLoaded + 1;\n          if (stylesLoaded >= elements.length) {\n            onStylesLoaded();\n          }\n        };\n      });\n      doc.head.innerHTML = \"\";\n      doc.head.append(...filtered);\n      observer.observe(parentDocument.head, { childList: true, subtree: true });\n      filtered.forEach((el) => {\n        const elHash = object_hash__WEBPACK_IMPORTED_MODULE_17__(el.outerHTML);\n        hashes[elHash] = true;\n      });\n    });\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children });\n};\nvar autoFrameContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({});\nvar useFrame = () => (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(autoFrameContext);\nfunction AutoFrame(_a) {\n  var _b = _a, {\n    children,\n    className,\n    debug,\n    id,\n    onReady = () => {\n    },\n    onNotReady = () => {\n    },\n    frameRef\n  } = _b, props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_b, [\n    \"children\",\n    \"className\",\n    \"debug\",\n    \"id\",\n    \"onReady\",\n    \"onNotReady\",\n    \"frameRef\"\n  ]);\n  const [loaded, setLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [ctx, setCtx] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({});\n  const [mountTarget, setMountTarget] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  const [stylesLoaded, setStylesLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a2;\n    if (frameRef.current) {\n      const doc = frameRef.current.contentDocument;\n      const win = frameRef.current.contentWindow;\n      setCtx({\n        document: doc || void 0,\n        window: win || void 0\n      });\n      setMountTarget(\n        (_a2 = frameRef.current.contentDocument) == null ? void 0 : _a2.getElementById(\"frame-root\")\n      );\n      if (doc && win && stylesLoaded) {\n        onReady();\n      } else {\n        onNotReady();\n      }\n    }\n  }, [frameRef, loaded, stylesLoaded]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"iframe\",\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), {\n      className,\n      id,\n      srcDoc: '<!DOCTYPE html><html><head></head><body><div id=\"frame-root\" data-puck-entry></div></body></html>',\n      ref: frameRef,\n      onLoad: () => {\n        setLoaded(true);\n      },\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(autoFrameContext.Provider, { value: ctx, children: loaded && mountTarget && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        CopyHostStyles,\n        {\n          debug,\n          onStylesLoaded: () => setStylesLoaded(true),\n          children: (0,react_dom__WEBPACK_IMPORTED_MODULE_13__.createPortal)(children, mountTarget)\n        }\n      ) })\n    })\n  );\n}\nAutoFrame.displayName = \"AutoFrame\";\nvar AutoFrame_default = AutoFrame;\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/components/Preview/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default18 = { \"PuckPreview\": \"_PuckPreview_z2rgu_1\", \"PuckPreview-frame\": \"_PuckPreview-frame_z2rgu_6\" };\n\n// components/Puck/components/Preview/index.tsx\n\nvar getClassName23 = get_class_name_factory_default(\"PuckPreview\", styles_module_default18);\nvar useBubbleIframeEvents = (ref) => {\n  const status = useAppStore((s) => s.status);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (ref.current && status === \"READY\") {\n      const iframe = ref.current;\n      const handlePointerMove = (event) => {\n        const evt = new BubbledPointerEvent(\"pointermove\", (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, event), {\n          bubbles: true,\n          cancelable: false,\n          clientX: event.clientX,\n          clientY: event.clientY,\n          originalTarget: event.target\n        }));\n        iframe.dispatchEvent(evt);\n      };\n      const register = () => {\n        var _a;\n        unregister();\n        (_a = iframe.contentDocument) == null ? void 0 : _a.addEventListener(\n          \"pointermove\",\n          handlePointerMove,\n          {\n            capture: true\n          }\n        );\n      };\n      const unregister = () => {\n        var _a;\n        (_a = iframe.contentDocument) == null ? void 0 : _a.removeEventListener(\n          \"pointermove\",\n          handlePointerMove\n        );\n      };\n      register();\n      return () => {\n        unregister();\n      };\n    }\n  }, [status]);\n};\nvar Preview2 = ({ id = \"puck-preview\" }) => {\n  const dispatch = useAppStore((s) => s.dispatch);\n  const root = useAppStore((s) => s.state.data.root);\n  const config = useAppStore((s) => s.config);\n  const setStatus = useAppStore((s) => s.setStatus);\n  const iframe = useAppStore((s) => s.iframe);\n  const overrides = useAppStore((s) => s.overrides);\n  const metadata = useAppStore((s) => s.metadata);\n  const renderData = useAppStore(\n    (s) => s.state.ui.previewMode === \"edit\" ? null : s.state.data\n  );\n  const Page = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (pageProps) => {\n      var _a, _b;\n      const propsWithSlots = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.useSlots)(\n        config,\n        { type: \"root\", props: pageProps },\n        DropZoneEditPure\n      );\n      return ((_a = config.root) == null ? void 0 : _a.render) ? (_b = config.root) == null ? void 0 : _b.render((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n        id: \"puck-root\"\n      }, propsWithSlots)) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: propsWithSlots.children });\n    },\n    [config]\n  );\n  const Frame = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => overrides.iframe, [overrides]);\n  const rootProps = root.props || root;\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  useBubbleIframeEvents(ref);\n  const inner = !renderData ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    Page,\n    (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, rootProps), {\n      puck: {\n        renderDropZone: DropZonePure,\n        isEditing: true,\n        dragRef: null,\n        metadata\n      },\n      editMode: true,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DropZonePure, { zone: _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId })\n    })\n  ) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Render, { data: renderData, config, metadata });\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!iframe.enabled) {\n      setStatus(\"READY\");\n    }\n  }, [iframe.enabled]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"div\",\n    {\n      className: getClassName23(),\n      id,\n      \"data-puck-preview\": true,\n      onClick: (e) => {\n        const el = e.target;\n        if (!el.hasAttribute(\"data-puck-component\") && !el.hasAttribute(\"data-puck-dropzone\")) {\n          dispatch({ type: \"setUi\", ui: { itemSelector: null } });\n        }\n      },\n      children: iframe.enabled ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        AutoFrame_default,\n        {\n          id: \"preview-frame\",\n          className: getClassName23(\"frame\"),\n          \"data-rfd-iframe\": true,\n          onReady: () => {\n            setStatus(\"READY\");\n          },\n          onNotReady: () => {\n            setStatus(\"MOUNTED\");\n          },\n          frameRef: ref,\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(autoFrameContext.Consumer, { children: ({ document: document2 }) => {\n            if (Frame) {\n              return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Frame, { document: document2, children: inner });\n            }\n            return inner;\n          } })\n        }\n      ) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        \"div\",\n        {\n          id: \"preview-frame\",\n          className: getClassName23(\"frame\"),\n          ref,\n          \"data-puck-entry\": true,\n          children: inner\n        }\n      )\n    }\n  );\n};\n\n// components/Puck/components/Outline/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/LayerTree/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/LayerTree/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default19 = { \"LayerTree\": \"_LayerTree_7rx04_1\", \"LayerTree-zoneTitle\": \"_LayerTree-zoneTitle_7rx04_11\", \"LayerTree-helper\": \"_LayerTree-helper_7rx04_17\", \"Layer\": \"_Layer_7rx04_1\", \"Layer-inner\": \"_Layer-inner_7rx04_29\", \"Layer--containsZone\": \"_Layer--containsZone_7rx04_35\", \"Layer-clickable\": \"_Layer-clickable_7rx04_39\", \"Layer--isSelected\": \"_Layer--isSelected_7rx04_61\", \"Layer-chevron\": \"_Layer-chevron_7rx04_77\", \"Layer--childIsSelected\": \"_Layer--childIsSelected_7rx04_78\", \"Layer-zones\": \"_Layer-zones_7rx04_82\", \"Layer-title\": \"_Layer-title_7rx04_96\", \"Layer-name\": \"_Layer-name_7rx04_105\", \"Layer-icon\": \"_Layer-icon_7rx04_111\", \"Layer-zoneIcon\": \"_Layer-zoneIcon_7rx04_116\" };\n\n// lib/scroll-into-view.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar scrollIntoView = (el) => {\n  const oldStyle = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, el.style);\n  el.style.scrollMargin = \"256px\";\n  if (el) {\n    el == null ? void 0 : el.scrollIntoView({ behavior: \"smooth\" });\n    el.style.scrollMargin = oldStyle.scrollMargin || \"\";\n  }\n};\n\n// components/LayerTree/index.tsx\n\n\n// lib/on-scroll-end.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar onScrollEnd = (frame, cb) => {\n  let scrollTimeout;\n  const callback = function() {\n    clearTimeout(scrollTimeout);\n    scrollTimeout = setTimeout(function() {\n      cb();\n      frame == null ? void 0 : frame.removeEventListener(\"scroll\", callback);\n    }, 50);\n  };\n  frame == null ? void 0 : frame.addEventListener(\"scroll\", callback);\n  setTimeout(() => {\n    if (!scrollTimeout) {\n      cb();\n    }\n  }, 50);\n};\n\n// components/LayerTree/index.tsx\n\n\nvar getClassName24 = get_class_name_factory_default(\"LayerTree\", styles_module_default19);\nvar getClassNameLayer = get_class_name_factory_default(\"Layer\", styles_module_default19);\nvar Layer = ({\n  index,\n  itemId,\n  zoneCompound\n}) => {\n  var _a;\n  const config = useAppStore((s) => s.config);\n  const itemSelector = useAppStore((s) => s.state.ui.itemSelector);\n  const dispatch = useAppStore((s) => s.dispatch);\n  const setItemSelector = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (itemSelector2) => {\n      dispatch({ type: \"setUi\", ui: { itemSelector: itemSelector2 } });\n    },\n    [dispatch]\n  );\n  const selecedItemId = useAppStore((s) => {\n    var _a2;\n    return (_a2 = s.selectedItem) == null ? void 0 : _a2.props.id;\n  });\n  const isSelected = selecedItemId === itemId || itemSelector && itemSelector.zone === _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId && !zoneCompound;\n  const nodeData = useAppStore((s) => s.state.indexes.nodes[itemId]);\n  const zonesForItem = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)(\n      (s) => Object.keys(s.state.indexes.zones).filter(\n        (z) => z.split(\":\")[0] === itemId\n      )\n    )\n  );\n  const containsZone = zonesForItem.length > 0;\n  const zoneStore = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ZoneStoreContext);\n  const isHovering = useContextStore(\n    ZoneStoreContext,\n    (s) => s.hoveringComponent === itemId\n  );\n  const childIsSelected = useAppStore((s) => {\n    var _a2, _b;\n    const selectedData = s.state.indexes.nodes[(_a2 = s.selectedItem) == null ? void 0 : _a2.props.id];\n    return (_b = selectedData == null ? void 0 : selectedData.path.some((candidate) => {\n      const [candidateId] = candidate.split(\":\");\n      return candidateId === itemId;\n    })) != null ? _b : false;\n  });\n  const componentConfig = config.components[nodeData.data.type];\n  const label = (_a = componentConfig == null ? void 0 : componentConfig[\"label\"]) != null ? _a : nodeData.data.type.toString();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    \"li\",\n    {\n      className: getClassNameLayer({\n        isSelected,\n        isHovering,\n        containsZone,\n        childIsSelected\n      }),\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameLayer(\"inner\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n          \"button\",\n          {\n            type: \"button\",\n            className: getClassNameLayer(\"clickable\"),\n            onClick: () => {\n              if (isSelected) {\n                setItemSelector(null);\n                return;\n              }\n              const frame = getFrame();\n              const el = frame == null ? void 0 : frame.querySelector(\n                `[data-puck-component=\"${itemId}\"]`\n              );\n              if (!el) {\n                setItemSelector({\n                  index,\n                  zone: zoneCompound\n                });\n                return;\n              }\n              scrollIntoView(el);\n              onScrollEnd(frame, () => {\n                setItemSelector({\n                  index,\n                  zone: zoneCompound\n                });\n              });\n            },\n            onMouseEnter: (e) => {\n              e.stopPropagation();\n              zoneStore.setState({ hoveringComponent: itemId });\n            },\n            onMouseLeave: (e) => {\n              e.stopPropagation();\n              zoneStore.setState({ hoveringComponent: null });\n            },\n            children: [\n              containsZone && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                \"div\",\n                {\n                  className: getClassNameLayer(\"chevron\"),\n                  title: isSelected ? \"Collapse\" : \"Expand\",\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronDown, { size: \"12\" })\n                }\n              ),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassNameLayer(\"title\"), children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameLayer(\"icon\"), children: nodeData.data.type === \"Text\" || nodeData.data.type === \"Heading\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Type, { size: \"16\" }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LayoutGrid, { size: \"16\" }) }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameLayer(\"name\"), children: label })\n              ] })\n            ]\n          }\n        ) }),\n        containsZone && zonesForItem.map((subzone) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassNameLayer(\"zones\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LayerTree, { zoneCompound: subzone }) }, subzone))\n      ]\n    }\n  );\n};\nvar LayerTree = ({\n  label: _label,\n  zoneCompound\n}) => {\n  const label = useAppStore((s) => {\n    var _a, _b, _c, _d;\n    if (_label) return _label;\n    if (zoneCompound === _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootDroppableId) return;\n    const [componentId, slotId] = zoneCompound.split(\":\");\n    const componentType = (_a = s.state.indexes.nodes[componentId]) == null ? void 0 : _a.data.type;\n    const configForComponent = componentType && componentType !== _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.rootAreaId ? s.config.components[componentType] : s.config.root;\n    return (_d = (_c = (_b = configForComponent == null ? void 0 : configForComponent.fields) == null ? void 0 : _b[slotId]) == null ? void 0 : _c.label) != null ? _d : slotId;\n  });\n  const contentIds = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)(\n      (s) => {\n        var _a, _b;\n        return zoneCompound ? (_b = (_a = s.state.indexes.zones[zoneCompound]) == null ? void 0 : _a.contentIds) != null ? _b : [] : [];\n      }\n    )\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [\n    label && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName24(\"zoneTitle\"), children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName24(\"zoneIcon\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Layers, { size: \"16\" }) }),\n      label\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"ul\", { className: getClassName24(), children: [\n      contentIds.length === 0 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName24(\"helper\"), children: \"No items\" }),\n      contentIds.map((itemId, i) => {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n          Layer,\n          {\n            index: i,\n            itemId,\n            zoneCompound\n          },\n          itemId\n        );\n      })\n    ] })\n  ] });\n};\n\n// components/Puck/components/Outline/index.tsx\n\n\n// lib/data/find-zones-for-area.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar findZonesForArea = (state, area) => {\n  return Object.keys(state.indexes.zones).filter(\n    (zone) => zone.split(\":\")[0] === area\n  );\n};\n\n// components/Puck/components/Outline/index.tsx\n\n\nvar Outline = () => {\n  const outlineOverride = useAppStore((s) => s.overrides.outline);\n  const rootZones = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => findZonesForArea(s.state, \"root\"))\n  );\n  const Wrapper = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => outlineOverride || \"div\", [outlineOverride]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Wrapper, { children: rootZones.map((zoneCompound) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    LayerTree,\n    {\n      label: rootZones.length === 1 ? \"\" : zoneCompound.split(\":\")[1],\n      zoneCompound\n    },\n    zoneCompound\n  )) });\n};\n\n// components/Puck/components/Canvas/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/ViewportControls/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/ViewportControls/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default20 = { \"ViewportControls\": \"_ViewportControls_gejzr_1\", \"ViewportControls-divider\": \"_ViewportControls-divider_gejzr_15\", \"ViewportControls-zoomSelect\": \"_ViewportControls-zoomSelect_gejzr_21\", \"ViewportButton--isActive\": \"_ViewportButton--isActive_gejzr_38\", \"ViewportButton-inner\": \"_ViewportButton-inner_gejzr_38\" };\n\n// components/ViewportControls/index.tsx\n\nvar icons = {\n  Smartphone: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Smartphone, { size: 16 }),\n  Tablet: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Tablet, { size: 16 }),\n  Monitor: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Monitor, { size: 16 })\n};\nvar getClassName25 = get_class_name_factory_default(\"ViewportControls\", styles_module_default20);\nvar getClassNameButton = get_class_name_factory_default(\"ViewportButton\", styles_module_default20);\nvar ViewportButton = ({\n  children,\n  height = \"auto\",\n  title,\n  width,\n  onClick\n}) => {\n  const viewports = useAppStore((s) => s.state.ui.viewports);\n  const [isActive, setIsActive] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setIsActive(width === viewports.current.width);\n  }, [width, viewports.current.width]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", { className: getClassNameButton({ isActive }), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    IconButton,\n    {\n      type: \"button\",\n      title,\n      disabled: isActive,\n      onClick: (e) => {\n        e.stopPropagation();\n        onClick({ width, height });\n      },\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", { className: getClassNameButton(\"inner\"), children })\n    }\n  ) });\n};\nvar defaultZoomOptions = [\n  { label: \"25%\", value: 0.25 },\n  { label: \"50%\", value: 0.5 },\n  { label: \"75%\", value: 0.75 },\n  { label: \"100%\", value: 1 },\n  { label: \"125%\", value: 1.25 },\n  { label: \"150%\", value: 1.5 },\n  { label: \"200%\", value: 2 }\n];\nvar ViewportControls = ({\n  autoZoom,\n  zoom,\n  onViewportChange,\n  onZoom\n}) => {\n  var _a, _b;\n  const viewports = useAppStore((s) => s.viewports);\n  const defaultsContainAutoZoom = defaultZoomOptions.find(\n    (option) => option.value === autoZoom\n  );\n  const zoomOptions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => [\n      ...defaultZoomOptions,\n      ...defaultsContainAutoZoom ? [] : [\n        {\n          value: autoZoom,\n          label: `${(autoZoom * 100).toFixed(0)}% (Auto)`\n        }\n      ]\n    ].filter((a) => a.value <= autoZoom).sort((a, b) => a.value > b.value ? 1 : -1),\n    [autoZoom]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName25(), children: [\n    viewports.map((viewport, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      ViewportButton,\n      {\n        height: viewport.height,\n        width: viewport.width,\n        title: viewport.label ? `Switch to ${viewport.label} viewport` : \"Switch viewport\",\n        onClick: onViewportChange,\n        children: typeof viewport.icon === \"string\" ? icons[viewport.icon] || viewport.icon : viewport.icon || icons.Smartphone\n      },\n      i\n    )),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName25(\"divider\") }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      IconButton,\n      {\n        type: \"button\",\n        title: \"Zoom viewport out\",\n        disabled: zoom <= ((_a = zoomOptions[0]) == null ? void 0 : _a.value),\n        onClick: (e) => {\n          e.stopPropagation();\n          onZoom(\n            zoomOptions[Math.max(\n              zoomOptions.findIndex((option) => option.value === zoom) - 1,\n              0\n            )].value\n          );\n        },\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ZoomOut, { size: 16 })\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      IconButton,\n      {\n        type: \"button\",\n        title: \"Zoom viewport in\",\n        disabled: zoom >= ((_b = zoomOptions[zoomOptions.length - 1]) == null ? void 0 : _b.value),\n        onClick: (e) => {\n          e.stopPropagation();\n          onZoom(\n            zoomOptions[Math.min(\n              zoomOptions.findIndex((option) => option.value === zoom) + 1,\n              zoomOptions.length - 1\n            )].value\n          );\n        },\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ZoomIn, { size: 16 })\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName25(\"divider\") }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      \"select\",\n      {\n        className: getClassName25(\"zoomSelect\"),\n        value: zoom.toString(),\n        onClick: (e) => {\n          e.stopPropagation();\n        },\n        onChange: (e) => {\n          onZoom(parseFloat(e.currentTarget.value));\n        },\n        children: zoomOptions.map((option) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n          \"option\",\n          {\n            value: option.value,\n            label: option.label\n          },\n          option.label\n        ))\n      }\n    )\n  ] });\n};\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/components/Canvas/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default21 = { \"PuckCanvas\": \"_PuckCanvas_18jay_1\", \"PuckCanvas-controls\": \"_PuckCanvas-controls_18jay_16\", \"PuckCanvas-inner\": \"_PuckCanvas-inner_18jay_21\", \"PuckCanvas-root\": \"_PuckCanvas-root_18jay_30\", \"PuckCanvas--ready\": \"_PuckCanvas--ready_18jay_55\", \"PuckCanvas-loader\": \"_PuckCanvas-loader_18jay_60\", \"PuckCanvas--showLoader\": \"_PuckCanvas--showLoader_18jay_70\" };\n\n// components/Puck/components/Canvas/index.tsx\n\n\n// lib/frame-context.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\nvar FrameContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nvar FrameProvider = ({\n  children\n}) => {\n  const frameRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const value = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      frameRef\n    }),\n    []\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(FrameContext.Provider, { value, children });\n};\nvar useCanvasFrame = () => {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(FrameContext);\n  if (context === null) {\n    throw new Error(\"useCanvasFrame must be used within a FrameProvider\");\n  }\n  return context;\n};\n\n// components/Puck/components/Canvas/index.tsx\n\nvar getClassName26 = get_class_name_factory_default(\"PuckCanvas\", styles_module_default21);\nvar ZOOM_ON_CHANGE = true;\nvar TRANSITION_DURATION = 150;\nvar Canvas = () => {\n  const { frameRef } = useCanvasFrame();\n  const resetAutoZoom = useResetAutoZoom(frameRef);\n  const {\n    dispatch,\n    overrides,\n    setUi,\n    zoomConfig,\n    setZoomConfig,\n    status,\n    iframe\n  } = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => ({\n      dispatch: s.dispatch,\n      overrides: s.overrides,\n      setUi: s.setUi,\n      zoomConfig: s.zoomConfig,\n      setZoomConfig: s.setZoomConfig,\n      status: s.status,\n      iframe: s.iframe\n    }))\n  );\n  const {\n    leftSideBarVisible,\n    rightSideBarVisible,\n    leftSideBarWidth,\n    rightSideBarWidth,\n    viewports\n  } = useAppStore(\n    (0,zustand_react_shallow__WEBPACK_IMPORTED_MODULE_14__.useShallow)((s) => ({\n      leftSideBarVisible: s.state.ui.leftSideBarVisible,\n      rightSideBarVisible: s.state.ui.rightSideBarVisible,\n      leftSideBarWidth: s.state.ui.leftSideBarWidth,\n      rightSideBarWidth: s.state.ui.rightSideBarWidth,\n      viewports: s.state.ui.viewports\n    }))\n  );\n  const [showTransition, setShowTransition] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const isResizingRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(false);\n  const defaultRender = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const PuckDefault = ({ children }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children });\n    return PuckDefault;\n  }, []);\n  const CustomPreview = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => overrides.preview || defaultRender,\n    [overrides]\n  );\n  const getFrameDimensions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    if (frameRef.current) {\n      const frame = frameRef.current;\n      const box = getBox(frame);\n      return { width: box.contentBox.width, height: box.contentBox.height };\n    }\n    return { width: 0, height: 0 };\n  }, [frameRef]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    resetAutoZoom();\n  }, [\n    frameRef,\n    leftSideBarVisible,\n    rightSideBarVisible,\n    leftSideBarWidth,\n    rightSideBarWidth,\n    viewports\n  ]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const { height: frameHeight } = getFrameDimensions();\n    if (viewports.current.height === \"auto\") {\n      setZoomConfig((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, zoomConfig), {\n        rootHeight: frameHeight / zoomConfig.zoom\n      }));\n    }\n  }, [zoomConfig.zoom, getFrameDimensions, setZoomConfig]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (ZOOM_ON_CHANGE) {\n      resetAutoZoom();\n    }\n  }, [viewports.current.width, viewports]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!frameRef.current) return;\n    const resizeObserver = new ResizeObserver(() => {\n      if (!isResizingRef.current) {\n        resetAutoZoom();\n      }\n    });\n    resizeObserver.observe(frameRef.current);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [frameRef.current]);\n  const [showLoader, setShowLoader] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setTimeout(() => {\n      setShowLoader(true);\n    }, 500);\n  }, []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n    \"div\",\n    {\n      className: getClassName26({\n        ready: status === \"READY\" || !iframe.enabled || !iframe.waitForStyles,\n        showLoader\n      }),\n      onClick: (e) => {\n        const el = e.target;\n        if (!el.hasAttribute(\"data-puck-component\") && !el.hasAttribute(\"data-puck-dropzone\")) {\n          dispatch({\n            type: \"setUi\",\n            ui: { itemSelector: null },\n            recordHistory: true\n          });\n        }\n      },\n      children: [\n        viewports.controlsVisible && iframe.enabled && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName26(\"controls\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n          ViewportControls,\n          {\n            autoZoom: zoomConfig.autoZoom,\n            zoom: zoomConfig.zoom,\n            onViewportChange: (viewport) => {\n              setShowTransition(true);\n              isResizingRef.current = true;\n              const uiViewport = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, viewport), {\n                height: viewport.height || \"auto\",\n                zoom: zoomConfig.zoom\n              });\n              const newUi = {\n                viewports: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, viewports), { current: uiViewport })\n              };\n              setUi(newUi);\n              if (ZOOM_ON_CHANGE) {\n                resetAutoZoom({\n                  viewports: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, viewports), { current: uiViewport })\n                });\n              }\n            },\n            onZoom: (zoom) => {\n              setShowTransition(true);\n              isResizingRef.current = true;\n              setZoomConfig((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, zoomConfig), { zoom }));\n            }\n          }\n        ) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName26(\"inner\"), ref: frameRef, children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            \"div\",\n            {\n              className: getClassName26(\"root\"),\n              style: {\n                width: iframe.enabled ? viewports.current.width : \"100%\",\n                height: zoomConfig.rootHeight,\n                transform: iframe.enabled ? `scale(${zoomConfig.zoom})` : void 0,\n                transition: showTransition ? `width ${TRANSITION_DURATION}ms ease-out, height ${TRANSITION_DURATION}ms ease-out, transform ${TRANSITION_DURATION}ms ease-out` : \"\",\n                overflow: iframe.enabled ? void 0 : \"auto\"\n              },\n              suppressHydrationWarning: true,\n              id: \"puck-canvas-root\",\n              onTransitionEnd: () => {\n                setShowTransition(false);\n                isResizingRef.current = false;\n              },\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CustomPreview, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Preview2, {}) })\n            }\n          ),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName26(\"loader\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Loader, { size: 24 }) })\n        ] })\n      ]\n    }\n  );\n};\n\n// lib/use-loaded-overrides.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// lib/load-overrides.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar loadOverrides = ({\n  overrides,\n  plugins\n}) => {\n  const collected = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, overrides);\n  plugins == null ? void 0 : plugins.forEach((plugin) => {\n    if (!plugin.overrides) return;\n    Object.keys(plugin.overrides).forEach((_overridesType) => {\n      var _a;\n      const overridesType = _overridesType;\n      if (!((_a = plugin.overrides) == null ? void 0 : _a[overridesType])) return;\n      if (overridesType === \"fieldTypes\") {\n        const fieldTypes = plugin.overrides.fieldTypes;\n        Object.keys(fieldTypes).forEach((fieldType) => {\n          collected.fieldTypes = collected.fieldTypes || {};\n          const childNode2 = collected.fieldTypes[fieldType];\n          const Comp2 = (props) => fieldTypes[fieldType]((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), {\n            children: childNode2 ? childNode2(props) : props.children\n          }));\n          collected.fieldTypes[fieldType] = Comp2;\n        });\n        return;\n      }\n      const childNode = collected[overridesType];\n      const Comp = (props) => plugin.overrides[overridesType]((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), {\n        children: childNode ? childNode(props) : props.children\n      }));\n      collected[overridesType] = Comp;\n    });\n  });\n  return collected;\n};\n\n// lib/use-loaded-overrides.ts\nvar useLoadedOverrides = ({\n  overrides,\n  plugins\n}) => {\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    return loadOverrides({ overrides, plugins });\n  }, [plugins, overrides]);\n};\n\n// components/DefaultOverride/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar DefaultOverride = ({ children }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children });\n\n// lib/use-inject-css.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar styles = ``;\nvar useInjectStyleSheet = (initialStyles, iframeEnabled) => {\n  const [el, setEl] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setEl(document.createElement(\"style\"));\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    var _a;\n    if (!el || typeof window === \"undefined\") {\n      return;\n    }\n    el.innerHTML = initialStyles;\n    if (iframeEnabled) {\n      const frame = getFrame();\n      (_a = frame == null ? void 0 : frame.head) == null ? void 0 : _a.appendChild(el);\n    }\n    document.head.appendChild(el);\n  }, [iframeEnabled, el]);\n  return el;\n};\nvar useInjectGlobalCss = (iframeEnabled) => {\n  return useInjectStyleSheet(styles, iframeEnabled);\n};\n\n// lib/use-preview-mode-hotkeys.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nvar usePreviewModeHotkeys = () => {\n  const appStore = useAppStoreApi();\n  const toggleInteractive = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    const dispatch = appStore.getState().dispatch;\n    dispatch({\n      type: \"setUi\",\n      ui: (ui) => ({\n        previewMode: ui.previewMode === \"edit\" ? \"interactive\" : \"edit\"\n      })\n    });\n  }, [appStore]);\n  useHotkey({ meta: true, i: true }, toggleInteractive);\n  useHotkey({ ctrl: true, i: true }, toggleInteractive);\n};\n\n// components/Puck/index.tsx\n\n\n// components/Puck/components/Header/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// components/MenuBar/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/MenuBar/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default22 = { \"MenuBar\": \"_MenuBar_8pf8c_1\", \"MenuBar--menuOpen\": \"_MenuBar--menuOpen_8pf8c_14\", \"MenuBar-inner\": \"_MenuBar-inner_8pf8c_29\", \"MenuBar-history\": \"_MenuBar-history_8pf8c_45\" };\n\n// components/MenuBar/index.tsx\n\nvar getClassName27 = get_class_name_factory_default(\"MenuBar\", styles_module_default22);\nfunction MenuBar({\n  menuOpen = false,\n  renderHeaderActions,\n  setMenuOpen\n}) {\n  const back = useAppStore((s) => s.history.back);\n  const forward = useAppStore((s) => s.history.forward);\n  const hasFuture = useAppStore((s) => s.history.hasFuture());\n  const hasPast = useAppStore((s) => s.history.hasPast());\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"div\",\n    {\n      className: getClassName27({ menuOpen }),\n      onClick: (event) => {\n        var _a;\n        const element = event.target;\n        if (window.matchMedia(\"(min-width: 638px)\").matches) {\n          return;\n        }\n        if (element.tagName === \"A\" && ((_a = element.getAttribute(\"href\")) == null ? void 0 : _a.startsWith(\"#\"))) {\n          setMenuOpen(false);\n        }\n      },\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName27(\"inner\"), children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName27(\"history\"), children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            IconButton,\n            {\n              type: \"button\",\n              title: \"undo\",\n              disabled: !hasPast,\n              onClick: back,\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Undo2, { size: 21 })\n            }\n          ),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n            IconButton,\n            {\n              type: \"button\",\n              title: \"redo\",\n              disabled: !hasFuture,\n              onClick: forward,\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Redo2, { size: 21 })\n            }\n          )\n        ] }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: renderHeaderActions && renderHeaderActions() })\n      ] })\n    }\n  );\n}\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/components/Header/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default23 = { \"PuckHeader\": \"_PuckHeader_15xnq_1\", \"PuckHeader-inner\": \"_PuckHeader-inner_15xnq_10\", \"PuckHeader-toggle\": \"_PuckHeader-toggle_15xnq_20\", \"PuckHeader--rightSideBarVisible\": \"_PuckHeader--rightSideBarVisible_15xnq_27\", \"PuckHeader-rightSideBarToggle\": \"_PuckHeader-rightSideBarToggle_15xnq_27\", \"PuckHeader--leftSideBarVisible\": \"_PuckHeader--leftSideBarVisible_15xnq_28\", \"PuckHeader-leftSideBarToggle\": \"_PuckHeader-leftSideBarToggle_15xnq_28\", \"PuckHeader-title\": \"_PuckHeader-title_15xnq_32\", \"PuckHeader-path\": \"_PuckHeader-path_15xnq_36\", \"PuckHeader-tools\": \"_PuckHeader-tools_15xnq_43\", \"PuckHeader-menuButton\": \"_PuckHeader-menuButton_15xnq_49\", \"PuckHeader--menuOpen\": \"_PuckHeader--menuOpen_15xnq_54\" };\n\n// components/Puck/components/Header/index.tsx\n\nvar getClassName28 = get_class_name_factory_default(\"PuckHeader\", styles_module_default23);\nvar HeaderInner = () => {\n  const {\n    onPublish,\n    renderHeader,\n    renderHeaderActions,\n    headerTitle,\n    headerPath,\n    iframe: _iframe\n  } = usePropsContext();\n  const dispatch = useAppStore((s) => s.dispatch);\n  const appStore = useAppStoreApi();\n  const defaultHeaderRender = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (renderHeader) {\n      console.warn(\n        \"`renderHeader` is deprecated. Please use `overrides.header` and the `usePuck` hook instead\"\n      );\n      const RenderHeader = (_a) => {\n        var _b = _a, { actions } = _b, props = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__objRest)(_b, [\"actions\"]);\n        const Comp = renderHeader;\n        const appState = useAppStore((s) => s.state);\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Comp, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { dispatch, state: appState, children: actions }));\n      };\n      return RenderHeader;\n    }\n    return DefaultOverride;\n  }, [renderHeader]);\n  const defaultHeaderActionsRender = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (renderHeaderActions) {\n      console.warn(\n        \"`renderHeaderActions` is deprecated. Please use `overrides.headerActions` and the `usePuck` hook instead.\"\n      );\n      const RenderHeader = (props) => {\n        const Comp = renderHeaderActions;\n        const appState = useAppStore((s) => s.state);\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Comp, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { dispatch, state: appState }));\n      };\n      return RenderHeader;\n    }\n    return DefaultOverride;\n  }, [renderHeaderActions]);\n  const CustomHeader = useAppStore(\n    (s) => s.overrides.header || defaultHeaderRender\n  );\n  const CustomHeaderActions = useAppStore(\n    (s) => s.overrides.headerActions || defaultHeaderActionsRender\n  );\n  const [menuOpen, setMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const rootTitle = useAppStore((s) => {\n    var _a, _b;\n    const rootData = (_a = s.state.indexes.nodes[\"root\"]) == null ? void 0 : _a.data;\n    return (_b = rootData.props.title) != null ? _b : \"\";\n  });\n  const leftSideBarVisible = useAppStore((s) => s.state.ui.leftSideBarVisible);\n  const rightSideBarVisible = useAppStore(\n    (s) => s.state.ui.rightSideBarVisible\n  );\n  const toggleSidebars = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (sidebar) => {\n      const widerViewport = window.matchMedia(\"(min-width: 638px)\").matches;\n      const sideBarVisible = sidebar === \"left\" ? leftSideBarVisible : rightSideBarVisible;\n      const oppositeSideBar = sidebar === \"left\" ? \"rightSideBarVisible\" : \"leftSideBarVisible\";\n      dispatch({\n        type: \"setUi\",\n        ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n          [`${sidebar}SideBarVisible`]: !sideBarVisible\n        }, !widerViewport ? { [oppositeSideBar]: false } : {})\n      });\n    },\n    [dispatch, leftSideBarVisible, rightSideBarVisible]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    CustomHeader,\n    {\n      actions: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CustomHeaderActions, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        Button,\n        {\n          onClick: () => {\n            const data = appStore.getState().state.data;\n            onPublish && onPublish(data);\n          },\n          icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Globe, { size: \"14px\" }),\n          children: \"Publish\"\n        }\n      ) }) }),\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n        \"header\",\n        {\n          className: getClassName28({ leftSideBarVisible, rightSideBarVisible }),\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName28(\"inner\"), children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName28(\"toggle\"), children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName28(\"leftSideBarToggle\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                IconButton,\n                {\n                  type: \"button\",\n                  onClick: () => {\n                    toggleSidebars(\"left\");\n                  },\n                  title: \"Toggle left sidebar\",\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PanelLeft, { focusable: \"false\" })\n                }\n              ) }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName28(\"rightSideBarToggle\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                IconButton,\n                {\n                  type: \"button\",\n                  onClick: () => {\n                    toggleSidebars(\"right\");\n                  },\n                  title: \"Toggle right sidebar\",\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PanelRight, { focusable: \"false\" })\n                }\n              ) })\n            ] }),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName28(\"title\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(Heading, { rank: \"2\", size: \"xs\", children: [\n              headerTitle || rootTitle || \"Page\",\n              headerPath && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [\n                \" \",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"code\", { className: getClassName28(\"path\"), children: headerPath })\n              ] })\n            ] }) }),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: getClassName28(\"tools\"), children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: getClassName28(\"menuButton\"), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                IconButton,\n                {\n                  type: \"button\",\n                  onClick: () => {\n                    return setMenuOpen(!menuOpen);\n                  },\n                  title: \"Toggle menu bar\",\n                  children: menuOpen ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronUp, { focusable: \"false\" }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ChevronDown, { focusable: \"false\" })\n                }\n              ) }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                MenuBar,\n                {\n                  dispatch,\n                  onPublish,\n                  menuOpen,\n                  renderHeaderActions: () => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CustomHeaderActions, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                    Button,\n                    {\n                      onClick: () => {\n                        const data = appStore.getState().state.data;\n                        onPublish && onPublish(data);\n                      },\n                      icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Globe, { size: \"14px\" }),\n                      children: \"Publish\"\n                    }\n                  ) }),\n                  setMenuOpen\n                }\n              )\n            ] })\n          ] })\n        }\n      )\n    }\n  );\n};\nvar Header = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(HeaderInner);\n\n// components/Puck/components/Sidebar/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// components/Puck/components/ResizeHandle/index.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/components/ResizeHandle/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default24 = { \"ResizeHandle\": \"_ResizeHandle_144bf_2\", \"ResizeHandle--left\": \"_ResizeHandle--left_144bf_16\", \"ResizeHandle--right\": \"_ResizeHandle--right_144bf_20\" };\n\n// components/Puck/components/ResizeHandle/index.tsx\n\nvar getClassName29 = get_class_name_factory_default(\"ResizeHandle\", styles_module_default24);\nvar ResizeHandle = ({\n  position,\n  sidebarRef,\n  onResize,\n  onResizeEnd\n}) => {\n  const { frameRef } = useCanvasFrame();\n  const resetAutoZoom = useResetAutoZoom(frameRef);\n  const handleRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const isDragging = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(false);\n  const startX = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n  const startWidth = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n  const handleMouseMove = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (e) => {\n      if (!isDragging.current) return;\n      const delta = e.clientX - startX.current;\n      const newWidth = position === \"left\" ? startWidth.current + delta : startWidth.current - delta;\n      const width = Math.max(192, newWidth);\n      onResize(width);\n      e.preventDefault();\n    },\n    [onResize, position]\n  );\n  const handleMouseUp = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n    var _a;\n    if (!isDragging.current) return;\n    isDragging.current = false;\n    document.body.style.cursor = \"\";\n    document.body.style.userSelect = \"\";\n    const overlay = document.getElementById(\"resize-overlay\");\n    if (overlay) {\n      document.body.removeChild(overlay);\n    }\n    document.removeEventListener(\"mousemove\", handleMouseMove);\n    document.removeEventListener(\"mouseup\", handleMouseUp);\n    const finalWidth = ((_a = sidebarRef.current) == null ? void 0 : _a.getBoundingClientRect().width) || 0;\n    onResizeEnd(finalWidth);\n    resetAutoZoom();\n  }, [onResizeEnd]);\n  const handleMouseDown = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (e) => {\n      var _a;\n      isDragging.current = true;\n      startX.current = e.clientX;\n      startWidth.current = ((_a = sidebarRef.current) == null ? void 0 : _a.getBoundingClientRect().width) || 0;\n      document.body.style.cursor = \"col-resize\";\n      document.body.style.userSelect = \"none\";\n      const overlay = document.createElement(\"div\");\n      overlay.id = \"resize-overlay\";\n      overlay.setAttribute(\"data-resize-overlay\", \"\");\n      document.body.appendChild(overlay);\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n      e.preventDefault();\n    },\n    [position, handleMouseMove, handleMouseUp]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n    \"div\",\n    {\n      ref: handleRef,\n      className: getClassName29({ [position]: true }),\n      onMouseDown: handleMouseDown\n    }\n  );\n};\n\n// css-module:/home/runner/work/puck/puck/packages/core/components/Puck/components/Sidebar/styles.module.css#css-module\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\nvar styles_module_default25 = { \"Sidebar\": \"_Sidebar_1xksb_1\", \"Sidebar--left\": \"_Sidebar--left_1xksb_8\", \"Sidebar--right\": \"_Sidebar--right_1xksb_14\", \"Sidebar-resizeHandle\": \"_Sidebar-resizeHandle_1xksb_20\" };\n\n// components/Puck/components/Sidebar/index.tsx\n\nvar getClassName30 = get_class_name_factory_default(\"Sidebar\", styles_module_default25);\nvar Sidebar = ({\n  position,\n  sidebarRef,\n  isVisible,\n  onResize,\n  onResizeEnd,\n  children\n}) => {\n  if (!isVisible) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { ref: sidebarRef, className: getClassName30({ [position]: true }), children }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { className: `${getClassName30(\"resizeHandle\")}`, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      ResizeHandle,\n      {\n        position,\n        sidebarRef,\n        onResize,\n        onResizeEnd\n      }\n    ) })\n  ] });\n};\n\n// lib/use-sidebar-resize.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\nfunction useSidebarResize(position, dispatch) {\n  const [width, setWidth] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  const sidebarRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const storeWidth = useAppStore(\n    (s) => position === \"left\" ? s.state.ui.leftSideBarWidth : s.state.ui.rightSideBarWidth\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (typeof window !== \"undefined\" && !storeWidth) {\n      try {\n        const savedWidths = localStorage.getItem(\"puck-sidebar-widths\");\n        if (savedWidths) {\n          const widths = JSON.parse(savedWidths);\n          const savedWidth = widths[position];\n          const key = position === \"left\" ? \"leftSideBarWidth\" : \"rightSideBarWidth\";\n          if (savedWidth) {\n            dispatch({\n              type: \"setUi\",\n              ui: {\n                [key]: savedWidth\n              }\n            });\n          }\n        }\n      } catch (error) {\n        console.error(\n          `Failed to load ${position} sidebar width from localStorage`,\n          error\n        );\n      }\n    }\n  }, [dispatch, position, storeWidth]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (storeWidth !== void 0) {\n      setWidth(storeWidth);\n    }\n  }, [storeWidth]);\n  const handleResizeEnd = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (width2) => {\n      dispatch({\n        type: \"setUi\",\n        ui: {\n          [position === \"left\" ? \"leftSideBarWidth\" : \"rightSideBarWidth\"]: width2\n        }\n      });\n      let widths = {};\n      try {\n        const savedWidths = localStorage.getItem(\"puck-sidebar-widths\");\n        widths = savedWidths ? JSON.parse(savedWidths) : {};\n      } catch (error) {\n        console.error(\n          `Failed to save ${position} sidebar width to localStorage`,\n          error\n        );\n      } finally {\n        localStorage.setItem(\n          \"puck-sidebar-widths\",\n          JSON.stringify((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, widths), {\n            [position]: width2\n          }))\n        );\n      }\n      window.dispatchEvent(\n        new CustomEvent(\"viewportchange\", {\n          bubbles: true,\n          cancelable: false\n        })\n      );\n    },\n    [dispatch, position]\n  );\n  return {\n    width,\n    setWidth,\n    sidebarRef,\n    handleResizeEnd\n  };\n}\n\n// components/Puck/index.tsx\n\nvar getClassName31 = get_class_name_factory_default(\"Puck\", styles_module_default15);\nvar getLayoutClassName = get_class_name_factory_default(\"PuckLayout\", styles_module_default15);\nvar FieldSideBar = () => {\n  const title = useAppStore(\n    (s) => {\n      var _a, _b;\n      return s.selectedItem ? (_b = (_a = s.config.components[s.selectedItem.type]) == null ? void 0 : _a[\"label\"]) != null ? _b : s.selectedItem.type.toString() : \"Page\";\n    }\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SidebarSection, { noPadding: true, noBorderTop: true, showBreadcrumbs: true, title, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Fields, {}) });\n};\nvar propsContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({});\nfunction PropsProvider(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(propsContext.Provider, { value: props, children: props.children });\n}\nvar usePropsContext = () => (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(propsContext);\nfunction PuckProvider({ children }) {\n  const {\n    config,\n    data: initialData,\n    ui: initialUi,\n    onChange,\n    permissions = {},\n    plugins,\n    overrides,\n    viewports = _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultViewports,\n    iframe: _iframe,\n    initialHistory: _initialHistory,\n    metadata,\n    onAction,\n    fieldTransforms\n  } = usePropsContext();\n  const iframe = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      enabled: true,\n      waitForStyles: true\n    }, _iframe),\n    [_iframe]\n  );\n  const [generatedAppState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n    const initial = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAppState.ui), initialUi);\n    let clientUiState = {};\n    if (typeof window !== \"undefined\") {\n      if (window.matchMedia(\"(max-width: 638px)\").matches) {\n        clientUiState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, clientUiState), {\n          leftSideBarVisible: false,\n          rightSideBarVisible: false\n        });\n      }\n      const viewportWidth = window.innerWidth;\n      const viewportDifferences = Object.entries(viewports).map(([key, value]) => ({\n        key,\n        diff: Math.abs(viewportWidth - value.width)\n      })).sort((a, b) => a.diff > b.diff ? 1 : -1);\n      const closestViewport = viewportDifferences[0].key;\n      if (iframe.enabled) {\n        clientUiState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, clientUiState), {\n          viewports: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, initial.viewports), {\n            current: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, initial.viewports.current), {\n              height: ((_b = (_a = initialUi == null ? void 0 : initialUi.viewports) == null ? void 0 : _a.current) == null ? void 0 : _b.height) || ((_c = viewports[closestViewport]) == null ? void 0 : _c.height) || \"auto\",\n              width: ((_e = (_d = initialUi == null ? void 0 : initialUi.viewports) == null ? void 0 : _d.current) == null ? void 0 : _e.width) || ((_f = viewports[closestViewport]) == null ? void 0 : _f.width)\n            })\n          })\n        });\n      }\n    }\n    if (Object.keys((initialData == null ? void 0 : initialData.root) || {}).length > 0 && !((_g = initialData == null ? void 0 : initialData.root) == null ? void 0 : _g.props)) {\n      console.warn(\n        \"Warning: Defining props on `root` is deprecated. Please use `root.props`, or republish this page to migrate automatically.\"\n      );\n    }\n    const rootProps = ((_h = initialData == null ? void 0 : initialData.root) == null ? void 0 : _h.props) || (initialData == null ? void 0 : initialData.root) || {};\n    const defaultedRootProps = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, (_i = config.root) == null ? void 0 : _i.defaultProps), rootProps);\n    const newAppState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAppState), {\n      data: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, initialData), {\n        root: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, initialData == null ? void 0 : initialData.root), { props: defaultedRootProps }),\n        content: initialData.content || []\n      }),\n      ui: (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, initial), clientUiState), {\n        // Store categories under componentList on state to allow render functions and plugins to modify\n        componentList: config.categories ? Object.entries(config.categories).reduce(\n          (acc, [categoryName, category]) => {\n            return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, acc), {\n              [categoryName]: {\n                title: category.title,\n                components: category.components,\n                expanded: category.defaultExpanded,\n                visible: category.visible\n              }\n            });\n          },\n          {}\n        ) : {}\n      })\n    });\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(newAppState, config);\n  });\n  const { appendData = true } = _initialHistory || {};\n  const [blendedHistories] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    [\n      ...(_initialHistory == null ? void 0 : _initialHistory.histories) || [],\n      ...appendData ? [{ state: generatedAppState }] : []\n    ].map((history) => {\n      let newState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, generatedAppState), history.state);\n      if (!history.state.indexes) {\n        newState = (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.walkAppState)(newState, config);\n      }\n      return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, history), {\n        state: newState\n      });\n    })\n  );\n  const initialHistoryIndex = (_initialHistory == null ? void 0 : _initialHistory.index) || blendedHistories.length - 1;\n  const initialAppState = blendedHistories[initialHistoryIndex].state;\n  const loadedOverrides = useLoadedOverrides({\n    overrides,\n    plugins\n  });\n  const loadedFieldTransforms = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    const _plugins = plugins || [];\n    const pluginFieldTransforms = _plugins.reduce(\n      (acc, plugin) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, acc), plugin.fieldTransforms),\n      {}\n    );\n    return (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, pluginFieldTransforms), fieldTransforms);\n  }, [fieldTransforms, plugins]);\n  const generateAppStore = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (state) => {\n      return {\n        state,\n        config,\n        plugins: plugins || [],\n        overrides: loadedOverrides,\n        viewports,\n        iframe,\n        onAction,\n        metadata,\n        fieldTransforms: loadedFieldTransforms\n      };\n    },\n    [\n      initialAppState,\n      config,\n      plugins,\n      loadedOverrides,\n      viewports,\n      iframe,\n      onAction,\n      metadata,\n      loadedFieldTransforms\n    ]\n  );\n  const [appStore] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    () => createAppStore(generateAppStore(initialAppState))\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (true) {\n      window.__PUCK_INTERNAL_DO_NOT_USE = { appStore };\n    }\n  }, [appStore]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const state = appStore.getState().state;\n    appStore.setState((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, generateAppStore(state)));\n  }, [config, plugins, loadedOverrides, viewports, iframe, onAction, metadata]);\n  useRegisterHistorySlice(appStore, {\n    histories: blendedHistories,\n    index: initialHistoryIndex,\n    initialAppState\n  });\n  const previousData = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    appStore.subscribe(\n      (s) => s.state.data,\n      (data) => {\n        if (onChange) {\n          if (fast_deep_equal__WEBPACK_IMPORTED_MODULE_18__(data, previousData.current)) return;\n          onChange(data);\n          previousData.current = data;\n        }\n      }\n    );\n  }, []);\n  useRegisterPermissionsSlice(appStore, permissions);\n  const uPuckStore = useRegisterUsePuckStore(appStore);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const { resolveAndCommitData } = appStore.getState();\n    resolveAndCommitData();\n  }, []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(appStoreContext.Provider, { value: appStore, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(UsePuckStoreContext.Provider, { value: uPuckStore, children }) });\n}\nfunction PuckLayout({ children }) {\n  const {\n    iframe: _iframe,\n    dnd,\n    initialHistory: _initialHistory\n  } = usePropsContext();\n  const iframe = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({\n      enabled: true,\n      waitForStyles: true\n    }, _iframe),\n    [_iframe]\n  );\n  useInjectGlobalCss(iframe.enabled);\n  const dispatch = useAppStore((s) => s.dispatch);\n  const leftSideBarVisible = useAppStore((s) => s.state.ui.leftSideBarVisible);\n  const rightSideBarVisible = useAppStore(\n    (s) => s.state.ui.rightSideBarVisible\n  );\n  const {\n    width: leftWidth,\n    setWidth: setLeftWidth,\n    sidebarRef: leftSidebarRef,\n    handleResizeEnd: handleLeftSidebarResizeEnd\n  } = useSidebarResize(\"left\", dispatch);\n  const {\n    width: rightWidth,\n    setWidth: setRightWidth,\n    sidebarRef: rightSidebarRef,\n    handleResizeEnd: handleRightSidebarResizeEnd\n  } = useSidebarResize(\"right\", dispatch);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (!window.matchMedia(\"(min-width: 638px)\").matches) {\n      dispatch({\n        type: \"setUi\",\n        ui: {\n          leftSideBarVisible: false,\n          rightSideBarVisible: false\n        }\n      });\n    }\n    const handleResize = () => {\n      if (!window.matchMedia(\"(min-width: 638px)\").matches) {\n        dispatch({\n          type: \"setUi\",\n          ui: (ui) => (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, ui), ui.rightSideBarVisible ? { leftSideBarVisible: false } : {})\n        });\n      }\n    };\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n  const overrides = useAppStore((s) => s.overrides);\n  const CustomPuck = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => overrides.puck || DefaultOverride,\n    [overrides]\n  );\n  const [mounted, setMounted] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    setMounted(true);\n  }, []);\n  const ready = useAppStore((s) => s.status === \"READY\");\n  useMonitorHotkeys();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    if (ready && iframe.enabled) {\n      const frameDoc = getFrame();\n      if (frameDoc) {\n        return monitorHotkeys(frameDoc);\n      }\n    }\n  }, [ready, iframe.enabled]);\n  usePreviewModeHotkeys();\n  const layoutOptions = {};\n  if (leftWidth) {\n    layoutOptions[\"--puck-user-left-side-bar-width\"] = `${leftWidth}px`;\n  }\n  if (rightWidth) {\n    layoutOptions[\"--puck-user-right-side-bar-width\"] = `${rightWidth}px`;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", { className: `Puck ${getClassName31()}`, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DragDropContext, { disableAutoScroll: dnd == null ? void 0 : dnd.disableAutoScroll, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CustomPuck, { children: children || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(FrameProvider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n      \"div\",\n      {\n        className: getLayoutClassName({\n          leftSideBarVisible,\n          mounted,\n          rightSideBarVisible\n        }),\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n          \"div\",\n          {\n            className: getLayoutClassName(\"inner\"),\n            style: layoutOptions,\n            children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Header, {}),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\n                Sidebar,\n                {\n                  position: \"left\",\n                  sidebarRef: leftSidebarRef,\n                  isVisible: leftSideBarVisible,\n                  onResize: setLeftWidth,\n                  onResizeEnd: handleLeftSidebarResizeEnd,\n                  children: [\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SidebarSection, { title: \"Components\", noBorderTop: true, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Components, {}) }),\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SidebarSection, { title: \"Outline\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Outline, {}) })\n                  ]\n                }\n              ),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Canvas, {}),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\n                Sidebar,\n                {\n                  position: \"right\",\n                  sidebarRef: rightSidebarRef,\n                  isVisible: rightSideBarVisible,\n                  onResize: setRightWidth,\n                  onResizeEnd: handleRightSidebarResizeEnd,\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(FieldSideBar, {})\n                }\n              )\n            ]\n          }\n        )\n      }\n    ) }) }) }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { id: \"puck-portal-root\", className: getClassName31(\"portal\") })\n  ] });\n}\nfunction Puck(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PropsProvider, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PuckProvider, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadProps)((0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props), { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PuckLayout, (0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.__spreadValues)({}, props)) })) }));\n}\nPuck.Components = Components;\nPuck.Fields = Fields;\nPuck.Outline = Outline;\nPuck.Preview = Preview2;\n\n// bundle/core.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/API/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/API/DropZone.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/API/Viewports.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/API/FieldTransforms.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/AppState.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/Config.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/Data.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/Fields.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/Props.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n// types/Utils.tsx\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_0__.init_react_import)();\n\n\n/*! Bundled license information:\n\nclassnames/index.js:\n  (*!\n  \tCopyright (c) 2018 Jed Watson.\n  \tLicensed under the MIT License (MIT), see\n  \thttp://jedwatson.github.io/classnames\n  *)\n\nlucide-react/dist/esm/shared/src/utils.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/defaultAttributes.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/Icon.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/createLucideIcon.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/chevron-down.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/chevron-right.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/chevron-up.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/circle-check-big.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/copy.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/corner-left-up.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/ellipsis-vertical.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/globe.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/hash.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/layers.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/layout-grid.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/link.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/list.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/lock-open.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/lock.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/monitor.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/panel-left.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/panel-right.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/plus.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/redo-2.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/search.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/sliders-horizontal.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/smartphone.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/tablet.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/trash.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/type.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/undo-2.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/zoom-in.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/icons/zoom-out.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n\nlucide-react/dist/esm/lucide-react.js:\n  (**\n   * @license lucide-react v0.468.0 - ISC\n   *\n   * This source code is licensed under the ISC license.\n   * See the LICENSE file in the root directory of this source tree.\n   *)\n*/\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG1lYXN1cmVkK3B1Y2tAMC4yMC4yX0B0eXBlcytyZWFjdEAxOS4yLjdfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfX3JlYWN0QDE5LjIuMC9ub2RlX21vZHVsZXMvQG1lYXN1cmVkL3B1Y2svZGlzdC9jaHVuay1RSUdWTkQ1Ni5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQjhCOztBQUU5QjtBQUNBLHlCQUF5QiwrREFBVTtBQUNuQztBQUNBO0FBQ0EsSUFBSSxzRUFBaUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLHNFQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzRUFBaUI7O0FBRWpCO0FBQ0Esc0VBQWlCO0FBQ2pCLHdCQUF3Qiw0REFBTztBQUMvQiwwREFBMEQsZUFBZSxrQkFBa0I7QUFDM0Y7QUFDQTtBQUNBLDZCQUE2QixVQUFVLEdBQUcsV0FBVztBQUNyRDtBQUNBLDJDQUEyQyxVQUFVLEdBQUcsV0FBVztBQUNuRTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNB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QWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzRUFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0VBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUcsV0FBVyxJQUFJO0FBQzlQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzRUFBaUI7O0FBRWpCO0FBQ0Esc0VBQWlCOztBQUVqQjtBQUNBLHNFQUFpQjs7QUFFakI7QUFDQSxzRUFBaUI7O0FBRWpCO0FBQ0Esc0VBQWlCOztBQUVqQjtBQUNBLHNFQUFpQjs7QUFFakI7QUFDQSxzRUFBaUI7O0FBRWpCO0FBQ0Esc0VBQWlCOztBQUVqQjtBQUNBLHNFQUFpQjs7QUFFakI7QUFDQSxzRUFBaUI7O0FBRWpCO0FBQ0Esc0VBQWlCOztBQUVqQjtBQUNBLHNFQUFpQjs7QUFzQmY7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2ZlZGVyaWNvam9yZ2Vib25lbHRvenppL0Rlc2t0b3AvV29yay9wdWNrL2NvZGUvZWNvc3lzdGVtL3B1Y2stY29uZmlncy9zaGFkY24tdHdibG9ja3Mvbm9kZV9tb2R1bGVzLy5wbnBtL0BtZWFzdXJlZCtwdWNrQDAuMjAuMl9AdHlwZXMrcmVhY3RAMTkuMi43X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX19yZWFjdEAxOS4yLjAvbm9kZV9tb2R1bGVzL0BtZWFzdXJlZC9wdWNrL2Rpc3QvY2h1bmstUUlHVk5ENTYubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFNsb3RSZW5kZXIsXG4gIFNsb3RSZW5kZXJQdXJlLFxuICBfX2FzeW5jLFxuICBfX2NvbW1vbkpTLFxuICBfX29ialJlc3QsXG4gIF9fc3ByZWFkUHJvcHMsXG4gIF9fc3ByZWFkVmFsdWVzLFxuICBfX3RvRVNNLFxuICBkZWZhdWx0QXBwU3RhdGUsXG4gIGRlZmF1bHRTbG90cyxcbiAgZGVmYXVsdFZpZXdwb3J0cyxcbiAgZXhwYW5kTm9kZSxcbiAgZ2V0Q2hhbmdlZCxcbiAgZ2V0U2xvdFRyYW5zZm9ybSxcbiAgaW5pdF9yZWFjdF9pbXBvcnQsXG4gIHJlc29sdmVDb21wb25lbnREYXRhLFxuICByb290QXJlYUlkLFxuICByb290RHJvcHBhYmxlSWQsXG4gIHJvb3Rab25lLFxuICBzZXR1cFpvbmUsXG4gIHVzZUZpZWxkVHJhbnNmb3JtcyxcbiAgdXNlU2xvdHMsXG4gIHdhbGtBcHBTdGF0ZSxcbiAgd2Fsa0ZpZWxkLFxuICB3YWxrVHJlZVxufSBmcm9tIFwiLi9jaHVuay1PT0xZRFhLVy5tanNcIjtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanNcbnZhciByZXF1aXJlX2NsYXNzbmFtZXMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGluaXRfcmVhY3RfaW1wb3J0KCk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICB2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgICBmdW5jdGlvbiBjbGFzc05hbWVzKCkge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICBpZiAoYXJnKSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gYXBwZW5kQ2xhc3MoY2xhc3NlcywgcGFyc2VWYWx1ZShhcmcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYXNzZXM7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBwYXJzZVZhbHVlKGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgYXJnID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFyZyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcbiAgICAgICAgICByZXR1cm4gY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmcudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgJiYgIWFyZy50b1N0cmluZy50b1N0cmluZygpLmluY2x1ZGVzKFwiW25hdGl2ZSBjb2RlXVwiKSkge1xuICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xhc3NlcyA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBhcmcpIHtcbiAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gYXBwZW5kQ2xhc3MoY2xhc3Nlcywga2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYXNzZXM7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBhcHBlbmRDbGFzcyh2YWx1ZSwgbmV3Q2xhc3MpIHtcbiAgICAgICAgaWYgKCFuZXdDbGFzcykge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUgKyBcIiBcIiArIG5ld0NsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZSArIG5ld0NsYXNzO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgY2xhc3NOYW1lcy5kZWZhdWx0ID0gY2xhc3NOYW1lcztcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09IFwib2JqZWN0XCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoXCJjbGFzc25hbWVzXCIsIFtdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gY2xhc3NOYW1lcztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG4gICAgICB9XG4gICAgfSkoKTtcbiAgfVxufSk7XG5cbi8vIHR5cGVzL0FQSS9PdmVycmlkZXMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgb3ZlcnJpZGVLZXlzID0gW1xuICBcImhlYWRlclwiLFxuICBcImhlYWRlckFjdGlvbnNcIixcbiAgXCJmaWVsZHNcIixcbiAgXCJmaWVsZExhYmVsXCIsXG4gIFwiZHJhd2VyXCIsXG4gIFwiZHJhd2VySXRlbVwiLFxuICBcImNvbXBvbmVudE92ZXJsYXlcIixcbiAgXCJvdXRsaW5lXCIsXG4gIFwicHVja1wiLFxuICBcInByZXZpZXdcIlxuXTtcblxuLy8gY29tcG9uZW50cy9BY3Rpb25CYXIvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvZ2V0LWNsYXNzLW5hbWUtZmFjdG9yeS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBpbXBvcnRfY2xhc3NuYW1lcyA9IF9fdG9FU00ocmVxdWlyZV9jbGFzc25hbWVzKCkpO1xudmFyIGdldENsYXNzTmFtZUZhY3RvcnkgPSAocm9vdENsYXNzLCBzdHlsZXMyLCBjb25maWcgPSB7IGJhc2VDbGFzczogXCJcIiB9KSA9PiAob3B0aW9ucyA9IHt9KSA9PiB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IGRlc2NlbmRhbnQgPSBvcHRpb25zO1xuICAgIGNvbnN0IHN0eWxlID0gc3R5bGVzMltgJHtyb290Q2xhc3N9LSR7ZGVzY2VuZGFudH1gXTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgIHJldHVybiBjb25maWcuYmFzZUNsYXNzICsgc3R5bGVzMltgJHtyb290Q2xhc3N9LSR7ZGVzY2VuZGFudH1gXSB8fCBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IG9wdGlvbnM7XG4gICAgY29uc3QgcHJlZml4ZWRNb2RpZmllcnMgPSB7fTtcbiAgICBmb3IgKGxldCBtb2RpZmllciBpbiBtb2RpZmllcnMpIHtcbiAgICAgIHByZWZpeGVkTW9kaWZpZXJzW3N0eWxlczJbYCR7cm9vdENsYXNzfS0tJHttb2RpZmllcn1gXV0gPSBtb2RpZmllcnNbbW9kaWZpZXJdO1xuICAgIH1cbiAgICBjb25zdCBjID0gc3R5bGVzMltyb290Q2xhc3NdO1xuICAgIHJldHVybiBjb25maWcuYmFzZUNsYXNzICsgKDAsIGltcG9ydF9jbGFzc25hbWVzLmRlZmF1bHQpKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIFtjXTogISFjXG4gICAgfSwgcHJlZml4ZWRNb2RpZmllcnMpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29uZmlnLmJhc2VDbGFzcyArIHN0eWxlczJbcm9vdENsYXNzXSB8fCBcIlwiO1xuICB9XG59O1xudmFyIGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdCA9IGdldENsYXNzTmFtZUZhY3Rvcnk7XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9BY3Rpb25CYXIvc3R5bGVzLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHlsZXNfbW9kdWxlX2RlZmF1bHQgPSB7IFwiQWN0aW9uQmFyXCI6IFwiX0FjdGlvbkJhcl9ydmFkdF8xXCIsIFwiQWN0aW9uQmFyLWxhYmVsXCI6IFwiX0FjdGlvbkJhci1sYWJlbF9ydmFkdF8xOFwiLCBcIkFjdGlvbkJhci1hY3Rpb25cIjogXCJfQWN0aW9uQmFyLWFjdGlvbl9ydmFkdF8zMFwiLCBcIkFjdGlvbkJhci1ncm91cFwiOiBcIl9BY3Rpb25CYXItZ3JvdXBfcnZhZHRfMzhcIiB9O1xuXG4vLyBjb21wb25lbnRzL0FjdGlvbkJhci9pbmRleC50c3hcbmltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZSA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIkFjdGlvbkJhclwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQpO1xudmFyIEFjdGlvbkJhciA9ICh7XG4gIGxhYmVsLFxuICBjaGlsZHJlblxufSkgPT4gLyogQF9fUFVSRV9fICovIGpzeHMoXG4gIFwiZGl2XCIsXG4gIHtcbiAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZSgpLFxuICAgIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIGxhYmVsICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goQWN0aW9uQmFyLkdyb3VwLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUoXCJsYWJlbFwiKSwgY2hpbGRyZW46IGxhYmVsIH0pIH0pLFxuICAgICAgY2hpbGRyZW5cbiAgICBdXG4gIH1cbik7XG52YXIgQWN0aW9uID0gKHtcbiAgY2hpbGRyZW4sXG4gIGxhYmVsLFxuICBvbkNsaWNrXG59KSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFxuICBcImJ1dHRvblwiLFxuICB7XG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZShcImFjdGlvblwiKSxcbiAgICBvbkNsaWNrLFxuICAgIHRpdGxlOiBsYWJlbCxcbiAgICBjaGlsZHJlblxuICB9XG4pO1xudmFyIEdyb3VwID0gKHsgY2hpbGRyZW4gfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lKFwiZ3JvdXBcIiksIGNoaWxkcmVuIH0pO1xudmFyIExhYmVsID0gKHsgbGFiZWwgfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lKFwibGFiZWxcIiksIGNoaWxkcmVuOiBsYWJlbCB9KTtcbkFjdGlvbkJhci5BY3Rpb24gPSBBY3Rpb247XG5BY3Rpb25CYXIuTGFiZWwgPSBMYWJlbDtcbkFjdGlvbkJhci5Hcm91cCA9IEdyb3VwO1xuXG4vLyBjb21wb25lbnRzL0ljb25CdXR0b24vSWNvbkJ1dHRvbi50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvSWNvbkJ1dHRvbi9JY29uQnV0dG9uLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBJY29uQnV0dG9uX21vZHVsZV9kZWZhdWx0ID0geyBcIkljb25CdXR0b25cIjogXCJfSWNvbkJ1dHRvbl9zd3BuaV8xXCIsIFwiSWNvbkJ1dHRvbi0tZGlzYWJsZWRcIjogXCJfSWNvbkJ1dHRvbi0tZGlzYWJsZWRfc3dwbmlfMjBcIiwgXCJJY29uQnV0dG9uLXRpdGxlXCI6IFwiX0ljb25CdXR0b24tdGl0bGVfc3dwbmlfMzNcIiB9O1xuXG4vLyBjb21wb25lbnRzL0xvYWRlci9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGxpYi9pbmRleC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gbGliL2ZpbHRlci50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gbGliL2RhdGEvcmVvcmRlci50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciByZW9yZGVyID0gKGxpc3QsIHN0YXJ0SW5kZXgsIGVuZEluZGV4KSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20obGlzdCk7XG4gIGNvbnN0IFtyZW1vdmVkXSA9IHJlc3VsdC5zcGxpY2Uoc3RhcnRJbmRleCwgMSk7XG4gIHJlc3VsdC5zcGxpY2UoZW5kSW5kZXgsIDAsIHJlbW92ZWQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gbGliL2RhdGEvcmVwbGFjZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciByZXBsYWNlID0gKGxpc3QsIGluZGV4LCBuZXdJdGVtKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20obGlzdCk7XG4gIHJlc3VsdC5zcGxpY2UoaW5kZXgsIDEpO1xuICByZXN1bHQuc3BsaWNlKGluZGV4LCAwLCBuZXdJdGVtKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIGxpYi91c2UtcmVzZXQtYXV0by16b29tLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBzdG9yZS9pbmRleC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gcmVkdWNlci9pbmRleC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gcmVkdWNlci9hY3Rpb25zL3NldC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzZXRBY3Rpb24gPSAoc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpID0+IHtcbiAgaWYgKHR5cGVvZiBhY3Rpb24uc3RhdGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBuZXdTdGF0ZSA9IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSksIGFjdGlvbi5zdGF0ZSk7XG4gICAgaWYgKGFjdGlvbi5zdGF0ZS5pbmRleGVzKSB7XG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfVxuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiYHNldGAgaXMgZXhwZW5zaXZlIGFuZCBtYXkgY2F1c2UgdW5uZWNlc3NhcnkgcmUtcmVuZGVycy4gQ29uc2lkZXIgdXNpbmcgYSBtb3JlIGF0b21pYyBhY3Rpb24gaW5zdGVhZC5cIlxuICAgICk7XG4gICAgcmV0dXJuIHdhbGtBcHBTdGF0ZShuZXdTdGF0ZSwgYXBwU3RvcmUuY29uZmlnKTtcbiAgfVxuICByZXR1cm4gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwgYWN0aW9uLnN0YXRlKHN0YXRlKSk7XG59O1xuXG4vLyByZWR1Y2VyL2FjdGlvbnMvaW5zZXJ0LnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvZGF0YS9pbnNlcnQudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgaW5zZXJ0ID0gKGxpc3QsIGluZGV4LCBpdGVtKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20obGlzdCB8fCBbXSk7XG4gIHJlc3VsdC5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gbGliL2dlbmVyYXRlLWlkLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbnZhciBnZW5lcmF0ZUlkID0gKHR5cGUpID0+IHR5cGUgPyBgJHt0eXBlfS0ke3V1aWR2NCgpfWAgOiB1dWlkdjQoKTtcblxuLy8gbGliL2RhdGEvZ2V0LWlkcy1mb3ItcGFyZW50LnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGdldElkc0ZvclBhcmVudCA9ICh6b25lQ29tcG91bmQsIHN0YXRlKSA9PiB7XG4gIGNvbnN0IFtwYXJlbnRJZF0gPSB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpO1xuICBjb25zdCBub2RlID0gc3RhdGUuaW5kZXhlcy5ub2Rlc1twYXJlbnRJZF07XG4gIHJldHVybiAoKG5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IG5vZGUucGF0aCkgfHwgW10pLm1hcCgocCkgPT4gcC5zcGxpdChcIjpcIilbMF0pO1xufTtcblxuLy8gbGliL2RhdGEvcG9wdWxhdGUtaWRzLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHBvcHVsYXRlSWRzID0gKGRhdGEsIGNvbmZpZywgb3ZlcnJpZGUgPSBmYWxzZSkgPT4ge1xuICBjb25zdCBpZCA9IGdlbmVyYXRlSWQoZGF0YS50eXBlKTtcbiAgcmV0dXJuIHdhbGtUcmVlKFxuICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGRhdGEpLCB7XG4gICAgICBwcm9wczogb3ZlcnJpZGUgPyBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBkYXRhLnByb3BzKSwgeyBpZCB9KSA6IF9fc3ByZWFkVmFsdWVzKHt9LCBkYXRhLnByb3BzKVxuICAgIH0pLFxuICAgIGNvbmZpZyxcbiAgICAoY29udGVudHMpID0+IGNvbnRlbnRzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgaWQyID0gZ2VuZXJhdGVJZChpdGVtLnR5cGUpO1xuICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0pLCB7XG4gICAgICAgIHByb3BzOiBvdmVycmlkZSA/IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0ucHJvcHMpLCB7IGlkOiBpZDIgfSkgOiBfX3NwcmVhZFZhbHVlcyh7IGlkOiBpZDIgfSwgaXRlbS5wcm9wcylcbiAgICAgIH0pO1xuICAgIH0pXG4gICk7XG59O1xuXG4vLyByZWR1Y2VyL2FjdGlvbnMvaW5zZXJ0LnRzXG5mdW5jdGlvbiBpbnNlcnRBY3Rpb24oc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpIHtcbiAgY29uc3QgaWQgPSBhY3Rpb24uaWQgfHwgZ2VuZXJhdGVJZChhY3Rpb24uY29tcG9uZW50VHlwZSk7XG4gIGNvbnN0IGVtcHR5Q29tcG9uZW50RGF0YSA9IHBvcHVsYXRlSWRzKFxuICAgIHtcbiAgICAgIHR5cGU6IGFjdGlvbi5jb21wb25lbnRUeXBlLFxuICAgICAgcHJvcHM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGFwcFN0b3JlLmNvbmZpZy5jb21wb25lbnRzW2FjdGlvbi5jb21wb25lbnRUeXBlXS5kZWZhdWx0UHJvcHMgfHwge30pLCB7XG4gICAgICAgIGlkXG4gICAgICB9KVxuICAgIH0sXG4gICAgYXBwU3RvcmUuY29uZmlnXG4gICk7XG4gIGNvbnN0IFtwYXJlbnRJZF0gPSBhY3Rpb24uZGVzdGluYXRpb25ab25lLnNwbGl0KFwiOlwiKTtcbiAgY29uc3QgaWRzSW5QYXRoID0gZ2V0SWRzRm9yUGFyZW50KGFjdGlvbi5kZXN0aW5hdGlvblpvbmUsIHN0YXRlKTtcbiAgcmV0dXJuIHdhbGtBcHBTdGF0ZShcbiAgICBzdGF0ZSxcbiAgICBhcHBTdG9yZS5jb25maWcsXG4gICAgKGNvbnRlbnQsIHpvbmVDb21wb3VuZCkgPT4ge1xuICAgICAgaWYgKHpvbmVDb21wb3VuZCA9PT0gYWN0aW9uLmRlc3RpbmF0aW9uWm9uZSkge1xuICAgICAgICByZXR1cm4gaW5zZXJ0KFxuICAgICAgICAgIGNvbnRlbnQgfHwgW10sXG4gICAgICAgICAgYWN0aW9uLmRlc3RpbmF0aW9uSW5kZXgsXG4gICAgICAgICAgZW1wdHlDb21wb25lbnREYXRhXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9LFxuICAgIChjaGlsZEl0ZW0sIHBhdGgpID0+IHtcbiAgICAgIGlmIChjaGlsZEl0ZW0ucHJvcHMuaWQgPT09IGlkIHx8IGNoaWxkSXRlbS5wcm9wcy5pZCA9PT0gcGFyZW50SWQpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkSXRlbTtcbiAgICAgIH0gZWxzZSBpZiAoaWRzSW5QYXRoLmluY2x1ZGVzKGNoaWxkSXRlbS5wcm9wcy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkSXRlbTtcbiAgICAgIH0gZWxzZSBpZiAocGF0aC5pbmNsdWRlcyhhY3Rpb24uZGVzdGluYXRpb25ab25lKSkge1xuICAgICAgICByZXR1cm4gY2hpbGRJdGVtO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICApO1xufVxuXG4vLyByZWR1Y2VyL2FjdGlvbnMvcmVwbGFjZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciByZXBsYWNlQWN0aW9uID0gKHN0YXRlLCBhY3Rpb24sIGFwcFN0b3JlKSA9PiB7XG4gIGNvbnN0IFtwYXJlbnRJZF0gPSBhY3Rpb24uZGVzdGluYXRpb25ab25lLnNwbGl0KFwiOlwiKTtcbiAgY29uc3QgaWRzSW5QYXRoID0gZ2V0SWRzRm9yUGFyZW50KGFjdGlvbi5kZXN0aW5hdGlvblpvbmUsIHN0YXRlKTtcbiAgY29uc3Qgb3JpZ2luYWxJZCA9IHN0YXRlLmluZGV4ZXMuem9uZXNbYWN0aW9uLmRlc3RpbmF0aW9uWm9uZV0uY29udGVudElkc1thY3Rpb24uZGVzdGluYXRpb25JbmRleF07XG4gIGNvbnN0IGlkQ2hhbmdlZCA9IG9yaWdpbmFsSWQgIT09IGFjdGlvbi5kYXRhLnByb3BzLmlkO1xuICBpZiAoaWRDaGFuZ2VkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENhbid0IGNoYW5nZSB0aGUgaWQgZHVyaW5nIGEgcmVwbGFjZSBhY3Rpb24uIFBsZWFzZSB1cyBcInJlbW92ZVwiIGFuZCBcImluc2VydFwiIHRvIGRlZmluZSBhIG5ldyBub2RlLmBcbiAgICApO1xuICB9XG4gIGNvbnN0IG5ld1Nsb3RJZHMgPSBbXTtcbiAgY29uc3QgZGF0YSA9IHdhbGtUcmVlKGFjdGlvbi5kYXRhLCBhcHBTdG9yZS5jb25maWcsIChjb250ZW50cywgb3B0cykgPT4ge1xuICAgIG5ld1Nsb3RJZHMucHVzaChgJHtvcHRzLnBhcmVudElkfToke29wdHMucHJvcE5hbWV9YCk7XG4gICAgcmV0dXJuIGNvbnRlbnRzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgaWQgPSBnZW5lcmF0ZUlkKGl0ZW0udHlwZSk7XG4gICAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgaXRlbSksIHtcbiAgICAgICAgcHJvcHM6IF9fc3ByZWFkVmFsdWVzKHsgaWQgfSwgaXRlbS5wcm9wcylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgY29uc3Qgc3RhdGVXaXRoRGVlcFNsb3RzUmVtb3ZlZCA9IF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSk7XG4gIE9iamVjdC5rZXlzKHN0YXRlLmluZGV4ZXMuem9uZXMpLmZvckVhY2goKHpvbmVDb21wb3VuZCkgPT4ge1xuICAgIGNvbnN0IGlkID0gem9uZUNvbXBvdW5kLnNwbGl0KFwiOlwiKVswXTtcbiAgICBpZiAoaWQgPT09IG9yaWdpbmFsSWQpIHtcbiAgICAgIGlmICghbmV3U2xvdElkcy5pbmNsdWRlcyh6b25lQ29tcG91bmQpKSB7XG4gICAgICAgIGRlbGV0ZSBzdGF0ZVdpdGhEZWVwU2xvdHNSZW1vdmVkLmluZGV4ZXMuem9uZXNbem9uZUNvbXBvdW5kXTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gd2Fsa0FwcFN0YXRlKFxuICAgIHN0YXRlV2l0aERlZXBTbG90c1JlbW92ZWQsXG4gICAgYXBwU3RvcmUuY29uZmlnLFxuICAgIChjb250ZW50LCB6b25lQ29tcG91bmQpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBbLi4uY29udGVudF07XG4gICAgICBpZiAoem9uZUNvbXBvdW5kID09PSBhY3Rpb24uZGVzdGluYXRpb25ab25lKSB7XG4gICAgICAgIG5ld0NvbnRlbnRbYWN0aW9uLmRlc3RpbmF0aW9uSW5kZXhdID0gZGF0YTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdDb250ZW50O1xuICAgIH0sXG4gICAgKGNoaWxkSXRlbSwgcGF0aCkgPT4ge1xuICAgICAgY29uc3QgcGF0aElkcyA9IHBhdGgubWFwKChwKSA9PiBwLnNwbGl0KFwiOlwiKVswXSk7XG4gICAgICBpZiAoY2hpbGRJdGVtLnByb3BzLmlkID09PSBkYXRhLnByb3BzLmlkKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZEl0ZW0ucHJvcHMuaWQgPT09IHBhcmVudElkKSB7XG4gICAgICAgIHJldHVybiBjaGlsZEl0ZW07XG4gICAgICB9IGVsc2UgaWYgKGlkc0luUGF0aC5pbmRleE9mKGNoaWxkSXRlbS5wcm9wcy5pZCkgPiAtMSkge1xuICAgICAgICByZXR1cm4gY2hpbGRJdGVtO1xuICAgICAgfSBlbHNlIGlmIChwYXRoSWRzLmluZGV4T2YoZGF0YS5wcm9wcy5pZCkgPiAtMSkge1xuICAgICAgICByZXR1cm4gY2hpbGRJdGVtO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICApO1xufTtcblxuLy8gcmVkdWNlci9hY3Rpb25zL3JlcGxhY2Utcm9vdC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciByZXBsYWNlUm9vdEFjdGlvbiA9IChzdGF0ZSwgYWN0aW9uLCBhcHBTdG9yZSkgPT4ge1xuICByZXR1cm4gd2Fsa0FwcFN0YXRlKFxuICAgIHN0YXRlLFxuICAgIGFwcFN0b3JlLmNvbmZpZyxcbiAgICAoY29udGVudCkgPT4gY29udGVudCxcbiAgICAoY2hpbGRJdGVtKSA9PiB7XG4gICAgICBpZiAoY2hpbGRJdGVtLnByb3BzLmlkID09PSBcInJvb3RcIikge1xuICAgICAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY2hpbGRJdGVtKSwge1xuICAgICAgICAgIHByb3BzOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgY2hpbGRJdGVtLnByb3BzKSwgYWN0aW9uLnJvb3QucHJvcHMpLFxuICAgICAgICAgIHJlYWRPbmx5OiBhY3Rpb24ucm9vdC5yZWFkT25seVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGlsZEl0ZW07XG4gICAgfVxuICApO1xufTtcblxuLy8gcmVkdWNlci9hY3Rpb25zL2R1cGxpY2F0ZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gbGliL2RhdGEvZ2V0LWl0ZW0udHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5mdW5jdGlvbiBnZXRJdGVtKHNlbGVjdG9yLCBzdGF0ZSkge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCB6b25lID0gKF9hID0gc3RhdGUuaW5kZXhlcy56b25lcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hW3NlbGVjdG9yLnpvbmUgfHwgcm9vdERyb3BwYWJsZUlkXTtcbiAgcmV0dXJuIHpvbmUgPyAoX2IgPSBzdGF0ZS5pbmRleGVzLm5vZGVzW3pvbmUuY29udGVudElkc1tzZWxlY3Rvci5pbmRleF1dKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZGF0YSA6IHZvaWQgMDtcbn1cblxuLy8gcmVkdWNlci9hY3Rpb25zL2R1cGxpY2F0ZS50c1xuZnVuY3Rpb24gZHVwbGljYXRlQWN0aW9uKHN0YXRlLCBhY3Rpb24sIGFwcFN0b3JlKSB7XG4gIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKFxuICAgIHsgaW5kZXg6IGFjdGlvbi5zb3VyY2VJbmRleCwgem9uZTogYWN0aW9uLnNvdXJjZVpvbmUgfSxcbiAgICBzdGF0ZVxuICApO1xuICBjb25zdCBpZHNJblBhdGggPSBnZXRJZHNGb3JQYXJlbnQoYWN0aW9uLnNvdXJjZVpvbmUsIHN0YXRlKTtcbiAgY29uc3QgbmV3SXRlbSA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0pLCB7XG4gICAgcHJvcHM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGl0ZW0ucHJvcHMpLCB7XG4gICAgICBpZDogZ2VuZXJhdGVJZChpdGVtLnR5cGUpXG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IG1vZGlmaWVkID0gd2Fsa0FwcFN0YXRlKFxuICAgIHN0YXRlLFxuICAgIGFwcFN0b3JlLmNvbmZpZyxcbiAgICAoY29udGVudCwgem9uZUNvbXBvdW5kKSA9PiB7XG4gICAgICBpZiAoem9uZUNvbXBvdW5kID09PSBhY3Rpb24uc291cmNlWm9uZSkge1xuICAgICAgICByZXR1cm4gaW5zZXJ0KGNvbnRlbnQsIGFjdGlvbi5zb3VyY2VJbmRleCArIDEsIGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSxcbiAgICAoY2hpbGRJdGVtLCBwYXRoLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3Qgem9uZUNvbXBvdW5kID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgY29uc3QgcGFyZW50cyA9IHBhdGgubWFwKChwKSA9PiBwLnNwbGl0KFwiOlwiKVswXSk7XG4gICAgICBpZiAocGFyZW50cy5pbmRleE9mKG5ld0l0ZW0ucHJvcHMuaWQpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGNoaWxkSXRlbSksIHtcbiAgICAgICAgICBwcm9wczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY2hpbGRJdGVtLnByb3BzKSwge1xuICAgICAgICAgICAgaWQ6IGdlbmVyYXRlSWQoY2hpbGRJdGVtLnR5cGUpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoem9uZUNvbXBvdW5kID09PSBhY3Rpb24uc291cmNlWm9uZSAmJiBpbmRleCA9PT0gYWN0aW9uLnNvdXJjZUluZGV4ICsgMSkge1xuICAgICAgICByZXR1cm4gbmV3SXRlbTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFtzb3VyY2Vab25lUGFyZW50XSA9IGFjdGlvbi5zb3VyY2Vab25lLnNwbGl0KFwiOlwiKTtcbiAgICAgIGlmIChzb3VyY2Vab25lUGFyZW50ID09PSBjaGlsZEl0ZW0ucHJvcHMuaWQgfHwgaWRzSW5QYXRoLmluZGV4T2YoY2hpbGRJdGVtLnByb3BzLmlkKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBjaGlsZEl0ZW07XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICk7XG4gIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBtb2RpZmllZCksIHtcbiAgICB1aTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbW9kaWZpZWQudWkpLCB7XG4gICAgICBpdGVtU2VsZWN0b3I6IHtcbiAgICAgICAgaW5kZXg6IGFjdGlvbi5zb3VyY2VJbmRleCArIDEsXG4gICAgICAgIHpvbmU6IGFjdGlvbi5zb3VyY2Vab25lXG4gICAgICB9XG4gICAgfSlcbiAgfSk7XG59XG5cbi8vIHJlZHVjZXIvYWN0aW9ucy9yZW9yZGVyLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyByZWR1Y2VyL2FjdGlvbnMvbW92ZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gbGliL2RhdGEvcmVtb3ZlLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHJlbW92ZSA9IChsaXN0LCBpbmRleCkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKGxpc3QpO1xuICByZXN1bHQuc3BsaWNlKGluZGV4LCAxKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIHJlZHVjZXIvYWN0aW9ucy9tb3ZlLnRzXG52YXIgbW92ZUFjdGlvbiA9IChzdGF0ZSwgYWN0aW9uLCBhcHBTdG9yZSkgPT4ge1xuICBpZiAoYWN0aW9uLnNvdXJjZVpvbmUgPT09IGFjdGlvbi5kZXN0aW5hdGlvblpvbmUgJiYgYWN0aW9uLnNvdXJjZUluZGV4ID09PSBhY3Rpb24uZGVzdGluYXRpb25JbmRleCkge1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICBjb25zdCBpdGVtID0gZ2V0SXRlbShcbiAgICB7IHpvbmU6IGFjdGlvbi5zb3VyY2Vab25lLCBpbmRleDogYWN0aW9uLnNvdXJjZUluZGV4IH0sXG4gICAgc3RhdGVcbiAgKTtcbiAgaWYgKCFpdGVtKSByZXR1cm4gc3RhdGU7XG4gIGNvbnN0IGlkc0luU291cmNlUGF0aCA9IGdldElkc0ZvclBhcmVudChhY3Rpb24uc291cmNlWm9uZSwgc3RhdGUpO1xuICBjb25zdCBpZHNJbkRlc3RpbmF0aW9uUGF0aCA9IGdldElkc0ZvclBhcmVudChhY3Rpb24uZGVzdGluYXRpb25ab25lLCBzdGF0ZSk7XG4gIHJldHVybiB3YWxrQXBwU3RhdGUoXG4gICAgc3RhdGUsXG4gICAgYXBwU3RvcmUuY29uZmlnLFxuICAgIChjb250ZW50LCB6b25lQ29tcG91bmQpID0+IHtcbiAgICAgIGlmICh6b25lQ29tcG91bmQgPT09IGFjdGlvbi5zb3VyY2Vab25lICYmIHpvbmVDb21wb3VuZCA9PT0gYWN0aW9uLmRlc3RpbmF0aW9uWm9uZSkge1xuICAgICAgICByZXR1cm4gaW5zZXJ0KFxuICAgICAgICAgIHJlbW92ZShjb250ZW50LCBhY3Rpb24uc291cmNlSW5kZXgpLFxuICAgICAgICAgIGFjdGlvbi5kZXN0aW5hdGlvbkluZGV4LFxuICAgICAgICAgIGl0ZW1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoem9uZUNvbXBvdW5kID09PSBhY3Rpb24uc291cmNlWm9uZSkge1xuICAgICAgICByZXR1cm4gcmVtb3ZlKGNvbnRlbnQsIGFjdGlvbi5zb3VyY2VJbmRleCk7XG4gICAgICB9IGVsc2UgaWYgKHpvbmVDb21wb3VuZCA9PT0gYWN0aW9uLmRlc3RpbmF0aW9uWm9uZSkge1xuICAgICAgICByZXR1cm4gaW5zZXJ0KGNvbnRlbnQsIGFjdGlvbi5kZXN0aW5hdGlvbkluZGV4LCBpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0sXG4gICAgKGNoaWxkSXRlbSwgcGF0aCkgPT4ge1xuICAgICAgY29uc3QgW3NvdXJjZVpvbmVQYXJlbnRdID0gYWN0aW9uLnNvdXJjZVpvbmUuc3BsaXQoXCI6XCIpO1xuICAgICAgY29uc3QgW2Rlc3RpbmF0aW9uWm9uZVBhcmVudF0gPSBhY3Rpb24uZGVzdGluYXRpb25ab25lLnNwbGl0KFwiOlwiKTtcbiAgICAgIGNvbnN0IGNoaWxkSWQgPSBjaGlsZEl0ZW0ucHJvcHMuaWQ7XG4gICAgICBpZiAoc291cmNlWm9uZVBhcmVudCA9PT0gY2hpbGRJZCB8fCBkZXN0aW5hdGlvblpvbmVQYXJlbnQgPT09IGNoaWxkSWQgfHwgaXRlbS5wcm9wcy5pZCA9PT0gY2hpbGRJZCB8fCBpZHNJblNvdXJjZVBhdGguaW5kZXhPZihjaGlsZElkKSA+IC0xIHx8IGlkc0luRGVzdGluYXRpb25QYXRoLmluZGV4T2YoY2hpbGRJZCkgPiAtMSB8fCBwYXRoLmluY2x1ZGVzKGFjdGlvbi5kZXN0aW5hdGlvblpvbmUpKSB7XG4gICAgICAgIHJldHVybiBjaGlsZEl0ZW07XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICk7XG59O1xuXG4vLyByZWR1Y2VyL2FjdGlvbnMvcmVvcmRlci50c1xudmFyIHJlb3JkZXJBY3Rpb24gPSAoc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpID0+IHtcbiAgcmV0dXJuIG1vdmVBY3Rpb24oXG4gICAgc3RhdGUsXG4gICAge1xuICAgICAgdHlwZTogXCJtb3ZlXCIsXG4gICAgICBzb3VyY2VJbmRleDogYWN0aW9uLnNvdXJjZUluZGV4LFxuICAgICAgc291cmNlWm9uZTogYWN0aW9uLmRlc3RpbmF0aW9uWm9uZSxcbiAgICAgIGRlc3RpbmF0aW9uSW5kZXg6IGFjdGlvbi5kZXN0aW5hdGlvbkluZGV4LFxuICAgICAgZGVzdGluYXRpb25ab25lOiBhY3Rpb24uZGVzdGluYXRpb25ab25lXG4gICAgfSxcbiAgICBhcHBTdG9yZVxuICApO1xufTtcblxuLy8gcmVkdWNlci9hY3Rpb25zL3JlbW92ZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciByZW1vdmVBY3Rpb24gPSAoc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpID0+IHtcbiAgY29uc3QgaXRlbSA9IGdldEl0ZW0oeyBpbmRleDogYWN0aW9uLmluZGV4LCB6b25lOiBhY3Rpb24uem9uZSB9LCBzdGF0ZSk7XG4gIGNvbnN0IG5vZGVzVG9EZWxldGUgPSBPYmplY3QuZW50cmllcyhzdGF0ZS5pbmRleGVzLm5vZGVzKS5yZWR1Y2UoXG4gICAgKGFjYywgW25vZGVJZCwgbm9kZURhdGFdKSA9PiB7XG4gICAgICBjb25zdCBwYXRoSWRzID0gbm9kZURhdGEucGF0aC5tYXAoKHApID0+IHAuc3BsaXQoXCI6XCIpWzBdKTtcbiAgICAgIGlmIChwYXRoSWRzLmluY2x1ZGVzKGl0ZW0ucHJvcHMuaWQpKSB7XG4gICAgICAgIHJldHVybiBbLi4uYWNjLCBub2RlSWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LFxuICAgIFtpdGVtLnByb3BzLmlkXVxuICApO1xuICBjb25zdCBuZXdTdGF0ZSA9IHdhbGtBcHBTdGF0ZShcbiAgICBzdGF0ZSxcbiAgICBhcHBTdG9yZS5jb25maWcsXG4gICAgKGNvbnRlbnQsIHpvbmVDb21wb3VuZCkgPT4ge1xuICAgICAgaWYgKHpvbmVDb21wb3VuZCA9PT0gYWN0aW9uLnpvbmUpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZShjb250ZW50LCBhY3Rpb24uaW5kZXgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICApO1xuICBPYmplY3Qua2V5cyhuZXdTdGF0ZS5kYXRhLnpvbmVzIHx8IHt9KS5mb3JFYWNoKCh6b25lQ29tcG91bmQpID0+IHtcbiAgICBjb25zdCBwYXJlbnRJZCA9IHpvbmVDb21wb3VuZC5zcGxpdChcIjpcIilbMF07XG4gICAgaWYgKG5vZGVzVG9EZWxldGUuaW5jbHVkZXMocGFyZW50SWQpICYmIG5ld1N0YXRlLmRhdGEuem9uZXMpIHtcbiAgICAgIGRlbGV0ZSBuZXdTdGF0ZS5kYXRhLnpvbmVzW3pvbmVDb21wb3VuZF07XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmtleXMobmV3U3RhdGUuaW5kZXhlcy56b25lcykuZm9yRWFjaCgoem9uZUNvbXBvdW5kKSA9PiB7XG4gICAgY29uc3QgcGFyZW50SWQgPSB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpWzBdO1xuICAgIGlmIChub2Rlc1RvRGVsZXRlLmluY2x1ZGVzKHBhcmVudElkKSkge1xuICAgICAgZGVsZXRlIG5ld1N0YXRlLmluZGV4ZXMuem9uZXNbem9uZUNvbXBvdW5kXTtcbiAgICB9XG4gIH0pO1xuICBub2Rlc1RvRGVsZXRlLmZvckVhY2goKGlkKSA9PiB7XG4gICAgZGVsZXRlIG5ld1N0YXRlLmluZGV4ZXMubm9kZXNbaWRdO1xuICB9KTtcbiAgcmV0dXJuIG5ld1N0YXRlO1xufTtcblxuLy8gcmVkdWNlci9hY3Rpb25zL3JlZ2lzdGVyLXpvbmUudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgem9uZUNhY2hlID0ge307XG5mdW5jdGlvbiByZWdpc3RlclpvbmVBY3Rpb24oc3RhdGUsIGFjdGlvbikge1xuICBpZiAoem9uZUNhY2hlW2FjdGlvbi56b25lXSkge1xuICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSksIHtcbiAgICAgIGRhdGE6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlLmRhdGEpLCB7XG4gICAgICAgIHpvbmVzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS5kYXRhLnpvbmVzKSwge1xuICAgICAgICAgIFthY3Rpb24uem9uZV06IHpvbmVDYWNoZVthY3Rpb24uem9uZV1cbiAgICAgICAgfSlcbiAgICAgIH0pLFxuICAgICAgaW5kZXhlczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUuaW5kZXhlcyksIHtcbiAgICAgICAgem9uZXM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlLmluZGV4ZXMuem9uZXMpLCB7XG4gICAgICAgICAgW2FjdGlvbi56b25lXTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUuaW5kZXhlcy56b25lc1thY3Rpb24uem9uZV0pLCB7XG4gICAgICAgICAgICBjb250ZW50SWRzOiB6b25lQ2FjaGVbYWN0aW9uLnpvbmVdLm1hcCgoaXRlbSkgPT4gaXRlbS5wcm9wcy5pZCksXG4gICAgICAgICAgICB0eXBlOiBcImRyb3B6b25lXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7IGRhdGE6IHNldHVwWm9uZShzdGF0ZS5kYXRhLCBhY3Rpb24uem9uZSkgfSk7XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVyWm9uZUFjdGlvbihzdGF0ZSwgYWN0aW9uKSB7XG4gIGNvbnN0IF96b25lcyA9IF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS5kYXRhLnpvbmVzIHx8IHt9KTtcbiAgY29uc3Qgem9uZUluZGV4ID0gX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlLmluZGV4ZXMuem9uZXMgfHwge30pO1xuICBpZiAoX3pvbmVzW2FjdGlvbi56b25lXSkge1xuICAgIHpvbmVDYWNoZVthY3Rpb24uem9uZV0gPSBfem9uZXNbYWN0aW9uLnpvbmVdO1xuICAgIGRlbGV0ZSBfem9uZXNbYWN0aW9uLnpvbmVdO1xuICB9XG4gIGRlbGV0ZSB6b25lSW5kZXhbYWN0aW9uLnpvbmVdO1xuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7XG4gICAgZGF0YTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUuZGF0YSksIHtcbiAgICAgIHpvbmVzOiBfem9uZXNcbiAgICB9KSxcbiAgICBpbmRleGVzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS5pbmRleGVzKSwge1xuICAgICAgem9uZXM6IHpvbmVJbmRleFxuICAgIH0pXG4gIH0pO1xufVxuXG4vLyByZWR1Y2VyL2FjdGlvbnMvc2V0LWRhdGEudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc2V0RGF0YUFjdGlvbiA9IChzdGF0ZSwgYWN0aW9uLCBhcHBTdG9yZSkgPT4ge1xuICBpZiAodHlwZW9mIGFjdGlvbi5kYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJgc2V0RGF0YWAgaXMgZXhwZW5zaXZlIGFuZCBtYXkgY2F1c2UgdW5uZWNlc3NhcnkgcmUtcmVuZGVycy4gQ29uc2lkZXIgdXNpbmcgYSBtb3JlIGF0b21pYyBhY3Rpb24gaW5zdGVhZC5cIlxuICAgICk7XG4gICAgcmV0dXJuIHdhbGtBcHBTdGF0ZShcbiAgICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwge1xuICAgICAgICBkYXRhOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUuZGF0YSksIGFjdGlvbi5kYXRhKVxuICAgICAgfSksXG4gICAgICBhcHBTdG9yZS5jb25maWdcbiAgICApO1xuICB9XG4gIHJldHVybiB3YWxrQXBwU3RhdGUoXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7XG4gICAgICBkYXRhOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUuZGF0YSksIGFjdGlvbi5kYXRhKHN0YXRlLmRhdGEpKVxuICAgIH0pLFxuICAgIGFwcFN0b3JlLmNvbmZpZ1xuICApO1xufTtcblxuLy8gcmVkdWNlci9hY3Rpb25zL3NldC11aS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzZXRVaUFjdGlvbiA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIGlmICh0eXBlb2YgYWN0aW9uLnVpID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwge1xuICAgICAgdWk6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS51aSksIGFjdGlvbi51aSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7XG4gICAgdWk6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS51aSksIGFjdGlvbi51aShzdGF0ZS51aSkpXG4gIH0pO1xufTtcblxuLy8gbGliL2RhdGEvbWFrZS1zdGF0ZS1wdWJsaWMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgbWFrZVN0YXRlUHVibGljID0gKHN0YXRlKSA9PiB7XG4gIGNvbnN0IHsgZGF0YSwgdWkgfSA9IHN0YXRlO1xuICByZXR1cm4geyBkYXRhLCB1aSB9O1xufTtcblxuLy8gcmVkdWNlci9hY3Rpb25zLnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gcmVkdWNlci9pbmRleC50c1xuZnVuY3Rpb24gc3RvcmVJbnRlcmNlcHRvcihyZWR1Y2VyLCByZWNvcmQsIG9uQWN0aW9uKSB7XG4gIHJldHVybiAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGNvbnN0IG5ld0FwcFN0YXRlID0gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKTtcbiAgICBjb25zdCBpc1ZhbGlkVHlwZSA9ICFbXG4gICAgICBcInJlZ2lzdGVyWm9uZVwiLFxuICAgICAgXCJ1bnJlZ2lzdGVyWm9uZVwiLFxuICAgICAgXCJzZXREYXRhXCIsXG4gICAgICBcInNldFVpXCIsXG4gICAgICBcInNldFwiXG4gICAgXS5pbmNsdWRlcyhhY3Rpb24udHlwZSk7XG4gICAgaWYgKHR5cGVvZiBhY3Rpb24ucmVjb3JkSGlzdG9yeSAhPT0gXCJ1bmRlZmluZWRcIiA/IGFjdGlvbi5yZWNvcmRIaXN0b3J5IDogaXNWYWxpZFR5cGUpIHtcbiAgICAgIGlmIChyZWNvcmQpIHJlY29yZChuZXdBcHBTdGF0ZSk7XG4gICAgfVxuICAgIG9uQWN0aW9uID09IG51bGwgPyB2b2lkIDAgOiBvbkFjdGlvbihhY3Rpb24sIG1ha2VTdGF0ZVB1YmxpYyhuZXdBcHBTdGF0ZSksIG1ha2VTdGF0ZVB1YmxpYyhzdGF0ZSkpO1xuICAgIHJldHVybiBuZXdBcHBTdGF0ZTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlZHVjZXIoe1xuICByZWNvcmQsXG4gIG9uQWN0aW9uLFxuICBhcHBTdG9yZVxufSkge1xuICByZXR1cm4gc3RvcmVJbnRlcmNlcHRvcihcbiAgICAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcInNldFwiKSB7XG4gICAgICAgIHJldHVybiBzZXRBY3Rpb24oc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcImluc2VydFwiKSB7XG4gICAgICAgIHJldHVybiBpbnNlcnRBY3Rpb24oc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcInJlcGxhY2VcIikge1xuICAgICAgICByZXR1cm4gcmVwbGFjZUFjdGlvbihzdGF0ZSwgYWN0aW9uLCBhcHBTdG9yZSk7XG4gICAgICB9XG4gICAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFwicmVwbGFjZVJvb3RcIikge1xuICAgICAgICByZXR1cm4gcmVwbGFjZVJvb3RBY3Rpb24oc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcImR1cGxpY2F0ZVwiKSB7XG4gICAgICAgIHJldHVybiBkdXBsaWNhdGVBY3Rpb24oc3RhdGUsIGFjdGlvbiwgYXBwU3RvcmUpO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcInJlb3JkZXJcIikge1xuICAgICAgICByZXR1cm4gcmVvcmRlckFjdGlvbihzdGF0ZSwgYWN0aW9uLCBhcHBTdG9yZSk7XG4gICAgICB9XG4gICAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFwibW92ZVwiKSB7XG4gICAgICAgIHJldHVybiBtb3ZlQWN0aW9uKHN0YXRlLCBhY3Rpb24sIGFwcFN0b3JlKTtcbiAgICAgIH1cbiAgICAgIGlmIChhY3Rpb24udHlwZSA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICByZXR1cm4gcmVtb3ZlQWN0aW9uKHN0YXRlLCBhY3Rpb24sIGFwcFN0b3JlKTtcbiAgICAgIH1cbiAgICAgIGlmIChhY3Rpb24udHlwZSA9PT0gXCJyZWdpc3RlclpvbmVcIikge1xuICAgICAgICByZXR1cm4gcmVnaXN0ZXJab25lQWN0aW9uKHN0YXRlLCBhY3Rpb24pO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcInVucmVnaXN0ZXJab25lXCIpIHtcbiAgICAgICAgcmV0dXJuIHVucmVnaXN0ZXJab25lQWN0aW9uKHN0YXRlLCBhY3Rpb24pO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi50eXBlID09PSBcInNldERhdGFcIikge1xuICAgICAgICByZXR1cm4gc2V0RGF0YUFjdGlvbihzdGF0ZSwgYWN0aW9uLCBhcHBTdG9yZSk7XG4gICAgICB9XG4gICAgICBpZiAoYWN0aW9uLnR5cGUgPT09IFwic2V0VWlcIikge1xuICAgICAgICByZXR1cm4gc2V0VWlBY3Rpb24oc3RhdGUsIGFjdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcbiAgICByZWNvcmQsXG4gICAgb25BY3Rpb25cbiAgKTtcbn1cblxuLy8gc3RvcmUvaW5kZXgudHNcbmltcG9ydCB7IGNyZWF0ZSBhcyBjcmVhdGUyLCB1c2VTdG9yZSB9IGZyb20gXCJ6dXN0YW5kXCI7XG5pbXBvcnQgeyBzdWJzY3JpYmVXaXRoU2VsZWN0b3IgYXMgc3Vic2NyaWJlV2l0aFNlbGVjdG9yMiB9IGZyb20gXCJ6dXN0YW5kL21pZGRsZXdhcmVcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3RvcmUvc2xpY2VzL2hpc3RvcnkudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MiB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBsaWIvdXNlLWhvdGtleS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSBcInp1c3RhbmRcIjtcbmltcG9ydCB7IHN1YnNjcmliZVdpdGhTZWxlY3RvciB9IGZyb20gXCJ6dXN0YW5kL21pZGRsZXdhcmVcIjtcbnZhciBrZXlDb2RlTWFwID0ge1xuICBDb250cm9sTGVmdDogXCJjdHJsXCIsXG4gIENvbnRyb2xSaWdodDogXCJjdHJsXCIsXG4gIE1ldGFMZWZ0OiBcIm1ldGFcIixcbiAgTWV0YVJpZ2h0OiBcIm1ldGFcIixcbiAgU2hpZnRMZWZ0OiBcInNoaWZ0XCIsXG4gIFNoaWZ0UmlnaHQ6IFwic2hpZnRcIixcbiAgS2V5QTogXCJhXCIsXG4gIEtleUI6IFwiYlwiLFxuICBLZXlDOiBcImNcIixcbiAgS2V5RDogXCJkXCIsXG4gIEtleUU6IFwiZVwiLFxuICBLZXlGOiBcImZcIixcbiAgS2V5RzogXCJnXCIsXG4gIEtleUg6IFwiaFwiLFxuICBLZXlJOiBcImlcIixcbiAgS2V5SjogXCJqXCIsXG4gIEtleUs6IFwia1wiLFxuICBLZXlMOiBcImxcIixcbiAgS2V5TTogXCJtXCIsXG4gIEtleU46IFwiblwiLFxuICBLZXlPOiBcIm9cIixcbiAgS2V5UDogXCJwXCIsXG4gIEtleVE6IFwicVwiLFxuICBLZXlSOiBcInJcIixcbiAgS2V5UzogXCJzXCIsXG4gIEtleVQ6IFwidFwiLFxuICBLZXlVOiBcInVcIixcbiAgS2V5VjogXCJ2XCIsXG4gIEtleVc6IFwid1wiLFxuICBLZXlYOiBcInhcIixcbiAgS2V5WTogXCJ5XCIsXG4gIEtleVo6IFwielwiXG59O1xudmFyIHVzZUhvdGtleVN0b3JlID0gY3JlYXRlKCkoXG4gIHN1YnNjcmliZVdpdGhTZWxlY3Rvcigoc2V0KSA9PiAoe1xuICAgIGhlbGQ6IHt9LFxuICAgIGhvbGQ6IChrZXkpID0+IHNldCgocykgPT4gcy5oZWxkW2tleV0gPyBzIDogeyBoZWxkOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzLmhlbGQpLCB7IFtrZXldOiB0cnVlIH0pIH0pLFxuICAgIHJlbGVhc2U6IChrZXkpID0+IHNldCgocykgPT4gcy5oZWxkW2tleV0gPyB7IGhlbGQ6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHMuaGVsZCksIHsgW2tleV06IGZhbHNlIH0pIH0gOiBzKSxcbiAgICByZXNldDogKGhlbGQgPSB7fSkgPT4gc2V0KCgpID0+ICh7IGhlbGQgfSkpLFxuICAgIHRyaWdnZXJzOiB7fVxuICB9KSlcbik7XG52YXIgbW9uaXRvckhvdGtleXMgPSAoZG9jKSA9PiB7XG4gIGNvbnN0IG9uS2V5RG93biA9IChlKSA9PiB7XG4gICAgY29uc3Qga2V5ID0ga2V5Q29kZU1hcFtlLmNvZGVdO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHVzZUhvdGtleVN0b3JlLmdldFN0YXRlKCkuaG9sZChrZXkpO1xuICAgICAgY29uc3QgeyBoZWxkLCB0cmlnZ2VycyB9ID0gdXNlSG90a2V5U3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgIE9iamVjdC52YWx1ZXModHJpZ2dlcnMpLmZvckVhY2goKHsgY29tYm8sIGNiIH0pID0+IHtcbiAgICAgICAgY29uc3QgY29uZGl0aW9uTWV0ID0gT2JqZWN0LmVudHJpZXMoY29tYm8pLmV2ZXJ5KFxuICAgICAgICAgIChba2V5MiwgdmFsdWVdKSA9PiB2YWx1ZSA9PT0gISFoZWxkW2tleTJdXG4gICAgICAgICkgJiYgT2JqZWN0LmVudHJpZXMoaGVsZCkuZXZlcnkoXG4gICAgICAgICAgKFtrZXkyLCB2YWx1ZV0pID0+IHZhbHVlID09PSAhIWNvbWJvW2tleTJdXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjb25kaXRpb25NZXQpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoa2V5ICE9PSBcIm1ldGFcIiAmJiBrZXkgIT09IFwiY3RybFwiICYmIGtleSAhPT0gXCJzaGlmdFwiKSB7XG4gICAgICAgIHVzZUhvdGtleVN0b3JlLmdldFN0YXRlKCkucmVsZWFzZShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgb25LZXlVcCA9IChlKSA9PiB7XG4gICAgY29uc3Qga2V5ID0ga2V5Q29kZU1hcFtlLmNvZGVdO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChrZXkgPT09IFwibWV0YVwiKSB7XG4gICAgICAgIHVzZUhvdGtleVN0b3JlLmdldFN0YXRlKCkucmVzZXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVzZUhvdGtleVN0b3JlLmdldFN0YXRlKCkucmVsZWFzZShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgb25WaXNpYmlsaXR5Q2hhbmdlZCA9IChlKSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJoaWRkZW5cIikge1xuICAgICAgdXNlSG90a2V5U3RvcmUuZ2V0U3RhdGUoKS5yZXNldCgpO1xuICAgIH1cbiAgfTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIG9uS2V5RG93bik7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgb25LZXlVcCk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBvblZpc2liaWxpdHlDaGFuZ2VkKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIG9uS2V5VXApO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBvblZpc2liaWxpdHlDaGFuZ2VkKTtcbiAgfTtcbn07XG52YXIgdXNlTW9uaXRvckhvdGtleXMgPSAoKSA9PiB7XG4gIHVzZUVmZmVjdCgoKSA9PiBtb25pdG9ySG90a2V5cyhkb2N1bWVudCksIFtdKTtcbn07XG52YXIgdXNlSG90a2V5ID0gKGNvbWJvLCBjYikgPT4ge1xuICB1c2VFZmZlY3QoXG4gICAgKCkgPT4gdXNlSG90a2V5U3RvcmUuc2V0U3RhdGUoKHMpID0+ICh7XG4gICAgICB0cmlnZ2VyczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcy50cmlnZ2VycyksIHtcbiAgICAgICAgW2Ake09iamVjdC5rZXlzKGNvbWJvKS5qb2luKFwiK1wiKX1gXTogeyBjb21ibywgY2IgfVxuICAgICAgfSlcbiAgICB9KSksXG4gICAgW11cbiAgKTtcbn07XG5cbi8vIHN0b3JlL3NsaWNlcy9oaXN0b3J5LnRzXG52YXIgRU1QVFlfSElTVE9SWV9JTkRFWCA9IDA7XG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB0aW1lb3V0MyA9IDMwMCkge1xuICBsZXQgdGltZXI7XG4gIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGZ1bmMoLi4uYXJncyk7XG4gICAgfSwgdGltZW91dDMpO1xuICB9O1xufVxudmFyIHRpZHlTdGF0ZSA9IChzdGF0ZSkgPT4ge1xuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7XG4gICAgdWk6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlLnVpKSwge1xuICAgICAgZmllbGQ6IHtcbiAgICAgICAgZm9jdXM6IG51bGxcbiAgICAgIH1cbiAgICB9KVxuICB9KTtcbn07XG52YXIgY3JlYXRlSGlzdG9yeVNsaWNlID0gKHNldCwgZ2V0KSA9PiB7XG4gIGNvbnN0IHJlY29yZCA9IGRlYm91bmNlKChzdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHsgaGlzdG9yaWVzLCBpbmRleCB9ID0gZ2V0KCkuaGlzdG9yeTtcbiAgICBjb25zdCBoaXN0b3J5ID0ge1xuICAgICAgc3RhdGUsXG4gICAgICBpZDogZ2VuZXJhdGVJZChcImhpc3RvcnlcIilcbiAgICB9O1xuICAgIGNvbnN0IG5ld0hpc3RvcmllcyA9IFsuLi5oaXN0b3JpZXMuc2xpY2UoMCwgaW5kZXggKyAxKSwgaGlzdG9yeV07XG4gICAgc2V0KHtcbiAgICAgIGhpc3Rvcnk6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGdldCgpLmhpc3RvcnkpLCB7XG4gICAgICAgIGhpc3RvcmllczogbmV3SGlzdG9yaWVzLFxuICAgICAgICBpbmRleDogbmV3SGlzdG9yaWVzLmxlbmd0aCAtIDFcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0sIDI1MCk7XG4gIHJldHVybiB7XG4gICAgaW5pdGlhbEFwcFN0YXRlOiB7fSxcbiAgICBpbmRleDogRU1QVFlfSElTVE9SWV9JTkRFWCxcbiAgICBoaXN0b3JpZXM6IFtdLFxuICAgIGhhc1Bhc3Q6ICgpID0+IGdldCgpLmhpc3RvcnkuaW5kZXggPiBFTVBUWV9ISVNUT1JZX0lOREVYLFxuICAgIGhhc0Z1dHVyZTogKCkgPT4gZ2V0KCkuaGlzdG9yeS5pbmRleCA8IGdldCgpLmhpc3RvcnkuaGlzdG9yaWVzLmxlbmd0aCAtIDEsXG4gICAgcHJldkhpc3Rvcnk6ICgpID0+IHtcbiAgICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gZ2V0KCk7XG4gICAgICByZXR1cm4gaGlzdG9yeS5oYXNQYXN0KCkgPyBoaXN0b3J5Lmhpc3Rvcmllc1toaXN0b3J5LmluZGV4IC0gMV0gOiBudWxsO1xuICAgIH0sXG4gICAgbmV4dEhpc3Rvcnk6ICgpID0+IHtcbiAgICAgIGNvbnN0IHMgPSBnZXQoKS5oaXN0b3J5O1xuICAgICAgcmV0dXJuIHMuaGFzRnV0dXJlKCkgPyBzLmhpc3Rvcmllc1tzLmluZGV4ICsgMV0gOiBudWxsO1xuICAgIH0sXG4gICAgY3VycmVudEhpc3Rvcnk6ICgpID0+IGdldCgpLmhpc3RvcnkuaGlzdG9yaWVzW2dldCgpLmhpc3RvcnkuaW5kZXhdLFxuICAgIGJhY2s6ICgpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IHsgaGlzdG9yeSwgZGlzcGF0Y2ggfSA9IGdldCgpO1xuICAgICAgaWYgKGhpc3RvcnkuaGFzUGFzdCgpKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGlkeVN0YXRlKFxuICAgICAgICAgICgoX2EgPSBoaXN0b3J5LnByZXZIaXN0b3J5KCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdGF0ZSkgfHwgaGlzdG9yeS5pbml0aWFsQXBwU3RhdGVcbiAgICAgICAgKTtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgc3RhdGVcbiAgICAgICAgfSk7XG4gICAgICAgIHNldCh7IGhpc3Rvcnk6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGhpc3RvcnkpLCB7IGluZGV4OiBoaXN0b3J5LmluZGV4IC0gMSB9KSB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZvcndhcmQ6ICgpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IHsgaGlzdG9yeSwgZGlzcGF0Y2ggfSA9IGdldCgpO1xuICAgICAgaWYgKGhpc3RvcnkuaGFzRnV0dXJlKCkpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSAoX2EgPSBoaXN0b3J5Lm5leHRIaXN0b3J5KCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdGF0ZTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcInNldFwiLCBzdGF0ZTogc3RhdGUgPyB0aWR5U3RhdGUoc3RhdGUpIDoge30gfSk7XG4gICAgICAgIHNldCh7IGhpc3Rvcnk6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGhpc3RvcnkpLCB7IGluZGV4OiBoaXN0b3J5LmluZGV4ICsgMSB9KSB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldEhpc3RvcmllczogKGhpc3RvcmllcykgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgeyBkaXNwYXRjaCwgaGlzdG9yeSB9ID0gZ2V0KCk7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgIHN0YXRlOiAoKF9hID0gaGlzdG9yaWVzW2hpc3Rvcmllcy5sZW5ndGggLSAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN0YXRlKSB8fCBoaXN0b3J5LmluaXRpYWxBcHBTdGF0ZVxuICAgICAgfSk7XG4gICAgICBzZXQoeyBoaXN0b3J5OiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBoaXN0b3J5KSwgeyBoaXN0b3JpZXMsIGluZGV4OiBoaXN0b3JpZXMubGVuZ3RoIC0gMSB9KSB9KTtcbiAgICB9LFxuICAgIHNldEhpc3RvcnlJbmRleDogKGluZGV4KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCB7IGRpc3BhdGNoLCBoaXN0b3J5IH0gPSBnZXQoKTtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgc3RhdGU6ICgoX2EgPSBoaXN0b3J5Lmhpc3Rvcmllc1tpbmRleF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdGF0ZSkgfHwgaGlzdG9yeS5pbml0aWFsQXBwU3RhdGVcbiAgICAgIH0pO1xuICAgICAgc2V0KHsgaGlzdG9yeTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgaGlzdG9yeSksIHsgaW5kZXggfSkgfSk7XG4gICAgfSxcbiAgICByZWNvcmRcbiAgfTtcbn07XG5mdW5jdGlvbiB1c2VSZWdpc3Rlckhpc3RvcnlTbGljZShhcHBTdG9yZSwge1xuICBoaXN0b3JpZXMsXG4gIGluZGV4LFxuICBpbml0aWFsQXBwU3RhdGVcbn0pIHtcbiAgdXNlRWZmZWN0MihcbiAgICAoKSA9PiBhcHBTdG9yZS5zZXRTdGF0ZSh7XG4gICAgICBoaXN0b3J5OiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhcHBTdG9yZS5nZXRTdGF0ZSgpLmhpc3RvcnkpLCB7XG4gICAgICAgIGhpc3RvcmllcyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIGluaXRpYWxBcHBTdGF0ZVxuICAgICAgfSlcbiAgICB9KSxcbiAgICBbaGlzdG9yaWVzLCBpbmRleCwgaW5pdGlhbEFwcFN0YXRlXVxuICApO1xuICBjb25zdCBiYWNrID0gKCkgPT4ge1xuICAgIGFwcFN0b3JlLmdldFN0YXRlKCkuaGlzdG9yeS5iYWNrKCk7XG4gIH07XG4gIGNvbnN0IGZvcndhcmQgPSAoKSA9PiB7XG4gICAgYXBwU3RvcmUuZ2V0U3RhdGUoKS5oaXN0b3J5LmZvcndhcmQoKTtcbiAgfTtcbiAgdXNlSG90a2V5KHsgbWV0YTogdHJ1ZSwgejogdHJ1ZSB9LCBiYWNrKTtcbiAgdXNlSG90a2V5KHsgbWV0YTogdHJ1ZSwgc2hpZnQ6IHRydWUsIHo6IHRydWUgfSwgZm9yd2FyZCk7XG4gIHVzZUhvdGtleSh7IG1ldGE6IHRydWUsIHk6IHRydWUgfSwgZm9yd2FyZCk7XG4gIHVzZUhvdGtleSh7IGN0cmw6IHRydWUsIHo6IHRydWUgfSwgYmFjayk7XG4gIHVzZUhvdGtleSh7IGN0cmw6IHRydWUsIHNoaWZ0OiB0cnVlLCB6OiB0cnVlIH0sIGZvcndhcmQpO1xuICB1c2VIb3RrZXkoeyBjdHJsOiB0cnVlLCB5OiB0cnVlIH0sIGZvcndhcmQpO1xufVxuXG4vLyBzdG9yZS9zbGljZXMvbm9kZXMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgY3JlYXRlTm9kZXNTbGljZSA9IChzZXQsIGdldCkgPT4gKHtcbiAgbm9kZXM6IHt9LFxuICByZWdpc3Rlck5vZGU6IChpZCwgbm9kZSkgPT4ge1xuICAgIGNvbnN0IHMgPSBnZXQoKS5ub2RlcztcbiAgICBjb25zdCBlbXB0eU5vZGUgPSB7XG4gICAgICBpZCxcbiAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgc3luYzogKCkgPT4gbnVsbCxcbiAgICAgICAgaGlkZU92ZXJsYXk6ICgpID0+IG51bGwsXG4gICAgICAgIHNob3dPdmVybGF5OiAoKSA9PiBudWxsXG4gICAgICB9LFxuICAgICAgZWxlbWVudDogbnVsbFxuICAgIH07XG4gICAgY29uc3QgZXhpc3RpbmdOb2RlID0gcy5ub2Rlc1tpZF07XG4gICAgc2V0KHtcbiAgICAgIG5vZGVzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzKSwge1xuICAgICAgICBub2RlczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcy5ub2RlcyksIHtcbiAgICAgICAgICBbaWRdOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBlbXB0eU5vZGUpLCBleGlzdGluZ05vZGUpLCBub2RlKSwge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KTtcbiAgfSxcbiAgdW5yZWdpc3Rlck5vZGU6IChpZCkgPT4ge1xuICAgIGNvbnN0IHMgPSBnZXQoKS5ub2RlcztcbiAgICBjb25zdCBleGlzdGluZ05vZGUgPSBzLm5vZGVzW2lkXTtcbiAgICBpZiAoZXhpc3RpbmdOb2RlKSB7XG4gICAgICBjb25zdCBuZXdOb2RlcyA9IF9fc3ByZWFkVmFsdWVzKHt9LCBzLm5vZGVzKTtcbiAgICAgIGRlbGV0ZSBuZXdOb2Rlc1tpZF07XG4gICAgICBzZXQoe1xuICAgICAgICBub2RlczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcyksIHtcbiAgICAgICAgICBub2RlczogbmV3Tm9kZXNcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7XG5cbi8vIHN0b3JlL3NsaWNlcy9wZXJtaXNzaW9ucy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QzIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGxpYi9kYXRhL2ZsYXR0ZW4tZGF0YS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBmbGF0dGVuRGF0YSA9IChzdGF0ZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSBbXTtcbiAgd2Fsa0FwcFN0YXRlKFxuICAgIHN0YXRlLFxuICAgIGNvbmZpZyxcbiAgICAoY29udGVudCkgPT4gY29udGVudCxcbiAgICAoaXRlbSkgPT4ge1xuICAgICAgZGF0YS5wdXNoKGl0ZW0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICApO1xuICByZXR1cm4gZGF0YTtcbn07XG5cbi8vIHN0b3JlL3NsaWNlcy9wZXJtaXNzaW9ucy50c1xudmFyIGNyZWF0ZVBlcm1pc3Npb25zU2xpY2UgPSAoc2V0LCBnZXQpID0+IHtcbiAgY29uc3QgcmVzb2x2ZVBlcm1pc3Npb25zID0gKC4uLl8wKSA9PiBfX2FzeW5jKHZvaWQgMCwgWy4uLl8wXSwgZnVuY3Rpb24qIChwYXJhbXMgPSB7fSwgZm9yY2UpIHtcbiAgICBjb25zdCB7IHN0YXRlLCBwZXJtaXNzaW9ucywgY29uZmlnIH0gPSBnZXQoKTtcbiAgICBjb25zdCB7IGNhY2hlLCBnbG9iYWxQZXJtaXNzaW9ucyB9ID0gcGVybWlzc2lvbnM7XG4gICAgY29uc3QgcmVzb2x2ZURhdGFGb3JJdGVtID0gKGl0ZW0yLCBmb3JjZTIgPSBmYWxzZSkgPT4gX19hc3luYyh2b2lkIDAsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgIGNvbnN0IHsgY29uZmlnOiBjb25maWcyLCBzdGF0ZTogYXBwU3RhdGUsIHNldENvbXBvbmVudExvYWRpbmcgfSA9IGdldCgpO1xuICAgICAgY29uc3QgY29tcG9uZW50Q29uZmlnID0gaXRlbTIudHlwZSA9PT0gXCJyb290XCIgPyBjb25maWcyLnJvb3QgOiBjb25maWcyLmNvbXBvbmVudHNbaXRlbTIudHlwZV07XG4gICAgICBpZiAoIWNvbXBvbmVudENvbmZpZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpbml0aWFsUGVybWlzc2lvbnMgPSBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZ2xvYmFsUGVybWlzc2lvbnMpLCBjb21wb25lbnRDb25maWcucGVybWlzc2lvbnMpO1xuICAgICAgaWYgKGNvbXBvbmVudENvbmZpZy5yZXNvbHZlUGVybWlzc2lvbnMpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IGdldENoYW5nZWQoaXRlbTIsIChfYSA9IGNhY2hlW2l0ZW0yLnByb3BzLmlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmxhc3REYXRhKTtcbiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoY2hhbmdlZCkuc29tZSgoZWwpID0+IGVsID09PSB0cnVlKSB8fCBmb3JjZTIpIHtcbiAgICAgICAgICBjb25zdCBjbGVhclRpbWVvdXQyID0gc2V0Q29tcG9uZW50TG9hZGluZyhpdGVtMi5wcm9wcy5pZCwgdHJ1ZSwgNTApO1xuICAgICAgICAgIGNvbnN0IHJlc29sdmVkUGVybWlzc2lvbnMgPSB5aWVsZCBjb21wb25lbnRDb25maWcucmVzb2x2ZVBlcm1pc3Npb25zKFxuICAgICAgICAgICAgaXRlbTIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNoYW5nZWQsXG4gICAgICAgICAgICAgIGxhc3RQZXJtaXNzaW9uczogKChfYiA9IGNhY2hlW2l0ZW0yLnByb3BzLmlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmxhc3RQZXJtaXNzaW9ucykgfHwgbnVsbCxcbiAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IGluaXRpYWxQZXJtaXNzaW9ucyxcbiAgICAgICAgICAgICAgYXBwU3RhdGU6IG1ha2VTdGF0ZVB1YmxpYyhhcHBTdGF0ZSksXG4gICAgICAgICAgICAgIGxhc3REYXRhOiAoKF9jID0gY2FjaGVbaXRlbTIucHJvcHMuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2MubGFzdERhdGEpIHx8IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGxhdGVzdCA9IGdldCgpLnBlcm1pc3Npb25zO1xuICAgICAgICAgIHNldCh7XG4gICAgICAgICAgICBwZXJtaXNzaW9uczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbGF0ZXN0KSwge1xuICAgICAgICAgICAgICBjYWNoZTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbGF0ZXN0LmNhY2hlKSwge1xuICAgICAgICAgICAgICAgIFtpdGVtMi5wcm9wcy5pZF06IHtcbiAgICAgICAgICAgICAgICAgIGxhc3REYXRhOiBpdGVtMixcbiAgICAgICAgICAgICAgICAgIGxhc3RQZXJtaXNzaW9uczogcmVzb2x2ZWRQZXJtaXNzaW9uc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHJlc29sdmVkUGVybWlzc2lvbnM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGxhdGVzdC5yZXNvbHZlZFBlcm1pc3Npb25zKSwge1xuICAgICAgICAgICAgICAgIFtpdGVtMi5wcm9wcy5pZF06IHJlc29sdmVkUGVybWlzc2lvbnNcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0MigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgcmVzb2x2ZURhdGFGb3JSb290ID0gKGZvcmNlMiA9IGZhbHNlKSA9PiB7XG4gICAgICBjb25zdCB7IHN0YXRlOiBhcHBTdGF0ZSB9ID0gZ2V0KCk7XG4gICAgICByZXNvbHZlRGF0YUZvckl0ZW0oXG4gICAgICAgIC8vIFNoaW0gdGhlIHJvb3QgZGF0YSBpbiBieSBjb25mb3JtaW5nIHRvIGNvbXBvbmVudCBkYXRhIHNoYXBlXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInJvb3RcIixcbiAgICAgICAgICBwcm9wczogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgYXBwU3RhdGUuZGF0YS5yb290LnByb3BzKSwgeyBpZDogXCJyb290XCIgfSlcbiAgICAgICAgfSxcbiAgICAgICAgZm9yY2UyXG4gICAgICApO1xuICAgIH07XG4gICAgY29uc3QgeyBpdGVtLCB0eXBlLCByb290IH0gPSBwYXJhbXM7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIHlpZWxkIHJlc29sdmVEYXRhRm9ySXRlbShpdGVtLCBmb3JjZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlKSB7XG4gICAgICBmbGF0dGVuRGF0YShzdGF0ZSwgY29uZmlnKS5maWx0ZXIoKGl0ZW0yKSA9PiBpdGVtMi50eXBlID09PSB0eXBlKS5tYXAoKGl0ZW0yKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgeWllbGQgcmVzb2x2ZURhdGFGb3JJdGVtKGl0ZW0yLCBmb3JjZSk7XG4gICAgICB9KSk7XG4gICAgfSBlbHNlIGlmIChyb290KSB7XG4gICAgICByZXNvbHZlRGF0YUZvclJvb3QoZm9yY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmbGF0dGVuRGF0YShzdGF0ZSwgY29uZmlnKS5tYXAoKGl0ZW0yKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgeWllbGQgcmVzb2x2ZURhdGFGb3JJdGVtKGl0ZW0yLCBmb3JjZSk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgcmVmcmVzaFBlcm1pc3Npb25zID0gKHBhcmFtcykgPT4gcmVzb2x2ZVBlcm1pc3Npb25zKHBhcmFtcywgdHJ1ZSk7XG4gIHJldHVybiB7XG4gICAgY2FjaGU6IHt9LFxuICAgIGdsb2JhbFBlcm1pc3Npb25zOiB7XG4gICAgICBkcmFnOiB0cnVlLFxuICAgICAgZWRpdDogdHJ1ZSxcbiAgICAgIGRlbGV0ZTogdHJ1ZSxcbiAgICAgIGR1cGxpY2F0ZTogdHJ1ZSxcbiAgICAgIGluc2VydDogdHJ1ZVxuICAgIH0sXG4gICAgcmVzb2x2ZWRQZXJtaXNzaW9uczoge30sXG4gICAgZ2V0UGVybWlzc2lvbnM6ICh7IGl0ZW0sIHR5cGUsIHJvb3QgfSA9IHt9KSA9PiB7XG4gICAgICBjb25zdCB7IGNvbmZpZywgcGVybWlzc2lvbnMgfSA9IGdldCgpO1xuICAgICAgY29uc3QgeyBnbG9iYWxQZXJtaXNzaW9ucywgcmVzb2x2ZWRQZXJtaXNzaW9ucyB9ID0gcGVybWlzc2lvbnM7XG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRDb25maWcgPSBjb25maWcuY29tcG9uZW50c1tpdGVtLnR5cGVdO1xuICAgICAgICBjb25zdCBpbml0aWFsUGVybWlzc2lvbnMgPSBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZ2xvYmFsUGVybWlzc2lvbnMpLCBjb21wb25lbnRDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBvbmVudENvbmZpZy5wZXJtaXNzaW9ucyk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkRm9ySXRlbSA9IHJlc29sdmVkUGVybWlzc2lvbnNbaXRlbS5wcm9wcy5pZF07XG4gICAgICAgIHJldHVybiByZXNvbHZlZEZvckl0ZW0gPyBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZ2xvYmFsUGVybWlzc2lvbnMpLCByZXNvbHZlZEZvckl0ZW0pIDogaW5pdGlhbFBlcm1pc3Npb25zO1xuICAgICAgfSBlbHNlIGlmICh0eXBlKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudENvbmZpZyA9IGNvbmZpZy5jb21wb25lbnRzW3R5cGVdO1xuICAgICAgICByZXR1cm4gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGdsb2JhbFBlcm1pc3Npb25zKSwgY29tcG9uZW50Q29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBjb21wb25lbnRDb25maWcucGVybWlzc2lvbnMpO1xuICAgICAgfSBlbHNlIGlmIChyb290KSB7XG4gICAgICAgIGNvbnN0IHJvb3RDb25maWcgPSBjb25maWcucm9vdDtcbiAgICAgICAgY29uc3QgaW5pdGlhbFBlcm1pc3Npb25zID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGdsb2JhbFBlcm1pc3Npb25zKSwgcm9vdENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogcm9vdENvbmZpZy5wZXJtaXNzaW9ucyk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkRm9ySXRlbSA9IHJlc29sdmVkUGVybWlzc2lvbnNbXCJyb290XCJdO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZWRGb3JJdGVtID8gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGdsb2JhbFBlcm1pc3Npb25zKSwgcmVzb2x2ZWRGb3JJdGVtKSA6IGluaXRpYWxQZXJtaXNzaW9ucztcbiAgICAgIH1cbiAgICAgIHJldHVybiBnbG9iYWxQZXJtaXNzaW9ucztcbiAgICB9LFxuICAgIHJlc29sdmVQZXJtaXNzaW9ucyxcbiAgICByZWZyZXNoUGVybWlzc2lvbnNcbiAgfTtcbn07XG52YXIgdXNlUmVnaXN0ZXJQZXJtaXNzaW9uc1NsaWNlID0gKGFwcFN0b3JlLCBnbG9iYWxQZXJtaXNzaW9ucykgPT4ge1xuICB1c2VFZmZlY3QzKCgpID0+IHtcbiAgICBjb25zdCB7IHBlcm1pc3Npb25zIH0gPSBhcHBTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHsgZ2xvYmFsUGVybWlzc2lvbnM6IGV4aXN0aW5nR2xvYmFsUGVybWlzc2lvbnMgfSA9IHBlcm1pc3Npb25zO1xuICAgIGFwcFN0b3JlLnNldFN0YXRlKHtcbiAgICAgIHBlcm1pc3Npb25zOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwZXJtaXNzaW9ucyksIHtcbiAgICAgICAgZ2xvYmFsUGVybWlzc2lvbnM6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBleGlzdGluZ0dsb2JhbFBlcm1pc3Npb25zKSwgZ2xvYmFsUGVybWlzc2lvbnMpXG4gICAgICB9KVxuICAgIH0pO1xuICAgIHBlcm1pc3Npb25zLnJlc29sdmVQZXJtaXNzaW9ucygpO1xuICB9LCBbZ2xvYmFsUGVybWlzc2lvbnNdKTtcbiAgdXNlRWZmZWN0MygoKSA9PiB7XG4gICAgcmV0dXJuIGFwcFN0b3JlLnN1YnNjcmliZShcbiAgICAgIChzKSA9PiBzLnN0YXRlLmRhdGEsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGFwcFN0b3JlLmdldFN0YXRlKCkucGVybWlzc2lvbnMucmVzb2x2ZVBlcm1pc3Npb25zKCk7XG4gICAgICB9XG4gICAgKTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QzKCgpID0+IHtcbiAgICByZXR1cm4gYXBwU3RvcmUuc3Vic2NyaWJlKFxuICAgICAgKHMpID0+IHMuY29uZmlnLFxuICAgICAgKCkgPT4ge1xuICAgICAgICBhcHBTdG9yZS5nZXRTdGF0ZSgpLnBlcm1pc3Npb25zLnJlc29sdmVQZXJtaXNzaW9ucygpO1xuICAgICAgfVxuICAgICk7XG4gIH0sIFtdKTtcbn07XG5cbi8vIHN0b3JlL3NsaWNlcy9maWVsZHMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDQgfSBmcm9tIFwicmVhY3RcIjtcbnZhciBjcmVhdGVGaWVsZHNTbGljZSA9IChfc2V0LCBfZ2V0KSA9PiB7XG4gIHJldHVybiB7XG4gICAgZmllbGRzOiB7fSxcbiAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICBsYXN0UmVzb2x2ZWREYXRhOiB7fSxcbiAgICBpZDogdm9pZCAwXG4gIH07XG59O1xudmFyIHVzZVJlZ2lzdGVyRmllbGRzU2xpY2UgPSAoYXBwU3RvcmUsIGlkKSA9PiB7XG4gIGNvbnN0IHJlc29sdmVGaWVsZHMgPSB1c2VDYWxsYmFjayhcbiAgICAocmVzZXQpID0+IF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgdmFyIF9hLCBfYjtcbiAgICAgIGNvbnN0IHsgZmllbGRzLCBsYXN0UmVzb2x2ZWREYXRhIH0gPSBhcHBTdG9yZS5nZXRTdGF0ZSgpLmZpZWxkcztcbiAgICAgIGNvbnN0IG5vZGVzID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZS5pbmRleGVzLm5vZGVzO1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2lkIHx8IFwicm9vdFwiXTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudERhdGEgPSBub2RlID09IG51bGwgPyB2b2lkIDAgOiBub2RlLmRhdGE7XG4gICAgICBjb25zdCBwYXJlbnROb2RlID0gKG5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IG5vZGUucGFyZW50SWQpID8gbm9kZXNbbm9kZS5wYXJlbnRJZF0gOiBudWxsO1xuICAgICAgY29uc3QgcGFyZW50ID0gKHBhcmVudE5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudE5vZGUuZGF0YSkgfHwgbnVsbDtcbiAgICAgIGNvbnN0IHsgZ2V0Q29tcG9uZW50Q29uZmlnLCBzdGF0ZSB9ID0gYXBwU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudENvbmZpZyA9IGdldENvbXBvbmVudENvbmZpZyhjb21wb25lbnREYXRhID09IG51bGwgPyB2b2lkIDAgOiBjb21wb25lbnREYXRhLnR5cGUpO1xuICAgICAgaWYgKCFjb21wb25lbnREYXRhIHx8ICFjb21wb25lbnRDb25maWcpIHJldHVybjtcbiAgICAgIGNvbnN0IGRlZmF1bHRGaWVsZHMyID0gY29tcG9uZW50Q29uZmlnLmZpZWxkcyB8fCB7fTtcbiAgICAgIGNvbnN0IHJlc29sdmVyID0gY29tcG9uZW50Q29uZmlnLnJlc29sdmVGaWVsZHM7XG4gICAgICBsZXQgbGFzdEZpZWxkcyA9IGZpZWxkcztcbiAgICAgIGlmIChyZXNldCkge1xuICAgICAgICBhcHBTdG9yZS5zZXRTdGF0ZSgocykgPT4gKHtcbiAgICAgICAgICBmaWVsZHM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHMuZmllbGRzKSwgeyBmaWVsZHM6IGRlZmF1bHRGaWVsZHMyLCBpZCB9KVxuICAgICAgICB9KSk7XG4gICAgICAgIGxhc3RGaWVsZHMgPSBkZWZhdWx0RmllbGRzMjtcbiAgICAgIH1cbiAgICAgIGlmIChyZXNvbHZlcikge1xuICAgICAgICBjb25zdCB0aW1lb3V0MyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGFwcFN0b3JlLnNldFN0YXRlKChzKSA9PiAoe1xuICAgICAgICAgICAgZmllbGRzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzLmZpZWxkcyksIHsgbG9hZGluZzogdHJ1ZSB9KVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgNTApO1xuICAgICAgICBjb25zdCBsYXN0RGF0YSA9ICgoX2EgPSBsYXN0UmVzb2x2ZWREYXRhLnByb3BzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaWQpID09PSBpZCA/IGxhc3RSZXNvbHZlZERhdGEgOiBudWxsO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gZ2V0Q2hhbmdlZChjb21wb25lbnREYXRhLCBsYXN0RGF0YSk7XG4gICAgICAgIGNvbnN0IG5ld0ZpZWxkcyA9IHlpZWxkIHJlc29sdmVyKGNvbXBvbmVudERhdGEsIHtcbiAgICAgICAgICBjaGFuZ2VkLFxuICAgICAgICAgIGZpZWxkczogZGVmYXVsdEZpZWxkczIsXG4gICAgICAgICAgbGFzdEZpZWxkcyxcbiAgICAgICAgICBsYXN0RGF0YSxcbiAgICAgICAgICBhcHBTdGF0ZTogbWFrZVN0YXRlUHVibGljKHN0YXRlKSxcbiAgICAgICAgICBwYXJlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0Myk7XG4gICAgICAgIGlmICgoKF9iID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zZWxlY3RlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5wcm9wcy5pZCkgIT09IGlkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFwcFN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIGZpZWxkczogbmV3RmllbGRzLFxuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBsYXN0UmVzb2x2ZWREYXRhOiBjb21wb25lbnREYXRhLFxuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwU3RvcmUuc2V0U3RhdGUoKHMpID0+ICh7XG4gICAgICAgICAgZmllbGRzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzLmZpZWxkcyksIHsgZmllbGRzOiBkZWZhdWx0RmllbGRzMiwgaWQgfSlcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pLFxuICAgIFtpZF1cbiAgKTtcbiAgdXNlRWZmZWN0NCgoKSA9PiB7XG4gICAgcmVzb2x2ZUZpZWxkcyh0cnVlKTtcbiAgICByZXR1cm4gYXBwU3RvcmUuc3Vic2NyaWJlKFxuICAgICAgKHMpID0+IHMuc3RhdGUuaW5kZXhlcy5ub2Rlc1tpZCB8fCBcInJvb3RcIl0sXG4gICAgICAoKSA9PiByZXNvbHZlRmllbGRzKClcbiAgICApO1xuICB9LCBbaWRdKTtcbn07XG5cbi8vIGxpYi9kYXRhL3RvLXJvb3QudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgdG9Sb290ID0gKGl0ZW0pID0+IHtcbiAgaWYgKFwidHlwZVwiIGluIGl0ZW0gJiYgaXRlbS50eXBlICE9PSBcInJvb3RcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnZlcnRpbmcgbm9uLXJvb3QgaXRlbSB0byByb290LlwiKTtcbiAgfVxuICBjb25zdCB7IHJlYWRPbmx5IH0gPSBpdGVtO1xuICBpZiAoaXRlbS5wcm9wcykge1xuICAgIGlmIChcImlkXCIgaW4gaXRlbS5wcm9wcykge1xuICAgICAgY29uc3QgX2EgPSBpdGVtLnByb3BzLCB7IGlkIH0gPSBfYSwgcHJvcHMgPSBfX29ialJlc3QoX2EsIFtcImlkXCJdKTtcbiAgICAgIHJldHVybiB7IHByb3BzLCByZWFkT25seSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBwcm9wczogaXRlbS5wcm9wcywgcmVhZE9ubHkgfTtcbiAgfVxuICByZXR1cm4geyBwcm9wczoge30sIHJlYWRPbmx5IH07XG59O1xuXG4vLyBzdG9yZS9pbmRleC50c1xudmFyIGRlZmF1bHRQYWdlRmllbGRzID0ge1xuICB0aXRsZTogeyB0eXBlOiBcInRleHRcIiB9XG59O1xudmFyIGNyZWF0ZUFwcFN0b3JlID0gKGluaXRpYWxBcHBTdG9yZSkgPT4gY3JlYXRlMigpKFxuICBzdWJzY3JpYmVXaXRoU2VsZWN0b3IyKChzZXQsIGdldCkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgc3RhdGU6IGRlZmF1bHRBcHBTdGF0ZSxcbiAgICAgIGNvbmZpZzogeyBjb21wb25lbnRzOiB7fSB9LFxuICAgICAgY29tcG9uZW50U3RhdGU6IHt9LFxuICAgICAgcGx1Z2luczogW10sXG4gICAgICBvdmVycmlkZXM6IHt9LFxuICAgICAgdmlld3BvcnRzOiBkZWZhdWx0Vmlld3BvcnRzLFxuICAgICAgem9vbUNvbmZpZzoge1xuICAgICAgICBhdXRvWm9vbTogMSxcbiAgICAgICAgcm9vdEhlaWdodDogMCxcbiAgICAgICAgem9vbTogMVxuICAgICAgfSxcbiAgICAgIHN0YXR1czogXCJMT0FESU5HXCIsXG4gICAgICBpZnJhbWU6IHt9LFxuICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgZmllbGRUcmFuc2Zvcm1zOiB7fVxuICAgIH0sIGluaXRpYWxBcHBTdG9yZSksIHtcbiAgICAgIGZpZWxkczogY3JlYXRlRmllbGRzU2xpY2Uoc2V0LCBnZXQpLFxuICAgICAgaGlzdG9yeTogY3JlYXRlSGlzdG9yeVNsaWNlKHNldCwgZ2V0KSxcbiAgICAgIG5vZGVzOiBjcmVhdGVOb2Rlc1NsaWNlKHNldCwgZ2V0KSxcbiAgICAgIHBlcm1pc3Npb25zOiBjcmVhdGVQZXJtaXNzaW9uc1NsaWNlKHNldCwgZ2V0KSxcbiAgICAgIGdldENvbXBvbmVudENvbmZpZzogKHR5cGUpID0+IHtcbiAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgY29uc3QgeyBjb25maWcsIHNlbGVjdGVkSXRlbSB9ID0gZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJvb3RGaWVsZHMgPSAoKF9hMiA9IGNvbmZpZy5yb290KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmZpZWxkcykgfHwgZGVmYXVsdFBhZ2VGaWVsZHM7XG4gICAgICAgIHJldHVybiB0eXBlICYmIHR5cGUgIT09IFwicm9vdFwiID8gY29uZmlnLmNvbXBvbmVudHNbdHlwZV0gOiBzZWxlY3RlZEl0ZW0gPyBjb25maWcuY29tcG9uZW50c1tzZWxlY3RlZEl0ZW0udHlwZV0gOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjb25maWcucm9vdCksIHsgZmllbGRzOiByb290RmllbGRzIH0pO1xuICAgICAgfSxcbiAgICAgIHNlbGVjdGVkSXRlbTogKChfYSA9IGluaXRpYWxBcHBTdG9yZSA9PSBudWxsID8gdm9pZCAwIDogaW5pdGlhbEFwcFN0b3JlLnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EudWkuaXRlbVNlbGVjdG9yKSA/IGdldEl0ZW0oXG4gICAgICAgIChfYiA9IGluaXRpYWxBcHBTdG9yZSA9PSBudWxsID8gdm9pZCAwIDogaW5pdGlhbEFwcFN0b3JlLnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IudWkuaXRlbVNlbGVjdG9yLFxuICAgICAgICBpbml0aWFsQXBwU3RvcmUuc3RhdGVcbiAgICAgICkgOiBudWxsLFxuICAgICAgZGlzcGF0Y2g6IChhY3Rpb24pID0+IHNldCgocykgPT4ge1xuICAgICAgICB2YXIgX2EyLCBfYjI7XG4gICAgICAgIGNvbnN0IHsgcmVjb3JkIH0gPSBnZXQoKS5oaXN0b3J5O1xuICAgICAgICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZVJlZHVjZXIoe1xuICAgICAgICAgIHJlY29yZCxcbiAgICAgICAgICBhcHBTdG9yZTogc1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBkaXNwYXRjaChzLnN0YXRlLCBhY3Rpb24pO1xuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBzdGF0ZS51aS5pdGVtU2VsZWN0b3IgPyBnZXRJdGVtKHN0YXRlLnVpLml0ZW1TZWxlY3Rvciwgc3RhdGUpIDogbnVsbDtcbiAgICAgICAgKF9iMiA9IChfYTIgPSBnZXQoKSkub25BY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjIuY2FsbChfYTIsIGFjdGlvbiwgc3RhdGUsIGdldCgpLnN0YXRlKTtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHMpLCB7IHN0YXRlLCBzZWxlY3RlZEl0ZW0gfSk7XG4gICAgICB9KSxcbiAgICAgIHNldFpvb21Db25maWc6ICh6b29tQ29uZmlnKSA9PiBzZXQoeyB6b29tQ29uZmlnIH0pLFxuICAgICAgc2V0U3RhdHVzOiAoc3RhdHVzKSA9PiBzZXQoeyBzdGF0dXMgfSksXG4gICAgICBzZXRDb21wb25lbnRTdGF0ZTogKGNvbXBvbmVudFN0YXRlKSA9PiBzZXQoeyBjb21wb25lbnRTdGF0ZSB9KSxcbiAgICAgIHBlbmRpbmdMb2FkVGltZW91dHM6IHt9LFxuICAgICAgc2V0Q29tcG9uZW50TG9hZGluZzogKGlkLCBsb2FkaW5nID0gdHJ1ZSwgZGVmZXIyID0gMCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNldENvbXBvbmVudFN0YXRlLCBwZW5kaW5nTG9hZFRpbWVvdXRzIH0gPSBnZXQoKTtcbiAgICAgICAgY29uc3QgbG9hZElkID0gZ2VuZXJhdGVJZCgpO1xuICAgICAgICBjb25zdCBzZXRMb2FkaW5nID0gKCkgPT4ge1xuICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgY29uc3QgeyBjb21wb25lbnRTdGF0ZSB9ID0gZ2V0KCk7XG4gICAgICAgICAgc2V0Q29tcG9uZW50U3RhdGUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29tcG9uZW50U3RhdGUpLCB7XG4gICAgICAgICAgICBbaWRdOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjb21wb25lbnRTdGF0ZVtpZF0pLCB7XG4gICAgICAgICAgICAgIGxvYWRpbmdDb3VudDogKCgoX2EyID0gY29tcG9uZW50U3RhdGVbaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmxvYWRpbmdDb3VudCkgfHwgMCkgKyAxXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdW5zZXRMb2FkaW5nID0gKCkgPT4ge1xuICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgY29uc3QgeyBjb21wb25lbnRTdGF0ZSB9ID0gZ2V0KCk7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQzKTtcbiAgICAgICAgICBkZWxldGUgcGVuZGluZ0xvYWRUaW1lb3V0c1tsb2FkSWRdO1xuICAgICAgICAgIHNldCh7IHBlbmRpbmdMb2FkVGltZW91dHMgfSk7XG4gICAgICAgICAgc2V0Q29tcG9uZW50U3RhdGUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29tcG9uZW50U3RhdGUpLCB7XG4gICAgICAgICAgICBbaWRdOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjb21wb25lbnRTdGF0ZVtpZF0pLCB7XG4gICAgICAgICAgICAgIGxvYWRpbmdDb3VudDogTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgKCgoX2EyID0gY29tcG9uZW50U3RhdGVbaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmxvYWRpbmdDb3VudCkgfHwgMCkgLSAxLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRpbWVvdXQzID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdW5zZXRMb2FkaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSBwZW5kaW5nTG9hZFRpbWVvdXRzW2xvYWRJZF07XG4gICAgICAgICAgc2V0KHsgcGVuZGluZ0xvYWRUaW1lb3V0cyB9KTtcbiAgICAgICAgfSwgZGVmZXIyKTtcbiAgICAgICAgc2V0KHtcbiAgICAgICAgICBwZW5kaW5nTG9hZFRpbWVvdXRzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwZW5kaW5nTG9hZFRpbWVvdXRzKSwge1xuICAgICAgICAgICAgW2lkXTogdGltZW91dDNcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuc2V0TG9hZGluZztcbiAgICAgIH0sXG4gICAgICB1bnNldENvbXBvbmVudExvYWRpbmc6IChpZCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNldENvbXBvbmVudExvYWRpbmcgfSA9IGdldCgpO1xuICAgICAgICBzZXRDb21wb25lbnRMb2FkaW5nKGlkLCBmYWxzZSk7XG4gICAgICB9LFxuICAgICAgLy8gSGVscGVyXG4gICAgICBzZXRVaTogKHVpLCByZWNvcmRIaXN0b3J5KSA9PiBzZXQoKHMpID0+IHtcbiAgICAgICAgY29uc3QgZGlzcGF0Y2ggPSBjcmVhdGVSZWR1Y2VyKHtcbiAgICAgICAgICByZWNvcmQ6ICgpID0+IHtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFwcFN0b3JlOiBzXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGRpc3BhdGNoKHMuc3RhdGUsIHtcbiAgICAgICAgICB0eXBlOiBcInNldFVpXCIsXG4gICAgICAgICAgdWksXG4gICAgICAgICAgcmVjb3JkSGlzdG9yeVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gc3RhdGUudWkuaXRlbVNlbGVjdG9yID8gZ2V0SXRlbShzdGF0ZS51aS5pdGVtU2VsZWN0b3IsIHN0YXRlKSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzKSwgeyBzdGF0ZSwgc2VsZWN0ZWRJdGVtIH0pO1xuICAgICAgfSksXG4gICAgICByZXNvbHZlQ29tcG9uZW50RGF0YTogKGNvbXBvbmVudERhdGEsIHRyaWdnZXIpID0+IF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCB7IGNvbmZpZywgbWV0YWRhdGEsIHNldENvbXBvbmVudExvYWRpbmcsIHBlcm1pc3Npb25zIH0gPSBnZXQoKTtcbiAgICAgICAgY29uc3QgdGltZW91dHMgPSB7fTtcbiAgICAgICAgcmV0dXJuIHlpZWxkIHJlc29sdmVDb21wb25lbnREYXRhKFxuICAgICAgICAgIGNvbXBvbmVudERhdGEsXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgIChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IFwiaWRcIiBpbiBpdGVtLnByb3BzID8gaXRlbS5wcm9wcy5pZCA6IFwicm9vdFwiO1xuICAgICAgICAgICAgdGltZW91dHNbaWRdID0gc2V0Q29tcG9uZW50TG9hZGluZyhpZCwgdHJ1ZSwgNTApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKGl0ZW0pID0+IF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBcImlkXCIgaW4gaXRlbS5wcm9wcyA/IGl0ZW0ucHJvcHMuaWQgOiBcInJvb3RcIjtcbiAgICAgICAgICAgIGlmIChcInR5cGVcIiBpbiBpdGVtKSB7XG4gICAgICAgICAgICAgIHlpZWxkIHBlcm1pc3Npb25zLnJlZnJlc2hQZXJtaXNzaW9ucyh7IGl0ZW0gfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB5aWVsZCBwZXJtaXNzaW9ucy5yZWZyZXNoUGVybWlzc2lvbnMoeyByb290OiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGltZW91dHNbaWRdKCk7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdHJpZ2dlclxuICAgICAgICApO1xuICAgICAgfSksXG4gICAgICByZXNvbHZlQW5kQ29tbWl0RGF0YTogKCkgPT4gX19hc3luYyh2b2lkIDAsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnLCBzdGF0ZSwgZGlzcGF0Y2gsIHJlc29sdmVDb21wb25lbnREYXRhOiByZXNvbHZlQ29tcG9uZW50RGF0YTIgfSA9IGdldCgpO1xuICAgICAgICB3YWxrQXBwU3RhdGUoXG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIChjb250ZW50KSA9PiBjb250ZW50LFxuICAgICAgICAgIChjaGlsZEl0ZW0pID0+IHtcbiAgICAgICAgICAgIHJlc29sdmVDb21wb25lbnREYXRhMihjaGlsZEl0ZW0sIFwibG9hZFwiKS50aGVuKChyZXNvbHZlZCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB7IHN0YXRlOiBzdGF0ZTIgfSA9IGdldCgpO1xuICAgICAgICAgICAgICBjb25zdCBub2RlID0gc3RhdGUyLmluZGV4ZXMubm9kZXNbcmVzb2x2ZWQubm9kZS5wcm9wcy5pZF07XG4gICAgICAgICAgICAgIGlmIChub2RlICYmIHJlc29sdmVkLmRpZENoYW5nZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlZC5ub2RlLnByb3BzLmlkID09PSBcInJvb3RcIikge1xuICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlcGxhY2VSb290XCIsXG4gICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRvUm9vdChyZXNvbHZlZC5ub2RlKVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHpvbmVDb21wb3VuZCA9IGAke25vZGUucGFyZW50SWR9OiR7bm9kZS56b25lfWA7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRab25lID0gc3RhdGUyLmluZGV4ZXMuem9uZXNbem9uZUNvbXBvdW5kXTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyZW50Wm9uZS5jb250ZW50SWRzLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVkLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXNvbHZlZC5ub2RlLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25ab25lOiB6b25lQ29tcG91bmRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRJdGVtO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0pXG4pO1xudmFyIGFwcFN0b3JlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoY3JlYXRlQXBwU3RvcmUoKSk7XG5mdW5jdGlvbiB1c2VBcHBTdG9yZShzZWxlY3Rvcikge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChhcHBTdG9yZUNvbnRleHQpO1xuICByZXR1cm4gdXNlU3RvcmUoY29udGV4dCwgc2VsZWN0b3IpO1xufVxuZnVuY3Rpb24gdXNlQXBwU3RvcmVBcGkoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KGFwcFN0b3JlQ29udGV4dCk7XG59XG5cbi8vIGxpYi9nZXQtem9vbS1jb25maWcudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9jc3MtYm94LW1vZGVsL2Rpc3QvY3NzLWJveC1tb2RlbC5lc20uanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy90aW55LWludmFyaWFudC9kaXN0L2VzbS90aW55LWludmFyaWFudC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG52YXIgcHJlZml4ID0gXCJJbnZhcmlhbnQgZmFpbGVkXCI7XG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIGlmIChjb25kaXRpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGlzUHJvZHVjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihwcmVmaXgpO1xuICB9XG4gIHZhciBwcm92aWRlZCA9IHR5cGVvZiBtZXNzYWdlID09PSBcImZ1bmN0aW9uXCIgPyBtZXNzYWdlKCkgOiBtZXNzYWdlO1xuICB2YXIgdmFsdWUgPSBwcm92aWRlZCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCI6IFwiKS5jb25jYXQocHJvdmlkZWQpIDogcHJlZml4O1xuICB0aHJvdyBuZXcgRXJyb3IodmFsdWUpO1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWJveC1tb2RlbC9kaXN0L2Nzcy1ib3gtbW9kZWwuZXNtLmpzXG52YXIgZ2V0UmVjdCA9IGZ1bmN0aW9uIGdldFJlY3QyKF9yZWYpIHtcbiAgdmFyIHRvcCA9IF9yZWYudG9wLCByaWdodCA9IF9yZWYucmlnaHQsIGJvdHRvbSA9IF9yZWYuYm90dG9tLCBsZWZ0ID0gX3JlZi5sZWZ0O1xuICB2YXIgd2lkdGggPSByaWdodCAtIGxlZnQ7XG4gIHZhciBoZWlnaHQgPSBib3R0b20gLSB0b3A7XG4gIHZhciByZWN0ID0ge1xuICAgIHRvcCxcbiAgICByaWdodCxcbiAgICBib3R0b20sXG4gICAgbGVmdCxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgeDogbGVmdCxcbiAgICB5OiB0b3AsXG4gICAgY2VudGVyOiB7XG4gICAgICB4OiAocmlnaHQgKyBsZWZ0KSAvIDIsXG4gICAgICB5OiAoYm90dG9tICsgdG9wKSAvIDJcbiAgICB9XG4gIH07XG4gIHJldHVybiByZWN0O1xufTtcbnZhciBleHBhbmQgPSBmdW5jdGlvbiBleHBhbmQyKHRhcmdldCwgZXhwYW5kQnkpIHtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IHRhcmdldC50b3AgLSBleHBhbmRCeS50b3AsXG4gICAgbGVmdDogdGFyZ2V0LmxlZnQgLSBleHBhbmRCeS5sZWZ0LFxuICAgIGJvdHRvbTogdGFyZ2V0LmJvdHRvbSArIGV4cGFuZEJ5LmJvdHRvbSxcbiAgICByaWdodDogdGFyZ2V0LnJpZ2h0ICsgZXhwYW5kQnkucmlnaHRcbiAgfTtcbn07XG52YXIgc2hyaW5rID0gZnVuY3Rpb24gc2hyaW5rMih0YXJnZXQsIHNocmlua0J5KSB7XG4gIHJldHVybiB7XG4gICAgdG9wOiB0YXJnZXQudG9wICsgc2hyaW5rQnkudG9wLFxuICAgIGxlZnQ6IHRhcmdldC5sZWZ0ICsgc2hyaW5rQnkubGVmdCxcbiAgICBib3R0b206IHRhcmdldC5ib3R0b20gLSBzaHJpbmtCeS5ib3R0b20sXG4gICAgcmlnaHQ6IHRhcmdldC5yaWdodCAtIHNocmlua0J5LnJpZ2h0XG4gIH07XG59O1xudmFyIG5vU3BhY2luZyA9IHtcbiAgdG9wOiAwLFxuICByaWdodDogMCxcbiAgYm90dG9tOiAwLFxuICBsZWZ0OiAwXG59O1xudmFyIGNyZWF0ZUJveCA9IGZ1bmN0aW9uIGNyZWF0ZUJveDIoX3JlZjIpIHtcbiAgdmFyIGJvcmRlckJveCA9IF9yZWYyLmJvcmRlckJveCwgX3JlZjIkbWFyZ2luID0gX3JlZjIubWFyZ2luLCBtYXJnaW4gPSBfcmVmMiRtYXJnaW4gPT09IHZvaWQgMCA/IG5vU3BhY2luZyA6IF9yZWYyJG1hcmdpbiwgX3JlZjIkYm9yZGVyID0gX3JlZjIuYm9yZGVyLCBib3JkZXIgPSBfcmVmMiRib3JkZXIgPT09IHZvaWQgMCA/IG5vU3BhY2luZyA6IF9yZWYyJGJvcmRlciwgX3JlZjIkcGFkZGluZyA9IF9yZWYyLnBhZGRpbmcsIHBhZGRpbmcgPSBfcmVmMiRwYWRkaW5nID09PSB2b2lkIDAgPyBub1NwYWNpbmcgOiBfcmVmMiRwYWRkaW5nO1xuICB2YXIgbWFyZ2luQm94ID0gZ2V0UmVjdChleHBhbmQoYm9yZGVyQm94LCBtYXJnaW4pKTtcbiAgdmFyIHBhZGRpbmdCb3ggPSBnZXRSZWN0KHNocmluayhib3JkZXJCb3gsIGJvcmRlcikpO1xuICB2YXIgY29udGVudEJveCA9IGdldFJlY3Qoc2hyaW5rKHBhZGRpbmdCb3gsIHBhZGRpbmcpKTtcbiAgcmV0dXJuIHtcbiAgICBtYXJnaW5Cb3gsXG4gICAgYm9yZGVyQm94OiBnZXRSZWN0KGJvcmRlckJveCksXG4gICAgcGFkZGluZ0JveCxcbiAgICBjb250ZW50Qm94LFxuICAgIG1hcmdpbixcbiAgICBib3JkZXIsXG4gICAgcGFkZGluZ1xuICB9O1xufTtcbnZhciBwYXJzZSA9IGZ1bmN0aW9uIHBhcnNlMihyYXcpIHtcbiAgdmFyIHZhbHVlID0gcmF3LnNsaWNlKDAsIC0yKTtcbiAgdmFyIHN1ZmZpeCA9IHJhdy5zbGljZSgtMik7XG4gIGlmIChzdWZmaXggIT09IFwicHhcIikge1xuICAgIHJldHVybiAwO1xuICB9XG4gIHZhciByZXN1bHQgPSBOdW1iZXIodmFsdWUpO1xuICAhIWlzTmFOKHJlc3VsdCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBpbnZhcmlhbnQoZmFsc2UsIFwiQ291bGQgbm90IHBhcnNlIHZhbHVlIFtyYXc6IFwiICsgcmF3ICsgXCIsIHdpdGhvdXQgc3VmZml4OiBcIiArIHZhbHVlICsgXCJdXCIpIDogaW52YXJpYW50KGZhbHNlKSA6IHZvaWQgMDtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgY2FsY3VsYXRlQm94ID0gZnVuY3Rpb24gY2FsY3VsYXRlQm94Mihib3JkZXJCb3gsIHN0eWxlczIpIHtcbiAgdmFyIG1hcmdpbiA9IHtcbiAgICB0b3A6IHBhcnNlKHN0eWxlczIubWFyZ2luVG9wKSxcbiAgICByaWdodDogcGFyc2Uoc3R5bGVzMi5tYXJnaW5SaWdodCksXG4gICAgYm90dG9tOiBwYXJzZShzdHlsZXMyLm1hcmdpbkJvdHRvbSksXG4gICAgbGVmdDogcGFyc2Uoc3R5bGVzMi5tYXJnaW5MZWZ0KVxuICB9O1xuICB2YXIgcGFkZGluZyA9IHtcbiAgICB0b3A6IHBhcnNlKHN0eWxlczIucGFkZGluZ1RvcCksXG4gICAgcmlnaHQ6IHBhcnNlKHN0eWxlczIucGFkZGluZ1JpZ2h0KSxcbiAgICBib3R0b206IHBhcnNlKHN0eWxlczIucGFkZGluZ0JvdHRvbSksXG4gICAgbGVmdDogcGFyc2Uoc3R5bGVzMi5wYWRkaW5nTGVmdClcbiAgfTtcbiAgdmFyIGJvcmRlciA9IHtcbiAgICB0b3A6IHBhcnNlKHN0eWxlczIuYm9yZGVyVG9wV2lkdGgpLFxuICAgIHJpZ2h0OiBwYXJzZShzdHlsZXMyLmJvcmRlclJpZ2h0V2lkdGgpLFxuICAgIGJvdHRvbTogcGFyc2Uoc3R5bGVzMi5ib3JkZXJCb3R0b21XaWR0aCksXG4gICAgbGVmdDogcGFyc2Uoc3R5bGVzMi5ib3JkZXJMZWZ0V2lkdGgpXG4gIH07XG4gIHJldHVybiBjcmVhdGVCb3goe1xuICAgIGJvcmRlckJveCxcbiAgICBtYXJnaW4sXG4gICAgcGFkZGluZyxcbiAgICBib3JkZXJcbiAgfSk7XG59O1xudmFyIGdldEJveCA9IGZ1bmN0aW9uIGdldEJveDIoZWwpIHtcbiAgdmFyIGJvcmRlckJveCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgc3R5bGVzMiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTtcbiAgcmV0dXJuIGNhbGN1bGF0ZUJveChib3JkZXJCb3gsIHN0eWxlczIpO1xufTtcblxuLy8gbGliL2dldC16b29tLWNvbmZpZy50c1xudmFyIFJFU0VUX1pPT01fU01BTExFUl9USEFOX0ZSQU1FID0gdHJ1ZTtcbnZhciBnZXRab29tQ29uZmlnID0gKHVpVmlld3BvcnQsIGZyYW1lLCB6b29tKSA9PiB7XG4gIGNvbnN0IGJveCA9IGdldEJveChmcmFtZSk7XG4gIGNvbnN0IHsgd2lkdGg6IGZyYW1lV2lkdGgsIGhlaWdodDogZnJhbWVIZWlnaHQgfSA9IGJveC5jb250ZW50Qm94O1xuICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHVpVmlld3BvcnQuaGVpZ2h0ID09PSBcImF1dG9cIiA/IGZyYW1lSGVpZ2h0IDogdWlWaWV3cG9ydC5oZWlnaHQ7XG4gIGxldCByb290SGVpZ2h0ID0gMDtcbiAgbGV0IGF1dG9ab29tID0gMTtcbiAgaWYgKHVpVmlld3BvcnQud2lkdGggPiBmcmFtZVdpZHRoIHx8IHZpZXdwb3J0SGVpZ2h0ID4gZnJhbWVIZWlnaHQpIHtcbiAgICBjb25zdCB3aWR0aFpvb20gPSBNYXRoLm1pbihmcmFtZVdpZHRoIC8gdWlWaWV3cG9ydC53aWR0aCwgMSk7XG4gICAgY29uc3QgaGVpZ2h0Wm9vbSA9IE1hdGgubWluKGZyYW1lSGVpZ2h0IC8gdmlld3BvcnRIZWlnaHQsIDEpO1xuICAgIHpvb20gPSB3aWR0aFpvb207XG4gICAgaWYgKHdpZHRoWm9vbSA8IGhlaWdodFpvb20pIHtcbiAgICAgIHJvb3RIZWlnaHQgPSB2aWV3cG9ydEhlaWdodCAvIHpvb207XG4gICAgfSBlbHNlIHtcbiAgICAgIHJvb3RIZWlnaHQgPSB2aWV3cG9ydEhlaWdodDtcbiAgICAgIHpvb20gPSBoZWlnaHRab29tO1xuICAgIH1cbiAgICBhdXRvWm9vbSA9IHpvb207XG4gIH0gZWxzZSB7XG4gICAgaWYgKFJFU0VUX1pPT01fU01BTExFUl9USEFOX0ZSQU1FKSB7XG4gICAgICBhdXRvWm9vbSA9IDE7XG4gICAgICB6b29tID0gMTtcbiAgICAgIHJvb3RIZWlnaHQgPSB2aWV3cG9ydEhlaWdodDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgYXV0b1pvb20sIHJvb3RIZWlnaHQsIHpvb20gfTtcbn07XG5cbi8vIGxpYi91c2UtcmVzZXQtYXV0by16b29tLnRzXG52YXIgdXNlUmVzZXRBdXRvWm9vbSA9IChmcmFtZVJlZikgPT4ge1xuICBjb25zdCBhcHBTdG9yZUFwaSA9IHVzZUFwcFN0b3JlQXBpKCk7XG4gIGNvbnN0IHJlc2V0QXV0b1pvb20gPSAob3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgc3RhdGUsIHpvb21Db25maWcsIHNldFpvb21Db25maWcgfSA9IGFwcFN0b3JlQXBpLmdldFN0YXRlKCk7XG4gICAgY29uc3QgeyB2aWV3cG9ydHMgfSA9IHN0YXRlLnVpO1xuICAgIGNvbnN0IG5ld1ZpZXdwb3J0cyA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnZpZXdwb3J0cykgfHwgdmlld3BvcnRzO1xuICAgIGlmIChmcmFtZVJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRab29tQ29uZmlnKFxuICAgICAgICBnZXRab29tQ29uZmlnKG5ld1ZpZXdwb3J0cyA9PSBudWxsID8gdm9pZCAwIDogbmV3Vmlld3BvcnRzLmN1cnJlbnQsIGZyYW1lUmVmLmN1cnJlbnQsIHpvb21Db25maWcuem9vbSlcbiAgICAgICk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gcmVzZXRBdXRvWm9vbTtcbn07XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9Mb2FkZXIvc3R5bGVzLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHlsZXNfbW9kdWxlX2RlZmF1bHQyID0geyBcIkxvYWRlclwiOiBcIl9Mb2FkZXJfbmFjZG1fMTNcIiwgXCJsb2FkZXItYW5pbWF0aW9uXCI6IFwiX2xvYWRlci1hbmltYXRpb25fbmFjZG1fMVwiIH07XG5cbi8vIGNvbXBvbmVudHMvTG9hZGVyL2luZGV4LnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUyID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiTG9hZGVyXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDIpO1xudmFyIExvYWRlciA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGNvbG9yLFxuICAgIHNpemUgPSAxNlxuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjb2xvclwiLFxuICAgIFwic2l6ZVwiXG4gIF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDIoXG4gICAgXCJzcGFuXCIsXG4gICAgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyKCksXG4gICAgICBzdHlsZToge1xuICAgICAgICB3aWR0aDogc2l6ZSxcbiAgICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgICBjb2xvclxuICAgICAgfSxcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBcImxvYWRpbmdcIlxuICAgIH0sIHByb3BzKVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9JY29uQnV0dG9uL0ljb25CdXR0b24udHN4XG5pbXBvcnQgeyBGcmFnbWVudCwganN4IGFzIGpzeDMsIGpzeHMgYXMganN4czIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUzID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiSWNvbkJ1dHRvblwiLCBJY29uQnV0dG9uX21vZHVsZV9kZWZhdWx0KTtcbnZhciBJY29uQnV0dG9uID0gKHtcbiAgY2hpbGRyZW4sXG4gIGhyZWYsXG4gIG9uQ2xpY2ssXG4gIHZhcmlhbnQgPSBcInByaW1hcnlcIixcbiAgdHlwZSxcbiAgZGlzYWJsZWQsXG4gIHRhYkluZGV4LFxuICBuZXdUYWIsXG4gIGZ1bGxXaWR0aCxcbiAgdGl0bGVcbn0pID0+IHtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBFbGVtZW50VHlwZSA9IGhyZWYgPyBcImFcIiA6IFwiYnV0dG9uXCI7XG4gIGNvbnN0IGVsID0gLyogQF9fUFVSRV9fICovIGpzeHMyKFxuICAgIEVsZW1lbnRUeXBlLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMyh7XG4gICAgICAgIHByaW1hcnk6IHZhcmlhbnQgPT09IFwicHJpbWFyeVwiLFxuICAgICAgICBzZWNvbmRhcnk6IHZhcmlhbnQgPT09IFwic2Vjb25kYXJ5XCIsXG4gICAgICAgIGRpc2FibGVkLFxuICAgICAgICBmdWxsV2lkdGhcbiAgICAgIH0pLFxuICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgaWYgKCFvbkNsaWNrKSByZXR1cm47XG4gICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShvbkNsaWNrKGUpKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdHlwZSxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBsb2FkaW5nLFxuICAgICAgdGFiSW5kZXgsXG4gICAgICB0YXJnZXQ6IG5ld1RhYiA/IFwiX2JsYW5rXCIgOiB2b2lkIDAsXG4gICAgICByZWw6IG5ld1RhYiA/IFwibm9yZWZlcnJlclwiIDogdm9pZCAwLFxuICAgICAgaHJlZixcbiAgICAgIHRpdGxlLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUzKFwidGl0bGVcIiksIGNoaWxkcmVuOiB0aXRsZSB9KSxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgIGxvYWRpbmcgJiYgLyogQF9fUFVSRV9fICovIGpzeHMyKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgICAgICAgXCJcXHhBMFxceEEwXCIsXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMoTG9hZGVyLCB7IHNpemU6IDE0IH0pXG4gICAgICAgIF0gfSlcbiAgICAgIF1cbiAgICB9XG4gICk7XG4gIHJldHVybiBlbDtcbn07XG5cbi8vIGNvbXBvbmVudHMvQnV0dG9uL0J1dHRvbi50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0NSwgdXNlU3RhdGUgYXMgdXNlU3RhdGUyIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9CdXR0b24vQnV0dG9uLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBCdXR0b25fbW9kdWxlX2RlZmF1bHQgPSB7IFwiQnV0dG9uXCI6IFwiX0J1dHRvbl8xMGJ5bF8xXCIsIFwiQnV0dG9uLS1tZWRpdW1cIjogXCJfQnV0dG9uLS1tZWRpdW1fMTBieWxfMjlcIiwgXCJCdXR0b24tLWxhcmdlXCI6IFwiX0J1dHRvbi0tbGFyZ2VfMTBieWxfMzdcIiwgXCJCdXR0b24taWNvblwiOiBcIl9CdXR0b24taWNvbl8xMGJ5bF80NFwiLCBcIkJ1dHRvbi0tcHJpbWFyeVwiOiBcIl9CdXR0b24tLXByaW1hcnlfMTBieWxfNDhcIiwgXCJCdXR0b24tLXNlY29uZGFyeVwiOiBcIl9CdXR0b24tLXNlY29uZGFyeV8xMGJ5bF82N1wiLCBcIkJ1dHRvbi0tZmx1c2hcIjogXCJfQnV0dG9uLS1mbHVzaF8xMGJ5bF84NFwiLCBcIkJ1dHRvbi0tZGlzYWJsZWRcIjogXCJfQnV0dG9uLS1kaXNhYmxlZF8xMGJ5bF84OFwiLCBcIkJ1dHRvbi0tZnVsbFdpZHRoXCI6IFwiX0J1dHRvbi0tZnVsbFdpZHRoXzEwYnlsXzk1XCIsIFwiQnV0dG9uLXNwaW5uZXJcIjogXCJfQnV0dG9uLXNwaW5uZXJfMTBieWxfMTAwXCIgfTtcblxuLy8gbGliL2ZpbHRlci1kYXRhLWF0dHJzLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGRhdGFBdHRyUmUgPSAvXihkYXRhLS4qKSQvO1xudmFyIGZpbHRlckRhdGFBdHRycyA9IChwcm9wcykgPT4ge1xuICBsZXQgZmlsdGVyZWRQcm9wcyA9IHt9O1xuICBmb3IgKGNvbnN0IHByb3AgaW4gcHJvcHMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BzLCBwcm9wKSAmJiBkYXRhQXR0clJlLnRlc3QocHJvcCkpIHtcbiAgICAgIGZpbHRlcmVkUHJvcHNbcHJvcF0gPSBwcm9wc1twcm9wXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZpbHRlcmVkUHJvcHM7XG59O1xuXG4vLyBjb21wb25lbnRzL0J1dHRvbi9CdXR0b24udHN4XG5pbXBvcnQgeyBqc3ggYXMganN4NCwganN4cyBhcyBqc3hzMyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTQgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJCdXR0b25cIiwgQnV0dG9uX21vZHVsZV9kZWZhdWx0KTtcbnZhciBCdXR0b24gPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBjaGlsZHJlbixcbiAgICBocmVmLFxuICAgIG9uQ2xpY2ssXG4gICAgdmFyaWFudCA9IFwicHJpbWFyeVwiLFxuICAgIHR5cGUsXG4gICAgZGlzYWJsZWQsXG4gICAgdGFiSW5kZXgsXG4gICAgbmV3VGFiLFxuICAgIGZ1bGxXaWR0aCxcbiAgICBpY29uLFxuICAgIHNpemUgPSBcIm1lZGl1bVwiLFxuICAgIGxvYWRpbmc6IGxvYWRpbmdQcm9wID0gZmFsc2VcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiY2hpbGRyZW5cIixcbiAgICBcImhyZWZcIixcbiAgICBcIm9uQ2xpY2tcIixcbiAgICBcInZhcmlhbnRcIixcbiAgICBcInR5cGVcIixcbiAgICBcImRpc2FibGVkXCIsXG4gICAgXCJ0YWJJbmRleFwiLFxuICAgIFwibmV3VGFiXCIsXG4gICAgXCJmdWxsV2lkdGhcIixcbiAgICBcImljb25cIixcbiAgICBcInNpemVcIixcbiAgICBcImxvYWRpbmdcIlxuICBdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUyKGxvYWRpbmdQcm9wKTtcbiAgdXNlRWZmZWN0NSgoKSA9PiBzZXRMb2FkaW5nKGxvYWRpbmdQcm9wKSwgW2xvYWRpbmdQcm9wXSk7XG4gIGNvbnN0IEVsZW1lbnRUeXBlID0gaHJlZiA/IFwiYVwiIDogdHlwZSA/IFwiYnV0dG9uXCIgOiBcInNwYW5cIjtcbiAgY29uc3QgZGF0YUF0dHJzID0gZmlsdGVyRGF0YUF0dHJzKHByb3BzKTtcbiAgY29uc3QgZWwgPSAvKiBAX19QVVJFX18gKi8ganN4czMoXG4gICAgRWxlbWVudFR5cGUsXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTQoe1xuICAgICAgICBwcmltYXJ5OiB2YXJpYW50ID09PSBcInByaW1hcnlcIixcbiAgICAgICAgc2Vjb25kYXJ5OiB2YXJpYW50ID09PSBcInNlY29uZGFyeVwiLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgZnVsbFdpZHRoLFxuICAgICAgICBbc2l6ZV06IHRydWVcbiAgICAgIH0pLFxuICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgaWYgKCFvbkNsaWNrKSByZXR1cm47XG4gICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShvbkNsaWNrKGUpKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdHlwZSxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBsb2FkaW5nLFxuICAgICAgdGFiSW5kZXgsXG4gICAgICB0YXJnZXQ6IG5ld1RhYiA/IFwiX2JsYW5rXCIgOiB2b2lkIDAsXG4gICAgICByZWw6IG5ld1RhYiA/IFwibm9yZWZlcnJlclwiIDogdm9pZCAwLFxuICAgICAgaHJlZlxuICAgIH0sIGRhdGFBdHRycyksIHtcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIGljb24gJiYgLyogQF9fUFVSRV9fICovIGpzeDQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTQoXCJpY29uXCIpLCBjaGlsZHJlbjogaWNvbiB9KSxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgIGxvYWRpbmcgJiYgLyogQF9fUFVSRV9fICovIGpzeDQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTQoXCJzcGlubmVyXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQoTG9hZGVyLCB7IHNpemU6IDE0IH0pIH0pXG4gICAgICBdXG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIGVsO1xufTtcblxuLy8gY29tcG9uZW50cy9BdXRvRmllbGQvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvQXV0b0ZpZWxkL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0MyA9IHsgXCJJbnB1dFdyYXBwZXJcIjogXCJfSW5wdXRXcmFwcGVyX2JzeGZvXzFcIiwgXCJJbnB1dC1sYWJlbFwiOiBcIl9JbnB1dC1sYWJlbF9ic3hmb181XCIsIFwiSW5wdXQtbGFiZWxJY29uXCI6IFwiX0lucHV0LWxhYmVsSWNvbl9ic3hmb18xNFwiLCBcIklucHV0LWRpc2FibGVkSWNvblwiOiBcIl9JbnB1dC1kaXNhYmxlZEljb25fYnN4Zm9fMjFcIiwgXCJJbnB1dC1pbnB1dFwiOiBcIl9JbnB1dC1pbnB1dF9ic3hmb18yNlwiLCBcIklucHV0XCI6IFwiX0lucHV0X2JzeGZvXzFcIiwgXCJJbnB1dC0tcmVhZE9ubHlcIjogXCJfSW5wdXQtLXJlYWRPbmx5X2JzeGZvXzgyXCIsIFwiSW5wdXQtcmFkaW9Hcm91cEl0ZW1zXCI6IFwiX0lucHV0LXJhZGlvR3JvdXBJdGVtc19ic3hmb185M1wiLCBcIklucHV0LXJhZGlvXCI6IFwiX0lucHV0LXJhZGlvX2JzeGZvXzkzXCIsIFwiSW5wdXQtcmFkaW9Jbm5lclwiOiBcIl9JbnB1dC1yYWRpb0lubmVyX2JzeGZvXzExMFwiLCBcIklucHV0LXJhZGlvSW5wdXRcIjogXCJfSW5wdXQtcmFkaW9JbnB1dF9ic3hmb18xNTVcIiB9O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9pbmRleC50c3hcbmltcG9ydCB7XG4gIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNCxcbiAgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0MyxcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDEwLFxuICB1c2VNZW1vIGFzIHVzZU1lbW8zLFxuICB1c2VTdGF0ZSBhcyB1c2VTdGF0ZThcbn0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNvbXBvbmVudHMvQXV0b0ZpZWxkL2ZpZWxkcy9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGNvbXBvbmVudHMvQXV0b0ZpZWxkL2ZpZWxkcy9BcnJheUZpZWxkL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL0F1dG9GaWVsZC9maWVsZHMvQXJyYXlGaWVsZC9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDQgPSB7IFwiQXJyYXlGaWVsZFwiOiBcIl9BcnJheUZpZWxkXzE0dThvXzVcIiwgXCJBcnJheUZpZWxkLS1pc0RyYWdnaW5nRnJvbVwiOiBcIl9BcnJheUZpZWxkLS1pc0RyYWdnaW5nRnJvbV8xNHU4b18xM1wiLCBcIkFycmF5RmllbGQtYWRkQnV0dG9uXCI6IFwiX0FycmF5RmllbGQtYWRkQnV0dG9uXzE0dThvXzE4XCIsIFwiQXJyYXlGaWVsZC0taGFzSXRlbXNcIjogXCJfQXJyYXlGaWVsZC0taGFzSXRlbXNfMTR1OG9fMzNcIiwgXCJBcnJheUZpZWxkLWlubmVyXCI6IFwiX0FycmF5RmllbGQtaW5uZXJfMTR1OG9fNTlcIiwgXCJBcnJheUZpZWxkSXRlbVwiOiBcIl9BcnJheUZpZWxkSXRlbV8xNHU4b182N1wiLCBcIkFycmF5RmllbGRJdGVtLS1pc0RyYWdnaW5nXCI6IFwiX0FycmF5RmllbGRJdGVtLS1pc0RyYWdnaW5nXzE0dThvXzc4XCIsIFwiQXJyYXlGaWVsZEl0ZW0tLWlzRXhwYW5kZWRcIjogXCJfQXJyYXlGaWVsZEl0ZW0tLWlzRXhwYW5kZWRfMTR1OG9fODJcIiwgXCJBcnJheUZpZWxkSXRlbS1zdW1tYXJ5XCI6IFwiX0FycmF5RmllbGRJdGVtLXN1bW1hcnlfMTR1OG9fOTdcIiwgXCJBcnJheUZpZWxkLS1hZGREaXNhYmxlZFwiOiBcIl9BcnJheUZpZWxkLS1hZGREaXNhYmxlZF8xNHU4b18xMjdcIiwgXCJBcnJheUZpZWxkSXRlbS1ib2R5XCI6IFwiX0FycmF5RmllbGRJdGVtLWJvZHlfMTR1OG9fMTY2XCIsIFwiQXJyYXlGaWVsZEl0ZW0tZmllbGRzZXRcIjogXCJfQXJyYXlGaWVsZEl0ZW0tZmllbGRzZXRfMTR1OG9fMTc1XCIsIFwiQXJyYXlGaWVsZEl0ZW0tcmhzXCI6IFwiX0FycmF5RmllbGRJdGVtLXJoc18xNHU4b18xODNcIiwgXCJBcnJheUZpZWxkSXRlbS1hY3Rpb25zXCI6IFwiX0FycmF5RmllbGRJdGVtLWFjdGlvbnNfMTR1OG9fMTg5XCIgfTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vY3JlYXRlTHVjaWRlSWNvbi5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IGZvcndhcmRSZWYgYXMgZm9yd2FyZFJlZjIsIGNyZWF0ZUVsZW1lbnQgYXMgY3JlYXRlRWxlbWVudDIgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9zaGFyZWQvc3JjL3V0aWxzLmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHRvS2ViYWJDYXNlID0gKHN0cmluZykgPT4gc3RyaW5nLnJlcGxhY2UoLyhbYS16MC05XSkoW0EtWl0pL2csIFwiJDEtJDJcIikudG9Mb3dlckNhc2UoKTtcbnZhciBtZXJnZUNsYXNzZXMgPSAoLi4uY2xhc3NlcykgPT4gY2xhc3Nlcy5maWx0ZXIoKGNsYXNzTmFtZSwgaW5kZXgsIGFycmF5KSA9PiB7XG4gIHJldHVybiBCb29sZWFuKGNsYXNzTmFtZSkgJiYgY2xhc3NOYW1lLnRyaW0oKSAhPT0gXCJcIiAmJiBhcnJheS5pbmRleE9mKGNsYXNzTmFtZSkgPT09IGluZGV4O1xufSkuam9pbihcIiBcIikudHJpbSgpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL0ljb24uanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBmb3J3YXJkUmVmLCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vZGVmYXVsdEF0dHJpYnV0ZXMuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgZGVmYXVsdEF0dHJpYnV0ZXMgPSB7XG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gIHdpZHRoOiAyNCxcbiAgaGVpZ2h0OiAyNCxcbiAgdmlld0JveDogXCIwIDAgMjQgMjRcIixcbiAgZmlsbDogXCJub25lXCIsXG4gIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIixcbiAgc3Ryb2tlV2lkdGg6IDIsXG4gIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIixcbiAgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIlxufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9JY29uLmpzXG52YXIgSWNvbiA9IGZvcndhcmRSZWYoXG4gIChfYSwgcmVmKSA9PiB7XG4gICAgdmFyIF9iID0gX2EsIHtcbiAgICAgIGNvbG9yID0gXCJjdXJyZW50Q29sb3JcIixcbiAgICAgIHNpemUgPSAyNCxcbiAgICAgIHN0cm9rZVdpZHRoID0gMixcbiAgICAgIGFic29sdXRlU3Ryb2tlV2lkdGgsXG4gICAgICBjbGFzc05hbWUgPSBcIlwiLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBpY29uTm9kZVxuICAgIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1xuICAgICAgXCJjb2xvclwiLFxuICAgICAgXCJzaXplXCIsXG4gICAgICBcInN0cm9rZVdpZHRoXCIsXG4gICAgICBcImFic29sdXRlU3Ryb2tlV2lkdGhcIixcbiAgICAgIFwiY2xhc3NOYW1lXCIsXG4gICAgICBcImNoaWxkcmVuXCIsXG4gICAgICBcImljb25Ob2RlXCJcbiAgICBdKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudChcbiAgICAgIFwic3ZnXCIsXG4gICAgICBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgcmVmXG4gICAgICB9LCBkZWZhdWx0QXR0cmlidXRlcyksIHtcbiAgICAgICAgd2lkdGg6IHNpemUsXG4gICAgICAgIGhlaWdodDogc2l6ZSxcbiAgICAgICAgc3Ryb2tlOiBjb2xvcixcbiAgICAgICAgc3Ryb2tlV2lkdGg6IGFic29sdXRlU3Ryb2tlV2lkdGggPyBOdW1iZXIoc3Ryb2tlV2lkdGgpICogMjQgLyBOdW1iZXIoc2l6ZSkgOiBzdHJva2VXaWR0aCxcbiAgICAgICAgY2xhc3NOYW1lOiBtZXJnZUNsYXNzZXMoXCJsdWNpZGVcIiwgY2xhc3NOYW1lKVxuICAgICAgfSksIHJlc3QpLFxuICAgICAgW1xuICAgICAgICAuLi5pY29uTm9kZS5tYXAoKFt0YWcsIGF0dHJzXSkgPT4gY3JlYXRlRWxlbWVudCh0YWcsIGF0dHJzKSksXG4gICAgICAgIC4uLkFycmF5LmlzQXJyYXkoY2hpbGRyZW4pID8gY2hpbGRyZW4gOiBbY2hpbGRyZW5dXG4gICAgICBdXG4gICAgKTtcbiAgfVxuKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9jcmVhdGVMdWNpZGVJY29uLmpzXG52YXIgY3JlYXRlTHVjaWRlSWNvbiA9IChpY29uTmFtZSwgaWNvbk5vZGUpID0+IHtcbiAgY29uc3QgQ29tcG9uZW50ID0gZm9yd2FyZFJlZjIoXG4gICAgKF9hLCByZWYpID0+IHtcbiAgICAgIHZhciBfYiA9IF9hLCB7IGNsYXNzTmFtZSB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJjbGFzc05hbWVcIl0pO1xuICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQyKEljb24sIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgcmVmLFxuICAgICAgICBpY29uTm9kZSxcbiAgICAgICAgY2xhc3NOYW1lOiBtZXJnZUNsYXNzZXMoYGx1Y2lkZS0ke3RvS2ViYWJDYXNlKGljb25OYW1lKX1gLCBjbGFzc05hbWUpXG4gICAgICB9LCBwcm9wcykpO1xuICAgIH1cbiAgKTtcbiAgQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gYCR7aWNvbk5hbWV9YDtcbiAgcmV0dXJuIENvbXBvbmVudDtcbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvY2hldnJvbi1kb3duLmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIENoZXZyb25Eb3duID0gY3JlYXRlTHVjaWRlSWNvbihcIkNoZXZyb25Eb3duXCIsIFtcbiAgW1wicGF0aFwiLCB7IGQ6IFwibTYgOSA2IDYgNi02XCIsIGtleTogXCJxcnVuc2xcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvY2hldnJvbi1yaWdodC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBDaGV2cm9uUmlnaHQgPSBjcmVhdGVMdWNpZGVJY29uKFwiQ2hldnJvblJpZ2h0XCIsIFtcbiAgW1wicGF0aFwiLCB7IGQ6IFwibTkgMTggNi02LTYtNlwiLCBrZXk6IFwibXRoaHdxXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2NoZXZyb24tdXAuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgQ2hldnJvblVwID0gY3JlYXRlTHVjaWRlSWNvbihcIkNoZXZyb25VcFwiLCBbW1wicGF0aFwiLCB7IGQ6IFwibTE4IDE1LTYtNi02IDZcIiwga2V5OiBcIjE1M3VkelwiIH1dXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvY2lyY2xlLWNoZWNrLWJpZy5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBDaXJjbGVDaGVja0JpZyA9IGNyZWF0ZUx1Y2lkZUljb24oXCJDaXJjbGVDaGVja0JpZ1wiLCBbXG4gIFtcInBhdGhcIiwgeyBkOiBcIk0yMS44MDEgMTBBMTAgMTAgMCAxIDEgMTcgMy4zMzVcIiwga2V5OiBcInlwczNjdFwiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJtOSAxMSAzIDNMMjIgNFwiLCBrZXk6IFwiMXBmbHpsXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2NvcHkuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgQ29weSA9IGNyZWF0ZUx1Y2lkZUljb24oXCJDb3B5XCIsIFtcbiAgW1wicmVjdFwiLCB7IHdpZHRoOiBcIjE0XCIsIGhlaWdodDogXCIxNFwiLCB4OiBcIjhcIiwgeTogXCI4XCIsIHJ4OiBcIjJcIiwgcnk6IFwiMlwiLCBrZXk6IFwiMTdqeWVhXCIgfV0sXG4gIFtcInBhdGhcIiwgeyBkOiBcIk00IDE2Yy0xLjEgMC0yLS45LTItMlY0YzAtMS4xLjktMiAyLTJoMTBjMS4xIDAgMiAuOSAyIDJcIiwga2V5OiBcInppeDl1ZlwiIH1dXG5dKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9jb3JuZXItbGVmdC11cC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBDb3JuZXJMZWZ0VXAgPSBjcmVhdGVMdWNpZGVJY29uKFwiQ29ybmVyTGVmdFVwXCIsIFtcbiAgW1wicG9seWxpbmVcIiwgeyBwb2ludHM6IFwiMTQgOSA5IDQgNCA5XCIsIGtleTogXCJtOW95dm9cIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTIwIDIwaC03YTQgNCAwIDAgMS00LTRWNFwiLCBrZXk6IFwiMWJsd2kzXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2VsbGlwc2lzLXZlcnRpY2FsLmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIEVsbGlwc2lzVmVydGljYWwgPSBjcmVhdGVMdWNpZGVJY29uKFwiRWxsaXBzaXNWZXJ0aWNhbFwiLCBbXG4gIFtcImNpcmNsZVwiLCB7IGN4OiBcIjEyXCIsIGN5OiBcIjEyXCIsIHI6IFwiMVwiLCBrZXk6IFwiNDFoaWxmXCIgfV0sXG4gIFtcImNpcmNsZVwiLCB7IGN4OiBcIjEyXCIsIGN5OiBcIjVcIiwgcjogXCIxXCIsIGtleTogXCJneGVvYjlcIiB9XSxcbiAgW1wiY2lyY2xlXCIsIHsgY3g6IFwiMTJcIiwgY3k6IFwiMTlcIiwgcjogXCIxXCIsIGtleTogXCJseWV4OWtcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvZ2xvYmUuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgR2xvYmUgPSBjcmVhdGVMdWNpZGVJY29uKFwiR2xvYmVcIiwgW1xuICBbXCJjaXJjbGVcIiwgeyBjeDogXCIxMlwiLCBjeTogXCIxMlwiLCByOiBcIjEwXCIsIGtleTogXCIxbWdsYXlcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTEyIDJhMTQuNSAxNC41IDAgMCAwIDAgMjAgMTQuNSAxNC41IDAgMCAwIDAtMjBcIiwga2V5OiBcIjEzbzF6bFwiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJNMiAxMmgyMFwiLCBrZXk6IFwiOWk0cHU0XCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2hhc2guanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgSGFzaCA9IGNyZWF0ZUx1Y2lkZUljb24oXCJIYXNoXCIsIFtcbiAgW1wibGluZVwiLCB7IHgxOiBcIjRcIiwgeDI6IFwiMjBcIiwgeTE6IFwiOVwiLCB5MjogXCI5XCIsIGtleTogXCI0bGh0Y3RcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjRcIiwgeDI6IFwiMjBcIiwgeTE6IFwiMTVcIiwgeTI6IFwiMTVcIiwga2V5OiBcInZ5dTBrZFwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiMTBcIiwgeDI6IFwiOFwiLCB5MTogXCIzXCIsIHkyOiBcIjIxXCIsIGtleTogXCIxZ2dwOG9cIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjE2XCIsIHgyOiBcIjE0XCIsIHkxOiBcIjNcIiwgeTI6IFwiMjFcIiwga2V5OiBcIndleWNncFwiIH1dXG5dKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9sYXllcnMuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgTGF5ZXJzID0gY3JlYXRlTHVjaWRlSWNvbihcIkxheWVyc1wiLCBbXG4gIFtcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk0xMi44MyAyLjE4YTIgMiAwIDAgMC0xLjY2IDBMMi42IDYuMDhhMSAxIDAgMCAwIDAgMS44M2w4LjU4IDMuOTFhMiAyIDAgMCAwIDEuNjYgMGw4LjU4LTMuOWExIDEgMCAwIDAgMC0xLjgzelwiLFxuICAgICAga2V5OiBcInp3M2pvXCJcbiAgICB9XG4gIF0sXG4gIFtcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk0yIDEyYTEgMSAwIDAgMCAuNTguOTFsOC42IDMuOTFhMiAyIDAgMCAwIDEuNjUgMGw4LjU4LTMuOUExIDEgMCAwIDAgMjIgMTJcIixcbiAgICAgIGtleTogXCIxd2R1cWNcIlxuICAgIH1cbiAgXSxcbiAgW1xuICAgIFwicGF0aFwiLFxuICAgIHtcbiAgICAgIGQ6IFwiTTIgMTdhMSAxIDAgMCAwIC41OC45MWw4LjYgMy45MWEyIDIgMCAwIDAgMS42NSAwbDguNTgtMy45QTEgMSAwIDAgMCAyMiAxN1wiLFxuICAgICAga2V5OiBcImtxYnZ4NlwiXG4gICAgfVxuICBdXG5dKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9sYXlvdXQtZ3JpZC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBMYXlvdXRHcmlkID0gY3JlYXRlTHVjaWRlSWNvbihcIkxheW91dEdyaWRcIiwgW1xuICBbXCJyZWN0XCIsIHsgd2lkdGg6IFwiN1wiLCBoZWlnaHQ6IFwiN1wiLCB4OiBcIjNcIiwgeTogXCIzXCIsIHJ4OiBcIjFcIiwga2V5OiBcIjFnOTh5cFwiIH1dLFxuICBbXCJyZWN0XCIsIHsgd2lkdGg6IFwiN1wiLCBoZWlnaHQ6IFwiN1wiLCB4OiBcIjE0XCIsIHk6IFwiM1wiLCByeDogXCIxXCIsIGtleTogXCI2ZDR4aGlcIiB9XSxcbiAgW1wicmVjdFwiLCB7IHdpZHRoOiBcIjdcIiwgaGVpZ2h0OiBcIjdcIiwgeDogXCIxNFwiLCB5OiBcIjE0XCIsIHJ4OiBcIjFcIiwga2V5OiBcIm54djVvMFwiIH1dLFxuICBbXCJyZWN0XCIsIHsgd2lkdGg6IFwiN1wiLCBoZWlnaHQ6IFwiN1wiLCB4OiBcIjNcIiwgeTogXCIxNFwiLCByeDogXCIxXCIsIGtleTogXCIxYmI2eXJcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvbGluay5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBMaW5rID0gY3JlYXRlTHVjaWRlSWNvbihcIkxpbmtcIiwgW1xuICBbXCJwYXRoXCIsIHsgZDogXCJNMTAgMTNhNSA1IDAgMCAwIDcuNTQuNTRsMy0zYTUgNSAwIDAgMC03LjA3LTcuMDdsLTEuNzIgMS43MVwiLCBrZXk6IFwiMWNqZXFvXCIgfV0sXG4gIFtcInBhdGhcIiwgeyBkOiBcIk0xNCAxMWE1IDUgMCAwIDAtNy41NC0uNTRsLTMgM2E1IDUgMCAwIDAgNy4wNyA3LjA3bDEuNzEtMS43MVwiLCBrZXk6IFwiMTlxZDY3XCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2xpc3QuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgTGlzdCA9IGNyZWF0ZUx1Y2lkZUljb24oXCJMaXN0XCIsIFtcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTMgMTJoLjAxXCIsIGtleTogXCJubHoyM2tcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTMgMThoLjAxXCIsIGtleTogXCIxdHRhM2pcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTMgNmguMDFcIiwga2V5OiBcIjFycXR6YVwiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJNOCAxMmgxM1wiLCBrZXk6IFwiMXphN3phXCIgfV0sXG4gIFtcInBhdGhcIiwgeyBkOiBcIk04IDE4aDEzXCIsIGtleTogXCIxbHg2bjNcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTggNmgxM1wiLCBrZXk6IFwiaWszdmtqXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2xvY2stb3Blbi5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBMb2NrT3BlbiA9IGNyZWF0ZUx1Y2lkZUljb24oXCJMb2NrT3BlblwiLCBbXG4gIFtcInJlY3RcIiwgeyB3aWR0aDogXCIxOFwiLCBoZWlnaHQ6IFwiMTFcIiwgeDogXCIzXCIsIHk6IFwiMTFcIiwgcng6IFwiMlwiLCByeTogXCIyXCIsIGtleTogXCIxdzRldzFcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTcgMTFWN2E1IDUgMCAwIDEgOS45LTFcIiwga2V5OiBcIjFtbTh3OFwiIH1dXG5dKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9sb2NrLmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIExvY2sgPSBjcmVhdGVMdWNpZGVJY29uKFwiTG9ja1wiLCBbXG4gIFtcInJlY3RcIiwgeyB3aWR0aDogXCIxOFwiLCBoZWlnaHQ6IFwiMTFcIiwgeDogXCIzXCIsIHk6IFwiMTFcIiwgcng6IFwiMlwiLCByeTogXCIyXCIsIGtleTogXCIxdzRldzFcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTcgMTFWN2E1IDUgMCAwIDEgMTAgMHY0XCIsIGtleTogXCJmd3Ztem1cIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvbW9uaXRvci5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBNb25pdG9yID0gY3JlYXRlTHVjaWRlSWNvbihcIk1vbml0b3JcIiwgW1xuICBbXCJyZWN0XCIsIHsgd2lkdGg6IFwiMjBcIiwgaGVpZ2h0OiBcIjE0XCIsIHg6IFwiMlwiLCB5OiBcIjNcIiwgcng6IFwiMlwiLCBrZXk6IFwiNDhpNjUxXCIgfV0sXG4gIFtcImxpbmVcIiwgeyB4MTogXCI4XCIsIHgyOiBcIjE2XCIsIHkxOiBcIjIxXCIsIHkyOiBcIjIxXCIsIGtleTogXCIxc3ZrZWhcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjEyXCIsIHgyOiBcIjEyXCIsIHkxOiBcIjE3XCIsIHkyOiBcIjIxXCIsIGtleTogXCJ2dzFxbW1cIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvcGFuZWwtbGVmdC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBQYW5lbExlZnQgPSBjcmVhdGVMdWNpZGVJY29uKFwiUGFuZWxMZWZ0XCIsIFtcbiAgW1wicmVjdFwiLCB7IHdpZHRoOiBcIjE4XCIsIGhlaWdodDogXCIxOFwiLCB4OiBcIjNcIiwgeTogXCIzXCIsIHJ4OiBcIjJcIiwga2V5OiBcImFmaXR2N1wiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJNOSAzdjE4XCIsIGtleTogXCJmaDNocWFcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvcGFuZWwtcmlnaHQuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgUGFuZWxSaWdodCA9IGNyZWF0ZUx1Y2lkZUljb24oXCJQYW5lbFJpZ2h0XCIsIFtcbiAgW1wicmVjdFwiLCB7IHdpZHRoOiBcIjE4XCIsIGhlaWdodDogXCIxOFwiLCB4OiBcIjNcIiwgeTogXCIzXCIsIHJ4OiBcIjJcIiwga2V5OiBcImFmaXR2N1wiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJNMTUgM3YxOFwiLCBrZXk6IFwiMTRudnAwXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3BsdXMuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgUGx1cyA9IGNyZWF0ZUx1Y2lkZUljb24oXCJQbHVzXCIsIFtcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTUgMTJoMTRcIiwga2V5OiBcIjFheXMwaFwiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJNMTIgNXYxNFwiLCBrZXk6IFwiczY5OWxlXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3JlZG8tMi5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBSZWRvMiA9IGNyZWF0ZUx1Y2lkZUljb24oXCJSZWRvMlwiLCBbXG4gIFtcInBhdGhcIiwgeyBkOiBcIm0xNSAxNCA1LTUtNS01XCIsIGtleTogXCIxMnZnMW1cIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTIwIDlIOS41QTUuNSA1LjUgMCAwIDAgNCAxNC41QTUuNSA1LjUgMCAwIDAgOS41IDIwSDEzXCIsIGtleTogXCI2dWtsemFcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvc2VhcmNoLmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIFNlYXJjaCA9IGNyZWF0ZUx1Y2lkZUljb24oXCJTZWFyY2hcIiwgW1xuICBbXCJjaXJjbGVcIiwgeyBjeDogXCIxMVwiLCBjeTogXCIxMVwiLCByOiBcIjhcIiwga2V5OiBcIjRlajk3dVwiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJtMjEgMjEtNC4zLTQuM1wiLCBrZXk6IFwiMXFpZTNxXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3NsaWRlcnMtaG9yaXpvbnRhbC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBTbGlkZXJzSG9yaXpvbnRhbCA9IGNyZWF0ZUx1Y2lkZUljb24oXCJTbGlkZXJzSG9yaXpvbnRhbFwiLCBbXG4gIFtcImxpbmVcIiwgeyB4MTogXCIyMVwiLCB4MjogXCIxNFwiLCB5MTogXCI0XCIsIHkyOiBcIjRcIiwga2V5OiBcIm9idWV3ZFwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiMTBcIiwgeDI6IFwiM1wiLCB5MTogXCI0XCIsIHkyOiBcIjRcIiwga2V5OiBcIjFxNjI5OFwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiMjFcIiwgeDI6IFwiMTJcIiwgeTE6IFwiMTJcIiwgeTI6IFwiMTJcIiwga2V5OiBcIjFpdThoMVwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiOFwiLCB4MjogXCIzXCIsIHkxOiBcIjEyXCIsIHkyOiBcIjEyXCIsIGtleTogXCJudHNzNjhcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjIxXCIsIHgyOiBcIjE2XCIsIHkxOiBcIjIwXCIsIHkyOiBcIjIwXCIsIGtleTogXCIxNGQ4cGhcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjEyXCIsIHgyOiBcIjNcIiwgeTE6IFwiMjBcIiwgeTI6IFwiMjBcIiwga2V5OiBcIm0wd204clwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiMTRcIiwgeDI6IFwiMTRcIiwgeTE6IFwiMlwiLCB5MjogXCI2XCIsIGtleTogXCIxNGUxcGhcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjhcIiwgeDI6IFwiOFwiLCB5MTogXCIxMFwiLCB5MjogXCIxNFwiLCBrZXk6IFwiMWk2amkwXCIgfV0sXG4gIFtcImxpbmVcIiwgeyB4MTogXCIxNlwiLCB4MjogXCIxNlwiLCB5MTogXCIxOFwiLCB5MjogXCIyMlwiLCBrZXk6IFwiMWxjdGx2XCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3NtYXJ0cGhvbmUuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgU21hcnRwaG9uZSA9IGNyZWF0ZUx1Y2lkZUljb24oXCJTbWFydHBob25lXCIsIFtcbiAgW1wicmVjdFwiLCB7IHdpZHRoOiBcIjE0XCIsIGhlaWdodDogXCIyMFwiLCB4OiBcIjVcIiwgeTogXCIyXCIsIHJ4OiBcIjJcIiwgcnk6IFwiMlwiLCBrZXk6IFwiMXl0MG8zXCIgfV0sXG4gIFtcInBhdGhcIiwgeyBkOiBcIk0xMiAxOGguMDFcIiwga2V5OiBcIm1oeWd2dVwiIH1dXG5dKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy90YWJsZXQuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgVGFibGV0ID0gY3JlYXRlTHVjaWRlSWNvbihcIlRhYmxldFwiLCBbXG4gIFtcInJlY3RcIiwgeyB3aWR0aDogXCIxNlwiLCBoZWlnaHQ6IFwiMjBcIiwgeDogXCI0XCIsIHk6IFwiMlwiLCByeDogXCIyXCIsIHJ5OiBcIjJcIiwga2V5OiBcIjc2b3RnZlwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiMTJcIiwgeDI6IFwiMTIuMDFcIiwgeTE6IFwiMThcIiwgeTI6IFwiMThcIiwga2V5OiBcIjFkcDU2M1wiIH1dXG5dKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy90cmFzaC5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBUcmFzaCA9IGNyZWF0ZUx1Y2lkZUljb24oXCJUcmFzaFwiLCBbXG4gIFtcInBhdGhcIiwgeyBkOiBcIk0zIDZoMThcIiwga2V5OiBcImQwd20walwiIH1dLFxuICBbXCJwYXRoXCIsIHsgZDogXCJNMTkgNnYxNGMwIDEtMSAyLTIgMkg3Yy0xIDAtMi0xLTItMlY2XCIsIGtleTogXCI0YWxydDRcIiB9XSxcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MlwiLCBrZXk6IFwidjA3czBlXCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3R5cGUuanNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgVHlwZSA9IGNyZWF0ZUx1Y2lkZUljb24oXCJUeXBlXCIsIFtcbiAgW1wicG9seWxpbmVcIiwgeyBwb2ludHM6IFwiNCA3IDQgNCAyMCA0IDIwIDdcIiwga2V5OiBcIjFub3NhblwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiOVwiLCB4MjogXCIxNVwiLCB5MTogXCIyMFwiLCB5MjogXCIyMFwiLCBrZXk6IFwic3dpbjl5XCIgfV0sXG4gIFtcImxpbmVcIiwgeyB4MTogXCIxMlwiLCB4MjogXCIxMlwiLCB5MTogXCI0XCIsIHkyOiBcIjIwXCIsIGtleTogXCIxdHgxcnJcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvdW5kby0yLmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIFVuZG8yID0gY3JlYXRlTHVjaWRlSWNvbihcIlVuZG8yXCIsIFtcbiAgW1wicGF0aFwiLCB7IGQ6IFwiTTkgMTQgNCA5bDUtNVwiLCBrZXk6IFwiMTAyczVzXCIgfV0sXG4gIFtcInBhdGhcIiwgeyBkOiBcIk00IDloMTAuNWE1LjUgNS41IDAgMCAxIDUuNSA1LjVhNS41IDUuNSAwIDAgMS01LjUgNS41SDExXCIsIGtleTogXCJmM2I5c2RcIiB9XVxuXSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvem9vbS1pbi5qc1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBab29tSW4gPSBjcmVhdGVMdWNpZGVJY29uKFwiWm9vbUluXCIsIFtcbiAgW1wiY2lyY2xlXCIsIHsgY3g6IFwiMTFcIiwgY3k6IFwiMTFcIiwgcjogXCI4XCIsIGtleTogXCI0ZWo5N3VcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjIxXCIsIHgyOiBcIjE2LjY1XCIsIHkxOiBcIjIxXCIsIHkyOiBcIjE2LjY1XCIsIGtleTogXCIxM2dqN2NcIiB9XSxcbiAgW1wibGluZVwiLCB7IHgxOiBcIjExXCIsIHgyOiBcIjExXCIsIHkxOiBcIjhcIiwgeTI6IFwiMTRcIiwga2V5OiBcIjF2bXNrcFwiIH1dLFxuICBbXCJsaW5lXCIsIHsgeDE6IFwiOFwiLCB4MjogXCIxNFwiLCB5MTogXCIxMVwiLCB5MjogXCIxMVwiLCBrZXk6IFwiZHVyeW11XCIgfV1cbl0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3pvb20tb3V0LmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIFpvb21PdXQgPSBjcmVhdGVMdWNpZGVJY29uKFwiWm9vbU91dFwiLCBbXG4gIFtcImNpcmNsZVwiLCB7IGN4OiBcIjExXCIsIGN5OiBcIjExXCIsIHI6IFwiOFwiLCBrZXk6IFwiNGVqOTd1XCIgfV0sXG4gIFtcImxpbmVcIiwgeyB4MTogXCIyMVwiLCB4MjogXCIxNi42NVwiLCB5MTogXCIyMVwiLCB5MjogXCIxNi42NVwiLCBrZXk6IFwiMTNnajdjXCIgfV0sXG4gIFtcImxpbmVcIiwgeyB4MTogXCI4XCIsIHgyOiBcIjE0XCIsIHkxOiBcIjExXCIsIHkyOiBcIjExXCIsIGtleTogXCJkdXJ5bXVcIiB9XVxuXSk7XG5cbi8vIGNvbXBvbmVudHMvSWNvbkJ1dHRvbi9pbmRleC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY29tcG9uZW50cy9BdXRvRmllbGQvZmllbGRzL0FycmF5RmllbGQvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazIsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q2LCB1c2VSZWYsIHVzZVN0YXRlIGFzIHVzZVN0YXRlNCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBjb21wb25lbnRzL0RyYWdJY29uL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL0RyYWdJY29uL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0NSA9IHsgXCJEcmFnSWNvblwiOiBcIl9EcmFnSWNvbl8xN3A4eF8xXCIsIFwiRHJhZ0ljb24tLWRpc2FibGVkXCI6IFwiX0RyYWdJY29uLS1kaXNhYmxlZF8xN3A4eF84XCIgfTtcblxuLy8gY29tcG9uZW50cy9EcmFnSWNvbi9pbmRleC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g1IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lNSA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIkRyYWdJY29uXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDUpO1xudmFyIERyYWdJY29uID0gKHsgaXNEcmFnRGlzYWJsZWQgfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeDUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTUoeyBkaXNhYmxlZDogaXNEcmFnRGlzYWJsZWQgfSksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NShcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDIwIDIwXCIsIHdpZHRoOiBcIjEyXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NShcInBhdGhcIiwgeyBkOiBcIk03IDJhMiAyIDAgMSAwIC4wMDEgNC4wMDFBMiAyIDAgMCAwIDcgMnptMCA2YTIgMiAwIDEgMCAuMDAxIDQuMDAxQTIgMiAwIDAgMCA3IDh6bTAgNmEyIDIgMCAxIDAgLjAwMSA0LjAwMUEyIDIgMCAwIDAgNyAxNHptNi04YTIgMiAwIDEgMC0uMDAxLTQuMDAxQTIgMiAwIDAgMCAxMyA2em0wIDJhMiAyIDAgMSAwIC4wMDEgNC4wMDFBMiAyIDAgMCAwIDEzIDh6bTAgNmEyIDIgMCAxIDAgLjAwMSA0LjAwMUEyIDIgMCAwIDAgMTMgMTR6XCIgfSkgfSkgfSk7XG5cbi8vIGNvbXBvbmVudHMvU29ydGFibGUvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgRHJhZ0Ryb3BQcm92aWRlciB9IGZyb20gXCJAZG5kLWtpdC9yZWFjdFwiO1xuXG4vLyBsaWIvZG5kL3VzZS1zZW5zb3JzLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgdXNlU3RhdGUgYXMgdXNlU3RhdGUzIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBQb2ludGVyU2Vuc29yIH0gZnJvbSBcIkBkbmQta2l0L3JlYWN0XCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiQGRuZC1raXQvZG9tL3V0aWxpdGllc1wiO1xudmFyIHRvdWNoRGVmYXVsdCA9IHsgZGVsYXk6IHsgdmFsdWU6IDIwMCwgdG9sZXJhbmNlOiAxMCB9IH07XG52YXIgb3RoZXJEZWZhdWx0ID0ge1xuICBkZWxheTogeyB2YWx1ZTogMjAwLCB0b2xlcmFuY2U6IDEwIH0sXG4gIGRpc3RhbmNlOiB7IHZhbHVlOiA1IH1cbn07XG52YXIgdXNlU2Vuc29ycyA9ICh7XG4gIG90aGVyID0gb3RoZXJEZWZhdWx0LFxuICBtb3VzZSxcbiAgdG91Y2ggPSB0b3VjaERlZmF1bHRcbn0gPSB7XG4gIHRvdWNoOiB0b3VjaERlZmF1bHQsXG4gIG90aGVyOiBvdGhlckRlZmF1bHRcbn0pID0+IHtcbiAgY29uc3QgW3NlbnNvcnNdID0gdXNlU3RhdGUzKCgpID0+IFtcbiAgICBQb2ludGVyU2Vuc29yLmNvbmZpZ3VyZSh7XG4gICAgICBhY3RpdmF0aW9uQ29uc3RyYWludHMoZXZlbnQsIHNvdXJjZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHsgcG9pbnRlclR5cGUsIHRhcmdldCB9ID0gZXZlbnQ7XG4gICAgICAgIGlmIChwb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiICYmIGlzRWxlbWVudCh0YXJnZXQpICYmIChzb3VyY2UuaGFuZGxlID09PSB0YXJnZXQgfHwgKChfYSA9IHNvdXJjZS5oYW5kbGUpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jb250YWlucyh0YXJnZXQpKSkpIHtcbiAgICAgICAgICByZXR1cm4gbW91c2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgICAgICByZXR1cm4gdG91Y2g7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG90aGVyO1xuICAgICAgfVxuICAgIH0pXG4gIF0pO1xuICByZXR1cm4gc2Vuc29ycztcbn07XG5cbi8vIGxpYi9kbmQvY29sbGlzaW9uL2R5bmFtaWMvaW5kZXgudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQge1xuICBDb2xsaXNpb25Qcmlvcml0eSBhcyBDb2xsaXNpb25Qcmlvcml0eTcsXG4gIENvbGxpc2lvblR5cGUgYXMgQ29sbGlzaW9uVHlwZTdcbn0gZnJvbSBcIkBkbmQta2l0L2Fic3RyYWN0XCI7XG5cbi8vIGxpYi9kbmQvY29sbGlzaW9uL2RpcmVjdGlvbmFsL2luZGV4LnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgQ29sbGlzaW9uVHlwZSB9IGZyb20gXCJAZG5kLWtpdC9hYnN0cmFjdFwiO1xuXG4vLyBsaWIvZG5kL2NvbGxpc2lvbi9jb2xsaXNpb24tZGVidWcudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgREVCVUcgPSBmYWxzZTtcbnZhciBkZWJ1Z0VsZW1lbnRzID0ge307XG52YXIgdGltZW91dDtcbnZhciBjb2xsaXNpb25EZWJ1ZyA9IChhLCBiLCBpZCwgY29sb3IsIGxhYmVsKSA9PiB7XG4gIGlmICghREVCVUcpIHJldHVybjtcbiAgY29uc3QgZGVidWdJZCA9IGAke2lkfS1kZWJ1Z2A7XG4gIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIE9iamVjdC5lbnRyaWVzKGRlYnVnRWxlbWVudHMpLmZvckVhY2goKFtpZDIsIHsgc3ZnIH1dKSA9PiB7XG4gICAgICBzdmcucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgZGVidWdFbGVtZW50c1tpZDJdO1xuICAgIH0pO1xuICB9LCAxZTMpO1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgZXhpc3RpbmdFbCA9IGRlYnVnRWxlbWVudHNbZGVidWdJZF07XG4gICAgbGV0IGxpbmUgPSAoX2EgPSBkZWJ1Z0VsZW1lbnRzW2RlYnVnSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EubGluZTtcbiAgICBsZXQgdGV4dCA9IChfYiA9IGRlYnVnRWxlbWVudHNbZGVidWdJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi50ZXh0O1xuICAgIGlmICghZXhpc3RpbmdFbCkge1xuICAgICAgY29uc3Qgc3ZnTnMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG4gICAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTnMsIFwic3ZnXCIpO1xuICAgICAgbGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOcywgXCJsaW5lXCIpO1xuICAgICAgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOcywgXCJ0ZXh0XCIpO1xuICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImlkXCIsIGRlYnVnSWQpO1xuICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJzdHlsZVwiLFxuICAgICAgICBcInBvc2l0aW9uOiBmaXhlZDsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJTsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHRvcDogMHB4OyBsZWZ0OiAwcHg7XCJcbiAgICAgICk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQobGluZSk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQodGV4dCk7XG4gICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgYGJsYWNrYCk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN2Zyk7XG4gICAgICBkZWJ1Z0VsZW1lbnRzW2RlYnVnSWRdID0geyBzdmcsIGxpbmUsIHRleHQgfTtcbiAgICB9XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MVwiLCBhLngudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MlwiLCBiLngudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ5MVwiLCBhLnkudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ5MlwiLCBiLnkudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBgc3Ryb2tlOiR7Y29sb3J9O3N0cm9rZS13aWR0aDoyYCk7XG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChhLnggLSAoYS54IC0gYi54KSAvIDIpLnRvU3RyaW5nKCkpO1xuICAgIHRleHQuc2V0QXR0cmlidXRlKFwieVwiLCAoYS55IC0gKGEueSAtIGIueSkgLyAyKS50b1N0cmluZygpKTtcbiAgICBpZiAobGFiZWwpIHtcbiAgICAgIHRleHQuaW5uZXJIVE1MID0gbGFiZWw7XG4gICAgfVxuICB9KTtcbn07XG5cbi8vIGxpYi9kbmQvY29sbGlzaW9uL2RpcmVjdGlvbmFsL2luZGV4LnRzXG52YXIgZGlzdGFuY2VDaGFuZ2UgPSBcImluY3JlYXNpbmdcIjtcbnZhciBkaXJlY3Rpb25hbENvbGxpc2lvbiA9IChpbnB1dCwgcHJldmlvdXMpID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCB7IGRyYWdPcGVyYXRpb24sIGRyb3BwYWJsZSB9ID0gaW5wdXQ7XG4gIGNvbnN0IHsgc2hhcGU6IGRyb3BTaGFwZSB9ID0gZHJvcHBhYmxlO1xuICBjb25zdCB7IHBvc2l0aW9uIH0gPSBkcmFnT3BlcmF0aW9uO1xuICBjb25zdCBkcmFnU2hhcGUgPSAoX2EgPSBkcmFnT3BlcmF0aW9uLnNoYXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY3VycmVudDtcbiAgaWYgKCFkcmFnU2hhcGUgfHwgIWRyb3BTaGFwZSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGRyb3BDZW50ZXIgPSBkcm9wU2hhcGUuY2VudGVyO1xuICBjb25zdCBkaXN0YW5jZVRvUHJldmlvdXMgPSBNYXRoLnNxcnQoXG4gICAgTWF0aC5wb3coZHJvcENlbnRlci54IC0gcHJldmlvdXMueCwgMikgKyBNYXRoLnBvdyhkcm9wQ2VudGVyLnkgLSBwcmV2aW91cy55LCAyKVxuICApO1xuICBjb25zdCBkaXN0YW5jZVRvQ3VycmVudCA9IE1hdGguc3FydChcbiAgICBNYXRoLnBvdyhkcm9wQ2VudGVyLnggLSBwb3NpdGlvbi5jdXJyZW50LngsIDIpICsgTWF0aC5wb3coZHJvcENlbnRlci55IC0gcG9zaXRpb24uY3VycmVudC55LCAyKVxuICApO1xuICBkaXN0YW5jZUNoYW5nZSA9IGRpc3RhbmNlVG9DdXJyZW50ID09PSBkaXN0YW5jZVRvUHJldmlvdXMgPyBkaXN0YW5jZUNoYW5nZSA6IGRpc3RhbmNlVG9DdXJyZW50IDwgZGlzdGFuY2VUb1ByZXZpb3VzID8gXCJkZWNyZWFzaW5nXCIgOiBcImluY3JlYXNpbmdcIjtcbiAgY29sbGlzaW9uRGVidWcoXG4gICAgZHJhZ1NoYXBlLmNlbnRlcixcbiAgICBkcm9wQ2VudGVyLFxuICAgIGRyb3BwYWJsZS5pZC50b1N0cmluZygpLFxuICAgIFwicmViZWNjYXB1cnBsZVwiXG4gICk7XG4gIGlmIChkaXN0YW5jZUNoYW5nZSA9PT0gXCJkZWNyZWFzaW5nXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRyb3BwYWJsZS5pZCxcbiAgICAgIHZhbHVlOiAxLFxuICAgICAgdHlwZTogQ29sbGlzaW9uVHlwZS5Db2xsaXNpb25cbiAgICB9O1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gbGliL2RuZC9jb2xsaXNpb24vZHluYW1pYy9nZXQtZGlyZWN0aW9uLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGdldERpcmVjdGlvbiA9IChkcmFnQXhpcywgZGVsdGEpID0+IHtcbiAgaWYgKGRyYWdBeGlzID09PSBcImR5bmFtaWNcIikge1xuICAgIGlmIChNYXRoLmFicyhkZWx0YS55KSA+IE1hdGguYWJzKGRlbHRhLngpKSB7XG4gICAgICByZXR1cm4gZGVsdGEueSA9PT0gMCA/IG51bGwgOiBkZWx0YS55ID4gMCA/IFwiZG93blwiIDogXCJ1cFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVsdGEueCA9PT0gMCA/IG51bGwgOiBkZWx0YS54ID4gMCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkcmFnQXhpcyA9PT0gXCJ4XCIpIHtcbiAgICByZXR1cm4gZGVsdGEueCA9PT0gMCA/IG51bGwgOiBkZWx0YS54ID4gMCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICB9XG4gIHJldHVybiBkZWx0YS55ID09PSAwID8gbnVsbCA6IGRlbHRhLnkgPiAwID8gXCJkb3duXCIgOiBcInVwXCI7XG59O1xuXG4vLyBsaWIvZG5kL2NvbGxpc2lvbi9keW5hbWljL2dldC1taWRwb2ludC1pbXBhY3QudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgZ2V0TWlkcG9pbnRJbXBhY3QgPSAoZHJhZ1NoYXBlLCBkcm9wU2hhcGUsIGRpcmVjdGlvbiwgb2Zmc2V0TXVsdGlwbGllciA9IDApID0+IHtcbiAgY29uc3QgZHJhZ1JlY3QgPSBkcmFnU2hhcGUuYm91bmRpbmdSZWN0YW5nbGU7XG4gIGNvbnN0IGRyb3BDZW50ZXIgPSBkcm9wU2hhcGUuY2VudGVyO1xuICBpZiAoZGlyZWN0aW9uID09PSBcImRvd25cIikge1xuICAgIGNvbnN0IG9mZnNldDIgPSBvZmZzZXRNdWx0aXBsaWVyICogZHJvcFNoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLmhlaWdodDtcbiAgICByZXR1cm4gZHJhZ1JlY3QuYm90dG9tID49IGRyb3BDZW50ZXIueSArIG9mZnNldDI7XG4gIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcInVwXCIpIHtcbiAgICBjb25zdCBvZmZzZXQyID0gb2Zmc2V0TXVsdGlwbGllciAqIGRyb3BTaGFwZS5ib3VuZGluZ1JlY3RhbmdsZS5oZWlnaHQ7XG4gICAgcmV0dXJuIGRyYWdSZWN0LnRvcCA8IGRyb3BDZW50ZXIueSAtIG9mZnNldDI7XG4gIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcImxlZnRcIikge1xuICAgIGNvbnN0IG9mZnNldDIgPSBvZmZzZXRNdWx0aXBsaWVyICogZHJvcFNoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLndpZHRoO1xuICAgIHJldHVybiBkcm9wQ2VudGVyLnggLSBvZmZzZXQyID49IGRyYWdSZWN0LmxlZnQ7XG4gIH1cbiAgY29uc3Qgb2Zmc2V0ID0gb2Zmc2V0TXVsdGlwbGllciAqIGRyb3BTaGFwZS5ib3VuZGluZ1JlY3RhbmdsZS53aWR0aDtcbiAgcmV0dXJuIGRyYWdSZWN0LnJpZ2h0IC0gb2Zmc2V0ID49IGRyb3BDZW50ZXIueDtcbn07XG5cbi8vIGxpYi9kbmQvY29sbGlzaW9uL2R5bmFtaWMvdHJhY2stbW92ZW1lbnQtaW50ZXJ2YWwudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCJAZG5kLWtpdC9nZW9tZXRyeVwiO1xudmFyIElOVEVSVkFMX1NFTlNJVElWSVRZID0gMTA7XG52YXIgaW50ZXJ2YWxDYWNoZSA9IHtcbiAgY3VycmVudDogeyB4OiAwLCB5OiAwIH0sXG4gIGRlbHRhOiB7IHg6IDAsIHk6IDAgfSxcbiAgcHJldmlvdXM6IHsgeDogMCwgeTogMCB9LFxuICBkaXJlY3Rpb246IG51bGxcbn07XG52YXIgdHJhY2tNb3ZlbWVudEludGVydmFsID0gKHBvaW50LCBkcmFnQXhpcyA9IFwiZHluYW1pY1wiKSA9PiB7XG4gIGludGVydmFsQ2FjaGUuY3VycmVudCA9IHBvaW50O1xuICBpbnRlcnZhbENhY2hlLmRlbHRhID0ge1xuICAgIHg6IHBvaW50LnggLSBpbnRlcnZhbENhY2hlLnByZXZpb3VzLngsXG4gICAgeTogcG9pbnQueSAtIGludGVydmFsQ2FjaGUucHJldmlvdXMueVxuICB9O1xuICBpbnRlcnZhbENhY2hlLmRpcmVjdGlvbiA9IGdldERpcmVjdGlvbihkcmFnQXhpcywgaW50ZXJ2YWxDYWNoZS5kZWx0YSkgfHwgaW50ZXJ2YWxDYWNoZS5kaXJlY3Rpb247XG4gIGlmIChNYXRoLmFicyhpbnRlcnZhbENhY2hlLmRlbHRhLngpID4gSU5URVJWQUxfU0VOU0lUSVZJVFkgfHwgTWF0aC5hYnMoaW50ZXJ2YWxDYWNoZS5kZWx0YS55KSA+IElOVEVSVkFMX1NFTlNJVElWSVRZKSB7XG4gICAgaW50ZXJ2YWxDYWNoZS5wcmV2aW91cyA9IFBvaW50LmZyb20ocG9pbnQpO1xuICB9XG4gIHJldHVybiBpbnRlcnZhbENhY2hlO1xufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BkbmQta2l0L2NvbGxpc2lvbi9kaXN0L2luZGV4LmpzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgQ29sbGlzaW9uUHJpb3JpdHksIENvbGxpc2lvblR5cGUgYXMgQ29sbGlzaW9uVHlwZTIgfSBmcm9tIFwiQGRuZC1raXQvYWJzdHJhY3RcIjtcbmltcG9ydCB7IFBvaW50IGFzIFBvaW50MiB9IGZyb20gXCJAZG5kLWtpdC9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgQ29sbGlzaW9uUHJpb3JpdHkgYXMgQ29sbGlzaW9uUHJpb3JpdHkyLCBDb2xsaXNpb25UeXBlIGFzIENvbGxpc2lvblR5cGUyMiB9IGZyb20gXCJAZG5kLWtpdC9hYnN0cmFjdFwiO1xuaW1wb3J0IHsgUG9pbnQgYXMgUG9pbnQyMiB9IGZyb20gXCJAZG5kLWtpdC9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgQ29sbGlzaW9uUHJpb3JpdHkgYXMgQ29sbGlzaW9uUHJpb3JpdHkzLCBDb2xsaXNpb25UeXBlIGFzIENvbGxpc2lvblR5cGUzIH0gZnJvbSBcIkBkbmQta2l0L2Fic3RyYWN0XCI7XG5pbXBvcnQgeyBQb2ludCBhcyBQb2ludDMsIFJlY3RhbmdsZSB9IGZyb20gXCJAZG5kLWtpdC9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgQ29sbGlzaW9uUHJpb3JpdHkgYXMgQ29sbGlzaW9uUHJpb3JpdHk0LCBDb2xsaXNpb25UeXBlIGFzIENvbGxpc2lvblR5cGU0IH0gZnJvbSBcIkBkbmQta2l0L2Fic3RyYWN0XCI7XG5pbXBvcnQgeyBQb2ludCBhcyBQb2ludDQgfSBmcm9tIFwiQGRuZC1raXQvZ2VvbWV0cnlcIjtcbmltcG9ydCB7IENvbGxpc2lvblByaW9yaXR5IGFzIENvbGxpc2lvblByaW9yaXR5NSwgQ29sbGlzaW9uVHlwZSBhcyBDb2xsaXNpb25UeXBlNSB9IGZyb20gXCJAZG5kLWtpdC9hYnN0cmFjdFwiO1xuaW1wb3J0IHsgUG9pbnQgYXMgUG9pbnQ1IH0gZnJvbSBcIkBkbmQta2l0L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBDb2xsaXNpb25Qcmlvcml0eSBhcyBDb2xsaXNpb25Qcmlvcml0eTYsIENvbGxpc2lvblR5cGUgYXMgQ29sbGlzaW9uVHlwZTYgfSBmcm9tIFwiQGRuZC1raXQvYWJzdHJhY3RcIjtcbmltcG9ydCB7IFBvaW50IGFzIFBvaW50NiB9IGZyb20gXCJAZG5kLWtpdC9nZW9tZXRyeVwiO1xudmFyIHBvaW50ZXJJbnRlcnNlY3Rpb24gPSAoe1xuICBkcmFnT3BlcmF0aW9uLFxuICBkcm9wcGFibGVcbn0pID0+IHtcbiAgY29uc3QgcG9pbnRlckNvb3JkaW5hdGVzID0gZHJhZ09wZXJhdGlvbi5wb3NpdGlvbi5jdXJyZW50O1xuICBpZiAoIXBvaW50ZXJDb29yZGluYXRlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHsgaWQgfSA9IGRyb3BwYWJsZTtcbiAgaWYgKCFkcm9wcGFibGUuc2hhcGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoZHJvcHBhYmxlLnNoYXBlLmNvbnRhaW5zUG9pbnQocG9pbnRlckNvb3JkaW5hdGVzKSkge1xuICAgIGNvbnN0IGRpc3RhbmNlID0gUG9pbnQyLmRpc3RhbmNlKGRyb3BwYWJsZS5zaGFwZS5jZW50ZXIsIHBvaW50ZXJDb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkLFxuICAgICAgdmFsdWU6IDEgLyBkaXN0YW5jZSxcbiAgICAgIHR5cGU6IENvbGxpc2lvblR5cGUyLlBvaW50ZXJJbnRlcnNlY3Rpb24sXG4gICAgICBwcmlvcml0eTogQ29sbGlzaW9uUHJpb3JpdHkuSGlnaFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xudmFyIGNsb3Nlc3RDb3JuZXJzID0gKGlucHV0KSA9PiB7XG4gIGNvbnN0IHsgZHJhZ09wZXJhdGlvbiwgZHJvcHBhYmxlIH0gPSBpbnB1dDtcbiAgY29uc3QgeyBzaGFwZSwgcG9zaXRpb24gfSA9IGRyYWdPcGVyYXRpb247XG4gIGlmICghZHJvcHBhYmxlLnNoYXBlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qgc2hhcGVDb3JuZXJzID0gc2hhcGUgPyBSZWN0YW5nbGUuZnJvbShzaGFwZS5jdXJyZW50LmJvdW5kaW5nUmVjdGFuZ2xlKS5jb3JuZXJzIDogdm9pZCAwO1xuICBjb25zdCBkaXN0YW5jZSA9IFJlY3RhbmdsZS5mcm9tKFxuICAgIGRyb3BwYWJsZS5zaGFwZS5ib3VuZGluZ1JlY3RhbmdsZVxuICApLmNvcm5lcnMucmVkdWNlKFxuICAgIChhY2MsIGNvcm5lciwgaW5kZXgpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiBhY2MgKyBQb2ludDMuZGlzdGFuY2UoXG4gICAgICAgIFBvaW50My5mcm9tKGNvcm5lciksXG4gICAgICAgIChfYSA9IHNoYXBlQ29ybmVycyA9PSBudWxsID8gdm9pZCAwIDogc2hhcGVDb3JuZXJzW2luZGV4XSkgIT0gbnVsbCA/IF9hIDogcG9zaXRpb24uY3VycmVudFxuICAgICAgKTtcbiAgICB9LFxuICAgIDBcbiAgKTtcbiAgY29uc3QgdmFsdWUgPSBkaXN0YW5jZSAvIDQ7XG4gIHJldHVybiB7XG4gICAgaWQ6IGRyb3BwYWJsZS5pZCxcbiAgICB2YWx1ZTogMSAvIHZhbHVlLFxuICAgIHR5cGU6IENvbGxpc2lvblR5cGUzLkNvbGxpc2lvbixcbiAgICBwcmlvcml0eTogQ29sbGlzaW9uUHJpb3JpdHkzLk5vcm1hbFxuICB9O1xufTtcblxuLy8gbGliL2RuZC9jb2xsaXNpb24vZHluYW1pYy9zdG9yZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IGNyZWF0ZVN0b3JlIH0gZnJvbSBcInp1c3RhbmQvdmFuaWxsYVwiO1xudmFyIGNvbGxpc2lvblN0b3JlID0gY3JlYXRlU3RvcmUoKCkgPT4gKHtcbiAgZmFsbGJhY2tFbmFibGVkOiBmYWxzZVxufSkpO1xuXG4vLyBsaWIvZG5kL2NvbGxpc2lvbi9keW5hbWljL2luZGV4LnRzXG52YXIgZmx1c2hOZXh0ID0gXCJcIjtcbnZhciBjcmVhdGVEeW5hbWljQ29sbGlzaW9uRGV0ZWN0b3IgPSAoZHJhZ0F4aXMsIG1pZHBvaW50T2Zmc2V0ID0gMC4wNSkgPT4gKGlucHV0KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gIGNvbnN0IHsgZHJhZ09wZXJhdGlvbiwgZHJvcHBhYmxlIH0gPSBpbnB1dDtcbiAgY29uc3QgeyBwb3NpdGlvbiB9ID0gZHJhZ09wZXJhdGlvbjtcbiAgY29uc3QgZHJhZ1NoYXBlID0gKF9hID0gZHJhZ09wZXJhdGlvbi5zaGFwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnQ7XG4gIGNvbnN0IHsgc2hhcGU6IGRyb3BTaGFwZSB9ID0gZHJvcHBhYmxlO1xuICBpZiAoIWRyYWdTaGFwZSB8fCAhZHJvcFNoYXBlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgeyBjZW50ZXI6IGRyYWdDZW50ZXIgfSA9IGRyYWdTaGFwZTtcbiAgY29uc3QgeyBmYWxsYmFja0VuYWJsZWQgfSA9IGNvbGxpc2lvblN0b3JlLmdldFN0YXRlKCk7XG4gIGNvbnN0IGludGVydmFsID0gdHJhY2tNb3ZlbWVudEludGVydmFsKHBvc2l0aW9uLmN1cnJlbnQsIGRyYWdBeGlzKTtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBkaXJlY3Rpb246IGludGVydmFsLmRpcmVjdGlvblxuICB9O1xuICBjb25zdCB7IGNlbnRlcjogZHJvcENlbnRlciB9ID0gZHJvcFNoYXBlO1xuICBjb25zdCBvdmVyTWlkcG9pbnQgPSBnZXRNaWRwb2ludEltcGFjdChcbiAgICBkcmFnU2hhcGUsXG4gICAgZHJvcFNoYXBlLFxuICAgIGludGVydmFsLmRpcmVjdGlvbixcbiAgICBtaWRwb2ludE9mZnNldFxuICApO1xuICBpZiAoKChfYiA9IGRyYWdPcGVyYXRpb24uc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaWQpID09PSBkcm9wcGFibGUuaWQpIHtcbiAgICBjb25zdCBjb2xsaXNpb24gPSBkaXJlY3Rpb25hbENvbGxpc2lvbihpbnB1dCwgaW50ZXJ2YWwucHJldmlvdXMpO1xuICAgIGNvbGxpc2lvbkRlYnVnKGRyYWdDZW50ZXIsIGRyb3BDZW50ZXIsIGRyb3BwYWJsZS5pZC50b1N0cmluZygpLCBcInllbGxvd1wiKTtcbiAgICBpZiAoY29sbGlzaW9uKSB7XG4gICAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29sbGlzaW9uKSwge1xuICAgICAgICBwcmlvcml0eTogQ29sbGlzaW9uUHJpb3JpdHk3LkhpZ2hlc3QsXG4gICAgICAgIGRhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBjb25zdCBpbnRlcnNlY3Rpb25BcmVhID0gZHJhZ1NoYXBlLmludGVyc2VjdGlvbkFyZWEoZHJvcFNoYXBlKTtcbiAgY29uc3QgaW50ZXJzZWN0aW9uUmF0aW8gPSBpbnRlcnNlY3Rpb25BcmVhIC8gZHJvcFNoYXBlLmFyZWE7XG4gIGlmIChpbnRlcnNlY3Rpb25BcmVhICYmIG92ZXJNaWRwb2ludCkge1xuICAgIGNvbGxpc2lvbkRlYnVnKFxuICAgICAgZHJhZ0NlbnRlcixcbiAgICAgIGRyb3BDZW50ZXIsXG4gICAgICBkcm9wcGFibGUuaWQudG9TdHJpbmcoKSxcbiAgICAgIFwiZ3JlZW5cIixcbiAgICAgIGludGVydmFsLmRpcmVjdGlvblxuICAgICk7XG4gICAgY29uc3QgY29sbGlzaW9uID0ge1xuICAgICAgaWQ6IGRyb3BwYWJsZS5pZCxcbiAgICAgIHZhbHVlOiBpbnRlcnNlY3Rpb25SYXRpbyxcbiAgICAgIHByaW9yaXR5OiBDb2xsaXNpb25Qcmlvcml0eTcuSGlnaCxcbiAgICAgIHR5cGU6IENvbGxpc2lvblR5cGU3LkNvbGxpc2lvblxuICAgIH07XG4gICAgY29uc3Qgc2hvdWxkRmx1c2hJZCA9IGZsdXNoTmV4dCA9PT0gZHJvcHBhYmxlLmlkO1xuICAgIGZsdXNoTmV4dCA9IFwiXCI7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGNvbGxpc2lvbiksIHsgaWQ6IHNob3VsZEZsdXNoSWQgPyBcImZsdXNoXCIgOiBjb2xsaXNpb24uaWQsIGRhdGEgfSk7XG4gIH1cbiAgaWYgKGZhbGxiYWNrRW5hYmxlZCAmJiAoKF9jID0gZHJhZ09wZXJhdGlvbi5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfYy5pZCkgIT09IGRyb3BwYWJsZS5pZCkge1xuICAgIGNvbnN0IHhBeGlzSW50ZXJzZWN0aW9uID0gZHJvcFNoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLnJpZ2h0ID4gZHJhZ1NoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLmxlZnQgJiYgZHJvcFNoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLmxlZnQgPCBkcmFnU2hhcGUuYm91bmRpbmdSZWN0YW5nbGUucmlnaHQ7XG4gICAgY29uc3QgeUF4aXNJbnRlcnNlY3Rpb24gPSBkcm9wU2hhcGUuYm91bmRpbmdSZWN0YW5nbGUuYm90dG9tID4gZHJhZ1NoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLnRvcCAmJiBkcm9wU2hhcGUuYm91bmRpbmdSZWN0YW5nbGUudG9wIDwgZHJhZ1NoYXBlLmJvdW5kaW5nUmVjdGFuZ2xlLmJvdHRvbTtcbiAgICBpZiAoZHJhZ0F4aXMgPT09IFwieVwiICYmIHhBeGlzSW50ZXJzZWN0aW9uIHx8IHlBeGlzSW50ZXJzZWN0aW9uKSB7XG4gICAgICBjb25zdCBmYWxsYmFja0NvbGxpc2lvbiA9IGNsb3Nlc3RDb3JuZXJzKGlucHV0KTtcbiAgICAgIGlmIChmYWxsYmFja0NvbGxpc2lvbikge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oZHJhZ0F4aXMsIHtcbiAgICAgICAgICB4OiBkcmFnU2hhcGUuY2VudGVyLnggLSAoKChfZCA9IGRyb3BwYWJsZS5zaGFwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmNlbnRlci54KSB8fCAwKSxcbiAgICAgICAgICB5OiBkcmFnU2hhcGUuY2VudGVyLnkgLSAoKChfZSA9IGRyb3BwYWJsZS5zaGFwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLmNlbnRlci55KSB8fCAwKVxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb25BcmVhKSB7XG4gICAgICAgICAgY29sbGlzaW9uRGVidWcoXG4gICAgICAgICAgICBkcmFnQ2VudGVyLFxuICAgICAgICAgICAgZHJvcENlbnRlcixcbiAgICAgICAgICAgIGRyb3BwYWJsZS5pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJyZWRcIixcbiAgICAgICAgICAgIGRpcmVjdGlvbiB8fCBcIlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmbHVzaE5leHQgPSBkcm9wcGFibGUuaWQ7XG4gICAgICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGZhbGxiYWNrQ29sbGlzaW9uKSwge1xuICAgICAgICAgICAgcHJpb3JpdHk6IENvbGxpc2lvblByaW9yaXR5Ny5Mb3csXG4gICAgICAgICAgICBkYXRhXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29sbGlzaW9uRGVidWcoXG4gICAgICAgICAgZHJhZ0NlbnRlcixcbiAgICAgICAgICBkcm9wQ2VudGVyLFxuICAgICAgICAgIGRyb3BwYWJsZS5pZC50b1N0cmluZygpLFxuICAgICAgICAgIFwib3JhbmdlXCIsXG4gICAgICAgICAgZGlyZWN0aW9uIHx8IFwiXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGZhbGxiYWNrQ29sbGlzaW9uKSwge1xuICAgICAgICAgIHByaW9yaXR5OiBDb2xsaXNpb25Qcmlvcml0eTcuTG93ZXN0LFxuICAgICAgICAgIGRhdGFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbGxpc2lvbkRlYnVnKGRyYWdDZW50ZXIsIGRyb3BDZW50ZXIsIGRyb3BwYWJsZS5pZC50b1N0cmluZygpLCBcImhvdHBpbmtcIik7XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gY29tcG9uZW50cy9Tb3J0YWJsZS9pbmRleC50c3hcbmltcG9ydCB7IHVzZVNvcnRhYmxlIH0gZnJvbSBcIkBkbmQta2l0L3JlYWN0L3NvcnRhYmxlXCI7XG5pbXBvcnQgeyBqc3ggYXMganN4NiB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIFNvcnRhYmxlUHJvdmlkZXIgPSAoe1xuICBjaGlsZHJlbixcbiAgb25EcmFnU3RhcnQsXG4gIG9uRHJhZ0VuZCxcbiAgb25Nb3ZlXG59KSA9PiB7XG4gIGNvbnN0IHNlbnNvcnMgPSB1c2VTZW5zb3JzKHtcbiAgICBtb3VzZTogeyBkaXN0YW5jZTogeyB2YWx1ZTogNSB9IH1cbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NihcbiAgICBEcmFnRHJvcFByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHNlbnNvcnMsXG4gICAgICBvbkRyYWdTdGFydDogKGV2ZW50KSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiBvbkRyYWdTdGFydCgoX2IgPSAoX2EgPSBldmVudC5vcGVyYXRpb24uc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaWQudG9TdHJpbmcoKSkgIT0gbnVsbCA/IF9iIDogXCJcIik7XG4gICAgICB9LFxuICAgICAgb25EcmFnT3ZlcjogKGV2ZW50LCBtYW5hZ2VyKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgeyBvcGVyYXRpb24gfSA9IGV2ZW50O1xuICAgICAgICBjb25zdCB7IHNvdXJjZSwgdGFyZ2V0IH0gPSBvcGVyYXRpb247XG4gICAgICAgIGlmICghc291cmNlIHx8ICF0YXJnZXQpIHJldHVybjtcbiAgICAgICAgbGV0IHNvdXJjZUluZGV4ID0gc291cmNlLmRhdGEuaW5kZXg7XG4gICAgICAgIGxldCB0YXJnZXRJbmRleCA9IHRhcmdldC5kYXRhLmluZGV4O1xuICAgICAgICBjb25zdCBjb2xsaXNpb25EYXRhID0gKF9hID0gbWFuYWdlci5jb2xsaXNpb25PYnNlcnZlci5jb2xsaXNpb25zWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZGF0YTtcbiAgICAgICAgaWYgKHNvdXJjZUluZGV4ICE9PSB0YXJnZXRJbmRleCAmJiBzb3VyY2UuaWQgIT09IHRhcmdldC5pZCkge1xuICAgICAgICAgIGNvbnN0IGNvbGxpc2lvblBvc2l0aW9uID0gKGNvbGxpc2lvbkRhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbGxpc2lvbkRhdGEuZGlyZWN0aW9uKSA9PT0gXCJ1cFwiID8gXCJiZWZvcmVcIiA6IFwiYWZ0ZXJcIjtcbiAgICAgICAgICBpZiAodGFyZ2V0SW5kZXggPj0gc291cmNlSW5kZXgpIHtcbiAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGFyZ2V0SW5kZXggLSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29sbGlzaW9uUG9zaXRpb24gPT09IFwiYWZ0ZXJcIikge1xuICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSB0YXJnZXRJbmRleCArIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9uTW92ZSh7XG4gICAgICAgICAgICBzb3VyY2U6IHNvdXJjZUluZGV4LFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRJbmRleFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25EcmFnRW5kOiAoKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG9uRHJhZ0VuZCgpO1xuICAgICAgICB9LCAyNTApO1xuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApO1xufTtcbnZhciBTb3J0YWJsZSA9ICh7XG4gIGlkLFxuICBpbmRleCxcbiAgZGlzYWJsZWQsXG4gIGNoaWxkcmVuLFxuICB0eXBlID0gXCJpdGVtXCJcbn0pID0+IHtcbiAgY29uc3Qge1xuICAgIHJlZjogc29ydGFibGVSZWYsXG4gICAgaXNEcmFnZ2luZyxcbiAgICBpc0Ryb3BwaW5nLFxuICAgIGhhbmRsZVJlZlxuICB9ID0gdXNlU29ydGFibGUoe1xuICAgIGlkLFxuICAgIHR5cGUsXG4gICAgaW5kZXgsXG4gICAgZGlzYWJsZWQsXG4gICAgZGF0YTogeyBpbmRleCB9LFxuICAgIGNvbGxpc2lvbkRldGVjdG9yOiBjcmVhdGVEeW5hbWljQ29sbGlzaW9uRGV0ZWN0b3IoXCJ5XCIpXG4gIH0pO1xuICByZXR1cm4gY2hpbGRyZW4oeyBpc0RyYWdnaW5nLCBpc0Ryb3BwaW5nLCByZWY6IHNvcnRhYmxlUmVmLCBoYW5kbGVSZWYgfSk7XG59O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9jb250ZXh0LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDIsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDIsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3g3IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgTmVzdGVkRmllbGRDb250ZXh0ID0gY3JlYXRlQ29udGV4dDIoe30pO1xudmFyIHVzZU5lc3RlZEZpZWxkQ29udGV4dCA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQyKE5lc3RlZEZpZWxkQ29udGV4dCk7XG4gIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjb250ZXh0KSwge1xuICAgIHJlYWRPbmx5RmllbGRzOiBjb250ZXh0LnJlYWRPbmx5RmllbGRzIHx8IHt9XG4gIH0pO1xufTtcbnZhciBOZXN0ZWRGaWVsZFByb3ZpZGVyID0gKHtcbiAgY2hpbGRyZW4sXG4gIG5hbWUsXG4gIHN1Yk5hbWUsXG4gIHdpbGRjYXJkTmFtZSA9IG5hbWUsXG4gIHJlYWRPbmx5RmllbGRzXG59KSA9PiB7XG4gIGNvbnN0IHN1YlBhdGggPSBgJHtuYW1lfS4ke3N1Yk5hbWV9YDtcbiAgY29uc3Qgd2lsZGNhcmRTdWJQYXRoID0gYCR7d2lsZGNhcmROYW1lfS4ke3N1Yk5hbWV9YDtcbiAgY29uc3Qgc3ViUmVhZE9ubHlGaWVsZHMgPSB1c2VNZW1vKFxuICAgICgpID0+IE9iamVjdC5rZXlzKHJlYWRPbmx5RmllbGRzKS5yZWR1Y2UoKGFjYywgcmVhZE9ubHlLZXkpID0+IHtcbiAgICAgIGNvbnN0IGlzTG9jYWwgPSByZWFkT25seUtleS5pbmRleE9mKHN1YlBhdGgpID4gLTEgfHwgcmVhZE9ubHlLZXkuaW5kZXhPZih3aWxkY2FyZFN1YlBhdGgpID4gLTE7XG4gICAgICBpZiAoaXNMb2NhbCkge1xuICAgICAgICBjb25zdCBzdWJQYXRoUGF0dGVybiA9IG5ldyBSZWdFeHAoXG4gICAgICAgICAgYF4oJHtuYW1lfXwke3dpbGRjYXJkTmFtZX0pLmAucmVwbGFjZSgvXFxbL2csIFwiXFxcXFtcIikucmVwbGFjZSgvXFxdL2csIFwiXFxcXF1cIikucmVwbGFjZSgvXFwuL2csIFwiXFxcXC5cIikucmVwbGFjZSgvXFwqL2csIFwiXFxcXCpcIilcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbG9jYWxOYW1lID0gcmVhZE9ubHlLZXkucmVwbGFjZShzdWJQYXRoUGF0dGVybiwgXCJcIik7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhY2MpLCB7XG4gICAgICAgICAgW2xvY2FsTmFtZV06IHJlYWRPbmx5RmllbGRzW3JlYWRPbmx5S2V5XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pLFxuICAgIFtuYW1lLCBzdWJOYW1lLCB3aWxkY2FyZE5hbWUsIHJlYWRPbmx5RmllbGRzXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDcoXG4gICAgTmVzdGVkRmllbGRDb250ZXh0LlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiB7IHJlYWRPbmx5RmllbGRzOiBzdWJSZWFkT25seUZpZWxkcywgbG9jYWxOYW1lOiBzdWJOYW1lIH0sXG4gICAgICBjaGlsZHJlblxuICAgIH1cbiAgKTtcbn07XG5cbi8vIGNvbXBvbmVudHMvQXV0b0ZpZWxkL2ZpZWxkcy9BcnJheUZpZWxkL2luZGV4LnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDgsIGpzeHMgYXMganN4czQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWU2ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiQXJyYXlGaWVsZFwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQ0KTtcbnZhciBnZXRDbGFzc05hbWVJdGVtID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiQXJyYXlGaWVsZEl0ZW1cIiwgc3R5bGVzX21vZHVsZV9kZWZhdWx0NCk7XG52YXIgQXJyYXlGaWVsZCA9ICh7XG4gIGZpZWxkLFxuICBvbkNoYW5nZSxcbiAgdmFsdWU6IF92YWx1ZSxcbiAgbmFtZSxcbiAgbGFiZWwsXG4gIGxhYmVsSWNvbixcbiAgcmVhZE9ubHksXG4gIGlkLFxuICBMYWJlbDogTGFiZWwyID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8ganN4OChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKVxufSkgPT4ge1xuICBjb25zdCB0aGlzQXJyYXlTdGF0ZSA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnN0YXRlLnVpLmFycmF5U3RhdGVbaWRdKTtcbiAgY29uc3Qgc2V0VWkgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zZXRVaSk7XG4gIGNvbnN0IHsgcmVhZE9ubHlGaWVsZHMsIGxvY2FsTmFtZSA9IG5hbWUgfSA9IHVzZU5lc3RlZEZpZWxkQ29udGV4dCgpO1xuICBjb25zdCB2YWx1ZSA9IF92YWx1ZTtcbiAgY29uc3QgYXJyYXlTdGF0ZSA9IHRoaXNBcnJheVN0YXRlIHx8IHtcbiAgICBpdGVtczogQXJyYXkuZnJvbSh2YWx1ZSB8fCBbXSkubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF9vcmlnaW5hbEluZGV4OiBpZHgsXG4gICAgICAgIF9hcnJheUlkOiBgJHtpZH0tJHtpZHh9YFxuICAgICAgfTtcbiAgICB9KSxcbiAgICBvcGVuSWQ6IFwiXCJcbiAgfTtcbiAgY29uc3QgW2xvY2FsU3RhdGUsIHNldExvY2FsU3RhdGVdID0gdXNlU3RhdGU0KHsgYXJyYXlTdGF0ZSwgdmFsdWUgfSk7XG4gIHVzZUVmZmVjdDYoKCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBfYXJyYXlTdGF0ZSA9IChfYSA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGUudWkuYXJyYXlTdGF0ZVtpZF0pICE9IG51bGwgPyBfYSA6IGFycmF5U3RhdGU7XG4gICAgc2V0TG9jYWxTdGF0ZSh7IGFycmF5U3RhdGU6IF9hcnJheVN0YXRlLCB2YWx1ZSB9KTtcbiAgfSwgW3ZhbHVlXSk7XG4gIGNvbnN0IGFwcFN0b3JlID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgY29uc3QgbWFwQXJyYXlTdGF0ZVRvVWkgPSB1c2VDYWxsYmFjazIoXG4gICAgKHBhcnRpYWxBcnJheVN0YXRlKSA9PiB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGU7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVN0YXRlOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZS51aS5hcnJheVN0YXRlKSwge1xuICAgICAgICAgIFtpZF06IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBhcnJheVN0YXRlKSwgcGFydGlhbEFycmF5U3RhdGUpXG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH0sXG4gICAgW2FycmF5U3RhdGUsIGFwcFN0b3JlXVxuICApO1xuICBjb25zdCBnZXRIaWdoZXN0SW5kZXggPSB1c2VDYWxsYmFjazIoKCkgPT4ge1xuICAgIHJldHVybiBhcnJheVN0YXRlLml0ZW1zLnJlZHVjZShcbiAgICAgIChhY2MsIGl0ZW0pID0+IGl0ZW0uX29yaWdpbmFsSW5kZXggPiBhY2MgPyBpdGVtLl9vcmlnaW5hbEluZGV4IDogYWNjLFxuICAgICAgLTFcbiAgICApO1xuICB9LCBbYXJyYXlTdGF0ZV0pO1xuICBjb25zdCByZWdlbmVyYXRlQXJyYXlTdGF0ZSA9IHVzZUNhbGxiYWNrMihcbiAgICAodmFsdWUyKSA9PiB7XG4gICAgICBsZXQgaGlnaGVzdEluZGV4ID0gZ2V0SGlnaGVzdEluZGV4KCk7XG4gICAgICBjb25zdCBuZXdJdGVtcyA9IEFycmF5LmZyb20odmFsdWUyIHx8IFtdKS5tYXAoKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGFycmF5U3RhdGVJdGVtID0gYXJyYXlTdGF0ZS5pdGVtc1tpZHhdO1xuICAgICAgICBjb25zdCBuZXdJdGVtID0ge1xuICAgICAgICAgIF9vcmlnaW5hbEluZGV4OiB0eXBlb2YgKGFycmF5U3RhdGVJdGVtID09IG51bGwgPyB2b2lkIDAgOiBhcnJheVN0YXRlSXRlbS5fb3JpZ2luYWxJbmRleCkgIT09IFwidW5kZWZpbmVkXCIgPyBhcnJheVN0YXRlSXRlbS5fb3JpZ2luYWxJbmRleCA6IGhpZ2hlc3RJbmRleCArIDEsXG4gICAgICAgICAgX2FycmF5SWQ6ICgoX2EgPSBhcnJheVN0YXRlLml0ZW1zW2lkeF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5fYXJyYXlJZCkgfHwgYCR7aWR9LSR7aGlnaGVzdEluZGV4ICsgMX1gXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuZXdJdGVtLl9vcmlnaW5hbEluZGV4ID4gaGlnaGVzdEluZGV4KSB7XG4gICAgICAgICAgaGlnaGVzdEluZGV4ID0gbmV3SXRlbS5fb3JpZ2luYWxJbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3SXRlbTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGFycmF5U3RhdGUpLCB7IGl0ZW1zOiBuZXdJdGVtcyB9KTtcbiAgICB9LFxuICAgIFthcnJheVN0YXRlXVxuICApO1xuICB1c2VFZmZlY3Q2KCgpID0+IHtcbiAgICBpZiAoYXJyYXlTdGF0ZS5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRVaShtYXBBcnJheVN0YXRlVG9VaShhcnJheVN0YXRlKSk7XG4gICAgfVxuICB9LCBbXSk7XG4gIGNvbnN0IFtkcmFnZ2VkSXRlbSwgc2V0RHJhZ2dlZEl0ZW1dID0gdXNlU3RhdGU0KFwiXCIpO1xuICBjb25zdCBpc0RyYWdnaW5nQW55ID0gISFkcmFnZ2VkSXRlbTtcbiAgY29uc3QgY2FuRWRpdCA9IHVzZUFwcFN0b3JlKFxuICAgIChzKSA9PiBzLnBlcm1pc3Npb25zLmdldFBlcm1pc3Npb25zKHsgaXRlbTogcy5zZWxlY3RlZEl0ZW0gfSkuZWRpdFxuICApO1xuICBjb25zdCBmb3JjZVJlYWRPbmx5ID0gIWNhbkVkaXQ7XG4gIGNvbnN0IHZhbHVlUmVmID0gdXNlUmVmKHZhbHVlKTtcbiAgY29uc3QgdW5pcWlmeUl0ZW0gPSB1c2VDYWxsYmFjazIoXG4gICAgKHZhbCkgPT4ge1xuICAgICAgaWYgKGZpZWxkLnR5cGUgIT09IFwiYXJyYXlcIiB8fCAhZmllbGQuYXJyYXlGaWVsZHMpIHJldHVybjtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGFwcFN0b3JlLmdldFN0YXRlKCkuY29uZmlnO1xuICAgICAgcmV0dXJuIHdhbGtGaWVsZCh7XG4gICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgIGZpZWxkczogZmllbGQuYXJyYXlGaWVsZHMsXG4gICAgICAgIG1hcHBlcnM6IHtcbiAgICAgICAgICBzbG90OiAoeyB2YWx1ZTogdmFsdWUyIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB2YWx1ZTI7XG4gICAgICAgICAgICByZXR1cm4gY29udGVudC5tYXAoKGl0ZW0pID0+IHBvcHVsYXRlSWRzKGl0ZW0sIGNvbmZpZywgdHJ1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlnXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFthcHBTdG9yZSwgZmllbGRdXG4gICk7XG4gIGlmIChmaWVsZC50eXBlICE9PSBcImFycmF5XCIgfHwgIWZpZWxkLmFycmF5RmllbGRzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgYWRkRGlzYWJsZWQgPSBmaWVsZC5tYXggIT09IHZvaWQgMCAmJiBsb2NhbFN0YXRlLmFycmF5U3RhdGUuaXRlbXMubGVuZ3RoID49IGZpZWxkLm1heCB8fCByZWFkT25seTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFxuICAgIExhYmVsMixcbiAgICB7XG4gICAgICBsYWJlbDogbGFiZWwgfHwgbmFtZSxcbiAgICAgIGljb246IGxhYmVsSWNvbiB8fCAvKiBAX19QVVJFX18gKi8ganN4OChMaXN0LCB7IHNpemU6IDE2IH0pLFxuICAgICAgZWw6IFwiZGl2XCIsXG4gICAgICByZWFkT25seSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4OChcbiAgICAgICAgU29ydGFibGVQcm92aWRlcixcbiAgICAgICAge1xuICAgICAgICAgIG9uRHJhZ1N0YXJ0OiAoaWQyKSA9PiBzZXREcmFnZ2VkSXRlbShpZDIpLFxuICAgICAgICAgIG9uRHJhZ0VuZDogKCkgPT4ge1xuICAgICAgICAgICAgc2V0RHJhZ2dlZEl0ZW0oXCJcIik7XG4gICAgICAgICAgICBvbkNoYW5nZSh2YWx1ZVJlZi5jdXJyZW50KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uTW92ZTogKG1vdmUpID0+IHtcbiAgICAgICAgICAgIGlmIChhcnJheVN0YXRlLml0ZW1zW21vdmUuc291cmNlXS5fYXJyYXlJZCAhPT0gZHJhZ2dlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSByZW9yZGVyKGxvY2FsU3RhdGUudmFsdWUsIG1vdmUuc291cmNlLCBtb3ZlLnRhcmdldCk7XG4gICAgICAgICAgICBjb25zdCBuZXdBcnJheVN0YXRlSXRlbXMgPSByZW9yZGVyKFxuICAgICAgICAgICAgICBhcnJheVN0YXRlLml0ZW1zLFxuICAgICAgICAgICAgICBtb3ZlLnNvdXJjZSxcbiAgICAgICAgICAgICAgbW92ZS50YXJnZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGU7XG4gICAgICAgICAgICBjb25zdCBuZXdVaSA9IHtcbiAgICAgICAgICAgICAgYXJyYXlTdGF0ZTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUudWkuYXJyYXlTdGF0ZSksIHtcbiAgICAgICAgICAgICAgICBbaWRdOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhcnJheVN0YXRlKSwgeyBpdGVtczogbmV3QXJyYXlTdGF0ZUl0ZW1zIH0pXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VWkobmV3VWksIGZhbHNlKTtcbiAgICAgICAgICAgIHNldExvY2FsU3RhdGUoe1xuICAgICAgICAgICAgICB2YWx1ZTogbmV3VmFsdWUsXG4gICAgICAgICAgICAgIGFycmF5U3RhdGU6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGFycmF5U3RhdGUpLCB7IGl0ZW1zOiBuZXdBcnJheVN0YXRlSXRlbXMgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFsdWVSZWYuY3VycmVudCA9IG5ld1ZhbHVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzNChcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lNih7XG4gICAgICAgICAgICAgICAgaGFzSXRlbXM6IEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgYWRkRGlzYWJsZWRcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbG9jYWxTdGF0ZS5hcnJheVN0YXRlLml0ZW1zLmxlbmd0aCA+IDAgJiYgLyogQF9fUFVSRV9fICovIGpzeDgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTYoXCJpbm5lclwiKSwgXCJkYXRhLWRuZC1jb250YWluZXJcIjogdHJ1ZSwgY2hpbGRyZW46IGxvY2FsU3RhdGUuYXJyYXlTdGF0ZS5pdGVtcy5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgX2FycmF5SWQgPSBgJHtpZH0tJHtpfWAsIF9vcmlnaW5hbEluZGV4ID0gaSB9ID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBBcnJheS5mcm9tKGxvY2FsU3RhdGUudmFsdWUgfHwgW10pW2ldIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFxuICAgICAgICAgICAgICAgICAgICBTb3J0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGlkOiBfYXJyYXlJZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogcmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46ICh7IGlzRHJhZ2dpbmcsIHJlZiwgaGFuZGxlUmVmIH0pID0+IC8qIEBfX1BVUkVfXyAqLyBqc3hzNChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0V4cGFuZGVkOiBhcnJheVN0YXRlLm9wZW5JZCA9PT0gX2FycmF5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnZ2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IGhhbmRsZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVN0YXRlLm9wZW5JZCA9PT0gX2FycmF5SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVpKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBBcnJheVN0YXRlVG9VaSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbklkOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRVaShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwQXJyYXlTdGF0ZVRvVWkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5JZDogX2FycmF5SWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZUl0ZW0oXCJzdW1tYXJ5XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmdldEl0ZW1TdW1tYXJ5ID8gZmllbGQuZ2V0SXRlbVN1bW1hcnkoZGF0YSwgaSkgOiBgSXRlbSAjJHtfb3JpZ2luYWxJbmRleH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzNChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lSXRlbShcInJoc1wiKSwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJiAvKiBAX19QVVJFX18gKi8ganN4czQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZUl0ZW0oXCJhY3Rpb25zXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lSXRlbShcImFjdGlvblwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g4KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEljb25CdXR0b24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhIWFkZERpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdWYWx1ZSA9IFsuLi52YWx1ZSB8fCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB1bmlxaWZ5SXRlbShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1ZhbHVlW2ldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVmFsdWUuc3BsaWNlKGksIDAsIG5ld0l0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdVaSA9IG1hcEFycmF5U3RhdGVUb1VpKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2VuZXJhdGVBcnJheVN0YXRlKGV4aXN0aW5nVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVpKG5ld1VpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGV4aXN0aW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkR1cGxpY2F0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g4KENvcHksIHsgc2l6ZTogMTYgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVJdGVtKFwiYWN0aW9uXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWNvbkJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZpZWxkLm1pbiAhPT0gdm9pZCAwICYmIGZpZWxkLm1pbiA+PSBsb2NhbFN0YXRlLmFycmF5U3RhdGUuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdWYWx1ZSA9IFsuLi52YWx1ZSB8fCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbXMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXJyYXlTdGF0ZS5pdGVtcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1ZhbHVlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdJdGVtcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVpKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcEFycmF5U3RhdGVUb1VpKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBleGlzdGluZ0l0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2UoZXhpc3RpbmdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRGVsZXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDgoVHJhc2gsIHsgc2l6ZTogMTYgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OChcImRpdlwiLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4OChEcmFnSWNvbiwge30pIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lSXRlbShcImJvZHlcIiksIGNoaWxkcmVuOiBhcnJheVN0YXRlLm9wZW5JZCA9PT0gX2FycmF5SWQgJiYgLyogQF9fUFVSRV9fICovIGpzeDgoXCJmaWVsZHNldFwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lSXRlbShcImZpZWxkc2V0XCIpLCBjaGlsZHJlbjogT2JqZWN0LmtleXMoZmllbGQuYXJyYXlGaWVsZHMpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdWJOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YkZpZWxkID0gZmllbGQuYXJyYXlGaWVsZHNbc3ViTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4TmFtZSA9IGAke25hbWV9WyR7aX1dYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViUGF0aCA9IGAke2luZGV4TmFtZX0uJHtzdWJOYW1lfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsSW5kZXhOYW1lID0gYCR7bG9jYWxOYW1lfVske2l9XWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsV2lsZGNhcmROYW1lID0gYCR7bG9jYWxOYW1lfVsqXWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsU3ViUGF0aCA9IGAke2xvY2FsSW5kZXhOYW1lfS4ke3N1Yk5hbWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxXaWxkY2FyZFN1YlBhdGggPSBgJHtsb2NhbFdpbGRjYXJkTmFtZX0uJHtzdWJOYW1lfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YlJlYWRPbmx5ID0gZm9yY2VSZWFkT25seSA/IGZvcmNlUmVhZE9ubHkgOiB0eXBlb2YgcmVhZE9ubHlGaWVsZHNbc3ViUGF0aF0gIT09IFwidW5kZWZpbmVkXCIgPyByZWFkT25seUZpZWxkc1tsb2NhbFN1YlBhdGhdIDogcmVhZE9ubHlGaWVsZHNbbG9jYWxXaWxkY2FyZFN1YlBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbDIgPSBzdWJGaWVsZC5sYWJlbCB8fCBzdWJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmVzdGVkRmllbGRQcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBsb2NhbEluZGV4TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGRjYXJkTmFtZTogbG9jYWxXaWxkY2FyZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHlGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9GaWVsZFByaXZhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdWJQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGAke19hcnJheUlkfV8ke3N1Yk5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogc3ViUmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN1YkZpZWxkKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWF5IGJlIHVzZWQgYnkgY3VzdG9tIGZpZWxkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW3N1Yk5hbWVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAodmFsLCB1aSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UodmFsdWUsIGksIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGRhdGEpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3N1Yk5hbWVdOiB2YWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIH0pIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF9hcnJheUlkXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pIH0pLFxuICAgICAgICAgICAgICAgICFhZGREaXNhYmxlZCAmJiAvKiBAX19QVVJFX18gKi8ganN4OChcbiAgICAgICAgICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lNihcImFkZEJ1dHRvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEcmFnZ2luZ0FueSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVmFsdWUgPSB2YWx1ZSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gZGVmYXVsdFNsb3RzKFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcWlmeUl0ZW0oKF9hID0gZmllbGQuZGVmYXVsdEl0ZW1Qcm9wcykgIT0gbnVsbCA/IF9hIDoge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuYXJyYXlGaWVsZHNcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gWy4uLmV4aXN0aW5nVmFsdWUsIG5ld0l0ZW1dO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FycmF5U3RhdGUgPSByZWdlbmVyYXRlQXJyYXlTdGF0ZShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VWkobWFwQXJyYXlTdGF0ZVRvVWkobmV3QXJyYXlTdGF0ZSksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4OChQbHVzLCB7IHNpemU6IDIxIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9BdXRvRmllbGQvZmllbGRzL0RlZmF1bHRGaWVsZC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBGcmFnbWVudCBhcyBGcmFnbWVudDIsIGpzeCBhcyBqc3g5LCBqc3hzIGFzIGpzeHM1IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lNyA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIklucHV0XCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDMpO1xudmFyIERlZmF1bHRGaWVsZCA9ICh7XG4gIGZpZWxkLFxuICBvbkNoYW5nZSxcbiAgcmVhZE9ubHksXG4gIHZhbHVlOiBfdmFsdWUsXG4gIG5hbWUsXG4gIGxhYmVsLFxuICBsYWJlbEljb24sXG4gIExhYmVsOiBMYWJlbDIsXG4gIGlkXG59KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gX3ZhbHVlO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDkoXG4gICAgTGFiZWwyLFxuICAgIHtcbiAgICAgIGxhYmVsOiBsYWJlbCB8fCBuYW1lLFxuICAgICAgaWNvbjogbGFiZWxJY29uIHx8IC8qIEBfX1BVUkVfXyAqLyBqc3hzNShGcmFnbWVudDIsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgZmllbGQudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgLyogQF9fUFVSRV9fICovIGpzeDkoVHlwZSwgeyBzaXplOiAxNiB9KSxcbiAgICAgICAgZmllbGQudHlwZSA9PT0gXCJudW1iZXJcIiAmJiAvKiBAX19QVVJFX18gKi8ganN4OShIYXNoLCB7IHNpemU6IDE2IH0pXG4gICAgICBdIH0pLFxuICAgICAgcmVhZE9ubHksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDkoXG4gICAgICAgIFwiaW5wdXRcIixcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lNyhcImlucHV0XCIpLFxuICAgICAgICAgIGF1dG9Db21wbGV0ZTogXCJvZmZcIixcbiAgICAgICAgICB0eXBlOiBmaWVsZC50eXBlLFxuICAgICAgICAgIHRpdGxlOiBsYWJlbCB8fCBuYW1lLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmFsdWU6ICh2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUudG9TdHJpbmcpID8gdmFsdWUudG9TdHJpbmcoKSA6IFwiXCIsXG4gICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICBjb25zdCBudW1iZXJWYWx1ZSA9IE51bWJlcihlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkLm1pbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBudW1iZXJWYWx1ZSA8IGZpZWxkLm1pbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkLm1heCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBudW1iZXJWYWx1ZSA+IGZpZWxkLm1heCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvbkNoYW5nZShudW1iZXJWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvbkNoYW5nZShlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVhZE9ubHksXG4gICAgICAgICAgdGFiSW5kZXg6IHJlYWRPbmx5ID8gLTEgOiB2b2lkIDAsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbWluOiBmaWVsZC50eXBlID09PSBcIm51bWJlclwiID8gZmllbGQubWluIDogdm9pZCAwLFxuICAgICAgICAgIG1heDogZmllbGQudHlwZSA9PT0gXCJudW1iZXJcIiA/IGZpZWxkLm1heCA6IHZvaWQgMCxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogZmllbGQudHlwZSA9PT0gXCJ0ZXh0XCIgfHwgZmllbGQudHlwZSA9PT0gXCJudW1iZXJcIiA/IGZpZWxkLnBsYWNlaG9sZGVyIDogdm9pZCAwLFxuICAgICAgICAgIHN0ZXA6IGZpZWxkLnR5cGUgPT09IFwibnVtYmVyXCIgPyBmaWVsZC5zdGVwIDogdm9pZCAwXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICk7XG59O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9maWVsZHMvRXh0ZXJuYWxGaWVsZC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0OSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBjb21wb25lbnRzL0V4dGVybmFsSW5wdXQvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHtcbiAgdXNlTWVtbyBhcyB1c2VNZW1vMixcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDgsXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlNixcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2szLFxuICBpc1ZhbGlkRWxlbWVudFxufSBmcm9tIFwicmVhY3RcIjtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL0V4dGVybmFsSW5wdXQvc3R5bGVzLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHlsZXNfbW9kdWxlX2RlZmF1bHQ2ID0geyBcIkV4dGVybmFsSW5wdXQtYWN0aW9uc1wiOiBcIl9FeHRlcm5hbElucHV0LWFjdGlvbnNfOTFsczBfMVwiLCBcIkV4dGVybmFsSW5wdXQtYnV0dG9uXCI6IFwiX0V4dGVybmFsSW5wdXQtYnV0dG9uXzkxbHMwXzVcIiwgXCJFeHRlcm5hbElucHV0LS1kYXRhU2VsZWN0ZWRcIjogXCJfRXh0ZXJuYWxJbnB1dC0tZGF0YVNlbGVjdGVkXzkxbHMwXzI0XCIsIFwiRXh0ZXJuYWxJbnB1dC0tcmVhZE9ubHlcIjogXCJfRXh0ZXJuYWxJbnB1dC0tcmVhZE9ubHlfOTFsczBfMzFcIiwgXCJFeHRlcm5hbElucHV0LWRldGFjaEJ1dHRvblwiOiBcIl9FeHRlcm5hbElucHV0LWRldGFjaEJ1dHRvbl85MWxzMF8zNVwiLCBcIkV4dGVybmFsSW5wdXRcIjogXCJfRXh0ZXJuYWxJbnB1dF85MWxzMF8xXCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbF85MWxzMF83OVwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC1ncmlkXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC1ncmlkXzkxbHMwXzg5XCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLS1maWx0ZXJzVG9nZ2xlZFwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtLWZpbHRlcnNUb2dnbGVkXzkxbHMwXzEwMFwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC1maWx0ZXJzXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC1maWx0ZXJzXzkxbHMwXzEwNVwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC1tYXN0aGVhZFwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtbWFzdGhlYWRfOTFsczBfMTI0XCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLXRhYmxlV3JhcHBlclwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtdGFibGVXcmFwcGVyXzkxbHMwXzEzM1wiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC10YWJsZVwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtdGFibGVfOTFsczBfMTMzXCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLXRoZWFkXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC10aGVhZF85MWxzMF8xNDlcIiwgXCJFeHRlcm5hbElucHV0TW9kYWwtdGhcIjogXCJfRXh0ZXJuYWxJbnB1dE1vZGFsLXRoXzkxbHMwXzE0OVwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC10ZFwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtdGRfOTFsczBfMTY0XCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLXRyXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC10cl85MWxzMF8xNjlcIiwgXCJFeHRlcm5hbElucHV0TW9kYWwtdGJvZHlcIjogXCJfRXh0ZXJuYWxJbnB1dE1vZGFsLXRib2R5XzkxbHMwXzE3NlwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC0taGFzRGF0YVwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtLWhhc0RhdGFfOTFsczBfMjAyXCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLWxvYWRpbmdCYW5uZXJcIjogXCJfRXh0ZXJuYWxJbnB1dE1vZGFsLWxvYWRpbmdCYW5uZXJfOTFsczBfMjA2XCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLS1pc0xvYWRpbmdcIjogXCJfRXh0ZXJuYWxJbnB1dE1vZGFsLS1pc0xvYWRpbmdfOTFsczBfMjIzXCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLXNlYXJjaEZvcm1cIjogXCJfRXh0ZXJuYWxJbnB1dE1vZGFsLXNlYXJjaEZvcm1fOTFsczBfMjI3XCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLXNlYXJjaFwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtc2VhcmNoXzkxbHMwXzIyN1wiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC1zZWFyY2hJY29uXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC1zZWFyY2hJY29uXzkxbHMwXzI2NFwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC1zZWFyY2hJY29uVGV4dFwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtc2VhcmNoSWNvblRleHRfOTFsczBfMjg5XCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLXNlYXJjaElucHV0XCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC1zZWFyY2hJbnB1dF85MWxzMF8yOTlcIiwgXCJFeHRlcm5hbElucHV0TW9kYWwtc2VhcmNoQWN0aW9uc1wiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtc2VhcmNoQWN0aW9uc185MWxzMF8zMTNcIiwgXCJFeHRlcm5hbElucHV0TW9kYWwtc2VhcmNoQWN0aW9uSWNvblwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtc2VhcmNoQWN0aW9uSWNvbl85MWxzMF8zMjZcIiwgXCJFeHRlcm5hbElucHV0TW9kYWwtZm9vdGVyQ29udGFpbmVyXCI6IFwiX0V4dGVybmFsSW5wdXRNb2RhbC1mb290ZXJDb250YWluZXJfOTFsczBfMzMwXCIsIFwiRXh0ZXJuYWxJbnB1dE1vZGFsLWZvb3RlclwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtZm9vdGVyXzkxbHMwXzMzMFwiLCBcIkV4dGVybmFsSW5wdXRNb2RhbC1maWVsZFwiOiBcIl9FeHRlcm5hbElucHV0TW9kYWwtZmllbGRfOTFsczBfMzQzXCIgfTtcblxuLy8gY29tcG9uZW50cy9Nb2RhbC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0NywgdXNlU3RhdGUgYXMgdXNlU3RhdGU1IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9Nb2RhbC9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDcgPSB7IFwiTW9kYWxcIjogXCJfTW9kYWxfaWtiYWpfMVwiLCBcIk1vZGFsLS1pc09wZW5cIjogXCJfTW9kYWwtLWlzT3Blbl9pa2Jhal8xNVwiLCBcIk1vZGFsLWlubmVyXCI6IFwiX01vZGFsLWlubmVyX2lrYmFqXzE5XCIgfTtcblxuLy8gY29tcG9uZW50cy9Nb2RhbC9pbmRleC50c3hcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCB9IGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gxMCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTggPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJNb2RhbFwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQ3KTtcbnZhciBNb2RhbCA9ICh7XG4gIGNoaWxkcmVuLFxuICBvbkNsb3NlLFxuICBpc09wZW5cbn0pID0+IHtcbiAgY29uc3QgW3Jvb3RFbCwgc2V0Um9vdEVsXSA9IHVzZVN0YXRlNShudWxsKTtcbiAgdXNlRWZmZWN0NygoKSA9PiB7XG4gICAgc2V0Um9vdEVsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHVjay1wb3J0YWwtcm9vdFwiKSk7XG4gIH0sIFtdKTtcbiAgaWYgKCFyb290RWwpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEwKFwiZGl2XCIsIHt9KTtcbiAgfVxuICByZXR1cm4gY3JlYXRlUG9ydGFsKFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gxMChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lOCh7IGlzT3BlbiB9KSwgb25DbGljazogb25DbG9zZSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lOChcImlubmVyXCIpLFxuICAgICAgICBvbkNsaWNrOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH1cbiAgICApIH0pLFxuICAgIHJvb3RFbFxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9IZWFkaW5nL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL0hlYWRpbmcvc3R5bGVzLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHlsZXNfbW9kdWxlX2RlZmF1bHQ4ID0geyBcIkhlYWRpbmdcIjogXCJfSGVhZGluZ19xeHJyeV8xXCIsIFwiSGVhZGluZy0teHh4eGxcIjogXCJfSGVhZGluZy0teHh4eGxfcXhycnlfMTJcIiwgXCJIZWFkaW5nLS14eHhsXCI6IFwiX0hlYWRpbmctLXh4eGxfcXhycnlfMThcIiwgXCJIZWFkaW5nLS14eGxcIjogXCJfSGVhZGluZy0teHhsX3F4cnJ5XzIyXCIsIFwiSGVhZGluZy0teGxcIjogXCJfSGVhZGluZy0teGxfcXhycnlfMjZcIiwgXCJIZWFkaW5nLS1sXCI6IFwiX0hlYWRpbmctLWxfcXhycnlfMzBcIiwgXCJIZWFkaW5nLS1tXCI6IFwiX0hlYWRpbmctLW1fcXhycnlfMzRcIiwgXCJIZWFkaW5nLS1zXCI6IFwiX0hlYWRpbmctLXNfcXhycnlfMzhcIiwgXCJIZWFkaW5nLS14c1wiOiBcIl9IZWFkaW5nLS14c19xeHJyeV80MlwiIH07XG5cbi8vIGNvbXBvbmVudHMvSGVhZGluZy9pbmRleC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxMSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTkgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJIZWFkaW5nXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDgpO1xudmFyIEhlYWRpbmcgPSAoeyBjaGlsZHJlbiwgcmFuaywgc2l6ZSA9IFwibVwiIH0pID0+IHtcbiAgY29uc3QgVGFnID0gcmFuayA/IGBoJHtyYW5rfWAgOiBcInNwYW5cIjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMShcbiAgICBUYWcsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWU5KHtcbiAgICAgICAgW3NpemVdOiB0cnVlXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9CdXR0b24vaW5kZXgudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGNvbXBvbmVudHMvRXh0ZXJuYWxJbnB1dC9pbmRleC50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50MywganN4IGFzIGpzeDEyLCBqc3hzIGFzIGpzeHM2IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMTAgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJFeHRlcm5hbElucHV0XCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDYpO1xudmFyIGdldENsYXNzTmFtZU1vZGFsID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiRXh0ZXJuYWxJbnB1dE1vZGFsXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDYpO1xudmFyIGRhdGFDYWNoZSA9IHt9O1xudmFyIEV4dGVybmFsSW5wdXQgPSAoe1xuICBmaWVsZCxcbiAgb25DaGFuZ2UsXG4gIHZhbHVlID0gbnVsbCxcbiAgbmFtZSxcbiAgaWQsXG4gIHJlYWRPbmx5XG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBtYXBQcm9wID0gKHZhbCkgPT4gdmFsLFxuICAgIG1hcFJvdyA9ICh2YWwpID0+IHZhbCxcbiAgICBmaWx0ZXJGaWVsZHNcbiAgfSA9IGZpZWxkIHx8IHt9O1xuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZTYoW10pO1xuICBjb25zdCBbaXNPcGVuLCBzZXRPcGVuXSA9IHVzZVN0YXRlNihmYWxzZSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZTYodHJ1ZSk7XG4gIGNvbnN0IGhhc0ZpbHRlckZpZWxkcyA9ICEhZmlsdGVyRmllbGRzO1xuICBjb25zdCBbZmlsdGVycywgc2V0RmlsdGVyc10gPSB1c2VTdGF0ZTYoZmllbGQuaW5pdGlhbEZpbHRlcnMgfHwge30pO1xuICBjb25zdCBbZmlsdGVyc1RvZ2dsZWQsIHNldEZpbHRlcnNUb2dnbGVkXSA9IHVzZVN0YXRlNihoYXNGaWx0ZXJGaWVsZHMpO1xuICBjb25zdCBtYXBwZWREYXRhID0gdXNlTWVtbzIoKCkgPT4ge1xuICAgIHJldHVybiBkYXRhLm1hcChtYXBSb3cpO1xuICB9LCBbZGF0YV0pO1xuICBjb25zdCBrZXlzID0gdXNlTWVtbzIoKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIG1hcHBlZERhdGEpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGl0ZW0pKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVtrZXldID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBpdGVtW2tleV0gPT09IFwibnVtYmVyXCIgfHwgaXNWYWxpZEVsZW1lbnQoaXRlbVtrZXldKSkge1xuICAgICAgICAgIHZhbGlkS2V5cy5hZGQoa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YWxpZEtleXMpO1xuICB9LCBbbWFwcGVkRGF0YV0pO1xuICBjb25zdCBbc2VhcmNoUXVlcnksIHNldFNlYXJjaFF1ZXJ5XSA9IHVzZVN0YXRlNihmaWVsZC5pbml0aWFsUXVlcnkgfHwgXCJcIik7XG4gIGNvbnN0IHNlYXJjaCA9IHVzZUNhbGxiYWNrMyhcbiAgICAocXVlcnksIGZpbHRlcnMyKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYCR7aWR9LSR7cXVlcnl9LSR7SlNPTi5zdHJpbmdpZnkoZmlsdGVyczIpfWA7XG4gICAgICBjb25zdCBsaXN0RGF0YSA9IGRhdGFDYWNoZVtjYWNoZUtleV0gfHwgKHlpZWxkIGZpZWxkLmZldGNoTGlzdCh7IHF1ZXJ5LCBmaWx0ZXJzOiBmaWx0ZXJzMiB9KSk7XG4gICAgICBpZiAobGlzdERhdGEpIHtcbiAgICAgICAgc2V0RGF0YShsaXN0RGF0YSk7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIGRhdGFDYWNoZVtjYWNoZUtleV0gPSBsaXN0RGF0YTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBbaWQsIGZpZWxkXVxuICApO1xuICBjb25zdCBGb290ZXIgPSB1c2VDYWxsYmFjazMoXG4gICAgKHByb3BzKSA9PiBmaWVsZC5yZW5kZXJGb290ZXIgPyBmaWVsZC5yZW5kZXJGb290ZXIocHJvcHMpIDogLyogQF9fUFVSRV9fICovIGpzeHM2KFwic3BhblwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJmb290ZXJcIiksIGNoaWxkcmVuOiBbXG4gICAgICBwcm9wcy5pdGVtcy5sZW5ndGgsXG4gICAgICBcIiByZXN1bHRcIixcbiAgICAgIHByb3BzLml0ZW1zLmxlbmd0aCA9PT0gMSA/IFwiXCIgOiBcInNcIlxuICAgIF0gfSksXG4gICAgW2ZpZWxkLnJlbmRlckZvb3Rlcl1cbiAgKTtcbiAgdXNlRWZmZWN0OCgoKSA9PiB7XG4gICAgc2VhcmNoKHNlYXJjaFF1ZXJ5LCBmaWx0ZXJzKTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHM2KFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxMCh7XG4gICAgICAgIGRhdGFTZWxlY3RlZDogISF2YWx1ZSxcbiAgICAgICAgbW9kYWxWaXNpYmxlOiBpc09wZW4sXG4gICAgICAgIHJlYWRPbmx5XG4gICAgICB9KSxcbiAgICAgIGlkLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM2KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxMChcImFjdGlvbnNcIiksIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgb25DbGljazogKCkgPT4gc2V0T3Blbih0cnVlKSxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxMChcImJ1dHRvblwiKSxcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6IHJlYWRPbmx5LFxuICAgICAgICAgICAgICBjaGlsZHJlbjogdmFsdWUgPyBmaWVsZC5nZXRJdGVtU3VtbWFyeSA/IGZpZWxkLmdldEl0ZW1TdW1tYXJ5KHZhbHVlKSA6IFwiRXh0ZXJuYWwgaXRlbVwiIDogLyogQF9fUFVSRV9fICovIGpzeHM2KEZyYWdtZW50MywgeyBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihMaW5rLCB7IHNpemU6IFwiMTZcIiB9KSxcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJzcGFuXCIsIHsgY2hpbGRyZW46IGZpZWxkLnBsYWNlaG9sZGVyIH0pXG4gICAgICAgICAgICAgIF0gfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTAoXCJkZXRhY2hCdXR0b25cIiksXG4gICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZShudWxsKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6IHJlYWRPbmx5LFxuICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEyKExvY2tPcGVuLCB7IHNpemU6IDE2IH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICBdIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTIoTW9kYWwsIHsgb25DbG9zZTogKCkgPT4gc2V0T3BlbihmYWxzZSksIGlzT3BlbiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzNihcbiAgICAgICAgICBcImZvcm1cIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKHtcbiAgICAgICAgICAgICAgaXNMb2FkaW5nLFxuICAgICAgICAgICAgICBsb2FkZWQ6ICFpc0xvYWRpbmcsXG4gICAgICAgICAgICAgIGhhc0RhdGE6IG1hcHBlZERhdGEubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgZmlsdGVyc1RvZ2dsZWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25TdWJtaXQ6IChlKSA9PiB7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgc2VhcmNoKHNlYXJjaFF1ZXJ5LCBmaWx0ZXJzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwibWFzdGhlYWRcIiksIGNoaWxkcmVuOiBmaWVsZC5zaG93U2VhcmNoID8gLyogQF9fUFVSRV9fICovIGpzeHM2KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVNb2RhbChcInNlYXJjaEZvcm1cIiksIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM2KFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwic2VhcmNoXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDEyKFwic3BhblwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJzZWFyY2hJY29uVGV4dFwiKSwgY2hpbGRyZW46IFwiU2VhcmNoXCIgfSksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwic2VhcmNoSWNvblwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihTZWFyY2gsIHsgc2l6ZTogXCIxOFwiIH0pIH0pLFxuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgICAgICAgICBcImlucHV0XCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwic2VhcmNoSW5wdXRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogZmllbGQucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hRdWVyeShlLmN1cnJlbnRUYXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWFyY2hRdWVyeVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgXSB9KSxcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czYoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwic2VhcmNoQWN0aW9uc1wiKSwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihCdXR0b24sIHsgdHlwZTogXCJzdWJtaXRcIiwgbG9hZGluZzogaXNMb2FkaW5nLCBmdWxsV2lkdGg6IHRydWUsIGNoaWxkcmVuOiBcIlNlYXJjaFwiIH0pLFxuICAgICAgICAgICAgICAgICAgaGFzRmlsdGVyRmllbGRzICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJzZWFyY2hBY3Rpb25JY29uXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgICAgICAgICBJY29uQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJUb2dnbGUgZmlsdGVyc1wiLFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RmlsdGVyc1RvZ2dsZWQoIWZpbHRlcnNUb2dnbGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTIoU2xpZGVyc0hvcml6b250YWwsIHsgc2l6ZTogMjAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKSB9KVxuICAgICAgICAgICAgICAgIF0gfSlcbiAgICAgICAgICAgICAgXSB9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihIZWFkaW5nLCB7IHJhbms6IFwiMlwiLCBzaXplOiBcInhzXCIsIGNoaWxkcmVuOiBmaWVsZC5wbGFjZWhvbGRlciB8fCBcIlNlbGVjdCBkYXRhXCIgfSkgfSksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzNihcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJncmlkXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIGhhc0ZpbHRlckZpZWxkcyAmJiAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwiZmlsdGVyc1wiKSwgY2hpbGRyZW46IGhhc0ZpbHRlckZpZWxkcyAmJiBPYmplY3Qua2V5cyhmaWx0ZXJGaWVsZHMpLm1hcCgoZmllbGROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJGaWVsZCA9IGZpbHRlckZpZWxkc1tmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJmaWVsZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0ZpZWxkUHJpdmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGZpbHRlckZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgZXh0ZXJuYWxfZmllbGRfJHtmaWVsZE5hbWV9X2ZpbHRlcmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaWx0ZXJGaWVsZC5sYWJlbCB8fCBmaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmaWx0ZXJzW2ZpZWxkTmFtZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAodmFsdWUyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsdGVycyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGZpbHRlcnMpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZmllbGROYW1lXTogdmFsdWUyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RmlsdGVycyhuZXdGaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2goc2VhcmNoUXVlcnksIG5ld0ZpbHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWVcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSkgfSksXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM2KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVNb2RhbChcInRhYmxlV3JhcHBlclwiKSwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzNihcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVNb2RhbChcInRhYmxlXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJ0aGVhZFwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJ0aGVhZFwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcInRyXCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVNb2RhbChcInRyXCIpLCBjaGlsZHJlbjoga2V5cy5tYXAoKGtleSkgPT4gLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgICAgICAgICAgIFwidGhcIixcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwidGhcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyB0ZXh0QWxpZ246IFwibGVmdFwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjoga2V5XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgICAgICAgKSkgfSkgfSksXG4gICAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcInRib2R5XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVNb2RhbChcInRib2R5XCIpLCBjaGlsZHJlbjogbWFwcGVkRGF0YS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0clwiLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJ0clwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG1hcFByb3AoZGF0YVtpXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjoga2V5cy5tYXAoKGtleSkgPT4gLyogQF9fUFVSRV9fICovIGpzeDEyKFwidGRcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwidGRcIiksIGNoaWxkcmVuOiBpdGVtW2tleV0gfSwga2V5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSkgfSlcbiAgICAgICAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZU1vZGFsKFwibG9hZGluZ0Jhbm5lclwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihMb2FkZXIsIHsgc2l6ZTogMjQgfSkgfSlcbiAgICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTW9kYWwoXCJmb290ZXJDb250YWluZXJcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTIoRm9vdGVyLCB7IGl0ZW1zOiBtYXBwZWREYXRhIH0pIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICApIH0pXG4gICAgICBdXG4gICAgfVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9BdXRvRmllbGQvZmllbGRzL0V4dGVybmFsRmllbGQvaW5kZXgudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBFeHRlcm5hbEZpZWxkID0gKHtcbiAgZmllbGQsXG4gIG9uQ2hhbmdlLFxuICB2YWx1ZSxcbiAgbmFtZSxcbiAgbGFiZWwsXG4gIGxhYmVsSWNvbixcbiAgTGFiZWw6IExhYmVsMixcbiAgaWQsXG4gIHJlYWRPbmx5XG59KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICBjb25zdCB2YWxpZEZpZWxkID0gZmllbGQ7XG4gIGNvbnN0IGRlcHJlY2F0ZWRGaWVsZCA9IGZpZWxkO1xuICB1c2VFZmZlY3Q5KCgpID0+IHtcbiAgICBpZiAoZGVwcmVjYXRlZEZpZWxkLmFkYXB0b3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiV2FybmluZzogVGhlIGBhZGFwdG9yYCBBUEkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB1cGRhdGVkIEFQSXMgb24gdGhlIGBleHRlcm5hbGAgZmllbGQgaW5zdGVhZC4gVGhpcyB3aWxsIGJlIGEgYnJlYWtpbmcgY2hhbmdlIGluIGEgZnV0dXJlIHJlbGVhc2UuXCJcbiAgICAgICk7XG4gICAgfVxuICB9LCBbXSk7XG4gIGlmIChmaWVsZC50eXBlICE9PSBcImV4dGVybmFsXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEzKFxuICAgIExhYmVsMixcbiAgICB7XG4gICAgICBsYWJlbDogbGFiZWwgfHwgbmFtZSxcbiAgICAgIGljb246IGxhYmVsSWNvbiB8fCAvKiBAX19QVVJFX18gKi8ganN4MTMoTGluaywgeyBzaXplOiAxNiB9KSxcbiAgICAgIGVsOiBcImRpdlwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhcbiAgICAgICAgRXh0ZXJuYWxJbnB1dCxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgZmllbGQ6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHZhbGlkRmllbGQpLCB7XG4gICAgICAgICAgICAvLyBERVBSRUNBVEVEXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogKChfYSA9IGRlcHJlY2F0ZWRGaWVsZC5hZGFwdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EubmFtZSkgPyBgU2VsZWN0IGZyb20gJHtkZXByZWNhdGVkRmllbGQuYWRhcHRvci5uYW1lfWAgOiB2YWxpZEZpZWxkLnBsYWNlaG9sZGVyIHx8IFwiU2VsZWN0IGRhdGFcIixcbiAgICAgICAgICAgIG1hcFByb3A6ICgoX2IgPSBkZXByZWNhdGVkRmllbGQuYWRhcHRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1hcFByb3ApIHx8IHZhbGlkRmllbGQubWFwUHJvcCxcbiAgICAgICAgICAgIG1hcFJvdzogdmFsaWRGaWVsZC5tYXBSb3csXG4gICAgICAgICAgICBmZXRjaExpc3Q6ICgoX2MgPSBkZXByZWNhdGVkRmllbGQuYWRhcHRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmZldGNoTGlzdCkgPyAoKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGRlcHJlY2F0ZWRGaWVsZC5hZGFwdG9yLmZldGNoTGlzdChcbiAgICAgICAgICAgICAgICBkZXByZWNhdGVkRmllbGQuYWRhcHRvclBhcmFtc1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSkgOiB2YWxpZEZpZWxkLmZldGNoTGlzdFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG9uQ2hhbmdlLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHJlYWRPbmx5XG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICk7XG59O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9maWVsZHMvUmFkaW9GaWVsZC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBqc3ggYXMganN4MTQsIGpzeHMgYXMganN4czcgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUxMSA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIklucHV0XCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDMpO1xudmFyIFJhZGlvRmllbGQgPSAoe1xuICBmaWVsZCxcbiAgb25DaGFuZ2UsXG4gIHJlYWRPbmx5LFxuICB2YWx1ZSxcbiAgbmFtZSxcbiAgaWQsXG4gIGxhYmVsLFxuICBsYWJlbEljb24sXG4gIExhYmVsOiBMYWJlbDJcbn0pID0+IHtcbiAgaWYgKGZpZWxkLnR5cGUgIT09IFwicmFkaW9cIiB8fCAhZmllbGQub3B0aW9ucykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTQoXG4gICAgTGFiZWwyLFxuICAgIHtcbiAgICAgIGljb246IGxhYmVsSWNvbiB8fCAvKiBAX19QVVJFX18gKi8ganN4MTQoQ2lyY2xlQ2hlY2tCaWcsIHsgc2l6ZTogMTYgfSksXG4gICAgICBsYWJlbDogbGFiZWwgfHwgbmFtZSxcbiAgICAgIHJlYWRPbmx5LFxuICAgICAgZWw6IFwiZGl2XCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE0KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxMShcInJhZGlvR3JvdXBJdGVtc1wiKSwgaWQsIGNoaWxkcmVuOiBmaWVsZC5vcHRpb25zLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzNyhcbiAgICAgICAgICBcImxhYmVsXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxMShcInJhZGlvXCIpLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDE0KFxuICAgICAgICAgICAgICAgIFwiaW5wdXRcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTExKFwicmFkaW9JbnB1dFwiKSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7IHZhbHVlOiBvcHRpb24udmFsdWUgfSksXG4gICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKEpTT04ucGFyc2UoZS50YXJnZXQudmFsdWUpLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogcmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICBjaGVja2VkOiB2YWx1ZSA9PT0gb3B0aW9uLnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MTQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTExKFwicmFkaW9Jbm5lclwiKSwgY2hpbGRyZW46IG9wdGlvbi5sYWJlbCB8fCAoKF9hID0gb3B0aW9uLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2EudG9TdHJpbmcoKSkgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wdGlvbi5sYWJlbCArIG9wdGlvbi52YWx1ZVxuICAgICAgICApO1xuICAgICAgfSkgfSlcbiAgICB9XG4gICk7XG59O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9maWVsZHMvU2VsZWN0RmllbGQvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsganN4IGFzIGpzeDE1IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMTIgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJJbnB1dFwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQzKTtcbnZhciBTZWxlY3RGaWVsZCA9ICh7XG4gIGZpZWxkLFxuICBvbkNoYW5nZSxcbiAgbGFiZWwsXG4gIGxhYmVsSWNvbixcbiAgTGFiZWw6IExhYmVsMixcbiAgdmFsdWUsXG4gIG5hbWUsXG4gIHJlYWRPbmx5LFxuICBpZFxufSkgPT4ge1xuICBpZiAoZmllbGQudHlwZSAhPT0gXCJzZWxlY3RcIiB8fCAhZmllbGQub3B0aW9ucykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTUoXG4gICAgTGFiZWwyLFxuICAgIHtcbiAgICAgIGxhYmVsOiBsYWJlbCB8fCBuYW1lLFxuICAgICAgaWNvbjogbGFiZWxJY29uIHx8IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShDaGV2cm9uRG93biwgeyBzaXplOiAxNiB9KSxcbiAgICAgIHJlYWRPbmx5LFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShcbiAgICAgICAgXCJzZWxlY3RcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHRpdGxlOiBsYWJlbCB8fCBuYW1lLFxuICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTIoXCJpbnB1dFwiKSxcbiAgICAgICAgICBkaXNhYmxlZDogcmVhZE9ubHksXG4gICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICBvbkNoYW5nZShKU09OLnBhcnNlKGUudGFyZ2V0LnZhbHVlKS52YWx1ZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoeyB2YWx1ZSB9KSxcbiAgICAgICAgICBjaGlsZHJlbjogZmllbGQub3B0aW9ucy5tYXAoKG9wdGlvbikgPT4gLyogQF9fUFVSRV9fICovIGpzeDE1KFxuICAgICAgICAgICAgXCJvcHRpb25cIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGFiZWw6IG9wdGlvbi5sYWJlbCxcbiAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHsgdmFsdWU6IG9wdGlvbi52YWx1ZSB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbi5sYWJlbCArIEpTT04uc3RyaW5naWZ5KG9wdGlvbi52YWx1ZSlcbiAgICAgICAgICApKVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9BdXRvRmllbGQvZmllbGRzL1RleHRhcmVhRmllbGQvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsganN4IGFzIGpzeDE2IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMTMgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJJbnB1dFwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQzKTtcbnZhciBUZXh0YXJlYUZpZWxkID0gKHtcbiAgZmllbGQsXG4gIG9uQ2hhbmdlLFxuICByZWFkT25seSxcbiAgdmFsdWUsXG4gIG5hbWUsXG4gIGxhYmVsLFxuICBsYWJlbEljb24sXG4gIExhYmVsOiBMYWJlbDIsXG4gIGlkXG59KSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTYoXG4gICAgTGFiZWwyLFxuICAgIHtcbiAgICAgIGxhYmVsOiBsYWJlbCB8fCBuYW1lLFxuICAgICAgaWNvbjogbGFiZWxJY29uIHx8IC8qIEBfX1BVUkVfXyAqLyBqc3gxNihUeXBlLCB7IHNpemU6IDE2IH0pLFxuICAgICAgcmVhZE9ubHksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE2KFxuICAgICAgICBcInRleHRhcmVhXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTEzKFwiaW5wdXRcIiksXG4gICAgICAgICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmFsdWU6IHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwiXCIgOiB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogKGUpID0+IG9uQ2hhbmdlKGUuY3VycmVudFRhcmdldC52YWx1ZSksXG4gICAgICAgICAgcmVhZE9ubHksXG4gICAgICAgICAgdGFiSW5kZXg6IHJlYWRPbmx5ID8gLTEgOiB2b2lkIDAsXG4gICAgICAgICAgcm93czogNSxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogZmllbGQudHlwZSA9PT0gXCJ0ZXh0YXJlYVwiID8gZmllbGQucGxhY2Vob2xkZXIgOiB2b2lkIDBcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cbiAgKTtcbn07XG5cbi8vIGNvbXBvbmVudHMvQXV0b0ZpZWxkL2ZpZWxkcy9PYmplY3RGaWVsZC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9BdXRvRmllbGQvZmllbGRzL09iamVjdEZpZWxkL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0OSA9IHsgXCJPYmplY3RGaWVsZFwiOiBcIl9PYmplY3RGaWVsZF8xdWEzeV81XCIsIFwiT2JqZWN0RmllbGQtZmllbGRzZXRcIjogXCJfT2JqZWN0RmllbGQtZmllbGRzZXRfMXVhM3lfMTNcIiB9O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9maWVsZHMvT2JqZWN0RmllbGQvaW5kZXgudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTcgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUxNCA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIk9iamVjdEZpZWxkXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDkpO1xudmFyIE9iamVjdEZpZWxkID0gKHtcbiAgZmllbGQsXG4gIG9uQ2hhbmdlLFxuICB2YWx1ZSxcbiAgbmFtZSxcbiAgbGFiZWwsXG4gIGxhYmVsSWNvbixcbiAgTGFiZWw6IExhYmVsMixcbiAgcmVhZE9ubHksXG4gIGlkXG59KSA9PiB7XG4gIGNvbnN0IHsgcmVhZE9ubHlGaWVsZHMsIGxvY2FsTmFtZSA9IG5hbWUgfSA9IHVzZU5lc3RlZEZpZWxkQ29udGV4dCgpO1xuICBpZiAoZmllbGQudHlwZSAhPT0gXCJvYmplY3RcIiB8fCAhZmllbGQub2JqZWN0RmllbGRzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgZGF0YSA9IHZhbHVlIHx8IHt9O1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE3KFxuICAgIExhYmVsMixcbiAgICB7XG4gICAgICBsYWJlbDogbGFiZWwgfHwgbmFtZSxcbiAgICAgIGljb246IGxhYmVsSWNvbiB8fCAvKiBAX19QVVJFX18gKi8ganN4MTcoRWxsaXBzaXNWZXJ0aWNhbCwgeyBzaXplOiAxNiB9KSxcbiAgICAgIGVsOiBcImRpdlwiLFxuICAgICAgcmVhZE9ubHksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE3KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNCgpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE3KFwiZmllbGRzZXRcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTE0KFwiZmllbGRzZXRcIiksIGNoaWxkcmVuOiBPYmplY3Qua2V5cyhmaWVsZC5vYmplY3RGaWVsZHMpLm1hcCgoc3ViTmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBzdWJGaWVsZCA9IGZpZWxkLm9iamVjdEZpZWxkc1tzdWJOYW1lXTtcbiAgICAgICAgY29uc3Qgc3ViUGF0aCA9IGAke2xvY2FsTmFtZX0uJHtzdWJOYW1lfWA7XG4gICAgICAgIGNvbnN0IHN1YlJlYWRPbmx5ID0gcmVhZE9ubHkgPyByZWFkT25seSA6IHJlYWRPbmx5RmllbGRzW3N1YlBhdGhdO1xuICAgICAgICBjb25zdCBsYWJlbDIgPSBzdWJGaWVsZC5sYWJlbCB8fCBzdWJOYW1lO1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE3KFxuICAgICAgICAgIE5lc3RlZEZpZWxkUHJvdmlkZXIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogbG9jYWxOYW1lIHx8IGlkLFxuICAgICAgICAgICAgc3ViTmFtZSxcbiAgICAgICAgICAgIHJlYWRPbmx5RmllbGRzLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhcbiAgICAgICAgICAgICAgQXV0b0ZpZWxkUHJpdmF0ZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IHN1YlBhdGgsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHN1YlBhdGgsXG4gICAgICAgICAgICAgICAgaWQ6IGAke2lkfV8ke3N1Yk5hbWV9YCxcbiAgICAgICAgICAgICAgICByZWFkT25seTogc3ViUmVhZE9ubHksXG4gICAgICAgICAgICAgICAgZmllbGQ6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN1YkZpZWxkKSwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsMlxuICAgICAgICAgICAgICAgICAgLy8gTWF5IGJlIHVzZWQgYnkgY3VzdG9tIGZpZWxkc1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW3N1Yk5hbWVdLFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAodmFsLCB1aSkgPT4ge1xuICAgICAgICAgICAgICAgICAgb25DaGFuZ2UoXG4gICAgICAgICAgICAgICAgICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGRhdGEpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgW3N1Yk5hbWVdOiB2YWxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHVpXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3ViUGF0aFxuICAgICAgICApO1xuICAgICAgfSkgfSkgfSlcbiAgICB9XG4gICk7XG59O1xuXG4vLyBsaWIvdXNlLXNhZmUtaWQudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgUmVhY3QyLCB7IHVzZVN0YXRlIGFzIHVzZVN0YXRlNyB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZVNhZmVJZCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBSZWFjdDIudXNlSWQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gUmVhY3QyLnVzZUlkKCk7XG4gIH1cbiAgY29uc3QgW2lkXSA9IHVzZVN0YXRlNyhnZW5lcmF0ZUlkKCkpO1xuICByZXR1cm4gaWQ7XG59O1xuXG4vLyBjb21wb25lbnRzL0F1dG9GaWVsZC9pbmRleC50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50NCwganN4IGFzIGpzeDE4LCBqc3hzIGFzIGpzeHM4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMTUgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJJbnB1dFwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQzKTtcbnZhciBnZXRDbGFzc05hbWVXcmFwcGVyID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiSW5wdXRXcmFwcGVyXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDMpO1xudmFyIEZpZWxkTGFiZWwgPSAoe1xuICBjaGlsZHJlbixcbiAgaWNvbixcbiAgbGFiZWwsXG4gIGVsID0gXCJsYWJlbFwiLFxuICByZWFkT25seSxcbiAgY2xhc3NOYW1lXG59KSA9PiB7XG4gIGNvbnN0IEVsID0gZWw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czgoRWwsIHsgY2xhc3NOYW1lLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzOChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTUoXCJsYWJlbFwiKSwgY2hpbGRyZW46IFtcbiAgICAgIGljb24gPyAvKiBAX19QVVJFX18gKi8ganN4MTgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTE1KFwibGFiZWxJY29uXCIpLCBjaGlsZHJlbjogaWNvbiB9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3gxOChGcmFnbWVudDQsIHt9KSxcbiAgICAgIGxhYmVsLFxuICAgICAgcmVhZE9ubHkgJiYgLyogQF9fUFVSRV9fICovIGpzeDE4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNShcImRpc2FibGVkSWNvblwiKSwgdGl0bGU6IFwiUmVhZC1vbmx5XCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTgoTG9jaywgeyBzaXplOiBcIjEyXCIgfSkgfSlcbiAgICBdIH0pLFxuICAgIGNoaWxkcmVuXG4gIF0gfSk7XG59O1xudmFyIEZpZWxkTGFiZWxJbnRlcm5hbCA9ICh7XG4gIGNoaWxkcmVuLFxuICBpY29uLFxuICBsYWJlbCxcbiAgZWwgPSBcImxhYmVsXCIsXG4gIHJlYWRPbmx5XG59KSA9PiB7XG4gIGNvbnN0IG92ZXJyaWRlcyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLm92ZXJyaWRlcyk7XG4gIGNvbnN0IFdyYXBwZXIgPSB1c2VNZW1vMyhcbiAgICAoKSA9PiBvdmVycmlkZXMuZmllbGRMYWJlbCB8fCBGaWVsZExhYmVsLFxuICAgIFtvdmVycmlkZXNdXG4gICk7XG4gIGlmICghbGFiZWwpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE4KEZyYWdtZW50NCwgeyBjaGlsZHJlbiB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE4KFxuICAgIFdyYXBwZXIsXG4gICAge1xuICAgICAgbGFiZWwsXG4gICAgICBpY29uLFxuICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNSh7IHJlYWRPbmx5IH0pLFxuICAgICAgcmVhZE9ubHksXG4gICAgICBlbCxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApO1xufTtcbnZhciBkZWZhdWx0RmllbGRzID0ge1xuICBhcnJheTogQXJyYXlGaWVsZCxcbiAgZXh0ZXJuYWw6IEV4dGVybmFsRmllbGQsXG4gIG9iamVjdDogT2JqZWN0RmllbGQsXG4gIHNlbGVjdDogU2VsZWN0RmllbGQsXG4gIHRleHRhcmVhOiBUZXh0YXJlYUZpZWxkLFxuICByYWRpbzogUmFkaW9GaWVsZCxcbiAgdGV4dDogRGVmYXVsdEZpZWxkLFxuICBudW1iZXI6IERlZmF1bHRGaWVsZFxufTtcbmZ1bmN0aW9uIEF1dG9GaWVsZEludGVybmFsKHByb3BzKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBTdG9yZSgocykgPT4gcy5kaXNwYXRjaCk7XG4gIGNvbnN0IG92ZXJyaWRlcyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLm92ZXJyaWRlcyk7XG4gIGNvbnN0IHJlYWRPbmx5ID0gdXNlQXBwU3RvcmUoKHMpID0+IHtcbiAgICB2YXIgX2EyO1xuICAgIHJldHVybiAoX2EyID0gcy5zZWxlY3RlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYTIucmVhZE9ubHk7XG4gIH0pO1xuICBjb25zdCBuZXN0ZWRGaWVsZENvbnRleHQgPSB1c2VDb250ZXh0MyhOZXN0ZWRGaWVsZENvbnRleHQpO1xuICBjb25zdCB7IGlkLCBMYWJlbDogTGFiZWwyID0gRmllbGRMYWJlbEludGVybmFsIH0gPSBwcm9wcztcbiAgY29uc3QgZmllbGQgPSBwcm9wcy5maWVsZDtcbiAgY29uc3QgbGFiZWwgPSBmaWVsZC5sYWJlbDtcbiAgY29uc3QgbGFiZWxJY29uID0gZmllbGQubGFiZWxJY29uO1xuICBjb25zdCBkZWZhdWx0SWQgPSB1c2VTYWZlSWQoKTtcbiAgY29uc3QgcmVzb2x2ZWRJZCA9IGlkIHx8IGRlZmF1bHRJZDtcbiAgY29uc3QgcmVuZGVyID0gdXNlTWVtbzMoXG4gICAgKCkgPT4ge1xuICAgICAgdmFyIF9hMiwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgb3ZlcnJpZGVzLmZpZWxkVHlwZXMpLCB7XG4gICAgICAgIGFycmF5OiAoKF9hMiA9IG92ZXJyaWRlcy5maWVsZFR5cGVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmFycmF5KSB8fCBkZWZhdWx0RmllbGRzLmFycmF5LFxuICAgICAgICBleHRlcm5hbDogKChfYiA9IG92ZXJyaWRlcy5maWVsZFR5cGVzKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZXh0ZXJuYWwpIHx8IGRlZmF1bHRGaWVsZHMuZXh0ZXJuYWwsXG4gICAgICAgIG9iamVjdDogKChfYyA9IG92ZXJyaWRlcy5maWVsZFR5cGVzKSA9PSBudWxsID8gdm9pZCAwIDogX2Mub2JqZWN0KSB8fCBkZWZhdWx0RmllbGRzLm9iamVjdCxcbiAgICAgICAgc2VsZWN0OiAoKF9kID0gb3ZlcnJpZGVzLmZpZWxkVHlwZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZC5zZWxlY3QpIHx8IGRlZmF1bHRGaWVsZHMuc2VsZWN0LFxuICAgICAgICB0ZXh0YXJlYTogKChfZSA9IG92ZXJyaWRlcy5maWVsZFR5cGVzKSA9PSBudWxsID8gdm9pZCAwIDogX2UudGV4dGFyZWEpIHx8IGRlZmF1bHRGaWVsZHMudGV4dGFyZWEsXG4gICAgICAgIHJhZGlvOiAoKF9mID0gb3ZlcnJpZGVzLmZpZWxkVHlwZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5yYWRpbykgfHwgZGVmYXVsdEZpZWxkcy5yYWRpbyxcbiAgICAgICAgdGV4dDogKChfZyA9IG92ZXJyaWRlcy5maWVsZFR5cGVzKSA9PSBudWxsID8gdm9pZCAwIDogX2cudGV4dCkgfHwgZGVmYXVsdEZpZWxkcy50ZXh0LFxuICAgICAgICBudW1iZXI6ICgoX2ggPSBvdmVycmlkZXMuZmllbGRUeXBlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLm51bWJlcikgfHwgZGVmYXVsdEZpZWxkcy5udW1iZXJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW292ZXJyaWRlc11cbiAgKTtcbiAgY29uc3QgbWVyZ2VkUHJvcHMgPSB1c2VNZW1vMyhcbiAgICAoKSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHtcbiAgICAgIGZpZWxkLFxuICAgICAgbGFiZWwsXG4gICAgICBsYWJlbEljb24sXG4gICAgICBMYWJlbDogTGFiZWwyLFxuICAgICAgaWQ6IHJlc29sdmVkSWRcbiAgICB9KSxcbiAgICBbcHJvcHMsIGZpZWxkLCBsYWJlbCwgbGFiZWxJY29uLCBMYWJlbDIsIHJlc29sdmVkSWRdXG4gICk7XG4gIGNvbnN0IG9uRm9jdXMgPSB1c2VDYWxsYmFjazQoXG4gICAgKGUpID0+IHtcbiAgICAgIGlmIChtZXJnZWRQcm9wcy5uYW1lICYmIChlLnRhcmdldC5ub2RlTmFtZSA9PT0gXCJJTlBVVFwiIHx8IGUudGFyZ2V0Lm5vZGVOYW1lID09PSBcIlRFWFRBUkVBXCIpKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcInNldFVpXCIsXG4gICAgICAgICAgdWk6IHtcbiAgICAgICAgICAgIGZpZWxkOiB7IGZvY3VzOiBtZXJnZWRQcm9wcy5uYW1lIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW21lcmdlZFByb3BzLm5hbWVdXG4gICk7XG4gIGNvbnN0IG9uQmx1ciA9IHVzZUNhbGxiYWNrNCgoZSkgPT4ge1xuICAgIGlmIChcIm5hbWVcIiBpbiBlLnRhcmdldCkge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInNldFVpXCIsXG4gICAgICAgIHVpOiB7XG4gICAgICAgICAgZmllbGQ6IHsgZm9jdXM6IG51bGwgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgbGV0IENoaWxkcmVuID0gdXNlTWVtbzMoKCkgPT4ge1xuICAgIGlmIChmaWVsZC50eXBlICE9PSBcImN1c3RvbVwiICYmIGZpZWxkLnR5cGUgIT09IFwic2xvdFwiKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdEZpZWxkc1tmaWVsZC50eXBlXTtcbiAgICB9XG4gICAgcmV0dXJuIChfcHJvcHMpID0+IG51bGw7XG4gIH0sIFtmaWVsZC50eXBlXSk7XG4gIGxldCBGaWVsZENvbXBvbmVudCA9IHVzZU1lbW8zKCgpID0+IHtcbiAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJjdXN0b21cIikge1xuICAgICAgaWYgKCFmaWVsZC5yZW5kZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmllbGQucmVuZGVyO1xuICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSAhPT0gXCJzbG90XCIpIHtcbiAgICAgIHJldHVybiByZW5kZXJbZmllbGQudHlwZV07XG4gICAgfVxuICB9LCBbZmllbGQudHlwZSwgcmVuZGVyXSk7XG4gIGNvbnN0IHsgdmlzaWJsZSA9IHRydWUgfSA9IHByb3BzLmZpZWxkO1xuICBpZiAoIXZpc2libGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoZmllbGQudHlwZSA9PT0gXCJzbG90XCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoIUZpZWxkQ29tcG9uZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGaWVsZCB0eXBlIGZvciAke2ZpZWxkLnR5cGV9IGRpZCBub3QgZXhpc3QuYCk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxOChcbiAgICBOZXN0ZWRGaWVsZENvbnRleHQuUHJvdmlkZXIsXG4gICAge1xuICAgICAgdmFsdWU6IHtcbiAgICAgICAgcmVhZE9ubHlGaWVsZHM6IG5lc3RlZEZpZWxkQ29udGV4dC5yZWFkT25seUZpZWxkcyB8fCByZWFkT25seSB8fCB7fSxcbiAgICAgICAgbG9jYWxOYW1lOiAoX2EgPSBuZXN0ZWRGaWVsZENvbnRleHQubG9jYWxOYW1lKSAhPSBudWxsID8gX2EgOiBtZXJnZWRQcm9wcy5uYW1lXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxOChcbiAgICAgICAgXCJkaXZcIixcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lV3JhcHBlcigpLFxuICAgICAgICAgIG9uRm9jdXMsXG4gICAgICAgICAgb25CbHVyLFxuICAgICAgICAgIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxOChGaWVsZENvbXBvbmVudCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbWVyZ2VkUHJvcHMpLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTgoQ2hpbGRyZW4sIF9fc3ByZWFkVmFsdWVzKHt9LCBtZXJnZWRQcm9wcykpIH0pKVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gQXV0b0ZpZWxkUHJpdmF0ZShwcm9wcykge1xuICBjb25zdCBpc0ZvY3VzZWQgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZS51aS5maWVsZC5mb2N1cyA9PT0gcHJvcHMubmFtZSk7XG4gIGNvbnN0IHsgdmFsdWUsIG9uQ2hhbmdlIH0gPSBwcm9wcztcbiAgY29uc3QgW2xvY2FsVmFsdWUsIHNldExvY2FsVmFsdWVdID0gdXNlU3RhdGU4KHZhbHVlKTtcbiAgY29uc3Qgb25DaGFuZ2VMb2NhbCA9IHVzZUNhbGxiYWNrNChcbiAgICAodmFsLCB1aSkgPT4ge1xuICAgICAgc2V0TG9jYWxWYWx1ZSh2YWwpO1xuICAgICAgb25DaGFuZ2UodmFsLCB1aSk7XG4gICAgfSxcbiAgICBbb25DaGFuZ2VdXG4gICk7XG4gIHVzZUVmZmVjdDEwKCgpID0+IHtcbiAgICBpZiAoIWlzRm9jdXNlZCkge1xuICAgICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9LCBbdmFsdWVdKTtcbiAgdXNlRWZmZWN0MTAoKCkgPT4ge1xuICAgIGlmICghaXNGb2N1c2VkKSB7XG4gICAgICBpZiAodmFsdWUgIT09IGxvY2FsVmFsdWUpIHtcbiAgICAgICAgc2V0TG9jYWxWYWx1ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbaXNGb2N1c2VkLCB2YWx1ZSwgbG9jYWxWYWx1ZV0pO1xuICBjb25zdCBsb2NhbFByb3BzID0ge1xuICAgIHZhbHVlOiBsb2NhbFZhbHVlLFxuICAgIG9uQ2hhbmdlOiBvbkNoYW5nZUxvY2FsXG4gIH07XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTgoQXV0b0ZpZWxkSW50ZXJuYWwsIF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIGxvY2FsUHJvcHMpKTtcbn1cbmZ1bmN0aW9uIEF1dG9GaWVsZChwcm9wcykge1xuICBjb25zdCBEZWZhdWx0TGFiZWwgPSB1c2VNZW1vMygoKSA9PiB7XG4gICAgY29uc3QgRGVmYXVsdExhYmVsMiA9IChsYWJlbFByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MTgoXG4gICAgICBcImRpdlwiLFxuICAgICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbGFiZWxQcm9wcyksIHtcbiAgICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNSh7IHJlYWRPbmx5OiBwcm9wcy5yZWFkT25seSB9KVxuICAgICAgfSlcbiAgICApO1xuICAgIHJldHVybiBEZWZhdWx0TGFiZWwyO1xuICB9LCBbcHJvcHMucmVhZE9ubHldKTtcbiAgaWYgKHByb3BzLmZpZWxkLnR5cGUgPT09IFwic2xvdFwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxOChBdXRvRmllbGRJbnRlcm5hbCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpLCB7IExhYmVsOiBEZWZhdWx0TGFiZWwgfSkpO1xufVxuXG4vLyBjb21wb25lbnRzL1JlbmRlci9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGNvbXBvbmVudHMvRHJvcFpvbmUvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHtcbiAgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmMyxcbiAgbWVtbyBhcyBtZW1vMixcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2sxMSxcbiAgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0OCxcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDE4LFxuICB1c2VNZW1vIGFzIHVzZU1lbW84LFxuICB1c2VSZWYgYXMgdXNlUmVmNlxufSBmcm9tIFwicmVhY3RcIjtcblxuLy8gY29tcG9uZW50cy9EcmFnZ2FibGVDb21wb25lbnQvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHtcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s3LFxuICB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ1LFxuICB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTIsXG4gIHVzZU1lbW8gYXMgdXNlTWVtbzUsXG4gIHVzZVJlZiBhcyB1c2VSZWYyLFxuICB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEwLFxuICB1c2VUcmFuc2l0aW9uXG59IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvRHJhZ2dhYmxlQ29tcG9uZW50L3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0MTAgPSB7IFwiRHJhZ2dhYmxlQ29tcG9uZW50XCI6IFwiX0RyYWdnYWJsZUNvbXBvbmVudF8xdmFxeV8xXCIsIFwiRHJhZ2dhYmxlQ29tcG9uZW50LW92ZXJsYXlXcmFwcGVyXCI6IFwiX0RyYWdnYWJsZUNvbXBvbmVudC1vdmVybGF5V3JhcHBlcl8xdmFxeV8xMlwiLCBcIkRyYWdnYWJsZUNvbXBvbmVudC1vdmVybGF5XCI6IFwiX0RyYWdnYWJsZUNvbXBvbmVudC1vdmVybGF5XzF2YXF5XzEyXCIsIFwiRHJhZ2dhYmxlQ29tcG9uZW50LWxvYWRpbmdPdmVybGF5XCI6IFwiX0RyYWdnYWJsZUNvbXBvbmVudC1sb2FkaW5nT3ZlcmxheV8xdmFxeV8zNFwiLCBcIkRyYWdnYWJsZUNvbXBvbmVudC0taG92ZXJcIjogXCJfRHJhZ2dhYmxlQ29tcG9uZW50LS1ob3Zlcl8xdmFxeV81MFwiLCBcIkRyYWdnYWJsZUNvbXBvbmVudC0taXNTZWxlY3RlZFwiOiBcIl9EcmFnZ2FibGVDb21wb25lbnQtLWlzU2VsZWN0ZWRfMXZhcXlfNTdcIiwgXCJEcmFnZ2FibGVDb21wb25lbnQtYWN0aW9uc092ZXJsYXlcIjogXCJfRHJhZ2dhYmxlQ29tcG9uZW50LWFjdGlvbnNPdmVybGF5XzF2YXF5XzcxXCIsIFwiRHJhZ2dhYmxlQ29tcG9uZW50LWFjdGlvbnNcIjogXCJfRHJhZ2dhYmxlQ29tcG9uZW50LWFjdGlvbnNfMXZhcXlfNzFcIiB9O1xuXG4vLyBjb21wb25lbnRzL0RyYWdnYWJsZUNvbXBvbmVudC9pbmRleC50c3hcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCBhcyBjcmVhdGVQb3J0YWwyIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xuXG4vLyBsaWIvZ2V0LWRlZXAtc2Nyb2xsLXBvc2l0aW9uLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuZnVuY3Rpb24gZ2V0RGVlcFNjcm9sbFBvc2l0aW9uKGVsZW1lbnQpIHtcbiAgbGV0IHRvdGFsU2Nyb2xsID0ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xuICBsZXQgY3VycmVudCA9IGVsZW1lbnQ7XG4gIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIGNvbnN0IHBhcmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICB0b3RhbFNjcm9sbC54ICs9IHBhcmVudC5zY3JvbGxMZWZ0O1xuICAgICAgdG90YWxTY3JvbGwueSArPSBwYXJlbnQuc2Nyb2xsVG9wO1xuICAgIH1cbiAgICBjdXJyZW50ID0gcGFyZW50O1xuICB9XG4gIHJldHVybiB0b3RhbFNjcm9sbDtcbn1cblxuLy8gY29tcG9uZW50cy9Ecm9wWm9uZS9jb250ZXh0LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7XG4gIGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDMsXG4gIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNSxcbiAgdXNlTWVtbyBhcyB1c2VNZW1vNFxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZVN0b3JlIGFzIGNyZWF0ZVN0b3JlMiB9IGZyb20gXCJ6dXN0YW5kXCI7XG5pbXBvcnQgeyBGcmFnbWVudCBhcyBGcmFnbWVudDUsIGpzeCBhcyBqc3gxOSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGRyb3Bab25lQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQzKG51bGwpO1xudmFyIFpvbmVTdG9yZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0MyhcbiAgY3JlYXRlU3RvcmUyKCgpID0+ICh7XG4gICAgem9uZURlcHRoSW5kZXg6IHt9LFxuICAgIG5leHRab25lRGVwdGhJbmRleDoge30sXG4gICAgYXJlYURlcHRoSW5kZXg6IHt9LFxuICAgIG5leHRBcmVhRGVwdGhJbmRleDoge30sXG4gICAgZHJhZ2dlZEl0ZW06IG51bGwsXG4gICAgcHJldmlld0luZGV4OiB7fSxcbiAgICBlbmFibGVkSW5kZXg6IHt9LFxuICAgIGhvdmVyaW5nQ29tcG9uZW50OiBudWxsXG4gIH0pKVxuKTtcbnZhciBab25lU3RvcmVQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuLFxuICBzdG9yZVxufSkgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE5KFpvbmVTdG9yZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHN0b3JlLCBjaGlsZHJlbiB9KTtcbn07XG52YXIgRHJvcFpvbmVQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuLFxuICB2YWx1ZVxufSkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLmRpc3BhdGNoKTtcbiAgY29uc3QgcmVnaXN0ZXJab25lID0gdXNlQ2FsbGJhY2s1KFxuICAgICh6b25lQ29tcG91bmQpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJyZWdpc3RlclpvbmVcIixcbiAgICAgICAgem9uZTogem9uZUNvbXBvdW5kXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtkaXNwYXRjaF1cbiAgKTtcbiAgY29uc3QgbWVtb1ZhbHVlID0gdXNlTWVtbzQoXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgcmVnaXN0ZXJab25lXG4gICAgfSwgdmFsdWUpLFxuICAgIFt2YWx1ZV1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxOShGcmFnbWVudDUsIHsgY2hpbGRyZW46IG1lbW9WYWx1ZSAmJiAvKiBAX19QVVJFX18gKi8ganN4MTkoZHJvcFpvbmVDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBtZW1vVmFsdWUsIGNoaWxkcmVuIH0pIH0pO1xufTtcblxuLy8gY29tcG9uZW50cy9EcmFnZ2FibGVDb21wb25lbnQvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VTaGFsbG93IGFzIHVzZVNoYWxsb3cyIH0gZnJvbSBcInp1c3RhbmQvcmVhY3Qvc2hhbGxvd1wiO1xuaW1wb3J0IHsgdXNlU29ydGFibGUgYXMgdXNlU29ydGFibGUyIH0gZnJvbSBcIkBkbmQta2l0L3JlYWN0L3NvcnRhYmxlXCI7XG5cbi8vIGxpYi9hY2N1bXVsYXRlLXRyYW5zZm9ybS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmZ1bmN0aW9uIGFjY3VtdWxhdGVUcmFuc2Zvcm0oZWwpIHtcbiAgbGV0IG1hdHJpeCA9IG5ldyBET01NYXRyaXhSZWFkT25seSgpO1xuICBsZXQgbiA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gIHdoaWxlIChuICYmIG4gIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIGNvbnN0IHQgPSBnZXRDb21wdXRlZFN0eWxlKG4pLnRyYW5zZm9ybTtcbiAgICBpZiAodCAmJiB0ICE9PSBcIm5vbmVcIikge1xuICAgICAgbWF0cml4ID0gbmV3IERPTU1hdHJpeFJlYWRPbmx5KHQpLm11bHRpcGx5KG1hdHJpeCk7XG4gICAgfVxuICAgIG4gPSBuLnBhcmVudEVsZW1lbnQ7XG4gIH1cbiAgcmV0dXJuIHsgc2NhbGVYOiBtYXRyaXguYSwgc2NhbGVZOiBtYXRyaXguZCB9O1xufVxuXG4vLyBsaWIvdXNlLWNvbnRleHQtc3RvcmUudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdG9yZSBhcyB1c2VTdG9yZTIgfSBmcm9tIFwienVzdGFuZFwiO1xuaW1wb3J0IHsgdXNlU2hhbGxvdyB9IGZyb20gXCJ6dXN0YW5kL3JlYWN0L3NoYWxsb3dcIjtcbmZ1bmN0aW9uIHVzZUNvbnRleHRTdG9yZShjb250ZXh0LCBzZWxlY3Rvcikge1xuICBjb25zdCBzdG9yZSA9IHVzZUNvbnRleHQ0KGNvbnRleHQpO1xuICBpZiAoIXN0b3JlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlQ29udGV4dFN0b3JlIG11c3QgYmUgdXNlZCBpbnNpZGUgY29udGV4dFwiKTtcbiAgfVxuICByZXR1cm4gdXNlU3RvcmUyKHN0b3JlLCB1c2VTaGFsbG93KHNlbGVjdG9yKSk7XG59XG5cbi8vIGxpYi9kbmQvdXNlLW9uLWRyYWctZmluaXNoZWQudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazYgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VPbkRyYWdGaW5pc2hlZCA9IChjYiwgZGVwcyA9IFtdKSA9PiB7XG4gIGNvbnN0IGFwcFN0b3JlID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgcmV0dXJuIHVzZUNhbGxiYWNrNigoKSA9PiB7XG4gICAgbGV0IGRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzRHJhZ2dpbmcgPSAoaXNEcmFnZ2luZzIpID0+IHtcbiAgICAgIGlmIChpc0RyYWdnaW5nMikge1xuICAgICAgICBjYihmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjYih0cnVlKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGlmIChkaXNwb3NlKSBkaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBpc0RyYWdnaW5nID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZS51aS5pc0RyYWdnaW5nO1xuICAgIHByb2Nlc3NEcmFnZ2luZyhpc0RyYWdnaW5nKTtcbiAgICBpZiAoaXNEcmFnZ2luZykge1xuICAgICAgZGlzcG9zZSA9IGFwcFN0b3JlLnN1YnNjcmliZShcbiAgICAgICAgKHMpID0+IHMuc3RhdGUudWkuaXNEcmFnZ2luZyxcbiAgICAgICAgKGlzRHJhZ2dpbmcyKSA9PiB7XG4gICAgICAgICAgcHJvY2Vzc0RyYWdnaW5nKGlzRHJhZ2dpbmcyKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpc3Bvc2U7XG4gIH0sIFthcHBTdG9yZSwgLi4uZGVwc10pO1xufTtcblxuLy8gY29tcG9uZW50cy9EcmFnZ2FibGVDb21wb25lbnQvaW5kZXgudHN4XG5pbXBvcnQgeyBGcmFnbWVudCBhcyBGcmFnbWVudDYsIGpzeCBhcyBqc3gyMCwganN4cyBhcyBqc3hzOSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTE2ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiRHJhZ2dhYmxlQ29tcG9uZW50XCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDEwKTtcbnZhciBERUJVRzIgPSBmYWxzZTtcbnZhciBzcGFjZSA9IDg7XG52YXIgYWN0aW9uc092ZXJsYXlUb3AgPSBzcGFjZSAqIDYuNTtcbnZhciBhY3Rpb25zVG9wID0gLShhY3Rpb25zT3ZlcmxheVRvcCAtIDgpO1xudmFyIGFjdGlvbnNTaWRlID0gc3BhY2U7XG52YXIgRGVmYXVsdEFjdGlvbkJhciA9ICh7XG4gIGxhYmVsLFxuICBjaGlsZHJlbixcbiAgcGFyZW50QWN0aW9uXG59KSA9PiAvKiBAX19QVVJFX18gKi8ganN4czkoQWN0aW9uQmFyLCB7IGNoaWxkcmVuOiBbXG4gIC8qIEBfX1BVUkVfXyAqLyBqc3hzOShBY3Rpb25CYXIuR3JvdXAsIHsgY2hpbGRyZW46IFtcbiAgICBwYXJlbnRBY3Rpb24sXG4gICAgbGFiZWwgJiYgLyogQF9fUFVSRV9fICovIGpzeDIwKEFjdGlvbkJhci5MYWJlbCwgeyBsYWJlbCB9KVxuICBdIH0pLFxuICAvKiBAX19QVVJFX18gKi8ganN4MjAoQWN0aW9uQmFyLkdyb3VwLCB7IGNoaWxkcmVuIH0pXG5dIH0pO1xudmFyIERlZmF1bHRPdmVybGF5ID0gKHtcbiAgY2hpbGRyZW5cbn0pID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gyMChGcmFnbWVudDYsIHsgY2hpbGRyZW4gfSk7XG52YXIgRHJhZ2dhYmxlQ29tcG9uZW50ID0gKHtcbiAgY2hpbGRyZW4sXG4gIGRlcHRoLFxuICBjb21wb25lbnRUeXBlLFxuICBpZCxcbiAgaW5kZXgsXG4gIHpvbmVDb21wb3VuZCxcbiAgaXNMb2FkaW5nID0gZmFsc2UsXG4gIGlzU2VsZWN0ZWQgPSBmYWxzZSxcbiAgZGVidWcsXG4gIGxhYmVsLFxuICBhdXRvRHJhZ0F4aXMsXG4gIHVzZXJEcmFnQXhpcyxcbiAgaW5Ecm9wcGFibGVab25lID0gdHJ1ZVxufSkgPT4ge1xuICBjb25zdCB6b29tID0gdXNlQXBwU3RvcmUoXG4gICAgKHMpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiAoKF9hID0gcy5zZWxlY3RlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5wcm9wcy5pZCkgPT09IGlkID8gcy56b29tQ29uZmlnLnpvb20gOiAxO1xuICAgIH1cbiAgKTtcbiAgY29uc3Qgb3ZlcnJpZGVzID0gdXNlQXBwU3RvcmUoKHMpID0+IHMub3ZlcnJpZGVzKTtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBTdG9yZSgocykgPT4gcy5kaXNwYXRjaCk7XG4gIGNvbnN0IGlmcmFtZSA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLmlmcmFtZSk7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQ1KGRyb3Bab25lQ29udGV4dCk7XG4gIGNvbnN0IFtsb2NhbFpvbmVzLCBzZXRMb2NhbFpvbmVzXSA9IHVzZVN0YXRlMTAoe30pO1xuICBjb25zdCByZWdpc3RlckxvY2FsWm9uZSA9IHVzZUNhbGxiYWNrNyhcbiAgICAoem9uZUNvbXBvdW5kMiwgYWN0aXZlKSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICAoX2EgPSBjdHggPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC5yZWdpc3RlckxvY2FsWm9uZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoY3R4LCB6b25lQ29tcG91bmQyLCBhY3RpdmUpO1xuICAgICAgc2V0TG9jYWxab25lcygob2JqKSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvYmopLCB7XG4gICAgICAgIFt6b25lQ29tcG91bmQyXTogYWN0aXZlXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbc2V0TG9jYWxab25lc11cbiAgKTtcbiAgY29uc3QgdW5yZWdpc3RlckxvY2FsWm9uZSA9IHVzZUNhbGxiYWNrNyhcbiAgICAoem9uZUNvbXBvdW5kMikgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgKF9hID0gY3R4ID09IG51bGwgPyB2b2lkIDAgOiBjdHgudW5yZWdpc3RlckxvY2FsWm9uZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoY3R4LCB6b25lQ29tcG91bmQyKTtcbiAgICAgIHNldExvY2FsWm9uZXMoKG9iaikgPT4ge1xuICAgICAgICBjb25zdCBuZXdMb2NhbFpvbmVzID0gX19zcHJlYWRWYWx1ZXMoe30sIG9iaik7XG4gICAgICAgIGRlbGV0ZSBuZXdMb2NhbFpvbmVzW3pvbmVDb21wb3VuZDJdO1xuICAgICAgICByZXR1cm4gbmV3TG9jYWxab25lcztcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3NldExvY2FsWm9uZXNdXG4gICk7XG4gIGNvbnN0IGNvbnRhaW5zQWN0aXZlWm9uZSA9IE9iamVjdC52YWx1ZXMobG9jYWxab25lcykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCA+IDA7XG4gIGNvbnN0IHBhdGggPSB1c2VBcHBTdG9yZSh1c2VTaGFsbG93MigocykgPT4ge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0gcy5zdGF0ZS5pbmRleGVzLm5vZGVzW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnBhdGg7XG4gIH0pKTtcbiAgY29uc3QgcGVybWlzc2lvbnMgPSB1c2VBcHBTdG9yZShcbiAgICB1c2VTaGFsbG93MigocykgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oeyBpbmRleCwgem9uZTogem9uZUNvbXBvdW5kIH0sIHMuc3RhdGUpO1xuICAgICAgcmV0dXJuIHMucGVybWlzc2lvbnMuZ2V0UGVybWlzc2lvbnMoeyBpdGVtIH0pO1xuICAgIH0pXG4gICk7XG4gIGNvbnN0IHpvbmVTdG9yZSA9IHVzZUNvbnRleHQ1KFpvbmVTdG9yZUNvbnRleHQpO1xuICBjb25zdCBbZHJhZ0F4aXMsIHNldERyYWdBeGlzXSA9IHVzZVN0YXRlMTAodXNlckRyYWdBeGlzIHx8IGF1dG9EcmFnQXhpcyk7XG4gIGNvbnN0IGR5bmFtaWNDb2xsaXNpb25EZXRlY3RvciA9IHVzZU1lbW81KFxuICAgICgpID0+IGNyZWF0ZUR5bmFtaWNDb2xsaXNpb25EZXRlY3RvcihkcmFnQXhpcyksXG4gICAgW2RyYWdBeGlzXVxuICApO1xuICBjb25zdCB7XG4gICAgcmVmOiBzb3J0YWJsZVJlZixcbiAgICBpc0RyYWdnaW5nOiB0aGlzSXNEcmFnZ2luZyxcbiAgICBzb3J0YWJsZVxuICB9ID0gdXNlU29ydGFibGUyKHtcbiAgICBpZCxcbiAgICBpbmRleCxcbiAgICBncm91cDogem9uZUNvbXBvdW5kLFxuICAgIHR5cGU6IFwiY29tcG9uZW50XCIsXG4gICAgZGF0YToge1xuICAgICAgYXJlYUlkOiBjdHggPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC5hcmVhSWQsXG4gICAgICB6b25lOiB6b25lQ29tcG91bmQsXG4gICAgICBpbmRleCxcbiAgICAgIGNvbXBvbmVudFR5cGUsXG4gICAgICBjb250YWluc0FjdGl2ZVpvbmUsXG4gICAgICBkZXB0aCxcbiAgICAgIHBhdGg6IHBhdGggfHwgW10sXG4gICAgICBpbkRyb3BwYWJsZVpvbmVcbiAgICB9LFxuICAgIGNvbGxpc2lvblByaW9yaXR5OiBkZXB0aCxcbiAgICBjb2xsaXNpb25EZXRlY3RvcjogZHluYW1pY0NvbGxpc2lvbkRldGVjdG9yLFxuICAgIC8vIFwiT3V0IG9mIHRoZSB3YXlcIiB0cmFuc2l0aW9uIGZyb20gcmVhY3QtYmVhdXRpZnVsLWRuZFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICBlYXNpbmc6IFwiY3ViaWMtYmV6aWVyKDAuMiwgMCwgMCwgMSlcIlxuICAgIH0sXG4gICAgZmVlZGJhY2s6IFwiY2xvbmVcIlxuICB9KTtcbiAgdXNlRWZmZWN0MTIoKCkgPT4ge1xuICAgIGNvbnN0IGlzRW5hYmxlZCA9IHpvbmVTdG9yZS5nZXRTdGF0ZSgpLmVuYWJsZWRJbmRleFt6b25lQ29tcG91bmRdO1xuICAgIHNvcnRhYmxlLmRyb3BwYWJsZS5kaXNhYmxlZCA9ICFpc0VuYWJsZWQ7XG4gICAgc29ydGFibGUuZHJhZ2dhYmxlLmRpc2FibGVkID0gIXBlcm1pc3Npb25zLmRyYWc7XG4gICAgY29uc3QgY2xlYW51cCA9IHpvbmVTdG9yZS5zdWJzY3JpYmUoKHMpID0+IHtcbiAgICAgIHNvcnRhYmxlLmRyb3BwYWJsZS5kaXNhYmxlZCA9ICFzLmVuYWJsZWRJbmRleFt6b25lQ29tcG91bmRdO1xuICAgIH0pO1xuICAgIGlmIChyZWYuY3VycmVudCAmJiAhcGVybWlzc2lvbnMuZHJhZykge1xuICAgICAgcmVmLmN1cnJlbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1wdWNrLWRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSByZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcHVjay1kaXNhYmxlZFwiKTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNsZWFudXA7XG4gIH0sIFtwZXJtaXNzaW9ucy5kcmFnLCB6b25lQ29tcG91bmRdKTtcbiAgY29uc3QgcmVmID0gdXNlUmVmMihudWxsKTtcbiAgY29uc3QgcmVmU2V0dGVyID0gdXNlQ2FsbGJhY2s3KFxuICAgIChlbCkgPT4ge1xuICAgICAgc29ydGFibGVSZWYoZWwpO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIHJlZi5jdXJyZW50ID0gZWw7XG4gICAgICB9XG4gICAgfSxcbiAgICBbc29ydGFibGVSZWZdXG4gICk7XG4gIGNvbnN0IFtwb3J0YWxFbCwgc2V0UG9ydGFsRWxdID0gdXNlU3RhdGUxMCgpO1xuICB1c2VFZmZlY3QxMigoKSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgc2V0UG9ydGFsRWwoXG4gICAgICBpZnJhbWUuZW5hYmxlZCA/IChfYSA9IHJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2Eub3duZXJEb2N1bWVudC5ib2R5IDogKF9jID0gKF9iID0gcmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jbG9zZXN0KFwiW2RhdGEtcHVjay1wcmV2aWV3XVwiKSkgIT0gbnVsbCA/IF9jIDogZG9jdW1lbnQuYm9keVxuICAgICk7XG4gIH0sIFtpZnJhbWUuZW5hYmxlZCwgcmVmLmN1cnJlbnRdKTtcbiAgY29uc3QgZ2V0U3R5bGUgPSB1c2VDYWxsYmFjazcoKCkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGlmICghcmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBjb25zdCByZWN0ID0gcmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgZGVlcFNjcm9sbFBvc2l0aW9uID0gZ2V0RGVlcFNjcm9sbFBvc2l0aW9uKHJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBwb3J0YWxDb250YWluZXJFbCA9IGlmcmFtZS5lbmFibGVkID8gbnVsbCA6IChfYSA9IHJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2xvc2VzdChcIltkYXRhLXB1Y2stcHJldmlld11cIik7XG4gICAgY29uc3QgcG9ydGFsQ29udGFpbmVyUmVjdCA9IHBvcnRhbENvbnRhaW5lckVsID09IG51bGwgPyB2b2lkIDAgOiBwb3J0YWxDb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBwb3J0YWxTY3JvbGwgPSBwb3J0YWxDb250YWluZXJFbCA/IGdldERlZXBTY3JvbGxQb3NpdGlvbihwb3J0YWxDb250YWluZXJFbCkgOiB7IHg6IDAsIHk6IDAgfTtcbiAgICBjb25zdCBzY3JvbGwgPSB7XG4gICAgICB4OiBkZWVwU2Nyb2xsUG9zaXRpb24ueCAtIHBvcnRhbFNjcm9sbC54IC0gKChfYiA9IHBvcnRhbENvbnRhaW5lclJlY3QgPT0gbnVsbCA/IHZvaWQgMCA6IHBvcnRhbENvbnRhaW5lclJlY3QubGVmdCkgIT0gbnVsbCA/IF9iIDogMCksXG4gICAgICB5OiBkZWVwU2Nyb2xsUG9zaXRpb24ueSAtIHBvcnRhbFNjcm9sbC55IC0gKChfYyA9IHBvcnRhbENvbnRhaW5lclJlY3QgPT0gbnVsbCA/IHZvaWQgMCA6IHBvcnRhbENvbnRhaW5lclJlY3QudG9wKSAhPSBudWxsID8gX2MgOiAwKVxuICAgIH07XG4gICAgY29uc3QgdW50cmFuc2Zvcm1lZCA9IHtcbiAgICAgIGhlaWdodDogcmVmLmN1cnJlbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgd2lkdGg6IHJlZi5jdXJyZW50Lm9mZnNldFdpZHRoXG4gICAgfTtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBhY2N1bXVsYXRlVHJhbnNmb3JtKHJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBzdHlsZTIgPSB7XG4gICAgICBsZWZ0OiBgJHsocmVjdC5sZWZ0ICsgc2Nyb2xsLngpIC8gdHJhbnNmb3JtLnNjYWxlWH1weGAsXG4gICAgICB0b3A6IGAkeyhyZWN0LnRvcCArIHNjcm9sbC55KSAvIHRyYW5zZm9ybS5zY2FsZVl9cHhgLFxuICAgICAgaGVpZ2h0OiBgJHt1bnRyYW5zZm9ybWVkLmhlaWdodH1weGAsXG4gICAgICB3aWR0aDogYCR7dW50cmFuc2Zvcm1lZC53aWR0aH1weGBcbiAgICB9O1xuICAgIHJldHVybiBzdHlsZTI7XG4gIH0sIFtyZWYuY3VycmVudF0pO1xuICBjb25zdCBbc3R5bGUsIHNldFN0eWxlXSA9IHVzZVN0YXRlMTAoKTtcbiAgY29uc3Qgc3luYyA9IHVzZUNhbGxiYWNrNygoKSA9PiB7XG4gICAgc2V0U3R5bGUoZ2V0U3R5bGUoKSk7XG4gIH0sIFtyZWYuY3VycmVudCwgaWZyYW1lXSk7XG4gIHVzZUVmZmVjdDEyKCgpID0+IHtcbiAgICBpZiAocmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHN5bmMpO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYuY3VycmVudCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW3JlZi5jdXJyZW50XSk7XG4gIGNvbnN0IHJlZ2lzdGVyTm9kZSA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLm5vZGVzLnJlZ2lzdGVyTm9kZSk7XG4gIGNvbnN0IGhpZGVPdmVybGF5ID0gdXNlQ2FsbGJhY2s3KCgpID0+IHtcbiAgICBzZXRJc1Zpc2libGUoZmFsc2UpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHNob3dPdmVybGF5ID0gdXNlQ2FsbGJhY2s3KCgpID0+IHtcbiAgICBzZXRJc1Zpc2libGUodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0MTIoKCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICByZWdpc3Rlck5vZGUoaWQsIHtcbiAgICAgIG1ldGhvZHM6IHsgc3luYywgc2hvd092ZXJsYXksIGhpZGVPdmVybGF5IH0sXG4gICAgICBlbGVtZW50OiAoX2EgPSByZWYuY3VycmVudCkgIT0gbnVsbCA/IF9hIDogbnVsbFxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZWdpc3Rlck5vZGUoaWQsIHtcbiAgICAgICAgbWV0aG9kczoge1xuICAgICAgICAgIHN5bmM6ICgpID0+IG51bGwsXG4gICAgICAgICAgaGlkZU92ZXJsYXk6ICgpID0+IG51bGwsXG4gICAgICAgICAgc2hvd092ZXJsYXk6ICgpID0+IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZWxlbWVudDogbnVsbFxuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW2lkLCB6b25lQ29tcG91bmQsIGluZGV4LCBjb21wb25lbnRUeXBlLCBzeW5jXSk7XG4gIGNvbnN0IEN1c3RvbUFjdGlvbkJhciA9IHVzZU1lbW81KFxuICAgICgpID0+IG92ZXJyaWRlcy5hY3Rpb25CYXIgfHwgRGVmYXVsdEFjdGlvbkJhcixcbiAgICBbb3ZlcnJpZGVzLmFjdGlvbkJhcl1cbiAgKTtcbiAgY29uc3QgQ3VzdG9tT3ZlcmxheSA9IHVzZU1lbW81KFxuICAgICgpID0+IG92ZXJyaWRlcy5jb21wb25lbnRPdmVybGF5IHx8IERlZmF1bHRPdmVybGF5LFxuICAgIFtvdmVycmlkZXMuY29tcG9uZW50T3ZlcmxheV1cbiAgKTtcbiAgY29uc3Qgb25DbGljayA9IHVzZUNhbGxiYWNrNyhcbiAgICAoZSkgPT4ge1xuICAgICAgY29uc3QgZWwgPSBlLnRhcmdldDtcbiAgICAgIGlmICghZWwuY2xvc2VzdChcIltkYXRhLXB1Y2stb3ZlcmxheS1wb3J0YWxdXCIpKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwic2V0VWlcIixcbiAgICAgICAgdWk6IHtcbiAgICAgICAgICBpdGVtU2VsZWN0b3I6IHsgaW5kZXgsIHpvbmU6IHpvbmVDb21wb3VuZCB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2luZGV4LCB6b25lQ29tcG91bmQsIGlkXVxuICApO1xuICBjb25zdCBhcHBTdG9yZSA9IHVzZUFwcFN0b3JlQXBpKCk7XG4gIGNvbnN0IG9uU2VsZWN0UGFyZW50ID0gdXNlQ2FsbGJhY2s3KCgpID0+IHtcbiAgICBjb25zdCB7IG5vZGVzLCB6b25lcyB9ID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZS5pbmRleGVzO1xuICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpZF07XG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IChub2RlID09IG51bGwgPyB2b2lkIDAgOiBub2RlLnBhcmVudElkKSA/IG5vZGVzW25vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IG5vZGUucGFyZW50SWRdIDogbnVsbDtcbiAgICBpZiAoIXBhcmVudE5vZGUgfHwgIW5vZGUucGFyZW50SWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50Wm9uZUNvbXBvdW5kID0gYCR7cGFyZW50Tm9kZS5wYXJlbnRJZH06JHtwYXJlbnROb2RlLnpvbmV9YDtcbiAgICBjb25zdCBwYXJlbnRJbmRleCA9IHpvbmVzW3BhcmVudFpvbmVDb21wb3VuZF0uY29udGVudElkcy5pbmRleE9mKFxuICAgICAgbm9kZS5wYXJlbnRJZFxuICAgICk7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJzZXRVaVwiLFxuICAgICAgdWk6IHtcbiAgICAgICAgaXRlbVNlbGVjdG9yOiB7XG4gICAgICAgICAgem9uZTogcGFyZW50Wm9uZUNvbXBvdW5kLFxuICAgICAgICAgIGluZGV4OiBwYXJlbnRJbmRleFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtjdHgsIHBhdGhdKTtcbiAgY29uc3Qgb25EdXBsaWNhdGUgPSB1c2VDYWxsYmFjazcoKCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiZHVwbGljYXRlXCIsXG4gICAgICBzb3VyY2VJbmRleDogaW5kZXgsXG4gICAgICBzb3VyY2Vab25lOiB6b25lQ29tcG91bmRcbiAgICB9KTtcbiAgfSwgW2luZGV4LCB6b25lQ29tcG91bmRdKTtcbiAgY29uc3Qgb25EZWxldGUgPSB1c2VDYWxsYmFjazcoKCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwicmVtb3ZlXCIsXG4gICAgICBpbmRleCxcbiAgICAgIHpvbmU6IHpvbmVDb21wb3VuZFxuICAgIH0pO1xuICB9LCBbaW5kZXgsIHpvbmVDb21wb3VuZF0pO1xuICBjb25zdCBbaG92ZXIsIHNldEhvdmVyXSA9IHVzZVN0YXRlMTAoZmFsc2UpO1xuICBjb25zdCBpbmRpY2F0aXZlSG92ZXIgPSB1c2VDb250ZXh0U3RvcmUoXG4gICAgWm9uZVN0b3JlQ29udGV4dCxcbiAgICAocykgPT4gcy5ob3ZlcmluZ0NvbXBvbmVudCA9PT0gaWRcbiAgKTtcbiAgdXNlRWZmZWN0MTIoKCkgPT4ge1xuICAgIGlmICghcmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZWwgPSByZWYuY3VycmVudDtcbiAgICBjb25zdCBfb25Nb3VzZU92ZXIgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgdXNlcklzRHJhZ2dpbmcgPSAhIXpvbmVTdG9yZS5nZXRTdGF0ZSgpLmRyYWdnZWRJdGVtO1xuICAgICAgaWYgKHVzZXJJc0RyYWdnaW5nKSB7XG4gICAgICAgIGlmICh0aGlzSXNEcmFnZ2luZykge1xuICAgICAgICAgIHNldEhvdmVyKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEhvdmVyKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SG92ZXIodHJ1ZSk7XG4gICAgICB9XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG4gICAgY29uc3QgX29uTW91c2VPdXQgPSAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHNldEhvdmVyKGZhbHNlKTtcbiAgICB9O1xuICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtcHVjay1jb21wb25lbnRcIiwgaWQpO1xuICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtcHVjay1kbmRcIiwgaWQpO1xuICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkNsaWNrKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIF9vbk1vdXNlT3Zlcik7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIF9vbk1vdXNlT3V0KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wdWNrLWNvbXBvbmVudFwiKTtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcHVjay1kbmRcIik7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DbGljayk7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIF9vbk1vdXNlT3Zlcik7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgX29uTW91c2VPdXQpO1xuICAgIH07XG4gIH0sIFtcbiAgICByZWYuY3VycmVudCxcbiAgICAvLyBSZW1vdW50IGF0dHJpYnV0ZXMgaWYgdGhlIGVsZW1lbnQgY2hhbmdlc1xuICAgIG9uQ2xpY2ssXG4gICAgY29udGFpbnNBY3RpdmVab25lLFxuICAgIHpvbmVDb21wb3VuZCxcbiAgICBpZCxcbiAgICB0aGlzSXNEcmFnZ2luZyxcbiAgICBpbkRyb3BwYWJsZVpvbmVcbiAgXSk7XG4gIGNvbnN0IFtpc1Zpc2libGUsIHNldElzVmlzaWJsZV0gPSB1c2VTdGF0ZTEwKGZhbHNlKTtcbiAgY29uc3QgW2RyYWdGaW5pc2hlZCwgc2V0RHJhZ0ZpbmlzaGVkXSA9IHVzZVN0YXRlMTAodHJ1ZSk7XG4gIGNvbnN0IFtfLCBzdGFydFRyYW5zaXRpb25dID0gdXNlVHJhbnNpdGlvbigpO1xuICB1c2VFZmZlY3QxMigoKSA9PiB7XG4gICAgc3RhcnRUcmFuc2l0aW9uKCgpID0+IHtcbiAgICAgIGlmIChob3ZlciB8fCBpbmRpY2F0aXZlSG92ZXIgfHwgaXNTZWxlY3RlZCkge1xuICAgICAgICBzeW5jKCk7XG4gICAgICAgIHNldElzVmlzaWJsZSh0cnVlKTtcbiAgICAgICAgc2V0VGhpc1dhc0RyYWdnaW5nKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldElzVmlzaWJsZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtob3ZlciwgaW5kaWNhdGl2ZUhvdmVyLCBpc1NlbGVjdGVkLCBpZnJhbWVdKTtcbiAgY29uc3QgW3RoaXNXYXNEcmFnZ2luZywgc2V0VGhpc1dhc0RyYWdnaW5nXSA9IHVzZVN0YXRlMTAoZmFsc2UpO1xuICBjb25zdCBvbkRyYWdGaW5pc2hlZCA9IHVzZU9uRHJhZ0ZpbmlzaGVkKChmaW5pc2hlZCkgPT4ge1xuICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgc3RhcnRUcmFuc2l0aW9uKCgpID0+IHtcbiAgICAgICAgc3luYygpO1xuICAgICAgICBzZXREcmFnRmluaXNoZWQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RHJhZ0ZpbmlzaGVkKGZhbHNlKTtcbiAgICB9XG4gIH0pO1xuICB1c2VFZmZlY3QxMigoKSA9PiB7XG4gICAgaWYgKHRoaXNJc0RyYWdnaW5nKSB7XG4gICAgICBzZXRUaGlzV2FzRHJhZ2dpbmcodHJ1ZSk7XG4gICAgfVxuICB9LCBbdGhpc0lzRHJhZ2dpbmddKTtcbiAgdXNlRWZmZWN0MTIoKCkgPT4ge1xuICAgIGlmICh0aGlzV2FzRHJhZ2dpbmcpIHJldHVybiBvbkRyYWdGaW5pc2hlZCgpO1xuICB9LCBbdGhpc1dhc0RyYWdnaW5nLCBvbkRyYWdGaW5pc2hlZF0pO1xuICBjb25zdCBzeW5jQWN0aW9uc1Bvc2l0aW9uID0gdXNlQ2FsbGJhY2s3KFxuICAgIChlbCkgPT4ge1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICBjb25zdCBkaWZmTGVmdCA9IHJlY3QueDtcbiAgICAgICAgICBjb25zdCBleGNlZWRzQm91bmRzTGVmdCA9IGRpZmZMZWZ0IDwgMDtcbiAgICAgICAgICBjb25zdCBkaWZmVG9wID0gcmVjdC55O1xuICAgICAgICAgIGNvbnN0IGV4Y2VlZHNCb3VuZHNUb3AgPSBkaWZmVG9wIDwgMDtcbiAgICAgICAgICBpZiAoZXhjZWVkc0JvdW5kc0xlZnQpIHtcbiAgICAgICAgICAgIGVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwibGVmdCB0b3BcIjtcbiAgICAgICAgICAgIGVsLnN0eWxlLmxlZnQgPSBcIjBweFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZXhjZWVkc0JvdW5kc1RvcCkge1xuICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gXCIxMnB4XCI7XG4gICAgICAgICAgICBpZiAoIWV4Y2VlZHNCb3VuZHNMZWZ0KSB7XG4gICAgICAgICAgICAgIGVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwicmlnaHQgdG9wXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbem9vbV1cbiAgKTtcbiAgdXNlRWZmZWN0MTIoKCkgPT4ge1xuICAgIGlmICh1c2VyRHJhZ0F4aXMpIHtcbiAgICAgIHNldERyYWdBeGlzKHVzZXJEcmFnQXhpcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHJlZi5jdXJyZW50KTtcbiAgICAgIGlmIChjb21wdXRlZFN0eWxlLmRpc3BsYXkgPT09IFwiaW5saW5lXCIgfHwgY29tcHV0ZWRTdHlsZS5kaXNwbGF5ID09PSBcImlubGluZS1ibG9ja1wiKSB7XG4gICAgICAgIHNldERyYWdBeGlzKFwieFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXREcmFnQXhpcyhhdXRvRHJhZ0F4aXMpO1xuICB9LCBbcmVmLCB1c2VyRHJhZ0F4aXMsIGF1dG9EcmFnQXhpc10pO1xuICBjb25zdCBwYXJlbnRBY3Rpb24gPSB1c2VNZW1vNShcbiAgICAoKSA9PiAoY3R4ID09IG51bGwgPyB2b2lkIDAgOiBjdHguYXJlYUlkKSAmJiAoY3R4ID09IG51bGwgPyB2b2lkIDAgOiBjdHguYXJlYUlkKSAhPT0gXCJyb290XCIgJiYgLyogQF9fUFVSRV9fICovIGpzeDIwKEFjdGlvbkJhci5BY3Rpb24sIHsgb25DbGljazogb25TZWxlY3RQYXJlbnQsIGxhYmVsOiBcIlNlbGVjdCBwYXJlbnRcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMChDb3JuZXJMZWZ0VXAsIHsgc2l6ZTogMTYgfSkgfSksXG4gICAgW2N0eCA9PSBudWxsID8gdm9pZCAwIDogY3R4LmFyZWFJZF1cbiAgKTtcbiAgY29uc3QgbmV4dENvbnRleHRWYWx1ZSA9IHVzZU1lbW81KFxuICAgICgpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGN0eCksIHtcbiAgICAgIGFyZWFJZDogaWQsXG4gICAgICB6b25lQ29tcG91bmQsXG4gICAgICBpbmRleCxcbiAgICAgIGRlcHRoOiBkZXB0aCArIDEsXG4gICAgICByZWdpc3RlckxvY2FsWm9uZSxcbiAgICAgIHVucmVnaXN0ZXJMb2NhbFpvbmVcbiAgICB9KSxcbiAgICBbXG4gICAgICBjdHgsXG4gICAgICBpZCxcbiAgICAgIHpvbmVDb21wb3VuZCxcbiAgICAgIGluZGV4LFxuICAgICAgZGVwdGgsXG4gICAgICByZWdpc3RlckxvY2FsWm9uZSxcbiAgICAgIHVucmVnaXN0ZXJMb2NhbFpvbmVcbiAgICBdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czkoRHJvcFpvbmVQcm92aWRlciwgeyB2YWx1ZTogbmV4dENvbnRleHRWYWx1ZSwgY2hpbGRyZW46IFtcbiAgICBkcmFnRmluaXNoZWQgJiYgaXNWaXNpYmxlICYmIGNyZWF0ZVBvcnRhbDIoXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4czkoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTE2KHtcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQsXG4gICAgICAgICAgICBpc0RyYWdnaW5nOiB0aGlzSXNEcmFnZ2luZyxcbiAgICAgICAgICAgIGhvdmVyOiBob3ZlciB8fCBpbmRpY2F0aXZlSG92ZXJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBzdHlsZTogX19zcHJlYWRWYWx1ZXMoe30sIHN0eWxlKSxcbiAgICAgICAgICBcImRhdGEtcHVjay1vdmVybGF5XCI6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIGRlYnVnLFxuICAgICAgICAgICAgaXNMb2FkaW5nICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyMChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTYoXCJsb2FkaW5nT3ZlcmxheVwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMChMb2FkZXIsIHt9KSB9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyMChcbiAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTYoXCJhY3Rpb25zT3ZlcmxheVwiKSxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgdG9wOiBhY3Rpb25zT3ZlcmxheVRvcCAvIHpvb21cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjAoXG4gICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTE2KFwiYWN0aW9uc1wiKSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGBzY2FsZSgkezEgLyB6b29tfWAsXG4gICAgICAgICAgICAgICAgICAgICAgdG9wOiBhY3Rpb25zVG9wIC8gem9vbSxcbiAgICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogYWN0aW9uc1NpZGUsXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBhY3Rpb25zU2lkZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZWY6IHN5bmNBY3Rpb25zUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czkoXG4gICAgICAgICAgICAgICAgICAgICAgQ3VzdG9tQWN0aW9uQmFyLFxuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBERUJVRzIgPyBpZCA6IGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbnMuZHVwbGljYXRlICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyMChBY3Rpb25CYXIuQWN0aW9uLCB7IG9uQ2xpY2s6IG9uRHVwbGljYXRlLCBsYWJlbDogXCJEdXBsaWNhdGVcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMChDb3B5LCB7IHNpemU6IDE2IH0pIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9ucy5kZWxldGUgJiYgLyogQF9fUFVSRV9fICovIGpzeDIwKEFjdGlvbkJhci5BY3Rpb24sIHsgb25DbGljazogb25EZWxldGUsIGxhYmVsOiBcIkRlbGV0ZVwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIwKFRyYXNoLCB7IHNpemU6IDE2IH0pIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNihcIm92ZXJsYXlXcmFwcGVyXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIwKFxuICAgICAgICAgICAgICBDdXN0b21PdmVybGF5LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50SWQ6IGlkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFR5cGUsXG4gICAgICAgICAgICAgICAgaG92ZXIsXG4gICAgICAgICAgICAgICAgaXNTZWxlY3RlZCxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNihcIm92ZXJsYXlcIikgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKSB9KVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHBvcnRhbEVsIHx8IGRvY3VtZW50LmJvZHlcbiAgICApLFxuICAgIGNoaWxkcmVuKHJlZlNldHRlcilcbiAgXSB9KTtcbn07XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9Ecm9wWm9uZS9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDExID0geyBcIkRyb3Bab25lXCI6IFwiX0Ryb3Bab25lXzFpMnN2XzFcIiwgXCJEcm9wWm9uZS0taGFzQ2hpbGRyZW5cIjogXCJfRHJvcFpvbmUtLWhhc0NoaWxkcmVuXzFpMnN2XzExXCIsIFwiRHJvcFpvbmUtLWlzQXJlYVNlbGVjdGVkXCI6IFwiX0Ryb3Bab25lLS1pc0FyZWFTZWxlY3RlZF8xaTJzdl8yNFwiLCBcIkRyb3Bab25lLS1ob3ZlcmluZ092ZXJBcmVhXCI6IFwiX0Ryb3Bab25lLS1ob3ZlcmluZ092ZXJBcmVhXzFpMnN2XzI1XCIsIFwiRHJvcFpvbmUtLWlzUm9vdFpvbmVcIjogXCJfRHJvcFpvbmUtLWlzUm9vdFpvbmVfMWkyc3ZfMjVcIiwgXCJEcm9wWm9uZS0taXNEZXN0aW5hdGlvblwiOiBcIl9Ecm9wWm9uZS0taXNEZXN0aW5hdGlvbl8xaTJzdl8zNVwiLCBcIkRyb3Bab25lLWl0ZW1cIjogXCJfRHJvcFpvbmUtaXRlbV8xaTJzdl80N1wiLCBcIkRyb3Bab25lLWhpdGJveFwiOiBcIl9Ecm9wWm9uZS1oaXRib3hfMWkyc3ZfNTFcIiwgXCJEcm9wWm9uZS0taXNFbmFibGVkXCI6IFwiX0Ryb3Bab25lLS1pc0VuYWJsZWRfMWkyc3ZfNTlcIiwgXCJEcm9wWm9uZS0taXNBbmltYXRpbmdcIjogXCJfRHJvcFpvbmUtLWlzQW5pbWF0aW5nXzFpMnN2XzY4XCIgfTtcblxuLy8gY29tcG9uZW50cy9Ecm9wWm9uZS9pbmRleC50c3hcbmltcG9ydCB7IHVzZURyb3BwYWJsZSBhcyB1c2VEcm9wcGFibGUyIH0gZnJvbSBcIkBkbmQta2l0L3JlYWN0XCI7XG5cbi8vIGNvbXBvbmVudHMvRHJhd2VyL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL0RyYXdlci9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDEyID0geyBcIkRyYXdlclwiOiBcIl9EcmF3ZXJfcGw3ejBfMVwiLCBcIkRyYXdlci1kcmFnZ2FibGVcIjogXCJfRHJhd2VyLWRyYWdnYWJsZV9wbDd6MF84XCIsIFwiRHJhd2VyLWRyYWdnYWJsZUJnXCI6IFwiX0RyYXdlci1kcmFnZ2FibGVCZ19wbDd6MF8xMlwiLCBcIkRyYXdlckl0ZW0tZHJhZ2dhYmxlXCI6IFwiX0RyYXdlckl0ZW0tZHJhZ2dhYmxlX3BsN3owXzIyXCIsIFwiRHJhd2VySXRlbS0tZGlzYWJsZWRcIjogXCJfRHJhd2VySXRlbS0tZGlzYWJsZWRfcGw3ejBfMzVcIiwgXCJEcmF3ZXJJdGVtXCI6IFwiX0RyYXdlckl0ZW1fcGw3ejBfMjJcIiwgXCJEcmF3ZXItLWlzRHJhZ2dpbmdGcm9tXCI6IFwiX0RyYXdlci0taXNEcmFnZ2luZ0Zyb21fcGw3ejBfNDVcIiwgXCJEcmF3ZXJJdGVtLW5hbWVcIjogXCJfRHJhd2VySXRlbS1uYW1lX3BsN3owXzYzXCIgfTtcblxuLy8gY29tcG9uZW50cy9EcmF3ZXIvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VNZW1vIGFzIHVzZU1lbW83LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEyIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNvbXBvbmVudHMvRHJhZ0Ryb3BDb250ZXh0L2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IERyYWdEcm9wUHJvdmlkZXIgYXMgRHJhZ0Ryb3BQcm92aWRlcjIgfSBmcm9tIFwiQGRuZC1raXQvcmVhY3RcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDQsXG4gIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrOCxcbiAgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0NixcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDEzLFxuICB1c2VNZW1vIGFzIHVzZU1lbW82LFxuICB1c2VSZWYgYXMgdXNlUmVmMyxcbiAgdXNlU3RhdGUgYXMgdXNlU3RhdGUxMVxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEF1dG9TY3JvbGxlciwgZGVmYXVsdFByZXNldCB9IGZyb20gXCJAZG5kLWtpdC9kb21cIjtcblxuLy8gbGliL2RuZC9OZXN0ZWREcm9wcGFibGVQbHVnaW4udHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwiQGRuZC1raXQvYWJzdHJhY3RcIjtcblxuLy8gbGliL3Rocm90dGxlLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuZnVuY3Rpb24gdGltZW91dDIoY2FsbGJhY2ssIGR1cmF0aW9uKSB7XG4gIGNvbnN0IGlkID0gc2V0VGltZW91dChjYWxsYmFjaywgZHVyYXRpb24pO1xuICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KGlkKTtcbn1cbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIGxpbWl0KSB7XG4gIGNvbnN0IHRpbWUgPSAoKSA9PiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgbGV0IGNhbmNlbDtcbiAgbGV0IGxhc3RSYW4gPSAwO1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IG5vdyA9IHRpbWUoKTtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcbiAgICBpZiAobm93IC0gbGFzdFJhbiA+PSBsaW1pdCkge1xuICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGxhc3RSYW4gPSBub3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCA9PSBudWxsID8gdm9pZCAwIDogY2FuY2VsKCk7XG4gICAgICBjYW5jZWwgPSB0aW1lb3V0MigoKSA9PiB7XG4gICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGxhc3RSYW4gPSB0aW1lKCk7XG4gICAgICB9LCBsaW1pdCAtIChub3cgLSBsYXN0UmFuKSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBsaWIvZ2V0LWZyYW1lLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGdldEZyYW1lID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICBsZXQgZnJhbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1mcmFtZVwiKTtcbiAgaWYgKChmcmFtZUVsID09IG51bGwgPyB2b2lkIDAgOiBmcmFtZUVsLnRhZ05hbWUpID09PSBcIklGUkFNRVwiKSB7XG4gICAgcmV0dXJuIGZyYW1lRWwuY29udGVudERvY3VtZW50IHx8IGRvY3VtZW50O1xuICB9XG4gIHJldHVybiAoZnJhbWVFbCA9PSBudWxsID8gdm9pZCAwIDogZnJhbWVFbC5vd25lckRvY3VtZW50KSB8fCBkb2N1bWVudDtcbn07XG5cbi8vIGxpYi9nbG9iYWwtcG9zaXRpb24udHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgR2xvYmFsUG9zaXRpb24gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHRhcmdldCwgb3JpZ2luYWwpIHtcbiAgICB0aGlzLnNjYWxlRmFjdG9yID0gMTtcbiAgICB0aGlzLmZyYW1lRWwgPSBudWxsO1xuICAgIHRoaXMuZnJhbWVSZWN0ID0gbnVsbDtcbiAgICB2YXIgX2E7XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgdGhpcy5vcmlnaW5hbCA9IG9yaWdpbmFsO1xuICAgIHRoaXMuZnJhbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWUjcHJldmlldy1mcmFtZVwiKTtcbiAgICBpZiAodGhpcy5mcmFtZUVsKSB7XG4gICAgICB0aGlzLmZyYW1lUmVjdCA9IHRoaXMuZnJhbWVFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuc2NhbGVGYWN0b3IgPSB0aGlzLmZyYW1lUmVjdC53aWR0aCAvICgoKF9hID0gdGhpcy5mcmFtZUVsLmNvbnRlbnRXaW5kb3cpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pbm5lcldpZHRoKSB8fCAxKTtcbiAgICB9XG4gIH1cbiAgZ2V0IHgoKSB7XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luYWwueDtcbiAgfVxuICBnZXQgeSgpIHtcbiAgICByZXR1cm4gdGhpcy5vcmlnaW5hbC55O1xuICB9XG4gIGdldCBnbG9iYWwoKSB7XG4gICAgaWYgKGRvY3VtZW50ICE9PSB0aGlzLnRhcmdldC5vd25lckRvY3VtZW50ICYmIHRoaXMuZnJhbWVSZWN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4OiB0aGlzLnggKiB0aGlzLnNjYWxlRmFjdG9yICsgdGhpcy5mcmFtZVJlY3QubGVmdCxcbiAgICAgICAgeTogdGhpcy55ICogdGhpcy5zY2FsZUZhY3RvciArIHRoaXMuZnJhbWVSZWN0LnRvcFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luYWw7XG4gIH1cbiAgZ2V0IGZyYW1lKCkge1xuICAgIGlmIChkb2N1bWVudCA9PT0gdGhpcy50YXJnZXQub3duZXJEb2N1bWVudCAmJiB0aGlzLmZyYW1lUmVjdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogKHRoaXMueCAtIHRoaXMuZnJhbWVSZWN0LmxlZnQpIC8gdGhpcy5zY2FsZUZhY3RvcixcbiAgICAgICAgeTogKHRoaXMueSAtIHRoaXMuZnJhbWVSZWN0LnRvcCkgLyB0aGlzLnNjYWxlRmFjdG9yXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcmlnaW5hbDtcbiAgfVxufTtcblxuLy8gbGliL2J1YmJsZS1wb2ludGVyLWV2ZW50LnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIEJhc2VFdmVudCA9IHR5cGVvZiBQb2ludGVyRXZlbnQgIT09IFwidW5kZWZpbmVkXCIgPyBQb2ludGVyRXZlbnQgOiBFdmVudDtcbnZhciBCdWJibGVkUG9pbnRlckV2ZW50ID0gY2xhc3MgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBkYXRhKSB7XG4gICAgc3VwZXIodHlwZSwgZGF0YSk7XG4gICAgdGhpcy5fb3JpZ2luYWxUYXJnZXQgPSBudWxsO1xuICAgIHRoaXMub3JpZ2luYWxUYXJnZXQgPSBkYXRhLm9yaWdpbmFsVGFyZ2V0O1xuICB9XG4gIC8vIE5lY2Vzc2FyeSBmb3IgRmlyZWZveFxuICBzZXQgb3JpZ2luYWxUYXJnZXQodGFyZ2V0KSB7XG4gICAgdGhpcy5fb3JpZ2luYWxUYXJnZXQgPSB0YXJnZXQ7XG4gIH1cbiAgLy8gTmVjZXNzYXJ5IGZvciBGaXJlZm94XG4gIGdldCBvcmlnaW5hbFRhcmdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fb3JpZ2luYWxUYXJnZXQ7XG4gIH1cbn07XG5cbi8vIGxpYi9kbmQvTmVzdGVkRHJvcHBhYmxlUGx1Z2luLnRzXG52YXIgZGVwdGhTb3J0ID0gKGNhbmRpZGF0ZXMpID0+IHtcbiAgcmV0dXJuIGNhbmRpZGF0ZXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFEYXRhID0gYS5kYXRhO1xuICAgIGNvbnN0IGJEYXRhID0gYi5kYXRhO1xuICAgIGlmIChhRGF0YS5kZXB0aCA+IGJEYXRhLmRlcHRoKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgaWYgKGJEYXRhLmRlcHRoID4gYURhdGEuZGVwdGgpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0pO1xufTtcbnZhciBnZXRab25lSWQgPSAoY2FuZGlkYXRlKSA9PiB7XG4gIGxldCBpZCA9IGNhbmRpZGF0ZSA9PSBudWxsID8gdm9pZCAwIDogY2FuZGlkYXRlLmlkO1xuICBpZiAoIWNhbmRpZGF0ZSkgcmV0dXJuIG51bGw7XG4gIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gXCJjb21wb25lbnRcIikge1xuICAgIGNvbnN0IGRhdGEgPSBjYW5kaWRhdGUuZGF0YTtcbiAgICBpZiAoZGF0YS5jb250YWluc0FjdGl2ZVpvbmUpIHtcbiAgICAgIGlkID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSBkYXRhLnpvbmU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNhbmRpZGF0ZS50eXBlID09PSBcInZvaWRcIikge1xuICAgIHJldHVybiBcInZvaWRcIjtcbiAgfVxuICByZXR1cm4gaWQ7XG59O1xudmFyIEJVRkZFUiA9IDY7XG52YXIgZ2V0UG9pbnRlckNvbGxpc2lvbnMgPSAocG9zaXRpb24sIG1hbmFnZXIpID0+IHtcbiAgY29uc3QgY2FuZGlkYXRlcyA9IFtdO1xuICBsZXQgZWxlbWVudHMgPSBwb3NpdGlvbi50YXJnZXQub3duZXJEb2N1bWVudC5lbGVtZW50c0Zyb21Qb2ludChcbiAgICBwb3NpdGlvbi54LFxuICAgIHBvc2l0aW9uLnlcbiAgKTtcbiAgY29uc3QgcHJldmlld0ZyYW1lID0gZWxlbWVudHMuZmluZChcbiAgICAoZWwpID0+IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtcHVjay1wcmV2aWV3XCIpXG4gICk7XG4gIGNvbnN0IGRyYXdlciA9IGVsZW1lbnRzLmZpbmQoKGVsKSA9PiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stZHJhd2VyXCIpKTtcbiAgaWYgKGRyYXdlcikge1xuICAgIGVsZW1lbnRzID0gW2RyYXdlcl07XG4gIH1cbiAgaWYgKHByZXZpZXdGcmFtZSkge1xuICAgIGNvbnN0IGZyYW1lID0gZ2V0RnJhbWUoKTtcbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIGVsZW1lbnRzID0gZnJhbWUuZWxlbWVudHNGcm9tUG9pbnQocG9zaXRpb24uZnJhbWUueCwgcG9zaXRpb24uZnJhbWUueSk7XG4gICAgfVxuICB9XG4gIGlmIChlbGVtZW50cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgIGNvbnN0IGRyb3B6b25lSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtcHVjay1kcm9wem9uZVwiKTtcbiAgICAgIGNvbnN0IGlkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stZG5kXCIpO1xuICAgICAgY29uc3QgaXNWb2lkID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stZG5kLXZvaWRcIik7XG4gICAgICBpZiAoQlVGRkVSICYmIChkcm9wem9uZUlkIHx8IGlkKSAmJiAhaXNWb2lkKSB7XG4gICAgICAgIGNvbnN0IGJveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGNvbnRyYWN0ZWRCb3ggPSB7XG4gICAgICAgICAgbGVmdDogYm94LmxlZnQgKyBCVUZGRVIsXG4gICAgICAgICAgcmlnaHQ6IGJveC5yaWdodCAtIEJVRkZFUixcbiAgICAgICAgICB0b3A6IGJveC50b3AgKyBCVUZGRVIsXG4gICAgICAgICAgYm90dG9tOiBib3guYm90dG9tIC0gQlVGRkVSXG4gICAgICAgIH07XG4gICAgICAgIGlmIChwb3NpdGlvbi5mcmFtZS54IDwgY29udHJhY3RlZEJveC5sZWZ0IHx8IHBvc2l0aW9uLmZyYW1lLnggPiBjb250cmFjdGVkQm94LnJpZ2h0IHx8IHBvc2l0aW9uLmZyYW1lLnkgPiBjb250cmFjdGVkQm94LmJvdHRvbSB8fCBwb3NpdGlvbi5mcmFtZS55IDwgY29udHJhY3RlZEJveC50b3ApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRyb3B6b25lSWQpIHtcbiAgICAgICAgY29uc3QgZHJvcHBhYmxlID0gbWFuYWdlci5yZWdpc3RyeS5kcm9wcGFibGVzLmdldChkcm9wem9uZUlkKTtcbiAgICAgICAgaWYgKGRyb3BwYWJsZSkge1xuICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChkcm9wcGFibGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaWQpIHtcbiAgICAgICAgY29uc3QgZHJvcHBhYmxlID0gbWFuYWdlci5yZWdpc3RyeS5kcm9wcGFibGVzLmdldChpZCk7XG4gICAgICAgIGlmIChkcm9wcGFibGUpIHtcbiAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goZHJvcHBhYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlcztcbn07XG52YXIgZmluZERlZXBlc3RDYW5kaWRhdGUgPSAocG9zaXRpb24sIG1hbmFnZXIpID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBjYW5kaWRhdGVzID0gZ2V0UG9pbnRlckNvbGxpc2lvbnMocG9zaXRpb24sIG1hbmFnZXIpO1xuICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qgc29ydGVkQ2FuZGlkYXRlcyA9IGRlcHRoU29ydChjYW5kaWRhdGVzKTtcbiAgICBjb25zdCBkcmFnZ2FibGUgPSBtYW5hZ2VyLmRyYWdPcGVyYXRpb24uc291cmNlO1xuICAgIGNvbnN0IGRyYWdnZWRDYW5kaWRhdGVJbmRleCA9IHNvcnRlZENhbmRpZGF0ZXMuZmluZEluZGV4KFxuICAgICAgKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlLmlkID09PSAoZHJhZ2dhYmxlID09IG51bGwgPyB2b2lkIDAgOiBkcmFnZ2FibGUuaWQpXG4gICAgKTtcbiAgICBjb25zdCBkcmFnZ2VkQ2FuZGlkYXRlSWQgPSBkcmFnZ2FibGUgPT0gbnVsbCA/IHZvaWQgMCA6IGRyYWdnYWJsZS5pZDtcbiAgICBsZXQgZmlsdGVyZWRDYW5kaWRhdGVzID0gWy4uLnNvcnRlZENhbmRpZGF0ZXNdO1xuICAgIGlmIChkcmFnZ2VkQ2FuZGlkYXRlSWQgJiYgZHJhZ2dlZENhbmRpZGF0ZUluZGV4ID4gLTEpIHtcbiAgICAgIGZpbHRlcmVkQ2FuZGlkYXRlcy5zcGxpY2UoZHJhZ2dlZENhbmRpZGF0ZUluZGV4LCAxKTtcbiAgICB9XG4gICAgZmlsdGVyZWRDYW5kaWRhdGVzID0gZmlsdGVyZWRDYW5kaWRhdGVzLmZpbHRlcigoY2FuZGlkYXRlKSA9PiB7XG4gICAgICBjb25zdCBjYW5kaWRhdGVEYXRhID0gY2FuZGlkYXRlLmRhdGE7XG4gICAgICBpZiAoZHJhZ2dlZENhbmRpZGF0ZUlkICYmIGRyYWdnZWRDYW5kaWRhdGVJbmRleCA+IC0xKSB7XG4gICAgICAgIGlmIChjYW5kaWRhdGVEYXRhLnBhdGguaW5kZXhPZihkcmFnZ2VkQ2FuZGlkYXRlSWQpID4gLTEpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gXCJkcm9wem9uZVwiKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZURhdGEyID0gY2FuZGlkYXRlLmRhdGE7XG4gICAgICAgIGlmICghY2FuZGlkYXRlRGF0YTIuaXNEcm9wcGFibGVUYXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbmRpZGF0ZURhdGEyLmFyZWFJZCA9PT0gZHJhZ2dlZENhbmRpZGF0ZUlkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNhbmRpZGF0ZS50eXBlID09PSBcImNvbXBvbmVudFwiKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZURhdGEyID0gY2FuZGlkYXRlLmRhdGE7XG4gICAgICAgIGlmICghY2FuZGlkYXRlRGF0YTIuaW5Ecm9wcGFibGVab25lKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBmaWx0ZXJlZENhbmRpZGF0ZXMucmV2ZXJzZSgpO1xuICAgIGNvbnN0IHByaW1hcnlDYW5kaWRhdGUgPSBmaWx0ZXJlZENhbmRpZGF0ZXNbMF07XG4gICAgaWYgKCFwcmltYXJ5Q2FuZGlkYXRlKSByZXR1cm4geyB6b25lOiBudWxsLCBhcmVhOiBudWxsIH07XG4gICAgY29uc3QgcHJpbWFyeUNhbmRpZGF0ZURhdGEgPSBwcmltYXJ5Q2FuZGlkYXRlLmRhdGE7XG4gICAgY29uc3QgcHJpbWFyeUNhbmRpZGF0ZUlzQ29tcG9uZW50ID0gXCJjb250YWluc0FjdGl2ZVpvbmVcIiBpbiBwcmltYXJ5Q2FuZGlkYXRlRGF0YTtcbiAgICBjb25zdCB6b25lID0gZ2V0Wm9uZUlkKHByaW1hcnlDYW5kaWRhdGUpO1xuICAgIGNvbnN0IGFyZWEgPSBwcmltYXJ5Q2FuZGlkYXRlSXNDb21wb25lbnQgJiYgcHJpbWFyeUNhbmRpZGF0ZURhdGEuY29udGFpbnNBY3RpdmVab25lID8gZmlsdGVyZWRDYW5kaWRhdGVzWzBdLmlkIDogKF9hID0gZmlsdGVyZWRDYW5kaWRhdGVzWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZGF0YS5hcmVhSWQ7XG4gICAgcmV0dXJuIHsgem9uZSwgYXJlYSB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgem9uZTogcm9vdERyb3BwYWJsZUlkLFxuICAgIGFyZWE6IHJvb3RBcmVhSWRcbiAgfTtcbn07XG52YXIgY3JlYXRlTmVzdGVkRHJvcHBhYmxlUGx1Z2luID0gKHsgb25DaGFuZ2UgfSwgaWQpID0+IGNsYXNzIE5lc3RlZERyb3BwYWJsZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIGNvbnN0cnVjdG9yKG1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICBzdXBlcihtYW5hZ2VyKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlZ2lzdGVyRWZmZWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IGhhbmRsZU1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQgaW5zdGFuY2VvZiBCdWJibGVkUG9pbnRlckV2ZW50ID8gZXZlbnQub3JpZ2luYWxUYXJnZXQgfHwgZXZlbnQudGFyZ2V0IDogZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBHbG9iYWxQb3NpdGlvbih0YXJnZXQsIHtcbiAgICAgICAgICB4OiBldmVudC5jbGllbnRYLFxuICAgICAgICAgIHk6IGV2ZW50LmNsaWVudFlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoXG4gICAgICAgICAgcG9zaXRpb24uZ2xvYmFsLngsXG4gICAgICAgICAgcG9zaXRpb24uZ2xvYmFsLnlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgb3ZlckVsID0gZWxlbWVudHMuc29tZSgoZWwpID0+IGVsLmlkID09PSBpZCk7XG4gICAgICAgIGlmIChvdmVyRWwpIHtcbiAgICAgICAgICBvbkNoYW5nZShmaW5kRGVlcGVzdENhbmRpZGF0ZShwb3NpdGlvbiwgbWFuYWdlciksIG1hbmFnZXIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3QgaGFuZGxlTW92ZVRocm90dGxlZCA9IHRocm90dGxlKGhhbmRsZU1vdmUsIDUwKTtcbiAgICAgIGNvbnN0IGhhbmRsZVBvaW50ZXJNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGhhbmRsZU1vdmVUaHJvdHRsZWQoZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGhhbmRsZVBvaW50ZXJNb3ZlLCB7XG4gICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgICAgLy8gZG5ka2l0J3MgUG9pbnRlclNlbnNvciBwcmV2ZW50cyBwcm9wYWdhdGlvbiBkdXJpbmcgZHJhZ1xuICAgICAgfSk7XG4gICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBoYW5kbGVQb2ludGVyTW92ZSwge1xuICAgICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGNsZWFudXA7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIGxpYi9pbnNlcnQtY29tcG9uZW50LnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGluc2VydENvbXBvbmVudCA9IChjb21wb25lbnRUeXBlLCB6b25lLCBpbmRleCwgYXBwU3RvcmUpID0+IF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICBjb25zdCBpZCA9IGdlbmVyYXRlSWQoY29tcG9uZW50VHlwZSk7XG4gIGNvbnN0IGluc2VydEFjdGlvbkRhdGEgPSB7XG4gICAgdHlwZTogXCJpbnNlcnRcIixcbiAgICBjb21wb25lbnRUeXBlLFxuICAgIGRlc3RpbmF0aW9uSW5kZXg6IGluZGV4LFxuICAgIGRlc3RpbmF0aW9uWm9uZTogem9uZSxcbiAgICBpZFxuICB9O1xuICBjb25zdCB7IHN0YXRlLCBkaXNwYXRjaCwgcmVzb2x2ZUNvbXBvbmVudERhdGE6IHJlc29sdmVDb21wb25lbnREYXRhMiB9ID0gYXBwU3RvcmU7XG4gIGNvbnN0IGluc2VydGVkU3RhdGUgPSBpbnNlcnRBY3Rpb24oc3RhdGUsIGluc2VydEFjdGlvbkRhdGEsIGFwcFN0b3JlKTtcbiAgZGlzcGF0Y2goX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgaW5zZXJ0QWN0aW9uRGF0YSksIHtcbiAgICAvLyBEaXNwYXRjaCBpbnNlcnQgcmF0aGVyIHNldCwgYXMgdXNlcidzIG1heSByZWx5IG9uIHRoaXMgdmlhIG9uQWN0aW9uXG4gICAgLy8gV2UgbXVzdCBhbHdheXMgcmVjb3JkIGhpc3RvcnkgaGVyZSBzbyB0aGUgaW5zZXJ0IGlzIGFkZGVkIHRvIHVzZXIgaGlzdG9yeVxuICAgIC8vIElmIHRoZSB1c2VyIGhhcyBkZWZpbmVkIGEgcmVzb2x2ZURhdGEgbWV0aG9kLCB0aGV5IHdpbGwgZW5kIHVwIHdpdGggMiBoaXN0b3J5XG4gICAgLy8gZW50cmllcyBvbiBpbnNlcnQgLSBvbmUgZm9yIHRoZSBpbml0aWFsIGluc2VydCwgYW5kIG9uZSB3aGVuIHRoZSBkYXRhIHJlc29sdmVzXG4gICAgcmVjb3JkSGlzdG9yeTogdHJ1ZVxuICB9KSk7XG4gIGNvbnN0IGl0ZW1TZWxlY3RvciA9IHtcbiAgICBpbmRleCxcbiAgICB6b25lXG4gIH07XG4gIGRpc3BhdGNoKHsgdHlwZTogXCJzZXRVaVwiLCB1aTogeyBpdGVtU2VsZWN0b3IgfSB9KTtcbiAgY29uc3QgaXRlbURhdGEgPSBnZXRJdGVtKGl0ZW1TZWxlY3RvciwgaW5zZXJ0ZWRTdGF0ZSk7XG4gIGlmIChpdGVtRGF0YSkge1xuICAgIGNvbnN0IHJlc29sdmVkID0geWllbGQgcmVzb2x2ZUNvbXBvbmVudERhdGEyKGl0ZW1EYXRhLCBcImluc2VydFwiKTtcbiAgICBpZiAocmVzb2x2ZWQuZGlkQ2hhbmdlKSB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwicmVwbGFjZVwiLFxuICAgICAgICBkZXN0aW5hdGlvblpvbmU6IGl0ZW1TZWxlY3Rvci56b25lLFxuICAgICAgICBkZXN0aW5hdGlvbkluZGV4OiBpdGVtU2VsZWN0b3IuaW5kZXgsXG4gICAgICAgIGRhdGE6IHJlc29sdmVkLm5vZGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7XG5cbi8vIGNvbXBvbmVudHMvRHJhZ0Ryb3BDb250ZXh0L2luZGV4LnRzeFxuaW1wb3J0IHsgdXNlRGVib3VuY2VkQ2FsbGJhY2sgfSBmcm9tIFwidXNlLWRlYm91bmNlXCI7XG5pbXBvcnQgeyBjcmVhdGVTdG9yZSBhcyBjcmVhdGVTdG9yZTMgfSBmcm9tIFwienVzdGFuZFwiO1xuXG4vLyBsaWIvZ2V0LWRlZXAtZGlyLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuZnVuY3Rpb24gZ2V0RGVlcERpcihlbCkge1xuICBmdW5jdGlvbiBmaW5kRGlyKG5vZGUpIHtcbiAgICBpZiAoIW5vZGUpIHJldHVybiBcImx0clwiO1xuICAgIGNvbnN0IGQgPSBub2RlLmdldEF0dHJpYnV0ZShcImRpclwiKTtcbiAgICByZXR1cm4gZCB8fCBmaW5kRGlyKG5vZGUucGFyZW50RWxlbWVudCk7XG4gIH1cbiAgcmV0dXJuIGVsID8gZmluZERpcihlbCkgOiBcImx0clwiO1xufVxuXG4vLyBjb21wb25lbnRzL0RyYWdEcm9wQ29udGV4dC9pbmRleC50c3hcbmltcG9ydCB7IGVmZmVjdCB9IGZyb20gXCJAZG5kLWtpdC9zdGF0ZVwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDIxIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgREVCVUczID0gZmFsc2U7XG52YXIgZHJhZ0xpc3RlbmVyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ0KHtcbiAgZHJhZ0xpc3RlbmVyczoge31cbn0pO1xuZnVuY3Rpb24gdXNlRHJhZ0xpc3RlbmVyKHR5cGUsIGZuLCBkZXBzID0gW10pIHtcbiAgY29uc3QgeyBzZXREcmFnTGlzdGVuZXJzIH0gPSB1c2VDb250ZXh0NihkcmFnTGlzdGVuZXJDb250ZXh0KTtcbiAgdXNlRWZmZWN0MTMoKCkgPT4ge1xuICAgIGlmIChzZXREcmFnTGlzdGVuZXJzKSB7XG4gICAgICBzZXREcmFnTGlzdGVuZXJzKChvbGQpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG9sZCksIHtcbiAgICAgICAgW3R5cGVdOiBbLi4ub2xkW3R5cGVdIHx8IFtdLCBmbl1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sIGRlcHMpO1xufVxudmFyIEFSRUFfQ0hBTkdFX0RFQk9VTkNFX01TID0gMTAwO1xudmFyIHVzZVRlbXBEaXNhYmxlRmFsbGJhY2sgPSAodGltZW91dDMpID0+IHtcbiAgY29uc3QgbGFzdEZhbGxiYWNrRGlzYWJsZSA9IHVzZVJlZjMobnVsbCk7XG4gIHJldHVybiB1c2VDYWxsYmFjazgoKG1hbmFnZXIpID0+IHtcbiAgICBjb2xsaXNpb25TdG9yZS5zZXRTdGF0ZSh7IGZhbGxiYWNrRW5hYmxlZDogZmFsc2UgfSk7XG4gICAgY29uc3QgZmFsbGJhY2tJZCA9IGdlbmVyYXRlSWQoKTtcbiAgICBsYXN0RmFsbGJhY2tEaXNhYmxlLmN1cnJlbnQgPSBmYWxsYmFja0lkO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKGxhc3RGYWxsYmFja0Rpc2FibGUuY3VycmVudCA9PT0gZmFsbGJhY2tJZCkge1xuICAgICAgICBjb2xsaXNpb25TdG9yZS5zZXRTdGF0ZSh7IGZhbGxiYWNrRW5hYmxlZDogdHJ1ZSB9KTtcbiAgICAgICAgbWFuYWdlci5jb2xsaXNpb25PYnNlcnZlci5mb3JjZVVwZGF0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9LCB0aW1lb3V0Myk7XG4gIH0sIFtdKTtcbn07XG52YXIgRHJhZ0Ryb3BDb250ZXh0Q2xpZW50ID0gKHtcbiAgY2hpbGRyZW4sXG4gIGRpc2FibGVBdXRvU2Nyb2xsXG59KSA9PiB7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuZGlzcGF0Y2gpO1xuICBjb25zdCBhcHBTdG9yZSA9IHVzZUFwcFN0b3JlQXBpKCk7XG4gIGNvbnN0IGlkID0gdXNlU2FmZUlkKCk7XG4gIGNvbnN0IGRlYm91bmNlZFBhcmFtc1JlZiA9IHVzZVJlZjMobnVsbCk7XG4gIGNvbnN0IHRlbXBEaXNhYmxlRmFsbGJhY2sgPSB1c2VUZW1wRGlzYWJsZUZhbGxiYWNrKDEwMCk7XG4gIGNvbnN0IFt6b25lU3RvcmVdID0gdXNlU3RhdGUxMShcbiAgICAoKSA9PiBjcmVhdGVTdG9yZTMoKCkgPT4gKHtcbiAgICAgIHpvbmVEZXB0aEluZGV4OiB7fSxcbiAgICAgIG5leHRab25lRGVwdGhJbmRleDoge30sXG4gICAgICBhcmVhRGVwdGhJbmRleDoge30sXG4gICAgICBuZXh0QXJlYURlcHRoSW5kZXg6IHt9LFxuICAgICAgZHJhZ2dlZEl0ZW06IG51bGwsXG4gICAgICBwcmV2aWV3SW5kZXg6IHt9LFxuICAgICAgZW5hYmxlZEluZGV4OiB7fSxcbiAgICAgIGhvdmVyaW5nQ29tcG9uZW50OiBudWxsXG4gICAgfSkpXG4gICk7XG4gIGNvbnN0IGdldENoYW5nZWQyID0gdXNlQ2FsbGJhY2s4KFxuICAgIChwYXJhbXMsIGlkMikgPT4ge1xuICAgICAgY29uc3QgeyB6b25lRGVwdGhJbmRleCA9IHt9LCBhcmVhRGVwdGhJbmRleCA9IHt9IH0gPSB6b25lU3RvcmUuZ2V0U3RhdGUoKSB8fCB7fTtcbiAgICAgIGNvbnN0IHN0YXRlSGFzWm9uZSA9IE9iamVjdC5rZXlzKHpvbmVEZXB0aEluZGV4KS5sZW5ndGggPiAwO1xuICAgICAgY29uc3Qgc3RhdGVIYXNBcmVhID0gT2JqZWN0LmtleXMoYXJlYURlcHRoSW5kZXgpLmxlbmd0aCA+IDA7XG4gICAgICBsZXQgem9uZUNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGxldCBhcmVhQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgaWYgKHBhcmFtcy56b25lICYmICF6b25lRGVwdGhJbmRleFtwYXJhbXMuem9uZV0pIHtcbiAgICAgICAgem9uZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICghcGFyYW1zLnpvbmUgJiYgc3RhdGVIYXNab25lKSB7XG4gICAgICAgIHpvbmVDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMuYXJlYSAmJiAhYXJlYURlcHRoSW5kZXhbcGFyYW1zLmFyZWFdKSB7XG4gICAgICAgIGFyZWFDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoIXBhcmFtcy5hcmVhICYmIHN0YXRlSGFzQXJlYSkge1xuICAgICAgICBhcmVhQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4geyB6b25lQ2hhbmdlZCwgYXJlYUNoYW5nZWQgfTtcbiAgICB9LFxuICAgIFt6b25lU3RvcmVdXG4gICk7XG4gIGNvbnN0IHNldERlZXBlc3RBbmRDb2xsaWRlID0gdXNlQ2FsbGJhY2s4KFxuICAgIChwYXJhbXMsIG1hbmFnZXIpID0+IHtcbiAgICAgIGNvbnN0IHsgem9uZUNoYW5nZWQsIGFyZWFDaGFuZ2VkIH0gPSBnZXRDaGFuZ2VkMihwYXJhbXMsIGlkKTtcbiAgICAgIGlmICghem9uZUNoYW5nZWQgJiYgIWFyZWFDaGFuZ2VkKSByZXR1cm47XG4gICAgICB6b25lU3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICB6b25lRGVwdGhJbmRleDogcGFyYW1zLnpvbmUgPyB7IFtwYXJhbXMuem9uZV06IHRydWUgfSA6IHt9LFxuICAgICAgICBhcmVhRGVwdGhJbmRleDogcGFyYW1zLmFyZWEgPyB7IFtwYXJhbXMuYXJlYV06IHRydWUgfSA6IHt9XG4gICAgICB9KTtcbiAgICAgIHRlbXBEaXNhYmxlRmFsbGJhY2sobWFuYWdlcik7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbWFuYWdlci5jb2xsaXNpb25PYnNlcnZlci5mb3JjZVVwZGF0ZSh0cnVlKTtcbiAgICAgIH0sIDUwKTtcbiAgICAgIGRlYm91bmNlZFBhcmFtc1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9LFxuICAgIFt6b25lU3RvcmVdXG4gICk7XG4gIGNvbnN0IHNldERlZXBlc3REYiA9IHVzZURlYm91bmNlZENhbGxiYWNrKFxuICAgIHNldERlZXBlc3RBbmRDb2xsaWRlLFxuICAgIEFSRUFfQ0hBTkdFX0RFQk9VTkNFX01TXG4gICk7XG4gIGNvbnN0IGNhbmNlbERiID0gKCkgPT4ge1xuICAgIHNldERlZXBlc3REYi5jYW5jZWwoKTtcbiAgICBkZWJvdW5jZWRQYXJhbXNSZWYuY3VycmVudCA9IG51bGw7XG4gIH07XG4gIHVzZUVmZmVjdDEzKCgpID0+IHtcbiAgICBpZiAoREVCVUczKSB7XG4gICAgICB6b25lU3RvcmUuc3Vic2NyaWJlKFxuICAgICAgICAocykgPT4ge1xuICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgcy5wcmV2aWV3SW5kZXgsXG4gICAgICAgICAgICAoX2EgPSBPYmplY3QuZW50cmllcyhzLnpvbmVEZXB0aEluZGV4IHx8IHt9KVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hWzBdLFxuICAgICAgICAgICAgKF9iID0gT2JqZWN0LmVudHJpZXMocy5hcmVhRGVwdGhJbmRleCB8fCB7fSlbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfYlswXVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9LCBbXSk7XG4gIGNvbnN0IFtwbHVnaW5zXSA9IHVzZVN0YXRlMTEoKCkgPT4gW1xuICAgIC4uLmRpc2FibGVBdXRvU2Nyb2xsID8gZGVmYXVsdFByZXNldC5wbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4gIT09IEF1dG9TY3JvbGxlcikgOiBkZWZhdWx0UHJlc2V0LnBsdWdpbnMsXG4gICAgY3JlYXRlTmVzdGVkRHJvcHBhYmxlUGx1Z2luKFxuICAgICAge1xuICAgICAgICBvbkNoYW5nZTogKHBhcmFtcywgbWFuYWdlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gem9uZVN0b3JlLmdldFN0YXRlKCk7XG4gICAgICAgICAgY29uc3QgeyB6b25lQ2hhbmdlZCwgYXJlYUNoYW5nZWQgfSA9IGdldENoYW5nZWQyKHBhcmFtcywgaWQpO1xuICAgICAgICAgIGNvbnN0IGlzRHJhZ2dpbmcgPSBtYW5hZ2VyLmRyYWdPcGVyYXRpb24uc3RhdHVzLmRyYWdnaW5nO1xuICAgICAgICAgIGlmIChhcmVhQ2hhbmdlZCB8fCB6b25lQ2hhbmdlZCkge1xuICAgICAgICAgICAgbGV0IG5leHRab25lRGVwdGhJbmRleCA9IHt9O1xuICAgICAgICAgICAgbGV0IG5leHRBcmVhRGVwdGhJbmRleCA9IHt9O1xuICAgICAgICAgICAgaWYgKHBhcmFtcy56b25lKSB7XG4gICAgICAgICAgICAgIG5leHRab25lRGVwdGhJbmRleCA9IHsgW3BhcmFtcy56b25lXTogdHJ1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtcy5hcmVhKSB7XG4gICAgICAgICAgICAgIG5leHRBcmVhRGVwdGhJbmRleCA9IHsgW3BhcmFtcy5hcmVhXTogdHJ1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHsgbmV4dFpvbmVEZXB0aEluZGV4LCBuZXh0QXJlYURlcHRoSW5kZXggfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYXJhbXMuem9uZSAhPT0gXCJ2b2lkXCIgJiYgKHN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS56b25lRGVwdGhJbmRleFtcInZvaWRcIl0pKSB7XG4gICAgICAgICAgICBzZXREZWVwZXN0QW5kQ29sbGlkZShwYXJhbXMsIG1hbmFnZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXJlYUNoYW5nZWQpIHtcbiAgICAgICAgICAgIGlmIChpc0RyYWdnaW5nKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRlYm91bmNlZFBhcmFtcyA9IGRlYm91bmNlZFBhcmFtc1JlZi5jdXJyZW50O1xuICAgICAgICAgICAgICBjb25zdCBpc1NhbWVQYXJhbXMgPSBkZWJvdW5jZWRQYXJhbXMgJiYgZGVib3VuY2VkUGFyYW1zLmFyZWEgPT09IHBhcmFtcy5hcmVhICYmIGRlYm91bmNlZFBhcmFtcy56b25lID09PSBwYXJhbXMuem9uZTtcbiAgICAgICAgICAgICAgaWYgKCFpc1NhbWVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxEYigpO1xuICAgICAgICAgICAgICAgIHNldERlZXBlc3REYihwYXJhbXMsIG1hbmFnZXIpO1xuICAgICAgICAgICAgICAgIGRlYm91bmNlZFBhcmFtc1JlZi5jdXJyZW50ID0gcGFyYW1zO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYW5jZWxEYigpO1xuICAgICAgICAgICAgICBzZXREZWVwZXN0QW5kQ29sbGlkZShwYXJhbXMsIG1hbmFnZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoem9uZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHNldERlZXBlc3RBbmRDb2xsaWRlKHBhcmFtcywgbWFuYWdlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbmNlbERiKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpZFxuICAgIClcbiAgXSk7XG4gIGNvbnN0IHNlbnNvcnMgPSB1c2VTZW5zb3JzKCk7XG4gIGNvbnN0IFtkcmFnTGlzdGVuZXJzLCBzZXREcmFnTGlzdGVuZXJzXSA9IHVzZVN0YXRlMTEoe30pO1xuICBjb25zdCBkcmFnTW9kZSA9IHVzZVJlZjMobnVsbCk7XG4gIGNvbnN0IGluaXRpYWxTZWxlY3RvciA9IHVzZVJlZjModm9pZCAwKTtcbiAgY29uc3QgbmV4dENvbnRleHRWYWx1ZSA9IHVzZU1lbW82KFxuICAgICgpID0+ICh7XG4gICAgICBtb2RlOiBcImVkaXRcIixcbiAgICAgIGFyZWFJZDogXCJyb290XCIsXG4gICAgICBkZXB0aDogMFxuICAgIH0pLFxuICAgIFtdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjEoXCJkaXZcIiwgeyBpZCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMShcbiAgICBkcmFnTGlzdGVuZXJDb250ZXh0LlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIGRyYWdMaXN0ZW5lcnMsXG4gICAgICAgIHNldERyYWdMaXN0ZW5lcnNcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIxKFxuICAgICAgICBEcmFnRHJvcFByb3ZpZGVyMixcbiAgICAgICAge1xuICAgICAgICAgIHBsdWdpbnMsXG4gICAgICAgICAgc2Vuc29ycyxcbiAgICAgICAgICBvbkRyYWdFbmQ6IChldmVudCwgbWFuYWdlcikgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5RWwgPSAoX2EgPSBnZXRGcmFtZSgpKSA9PSBudWxsID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvcihcIltkYXRhLXB1Y2stZW50cnldXCIpO1xuICAgICAgICAgICAgZW50cnlFbCA9PSBudWxsID8gdm9pZCAwIDogZW50cnlFbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stZHJhZ2dpbmdcIik7XG4gICAgICAgICAgICBjb25zdCB7IHNvdXJjZSwgdGFyZ2V0IH0gPSBldmVudC5vcGVyYXRpb247XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICB6b25lU3RvcmUuc2V0U3RhdGUoeyBkcmFnZ2VkSXRlbTogbnVsbCB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyB6b25lLCBpbmRleCB9ID0gc291cmNlLmRhdGE7XG4gICAgICAgICAgICBjb25zdCB7IHByZXZpZXdJbmRleCA9IHt9IH0gPSB6b25lU3RvcmUuZ2V0U3RhdGUoKSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IHRoaXNQcmV2aWV3ID0gKChfYiA9IHByZXZpZXdJbmRleFt6b25lXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnByb3BzLmlkKSA9PT0gc291cmNlLmlkID8gcHJldmlld0luZGV4W3pvbmVdIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG9uQW5pbWF0aW9uRW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICB2YXIgX2EyLCBfYjI7XG4gICAgICAgICAgICAgIHpvbmVTdG9yZS5zZXRTdGF0ZSh7IGRyYWdnZWRJdGVtOiBudWxsIH0pO1xuICAgICAgICAgICAgICBpZiAoZXZlbnQuY2FuY2VsZWQgfHwgKHRhcmdldCA9PSBudWxsID8gdm9pZCAwIDogdGFyZ2V0LnR5cGUpID09PSBcInZvaWRcIikge1xuICAgICAgICAgICAgICAgIHpvbmVTdG9yZS5zZXRTdGF0ZSh7IHByZXZpZXdJbmRleDoge30gfSk7XG4gICAgICAgICAgICAgICAgKF9hMiA9IGRyYWdMaXN0ZW5lcnMuZHJhZ2VuZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgICAgICAgICAgICAgZm4oZXZlbnQsIG1hbmFnZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0VWlcIixcbiAgICAgICAgICAgICAgICAgIHVpOiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaXNEcmFnZ2luZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHRoaXNQcmV2aWV3KSB7XG4gICAgICAgICAgICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHsgcHJldmlld0luZGV4OiB7fSB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpc1ByZXZpZXcudHlwZSA9PT0gXCJpbnNlcnRcIikge1xuICAgICAgICAgICAgICAgICAgaW5zZXJ0Q29tcG9uZW50KFxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJldmlldy5jb21wb25lbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJldmlldy56b25lLFxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJldmlldy5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgYXBwU3RvcmUuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluaXRpYWxTZWxlY3Rvci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibW92ZVwiLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJbmRleDogaW5pdGlhbFNlbGVjdG9yLmN1cnJlbnQuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVpvbmU6IGluaXRpYWxTZWxlY3Rvci5jdXJyZW50LnpvbmUsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uSW5kZXg6IHRoaXNQcmV2aWV3LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvblpvbmU6IHRoaXNQcmV2aWV3LnpvbmUsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZEhpc3Rvcnk6IGZhbHNlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0VWlcIixcbiAgICAgICAgICAgICAgICB1aToge1xuICAgICAgICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiB7IGluZGV4LCB6b25lIH0sXG4gICAgICAgICAgICAgICAgICBpc0RyYWdnaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVjb3JkSGlzdG9yeTogdHJ1ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgKF9iMiA9IGRyYWdMaXN0ZW5lcnMuZHJhZ2VuZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgICAgICAgICAgIGZuKGV2ZW50LCBtYW5hZ2VyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGRpc3Bvc2U7XG4gICAgICAgICAgICBkaXNwb3NlID0gZWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHNvdXJjZS5zdGF0dXMgPT09IFwiaWRsZVwiKSB7XG4gICAgICAgICAgICAgICAgb25BbmltYXRpb25FbmQoKTtcbiAgICAgICAgICAgICAgICBkaXNwb3NlID09IG51bGwgPyB2b2lkIDAgOiBkaXNwb3NlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25EcmFnT3ZlcjogKGV2ZW50LCBtYW5hZ2VyKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgZHJhZ2dlZEl0ZW0gPSAoX2EgPSB6b25lU3RvcmUuZ2V0U3RhdGUoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRyYWdnZWRJdGVtO1xuICAgICAgICAgICAgaWYgKCFkcmFnZ2VkSXRlbSkgcmV0dXJuO1xuICAgICAgICAgICAgY2FuY2VsRGIoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgc291cmNlLCB0YXJnZXQgfSA9IGV2ZW50Lm9wZXJhdGlvbjtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICFzb3VyY2UgfHwgdGFyZ2V0LnR5cGUgPT09IFwidm9pZFwiKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBbc291cmNlSWRdID0gc291cmNlLmlkLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgIGNvbnN0IFt0YXJnZXRJZF0gPSB0YXJnZXQuaWQuc3BsaXQoXCI6XCIpO1xuICAgICAgICAgICAgY29uc3Qgc291cmNlRGF0YSA9IHNvdXJjZS5kYXRhO1xuICAgICAgICAgICAgbGV0IHNvdXJjZVpvbmUgPSBzb3VyY2VEYXRhLnpvbmU7XG4gICAgICAgICAgICBsZXQgc291cmNlSW5kZXggPSBzb3VyY2VEYXRhLmluZGV4O1xuICAgICAgICAgICAgbGV0IHRhcmdldFpvbmUgPSBcIlwiO1xuICAgICAgICAgICAgbGV0IHRhcmdldEluZGV4ID0gMDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQudHlwZSA9PT0gXCJjb21wb25lbnRcIikge1xuICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXRhID0gdGFyZ2V0LmRhdGE7XG4gICAgICAgICAgICAgIHRhcmdldFpvbmUgPSB0YXJnZXREYXRhLnpvbmU7XG4gICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGFyZ2V0RGF0YS5pbmRleDtcbiAgICAgICAgICAgICAgY29uc3QgY29sbGlzaW9uRGF0YSA9IChfYiA9IG1hbmFnZXIuY29sbGlzaW9uT2JzZXJ2ZXIuY29sbGlzaW9uc1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmRhdGE7XG4gICAgICAgICAgICAgIGNvbnN0IGRpciA9IGdldERlZXBEaXIodGFyZ2V0LmVsZW1lbnQpO1xuICAgICAgICAgICAgICBjb25zdCBjb2xsaXNpb25Qb3NpdGlvbiA9IChjb2xsaXNpb25EYXRhID09IG51bGwgPyB2b2lkIDAgOiBjb2xsaXNpb25EYXRhLmRpcmVjdGlvbikgPT09IFwidXBcIiB8fCBkaXIgPT09IFwibHRyXCIgJiYgKGNvbGxpc2lvbkRhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbGxpc2lvbkRhdGEuZGlyZWN0aW9uKSA9PT0gXCJsZWZ0XCIgfHwgZGlyID09PSBcInJ0bFwiICYmIChjb2xsaXNpb25EYXRhID09IG51bGwgPyB2b2lkIDAgOiBjb2xsaXNpb25EYXRhLmRpcmVjdGlvbikgPT09IFwicmlnaHRcIiA/IFwiYmVmb3JlXCIgOiBcImFmdGVyXCI7XG4gICAgICAgICAgICAgIGlmICh0YXJnZXRJbmRleCA+PSBzb3VyY2VJbmRleCAmJiBzb3VyY2Vab25lID09PSB0YXJnZXRab25lKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSB0YXJnZXRJbmRleCAtIDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGNvbGxpc2lvblBvc2l0aW9uID09PSBcImFmdGVyXCIpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IHRhcmdldEluZGV4ICsgMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGFyZ2V0Wm9uZSA9IHRhcmdldC5pZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXRoID0gKChfYyA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGUuaW5kZXhlcy5ub2Rlc1t0YXJnZXQuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2MucGF0aCkgfHwgW107XG4gICAgICAgICAgICBpZiAodGFyZ2V0SWQgPT09IHNvdXJjZUlkIHx8IHBhdGguZmluZCgocGF0aDIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgW3BhdGhJZF0gPSBwYXRoMi5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgIHJldHVybiBwYXRoSWQgPT09IHNvdXJjZUlkO1xuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRyYWdNb2RlLmN1cnJlbnQgPT09IFwibmV3XCIpIHtcbiAgICAgICAgICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBwcmV2aWV3SW5kZXg6IHtcbiAgICAgICAgICAgICAgICAgIFt0YXJnZXRab25lXToge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRUeXBlOiBzb3VyY2VEYXRhLmNvbXBvbmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0YXJnZXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgem9uZTogdGFyZ2V0Wm9uZSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogc291cmNlLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IHNvdXJjZS5pZC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpbml0aWFsU2VsZWN0b3IuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxTZWxlY3Rvci5jdXJyZW50ID0ge1xuICAgICAgICAgICAgICAgICAgem9uZTogc291cmNlRGF0YS56b25lLFxuICAgICAgICAgICAgICAgICAgaW5kZXg6IHNvdXJjZURhdGEuaW5kZXhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKFxuICAgICAgICAgICAgICAgIGluaXRpYWxTZWxlY3Rvci5jdXJyZW50LFxuICAgICAgICAgICAgICAgIGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB6b25lU3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgcHJldmlld0luZGV4OiB7XG4gICAgICAgICAgICAgICAgICAgIFt0YXJnZXRab25lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFR5cGU6IHNvdXJjZURhdGEuY29tcG9uZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGFyZ2V0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgem9uZTogdGFyZ2V0Wm9uZSxcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wczogaXRlbS5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBzb3VyY2UuZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfZCA9IGRyYWdMaXN0ZW5lcnMuZHJhZ292ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfZC5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgICAgICAgICBmbihldmVudCwgbWFuYWdlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uRHJhZ1N0YXJ0OiAoZXZlbnQsIG1hbmFnZXIpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHsgc291cmNlIH0gPSBldmVudC5vcGVyYXRpb247XG4gICAgICAgICAgICBpZiAoc291cmNlICYmIHNvdXJjZS50eXBlICE9PSBcInZvaWRcIikge1xuICAgICAgICAgICAgICBjb25zdCBzb3VyY2VEYXRhID0gc291cmNlLmRhdGE7XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHpvbmU6IHNvdXJjZURhdGEuem9uZSxcbiAgICAgICAgICAgICAgICAgIGluZGV4OiBzb3VyY2VEYXRhLmluZGV4XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhcHBTdG9yZS5nZXRTdGF0ZSgpLnN0YXRlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgIHByZXZpZXdJbmRleDoge1xuICAgICAgICAgICAgICAgICAgICBbc291cmNlRGF0YS56b25lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFR5cGU6IHNvdXJjZURhdGEuY29tcG9uZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogc291cmNlRGF0YS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICB6b25lOiBzb3VyY2VEYXRhLnpvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IGl0ZW0ucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogc291cmNlLmVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2EgPSBkcmFnTGlzdGVuZXJzLmRyYWdzdGFydCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICAgICAgICAgIGZuKGV2ZW50LCBtYW5hZ2VyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25CZWZvcmVEcmFnU3RhcnQ6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICAgICAgY29uc3QgaXNOZXdDb21wb25lbnQgPSAoKF9hID0gZXZlbnQub3BlcmF0aW9uLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnR5cGUpID09PSBcImRyYXdlclwiO1xuICAgICAgICAgICAgZHJhZ01vZGUuY3VycmVudCA9IGlzTmV3Q29tcG9uZW50ID8gXCJuZXdcIiA6IFwiZXhpc3RpbmdcIjtcbiAgICAgICAgICAgIGluaXRpYWxTZWxlY3Rvci5jdXJyZW50ID0gdm9pZCAwO1xuICAgICAgICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHsgZHJhZ2dlZEl0ZW06IGV2ZW50Lm9wZXJhdGlvbi5zb3VyY2UgfSk7XG4gICAgICAgICAgICBpZiAoKChfYiA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc2VsZWN0ZWRJdGVtKSA9PSBudWxsID8gdm9pZCAwIDogX2IucHJvcHMuaWQpICE9PSAoKF9jID0gZXZlbnQub3BlcmF0aW9uLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmlkKSkge1xuICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZXRVaVwiLFxuICAgICAgICAgICAgICAgIHVpOiB7XG4gICAgICAgICAgICAgICAgICBpdGVtU2VsZWN0b3I6IG51bGwsXG4gICAgICAgICAgICAgICAgICBpc0RyYWdnaW5nOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWNvcmRIaXN0b3J5OiBmYWxzZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNldFVpXCIsXG4gICAgICAgICAgICAgICAgdWk6IHtcbiAgICAgICAgICAgICAgICAgIGlzRHJhZ2dpbmc6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlY29yZEhpc3Rvcnk6IGZhbHNlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50cnlFbCA9IChfZCA9IGdldEZyYW1lKCkpID09IG51bGwgPyB2b2lkIDAgOiBfZC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtcHVjay1lbnRyeV1cIik7XG4gICAgICAgICAgICBlbnRyeUVsID09IG51bGwgPyB2b2lkIDAgOiBlbnRyeUVsLnNldEF0dHJpYnV0ZShcImRhdGEtcHVjay1kcmFnZ2luZ1wiLCBcInRydWVcIik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIxKFpvbmVTdG9yZVByb3ZpZGVyLCB7IHN0b3JlOiB6b25lU3RvcmUsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjEoRHJvcFpvbmVQcm92aWRlciwgeyB2YWx1ZTogbmV4dENvbnRleHRWYWx1ZSwgY2hpbGRyZW4gfSkgfSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cbiAgKSB9KTtcbn07XG52YXIgRHJhZ0Ryb3BDb250ZXh0ID0gKHtcbiAgY2hpbGRyZW4sXG4gIGRpc2FibGVBdXRvU2Nyb2xsXG59KSA9PiB7XG4gIGNvbnN0IHN0YXR1cyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnN0YXR1cyk7XG4gIGlmIChzdGF0dXMgPT09IFwiTE9BRElOR1wiKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjEoRHJhZ0Ryb3BDb250ZXh0Q2xpZW50LCB7IGRpc2FibGVBdXRvU2Nyb2xsLCBjaGlsZHJlbiB9KTtcbn07XG5cbi8vIGNvbXBvbmVudHMvRHJhd2VyL2luZGV4LnRzeFxuaW1wb3J0IHsgdXNlRHJhZ2dhYmxlLCB1c2VEcm9wcGFibGUgfSBmcm9tIFwiQGRuZC1raXQvcmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gyMiwganN4cyBhcyBqc3hzMTAgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUxNyA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIkRyYXdlclwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQxMik7XG52YXIgZ2V0Q2xhc3NOYW1lSXRlbTIgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJEcmF3ZXJJdGVtXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDEyKTtcbnZhciBEcmF3ZXJJdGVtSW5uZXIgPSAoe1xuICBjaGlsZHJlbixcbiAgbmFtZSxcbiAgbGFiZWwsXG4gIGRyYWdSZWYsXG4gIGlzRHJhZ0Rpc2FibGVkXG59KSA9PiB7XG4gIGNvbnN0IEN1c3RvbUlubmVyID0gdXNlTWVtbzcoXG4gICAgKCkgPT4gY2hpbGRyZW4gfHwgKCh7IGNoaWxkcmVuOiBjaGlsZHJlbjIgfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeDIyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVJdGVtMihcImRlZmF1bHRcIiksIGNoaWxkcmVuOiBjaGlsZHJlbjIgfSkpLFxuICAgIFtjaGlsZHJlbl1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyMihcbiAgICBcImRpdlwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lSXRlbTIoeyBkaXNhYmxlZDogaXNEcmFnRGlzYWJsZWQgfSksXG4gICAgICByZWY6IGRyYWdSZWYsXG4gICAgICBvbk1vdXNlRG93bjogKGUpID0+IGUucHJldmVudERlZmF1bHQoKSxcbiAgICAgIFwiZGF0YS10ZXN0aWRcIjogZHJhZ1JlZiA/IGBkcmF3ZXItaXRlbToke25hbWV9YCA6IFwiXCIsXG4gICAgICBcImRhdGEtcHVjay1kcmF3ZXItaXRlbVwiOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMihDdXN0b21Jbm5lciwgeyBuYW1lLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVJdGVtMihcImRyYWdnYWJsZVdyYXBwZXJcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czEwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVJdGVtMihcImRyYWdnYWJsZVwiKSwgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVJdGVtMihcIm5hbWVcIiksIGNoaWxkcmVuOiBsYWJlbCAhPSBudWxsID8gbGFiZWwgOiBuYW1lIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZUl0ZW0yKFwiaWNvblwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMihEcmFnSWNvbiwge30pIH0pXG4gICAgICBdIH0pIH0pIH0pXG4gICAgfVxuICApO1xufTtcbnZhciBEcmF3ZXJJdGVtRHJhZ2dhYmxlID0gKHtcbiAgY2hpbGRyZW4sXG4gIG5hbWUsXG4gIGxhYmVsLFxuICBpZCxcbiAgaXNEcmFnRGlzYWJsZWRcbn0pID0+IHtcbiAgY29uc3QgeyByZWYgfSA9IHVzZURyYWdnYWJsZSh7XG4gICAgaWQsXG4gICAgZGF0YTogeyBjb21wb25lbnRUeXBlOiBuYW1lIH0sXG4gICAgZGlzYWJsZWQ6IGlzRHJhZ0Rpc2FibGVkLFxuICAgIHR5cGU6IFwiZHJhd2VyXCJcbiAgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czEwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUxNyhcImRyYWdnYWJsZVwiKSwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MjIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTE3KFwiZHJhZ2dhYmxlQmdcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjIoRHJhd2VySXRlbUlubmVyLCB7IG5hbWUsIGxhYmVsLCBjaGlsZHJlbiB9KSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MjIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTE3KFwiZHJhZ2dhYmxlRmdcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjIoXG4gICAgICBEcmF3ZXJJdGVtSW5uZXIsXG4gICAgICB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxhYmVsLFxuICAgICAgICBkcmFnUmVmOiByZWYsXG4gICAgICAgIGlzRHJhZ0Rpc2FibGVkLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfVxuICAgICkgfSlcbiAgXSB9KTtcbn07XG52YXIgRHJhd2VySXRlbSA9ICh7XG4gIG5hbWUsXG4gIGNoaWxkcmVuLFxuICBpZCxcbiAgbGFiZWwsXG4gIGluZGV4LFxuICBpc0RyYWdEaXNhYmxlZFxufSkgPT4ge1xuICBjb25zdCByZXNvbHZlZElkID0gaWQgfHwgbmFtZTtcbiAgY29uc3QgW2R5bmFtaWNJZCwgc2V0RHluYW1pY0lkXSA9IHVzZVN0YXRlMTIoZ2VuZXJhdGVJZChyZXNvbHZlZElkKSk7XG4gIGlmICh0eXBlb2YgaW5kZXggIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJXYXJuaW5nOiBUaGUgYGluZGV4YCBwcm9wIG9uIERyYXdlci5JdGVtIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciByZXF1aXJlZC5cIlxuICAgICk7XG4gIH1cbiAgdXNlRHJhZ0xpc3RlbmVyKFxuICAgIFwiZHJhZ2VuZFwiLFxuICAgICgpID0+IHtcbiAgICAgIHNldER5bmFtaWNJZChnZW5lcmF0ZUlkKHJlc29sdmVkSWQpKTtcbiAgICB9LFxuICAgIFtyZXNvbHZlZElkXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDIyKFwiZGl2XCIsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyMihcbiAgICBEcmF3ZXJJdGVtRHJhZ2dhYmxlLFxuICAgIHtcbiAgICAgIG5hbWUsXG4gICAgICBsYWJlbCxcbiAgICAgIGlkOiBkeW5hbWljSWQsXG4gICAgICBpc0RyYWdEaXNhYmxlZCxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApIH0sIGR5bmFtaWNJZCk7XG59O1xudmFyIERyYXdlciA9ICh7XG4gIGNoaWxkcmVuLFxuICBkcm9wcGFibGVJZCxcbiAgZGlyZWN0aW9uXG59KSA9PiB7XG4gIGlmIChkcm9wcGFibGVJZCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIldhcm5pbmc6IFRoZSBgZHJvcHBhYmxlSWRgIHByb3Agb24gRHJhd2VyIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciByZXF1aXJlZC5cIlxuICAgICk7XG4gIH1cbiAgaWYgKGRpcmVjdGlvbikge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIldhcm5pbmc6IFRoZSBgZGlyZWN0aW9uYCBwcm9wIG9uIERyYXdlciBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgcmVxdWlyZWQgdG8gYWNoaWV2ZSBtdWx0aS1kaXJlY3Rpb25hbCBkcmFnZ2luZy5cIlxuICAgICk7XG4gIH1cbiAgY29uc3QgaWQgPSB1c2VTYWZlSWQoKTtcbiAgY29uc3QgeyByZWYgfSA9IHVzZURyb3BwYWJsZSh7XG4gICAgaWQsXG4gICAgdHlwZTogXCJ2b2lkXCIsXG4gICAgY29sbGlzaW9uUHJpb3JpdHk6IDBcbiAgICAvLyBOZXZlciBjb2xsaWRlIHdpdGggdGhpcywgYnV0IHdlIHVzZSBpdCBzbyBOZXN0ZWREcm9wcGFibGVQbHVnaW4gcmVzcGVjdHMgdGhlIERyYXdlclxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyMihcbiAgICBcImRpdlwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTcoKSxcbiAgICAgIHJlZixcbiAgICAgIFwiZGF0YS1wdWNrLWRuZFwiOiBpZCxcbiAgICAgIFwiZGF0YS1wdWNrLWRyYXdlclwiOiB0cnVlLFxuICAgICAgXCJkYXRhLXB1Y2stZG5kLXZvaWRcIjogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApO1xufTtcbkRyYXdlci5JdGVtID0gRHJhd2VySXRlbTtcblxuLy8gY29tcG9uZW50cy9Ecm9wWm9uZS9saWIvdXNlLW1pbi1lbXB0eS1oZWlnaHQudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTQsIHVzZVJlZiBhcyB1c2VSZWY0LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEzIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgZ2V0TnVtSXRlbXMgPSAoYXBwU3RvcmUsIHpvbmVDb21wb3VuZCkgPT4gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZS5pbmRleGVzLnpvbmVzW3pvbmVDb21wb3VuZF0uY29udGVudElkcy5sZW5ndGg7XG52YXIgdXNlTWluRW1wdHlIZWlnaHQgPSAoe1xuICB6b25lQ29tcG91bmQsXG4gIHVzZXJNaW5FbXB0eUhlaWdodCxcbiAgcmVmXG59KSA9PiB7XG4gIGNvbnN0IGFwcFN0b3JlID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgY29uc3QgW3ByZXZIZWlnaHQsIHNldFByZXZIZWlnaHRdID0gdXNlU3RhdGUxMygwKTtcbiAgY29uc3QgW2lzQW5pbWF0aW5nLCBzZXRJc0FuaW1hdGluZ10gPSB1c2VTdGF0ZTEzKGZhbHNlKTtcbiAgY29uc3QgeyBkcmFnZ2VkSXRlbSwgaXNab25lIH0gPSB1c2VDb250ZXh0U3RvcmUoWm9uZVN0b3JlQ29udGV4dCwgKHMpID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHJldHVybiB7XG4gICAgICBkcmFnZ2VkSXRlbTogKChfYSA9IHMuZHJhZ2dlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5kYXRhLnpvbmUpID09PSB6b25lQ29tcG91bmQgPyBzLmRyYWdnZWRJdGVtIDogbnVsbCxcbiAgICAgIGlzWm9uZTogKChfYiA9IHMuZHJhZ2dlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5kYXRhLnpvbmUpID09PSB6b25lQ29tcG91bmRcbiAgICB9O1xuICB9KTtcbiAgY29uc3QgbnVtSXRlbXMgPSB1c2VSZWY0KDApO1xuICBjb25zdCBvbkRyYWdGaW5pc2hlZCA9IHVzZU9uRHJhZ0ZpbmlzaGVkKFxuICAgIChmaW5pc2hlZCkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgIGNvbnN0IG5ld051bUl0ZW1zID0gZ2V0TnVtSXRlbXMoYXBwU3RvcmUsIHpvbmVDb21wb3VuZCk7XG4gICAgICAgIHNldFByZXZIZWlnaHQoMCk7XG4gICAgICAgIGlmIChuZXdOdW1JdGVtcyB8fCBudW1JdGVtcy5jdXJyZW50ID09PSAwKSB7XG4gICAgICAgICAgc2V0SXNBbmltYXRpbmcoZmFsc2UpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBhcHBTdG9yZS5nZXRTdGF0ZSgpLnNlbGVjdGVkSXRlbTtcbiAgICAgICAgY29uc3Qgem9uZXMgPSBhcHBTdG9yZS5nZXRTdGF0ZSgpLnN0YXRlLmluZGV4ZXMuem9uZXM7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5ub2RlcztcbiAgICAgICAgKF9hID0gbm9kZXMubm9kZXNbc2VsZWN0ZWRJdGVtID09IG51bGwgPyB2b2lkIDAgOiBzZWxlY3RlZEl0ZW0ucHJvcHMuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWV0aG9kcy5oaWRlT3ZlcmxheSgpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnRJZHMgPSAoKF9hMiA9IHpvbmVzW3pvbmVDb21wb3VuZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYTIuY29udGVudElkcykgfHwgW107XG4gICAgICAgICAgY29udGVudElkcy5mb3JFYWNoKChjb250ZW50SWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlcy5ub2Rlc1tjb250ZW50SWRdO1xuICAgICAgICAgICAgbm9kZSA9PSBudWxsID8gdm9pZCAwIDogbm9kZS5tZXRob2RzLnN5bmMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdmFyIF9hMywgX2I7XG4gICAgICAgICAgICAgIChfYTMgPSBub2Rlcy5ub2Rlc1tzZWxlY3RlZEl0ZW0ucHJvcHMuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EzLm1ldGhvZHMuc3luYygpO1xuICAgICAgICAgICAgICAoX2IgPSBub2Rlcy5ub2Rlc1tzZWxlY3RlZEl0ZW0ucHJvcHMuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2IubWV0aG9kcy5zaG93T3ZlcmxheSgpO1xuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0SXNBbmltYXRpbmcoZmFsc2UpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2FwcFN0b3JlLCBwcmV2SGVpZ2h0LCB6b25lQ29tcG91bmRdXG4gICk7XG4gIHVzZUVmZmVjdDE0KCgpID0+IHtcbiAgICBpZiAoZHJhZ2dlZEl0ZW0gJiYgcmVmLmN1cnJlbnQpIHtcbiAgICAgIGlmIChpc1pvbmUpIHtcbiAgICAgICAgY29uc3QgcmVjdCA9IHJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBudW1JdGVtcy5jdXJyZW50ID0gZ2V0TnVtSXRlbXMoYXBwU3RvcmUsIHpvbmVDb21wb3VuZCk7XG4gICAgICAgIHNldFByZXZIZWlnaHQocmVjdC5oZWlnaHQpO1xuICAgICAgICBzZXRJc0FuaW1hdGluZyh0cnVlKTtcbiAgICAgICAgcmV0dXJuIG9uRHJhZ0ZpbmlzaGVkKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbcmVmLmN1cnJlbnQsIGRyYWdnZWRJdGVtLCBvbkRyYWdGaW5pc2hlZF0pO1xuICByZXR1cm4gW3ByZXZIZWlnaHQgfHwgdXNlck1pbkVtcHR5SGVpZ2h0LCBpc0FuaW1hdGluZ107XG59O1xuXG4vLyBsaWIvYXNzaWduLXJlZnMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5mdW5jdGlvbiBhc3NpZ25SZWYocmVmLCBub2RlKSB7XG4gIGlmICh0eXBlb2YgcmVmID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZWYobm9kZSk7XG4gIH0gZWxzZSBpZiAocmVmICYmIHR5cGVvZiByZWYgPT09IFwib2JqZWN0XCIgJiYgXCJjdXJyZW50XCIgaW4gcmVmKSB7XG4gICAgcmVmLmN1cnJlbnQgPSBub2RlO1xuICB9XG59XG5mdW5jdGlvbiBhc3NpZ25SZWZzKHJlZnMsIG5vZGUpIHtcbiAgcmVmcy5mb3JFYWNoKChyZWYpID0+IHtcbiAgICBhc3NpZ25SZWYocmVmLCBub2RlKTtcbiAgfSk7XG59XG5cbi8vIGNvbXBvbmVudHMvRHJvcFpvbmUvbGliL3VzZS1jb250ZW50LXdpdGgtcHJldmlldy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDcsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxNSwgdXNlU3RhdGUgYXMgdXNlU3RhdGUxNCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBsaWIvZG5kL3VzZS1yZW5kZXJlZC1jYWxsYmFjay50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZURyYWdEcm9wTWFuYWdlciB9IGZyb20gXCJAZG5kLWtpdC9yZWFjdFwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s5IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VSZW5kZXJlZENhbGxiYWNrKGNhbGxiYWNrLCBkZXBzKSB7XG4gIGNvbnN0IG1hbmFnZXIgPSB1c2VEcmFnRHJvcE1hbmFnZXIoKTtcbiAgcmV0dXJuIHVzZUNhbGxiYWNrOShcbiAgICAoLi4uYXJncykgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgeWllbGQgbWFuYWdlciA9PSBudWxsID8gdm9pZCAwIDogbWFuYWdlci5yZW5kZXJlci5yZW5kZXJpbmc7XG4gICAgICByZXR1cm4gY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfSksXG4gICAgWy4uLmRlcHMsIG1hbmFnZXJdXG4gICk7XG59XG5cbi8vIGNvbXBvbmVudHMvRHJvcFpvbmUvbGliL3VzZS1jb250ZW50LXdpdGgtcHJldmlldy50c1xudmFyIHVzZUNvbnRlbnRJZHNXaXRoUHJldmlldyA9IChjb250ZW50SWRzLCB6b25lQ29tcG91bmQpID0+IHtcbiAgY29uc3Qgem9uZVN0b3JlID0gdXNlQ29udGV4dDcoWm9uZVN0b3JlQ29udGV4dCk7XG4gIGNvbnN0IHByZXZpZXcgPSB1c2VDb250ZXh0U3RvcmUoXG4gICAgWm9uZVN0b3JlQ29udGV4dCxcbiAgICAocykgPT4gcy5wcmV2aWV3SW5kZXhbem9uZUNvbXBvdW5kXVxuICApO1xuICBjb25zdCBpc0RyYWdnaW5nID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuc3RhdGUudWkuaXNEcmFnZ2luZyk7XG4gIGNvbnN0IFtjb250ZW50SWRzV2l0aFByZXZpZXcsIHNldENvbnRlbnRJZHNXaXRoUHJldmlld10gPSB1c2VTdGF0ZTE0KGNvbnRlbnRJZHMpO1xuICBjb25zdCBbbG9jYWxQcmV2aWV3LCBzZXRMb2NhbFByZXZpZXddID0gdXNlU3RhdGUxNChcbiAgICBwcmV2aWV3XG4gICk7XG4gIGNvbnN0IHVwZGF0ZUNvbnRlbnQgPSB1c2VSZW5kZXJlZENhbGxiYWNrKFxuICAgIChjb250ZW50SWRzMiwgcHJldmlldzIsIGlzRHJhZ2dpbmcyLCBkcmFnZ2VkSXRlbUlkLCBwcmV2aWV3RXhpc3RzKSA9PiB7XG4gICAgICBpZiAoaXNEcmFnZ2luZzIgJiYgIXByZXZpZXdFeGlzdHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHByZXZpZXcyKSB7XG4gICAgICAgIGlmIChwcmV2aWV3Mi50eXBlID09PSBcImluc2VydFwiKSB7XG4gICAgICAgICAgc2V0Q29udGVudElkc1dpdGhQcmV2aWV3KFxuICAgICAgICAgICAgaW5zZXJ0KFxuICAgICAgICAgICAgICBjb250ZW50SWRzMi5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gcHJldmlldzIucHJvcHMuaWQpLFxuICAgICAgICAgICAgICBwcmV2aWV3Mi5pbmRleCxcbiAgICAgICAgICAgICAgcHJldmlldzIucHJvcHMuaWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldENvbnRlbnRJZHNXaXRoUHJldmlldyhcbiAgICAgICAgICAgIGluc2VydChcbiAgICAgICAgICAgICAgY29udGVudElkczIuZmlsdGVyKChpZCkgPT4gaWQgIT09IHByZXZpZXcyLnByb3BzLmlkKSxcbiAgICAgICAgICAgICAgcHJldmlldzIuaW5kZXgsXG4gICAgICAgICAgICAgIHByZXZpZXcyLnByb3BzLmlkXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0Q29udGVudElkc1dpdGhQcmV2aWV3KFxuICAgICAgICAgIHByZXZpZXdFeGlzdHMgPyBjb250ZW50SWRzMi5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gZHJhZ2dlZEl0ZW1JZCkgOiBjb250ZW50SWRzMlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgc2V0TG9jYWxQcmV2aWV3KHByZXZpZXcyKTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG4gIHVzZUVmZmVjdDE1KCgpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgcyA9IHpvbmVTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IGRyYWdnZWRJdGVtSWQgPSAoX2EgPSBzLmRyYWdnZWRJdGVtKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaWQ7XG4gICAgY29uc3QgcHJldmlld0V4aXN0cyA9IE9iamVjdC5rZXlzKHMucHJldmlld0luZGV4IHx8IHt9KS5sZW5ndGggPiAwO1xuICAgIHVwZGF0ZUNvbnRlbnQoXG4gICAgICBjb250ZW50SWRzLFxuICAgICAgcHJldmlldyxcbiAgICAgIGlzRHJhZ2dpbmcsXG4gICAgICBkcmFnZ2VkSXRlbUlkLFxuICAgICAgcHJldmlld0V4aXN0c1xuICAgICk7XG4gIH0sIFtjb250ZW50SWRzLCBwcmV2aWV3LCBpc0RyYWdnaW5nXSk7XG4gIHJldHVybiBbY29udGVudElkc1dpdGhQcmV2aWV3LCBsb2NhbFByZXZpZXddO1xufTtcblxuLy8gY29tcG9uZW50cy9Ecm9wWm9uZS9saWIvdXNlLWRyYWctYXhpcy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTAsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxNiwgdXNlU3RhdGUgYXMgdXNlU3RhdGUxNSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIEdSSURfRFJBR19BWElTID0gXCJkeW5hbWljXCI7XG52YXIgRkxFWF9ST1dfRFJBR19BWElTID0gXCJ4XCI7XG52YXIgREVGQVVMVF9EUkFHX0FYSVMgPSBcInlcIjtcbnZhciB1c2VEcmFnQXhpcyA9IChyZWYsIGNvbGxpc2lvbkF4aXMpID0+IHtcbiAgY29uc3Qgc3RhdHVzID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuc3RhdHVzKTtcbiAgY29uc3QgW2RyYWdBeGlzLCBzZXREcmFnQXhpc10gPSB1c2VTdGF0ZTE1KFxuICAgIGNvbGxpc2lvbkF4aXMgfHwgREVGQVVMVF9EUkFHX0FYSVNcbiAgKTtcbiAgY29uc3QgY2FsY3VsYXRlRHJhZ0F4aXMgPSB1c2VDYWxsYmFjazEwKCgpID0+IHtcbiAgICBpZiAocmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyZWYuY3VycmVudCk7XG4gICAgICBpZiAoY29tcHV0ZWRTdHlsZS5kaXNwbGF5ID09PSBcImdyaWRcIikge1xuICAgICAgICBzZXREcmFnQXhpcyhHUklEX0RSQUdfQVhJUyk7XG4gICAgICB9IGVsc2UgaWYgKGNvbXB1dGVkU3R5bGUuZGlzcGxheSA9PT0gXCJmbGV4XCIgJiYgY29tcHV0ZWRTdHlsZS5mbGV4RGlyZWN0aW9uID09PSBcInJvd1wiKSB7XG4gICAgICAgIHNldERyYWdBeGlzKEZMRVhfUk9XX0RSQUdfQVhJUyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREcmFnQXhpcyhERUZBVUxUX0RSQUdfQVhJUyk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbcmVmLmN1cnJlbnRdKTtcbiAgdXNlRWZmZWN0MTYoKCkgPT4ge1xuICAgIGNvbnN0IG9uVmlld3BvcnRDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBjYWxjdWxhdGVEcmFnQXhpcygpO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aWV3cG9ydGNoYW5nZVwiLCBvblZpZXdwb3J0Q2hhbmdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aWV3cG9ydGNoYW5nZVwiLCBvblZpZXdwb3J0Q2hhbmdlKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdDE2KGNhbGN1bGF0ZURyYWdBeGlzLCBbc3RhdHVzLCBjb2xsaXNpb25BeGlzXSk7XG4gIHJldHVybiBbZHJhZ0F4aXMsIGNhbGN1bGF0ZURyYWdBeGlzXTtcbn07XG5cbi8vIGNvbXBvbmVudHMvRHJvcFpvbmUvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VTaGFsbG93IGFzIHVzZVNoYWxsb3c0IH0gZnJvbSBcInp1c3RhbmQvcmVhY3Qvc2hhbGxvd1wiO1xuXG4vLyBjb21wb25lbnRzL1Nsb3RSZW5kZXIvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgdXNlU2hhbGxvdyBhcyB1c2VTaGFsbG93MyB9IGZyb20gXCJ6dXN0YW5kL3JlYWN0L3NoYWxsb3dcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gyMyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIENvbnRleHRTbG90UmVuZGVyID0gKHtcbiAgY29tcG9uZW50SWQsXG4gIHpvbmVcbn0pID0+IHtcbiAgY29uc3QgY29uZmlnID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuY29uZmlnKTtcbiAgY29uc3QgbWV0YWRhdGEgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5tZXRhZGF0YSk7XG4gIGNvbnN0IHNsb3RDb250ZW50ID0gdXNlQXBwU3RvcmUoXG4gICAgdXNlU2hhbGxvdzMoKHMpID0+IHtcbiAgICAgIHZhciBfYSwgX2I7XG4gICAgICBjb25zdCBpbmRleGVzID0gcy5zdGF0ZS5pbmRleGVzO1xuICAgICAgY29uc3QgY29udGVudElkcyA9IChfYiA9IChfYSA9IGluZGV4ZXMuem9uZXNbYCR7Y29tcG9uZW50SWR9OiR7em9uZX1gXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNvbnRlbnRJZHMpICE9IG51bGwgPyBfYiA6IFtdO1xuICAgICAgcmV0dXJuIGNvbnRlbnRJZHMubWFwKChjb250ZW50SWQpID0+IGluZGV4ZXMubm9kZXNbY29udGVudElkXS5mbGF0RGF0YSk7XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyMyhcbiAgICBTbG90UmVuZGVyUHVyZSxcbiAgICB7XG4gICAgICBjb250ZW50OiBzbG90Q29udGVudCxcbiAgICAgIHpvbmUsXG4gICAgICBjb25maWcsXG4gICAgICBtZXRhZGF0YVxuICAgIH1cbiAgKTtcbn07XG5cbi8vIGxpYi9maWVsZC10cmFuc2Zvcm1zL2RlZmF1bHQtdHJhbnNmb3Jtcy9pbmxpbmUtdGV4dC10cmFuc2Zvcm0udHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBjb21wb25lbnRzL0lubGluZVRleHRGaWVsZC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyBtZW1vLCB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTcsIHVzZVJlZiBhcyB1c2VSZWY1LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTE2IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGxpYi9vdmVybGF5LXBvcnRhbC9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgcmVnaXN0ZXJPdmVybGF5UG9ydGFsID0gKGVsLCBvcHRzID0ge30pID0+IHtcbiAgaWYgKCFlbCkgcmV0dXJuO1xuICBjb25zdCB7IGRpc2FibGVEcmFnID0gZmFsc2UsIGRpc2FibGVEcmFnT25Gb2N1cyA9IHRydWUgfSA9IG9wdHM7XG4gIGNvbnN0IHN0b3BQcm9wYWdhdGlvbiA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBzdG9wUHJvcGFnYXRpb24sIHtcbiAgICBjYXB0dXJlOiB0cnVlXG4gIH0pO1xuICBjb25zdCBvbkZvY3VzID0gKCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHN0b3BQcm9wYWdhdGlvbiwge1xuICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9LCAyMDApO1xuICB9O1xuICBjb25zdCBvbkJsdXIgPSAoKSA9PiB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHN0b3BQcm9wYWdhdGlvbiwge1xuICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgIH0pO1xuICB9O1xuICBpZiAoZGlzYWJsZURyYWdPbkZvY3VzKSB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIG9uRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvbkJsdXIsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgfSBlbHNlIGlmIChkaXNhYmxlRHJhZykge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBzdG9wUHJvcGFnYXRpb24sIHtcbiAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stb3ZlcmxheS1wb3J0YWxcIiwgXCJ0cnVlXCIpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgc3RvcFByb3BhZ2F0aW9uLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSk7XG4gICAgaWYgKGRpc2FibGVEcmFnT25Gb2N1cykge1xuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIG9uRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIG9uRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICB9IGVsc2UgaWYgKGRpc2FibGVEcmFnKSB7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgc3RvcFByb3BhZ2F0aW9uLCB7XG4gICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stb3ZlcmxheS1wb3J0YWxcIik7XG4gIH07XG59O1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvSW5saW5lVGV4dEZpZWxkL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0MTMgPSB7IFwiSW5saW5lVGV4dEZpZWxkXCI6IFwiX0lubGluZVRleHRGaWVsZF8xeHBoNl8xXCIgfTtcblxuLy8gbGliL2RhdGEvc2V0LWRlZXAudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5mdW5jdGlvbiBzZXREZWVwKG5vZGUsIHBhdGgsIG5ld1ZhbCkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoXCIuXCIpO1xuICBjb25zdCBuZXdOb2RlID0gX19zcHJlYWRWYWx1ZXMoe30sIG5vZGUpO1xuICBsZXQgY3VyID0gbmV3Tm9kZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IFtwcm9wLCBpZHhTdHJdID0gcGFydHNbaV0ucmVwbGFjZShcIl1cIiwgXCJcIikuc3BsaXQoXCJbXCIpO1xuICAgIGNvbnN0IGlzTGFzdCA9IGkgPT09IHBhcnRzLmxlbmd0aCAtIDE7XG4gICAgaWYgKGlkeFN0ciAhPT0gdm9pZCAwKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY3VyW3Byb3BdKSkge1xuICAgICAgICBjdXJbcHJvcF0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlkeCA9IE51bWJlcihpZHhTdHIpO1xuICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICBjdXJbcHJvcF1baWR4XSA9IG5ld1ZhbDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY3VyW3Byb3BdW2lkeF0gPT09IHZvaWQgMCkgY3VyW3Byb3BdW2lkeF0gPSB7fTtcbiAgICAgIGN1ciA9IGN1cltwcm9wXVtpZHhdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChpc0xhc3QpIHtcbiAgICAgIGN1cltwcm9wXSA9IG5ld1ZhbDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY3VyW3Byb3BdID09PSB2b2lkIDApIHtcbiAgICAgIGN1cltwcm9wXSA9IHt9O1xuICAgIH1cbiAgICBjdXIgPSBjdXJbcHJvcF07XG4gIH1cbiAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBub2RlKSwgbmV3Tm9kZSk7XG59XG5cbi8vIGxpYi9nZXQtc2VsZWN0b3ItZm9yLWlkLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIGdldFNlbGVjdG9yRm9ySWQgPSAoc3RhdGUsIGlkKSA9PiB7XG4gIGNvbnN0IG5vZGUgPSBzdGF0ZS5pbmRleGVzLm5vZGVzW2lkXTtcbiAgaWYgKCFub2RlKSByZXR1cm47XG4gIGNvbnN0IHpvbmVDb21wb3VuZCA9IGAke25vZGUucGFyZW50SWR9OiR7bm9kZS56b25lfWA7XG4gIGNvbnN0IGluZGV4ID0gc3RhdGUuaW5kZXhlcy56b25lc1t6b25lQ29tcG91bmRdLmNvbnRlbnRJZHMuaW5kZXhPZihpZCk7XG4gIHJldHVybiB7IHpvbmU6IHpvbmVDb21wb3VuZCwgaW5kZXggfTtcbn07XG5cbi8vIGNvbXBvbmVudHMvSW5saW5lVGV4dEZpZWxkL2luZGV4LnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDI0IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMTggPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJJbmxpbmVUZXh0RmllbGRcIiwgc3R5bGVzX21vZHVsZV9kZWZhdWx0MTMpO1xudmFyIElubGluZVRleHRGaWVsZEludGVybmFsID0gKHtcbiAgcHJvcFBhdGgsXG4gIGNvbXBvbmVudElkLFxuICB2YWx1ZSxcbiAgaXNSZWFkT25seSxcbiAgb3B0cyA9IHt9XG59KSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgcmVmID0gdXNlUmVmNShudWxsKTtcbiAgY29uc3QgYXBwU3RvcmVBcGkgPSB1c2VBcHBTdG9yZUFwaSgpO1xuICBjb25zdCBkaXNhYmxlTGluZUJyZWFrcyA9IChfYSA9IG9wdHMuZGlzYWJsZUxpbmVCcmVha3MpICE9IG51bGwgPyBfYSA6IGZhbHNlO1xuICB1c2VFZmZlY3QxNygoKSA9PiB7XG4gICAgY29uc3QgYXBwU3RvcmUgPSBhcHBTdG9yZUFwaS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IGRhdGEgPSBhcHBTdG9yZS5zdGF0ZS5pbmRleGVzLm5vZGVzW2NvbXBvbmVudElkXS5kYXRhO1xuICAgIGNvbnN0IGNvbXBvbmVudENvbmZpZyA9IGFwcFN0b3JlLmdldENvbXBvbmVudENvbmZpZyhkYXRhLnR5cGUpO1xuICAgIGlmICghY29tcG9uZW50Q29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbmxpbmVUZXh0RmllbGQgRXJyb3I6IE5vIGNvbmZpZyBkZWZpbmVkIGZvciAke2RhdGEudHlwZX1gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAocmVmLmN1cnJlbnQpIHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gcmVmLmN1cnJlbnQuaW5uZXJUZXh0KSB7XG4gICAgICAgIHJlZi5jdXJyZW50LnJlcGxhY2VDaGlsZHJlbih2YWx1ZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjbGVhbnVwUG9ydGFsID0gcmVnaXN0ZXJPdmVybGF5UG9ydGFsKHJlZi5jdXJyZW50KTtcbiAgICAgIGNvbnN0IGhhbmRsZUlucHV0ID0gKGUpID0+IF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB2YXIgX2EyO1xuICAgICAgICBjb25zdCBhcHBTdG9yZTIgPSBhcHBTdG9yZUFwaS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBub2RlID0gYXBwU3RvcmUyLnN0YXRlLmluZGV4ZXMubm9kZXNbY29tcG9uZW50SWRdO1xuICAgICAgICBjb25zdCB6b25lQ29tcG91bmQgPSBgJHtub2RlLnBhcmVudElkfToke25vZGUuem9uZX1gO1xuICAgICAgICBjb25zdCBpbmRleCA9IChfYTIgPSBhcHBTdG9yZTIuc3RhdGUuaW5kZXhlcy56b25lc1t6b25lQ29tcG91bmRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmNvbnRlbnRJZHMuaW5kZXhPZihcbiAgICAgICAgICBjb21wb25lbnRJZFxuICAgICAgICApO1xuICAgICAgICBsZXQgdmFsdWUyID0gZS50YXJnZXQuaW5uZXJUZXh0O1xuICAgICAgICBpZiAoZGlzYWJsZUxpbmVCcmVha3MpIHtcbiAgICAgICAgICB2YWx1ZTIgPSB2YWx1ZTIucmVwbGFjZUFsbCgvXFxuL2dtLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdQcm9wcyA9IHNldERlZXAobm9kZS5kYXRhLnByb3BzLCBwcm9wUGF0aCwgdmFsdWUyKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWREYXRhID0geWllbGQgYXBwU3RvcmUyLnJlc29sdmVDb21wb25lbnREYXRhKFxuICAgICAgICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG5vZGUuZGF0YSksIHsgcHJvcHM6IG5ld1Byb3BzIH0pLFxuICAgICAgICAgIFwicmVwbGFjZVwiXG4gICAgICAgICk7XG4gICAgICAgIGFwcFN0b3JlMi5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgZGF0YTogcmVzb2x2ZWREYXRhLm5vZGUsXG4gICAgICAgICAgZGVzdGluYXRpb25JbmRleDogaW5kZXgsXG4gICAgICAgICAgZGVzdGluYXRpb25ab25lOiB6b25lQ29tcG91bmRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJlZi5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBoYW5kbGVJbnB1dCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB2YXIgX2EyO1xuICAgICAgICAoX2EyID0gcmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGhhbmRsZUlucHV0KTtcbiAgICAgICAgY2xlYW51cFBvcnRhbCA9PSBudWxsID8gdm9pZCAwIDogY2xlYW51cFBvcnRhbCgpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFthcHBTdG9yZUFwaSwgcmVmLmN1cnJlbnQsIHZhbHVlLCBkaXNhYmxlTGluZUJyZWFrc10pO1xuICBjb25zdCBbaXNIb3ZlcmluZywgc2V0SXNIb3ZlcmluZ10gPSB1c2VTdGF0ZTE2KGZhbHNlKTtcbiAgY29uc3QgW2lzRm9jdXNlZCwgc2V0SXNGb2N1c2VkXSA9IHVzZVN0YXRlMTYoZmFsc2UpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI0KFxuICAgIFwic3BhblwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMTgoKSxcbiAgICAgIHJlZixcbiAgICAgIGNvbnRlbnRFZGl0YWJsZTogaXNIb3ZlcmluZyB8fCBpc0ZvY3VzZWQgPyBcInBsYWludGV4dC1vbmx5XCIgOiBcImZhbHNlXCIsXG4gICAgICBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LFxuICAgICAgb25DbGlja0NhcHR1cmU6IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgaXRlbVNlbGVjdG9yID0gZ2V0U2VsZWN0b3JGb3JJZChcbiAgICAgICAgICBhcHBTdG9yZUFwaS5nZXRTdGF0ZSgpLnN0YXRlLFxuICAgICAgICAgIGNvbXBvbmVudElkXG4gICAgICAgICk7XG4gICAgICAgIGFwcFN0b3JlQXBpLmdldFN0YXRlKCkuc2V0VWkoeyBpdGVtU2VsZWN0b3IgfSk7XG4gICAgICB9LFxuICAgICAgb25LZXlEb3duOiAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoZGlzYWJsZUxpbmVCcmVha3MgJiYgZS5rZXkgPT09IFwiRW50ZXJcIiB8fCBpc1JlYWRPbmx5KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25LZXlVcDogKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSxcbiAgICAgIG9uTW91c2VPdmVyQ2FwdHVyZTogKCkgPT4gc2V0SXNIb3ZlcmluZyh0cnVlKSxcbiAgICAgIG9uTW91c2VPdXRDYXB0dXJlOiAoKSA9PiBzZXRJc0hvdmVyaW5nKGZhbHNlKSxcbiAgICAgIG9uRm9jdXM6ICgpID0+IHNldElzRm9jdXNlZCh0cnVlKSxcbiAgICAgIG9uQmx1cjogKCkgPT4gc2V0SXNGb2N1c2VkKGZhbHNlKVxuICAgIH1cbiAgKTtcbn07XG52YXIgSW5saW5lVGV4dEZpZWxkID0gbWVtbyhJbmxpbmVUZXh0RmllbGRJbnRlcm5hbCk7XG5cbi8vIGxpYi9maWVsZC10cmFuc2Zvcm1zL2RlZmF1bHQtdHJhbnNmb3Jtcy9pbmxpbmUtdGV4dC10cmFuc2Zvcm0udHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MjUgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRJbmxpbmVUZXh0VHJhbnNmb3JtID0gKCkgPT4gKHtcbiAgdGV4dDogKHsgdmFsdWUsIGNvbXBvbmVudElkLCBmaWVsZCwgcHJvcFBhdGgsIGlzUmVhZE9ubHkgfSkgPT4ge1xuICAgIGlmIChmaWVsZC5jb250ZW50RWRpdGFibGUpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjUoXG4gICAgICAgIElubGluZVRleHRGaWVsZCxcbiAgICAgICAge1xuICAgICAgICAgIHByb3BQYXRoLFxuICAgICAgICAgIGNvbXBvbmVudElkLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG9wdHM6IHsgZGlzYWJsZUxpbmVCcmVha3M6IHRydWUgfSxcbiAgICAgICAgICBpc1JlYWRPbmx5XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgdGV4dGFyZWE6ICh7IHZhbHVlLCBjb21wb25lbnRJZCwgZmllbGQsIHByb3BQYXRoLCBpc1JlYWRPbmx5IH0pID0+IHtcbiAgICBpZiAoZmllbGQuY29udGVudEVkaXRhYmxlKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI1KFxuICAgICAgICBJbmxpbmVUZXh0RmllbGQsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm9wUGF0aCxcbiAgICAgICAgICBjb21wb25lbnRJZCxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBpc1JlYWRPbmx5XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgY3VzdG9tOiAoeyB2YWx1ZSwgY29tcG9uZW50SWQsIGZpZWxkLCBwcm9wUGF0aCwgaXNSZWFkT25seSB9KSA9PiB7XG4gICAgaWYgKGZpZWxkLmNvbnRlbnRFZGl0YWJsZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjUoXG4gICAgICAgIElubGluZVRleHRGaWVsZCxcbiAgICAgICAge1xuICAgICAgICAgIHByb3BQYXRoLFxuICAgICAgICAgIGNvbXBvbmVudElkLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGlzUmVhZE9ubHlcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59KTtcblxuLy8gY29tcG9uZW50cy9Ecm9wWm9uZS9pbmRleC50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50NywganN4IGFzIGpzeDI2LCBqc3hzIGFzIGpzeHMxMSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTE5ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiRHJvcFpvbmVcIiwgc3R5bGVzX21vZHVsZV9kZWZhdWx0MTEpO1xudmFyIGdldFJhbmRvbUNvbG9yID0gKCkgPT4gYCMke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2Nzc3MjE1KS50b1N0cmluZygxNil9YDtcbnZhciBSRU5ERVJfREVCVUcgPSBmYWxzZTtcbnZhciBEcm9wWm9uZUVkaXRQdXJlID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MjYoRHJvcFpvbmVFZGl0LCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbnZhciBEcm9wWm9uZUNoaWxkID0gKHtcbiAgem9uZUNvbXBvdW5kLFxuICBjb21wb25lbnRJZCxcbiAgaW5kZXgsXG4gIGRyYWdBeGlzLFxuICBjb2xsaXNpb25BeGlzLFxuICBpbkRyb3BwYWJsZVpvbmVcbn0pID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgbWV0YWRhdGEgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5tZXRhZGF0YSk7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQ4KGRyb3Bab25lQ29udGV4dCk7XG4gIGNvbnN0IHsgZGVwdGggPSAxIH0gPSBjdHggIT0gbnVsbCA/IGN0eCA6IHt9O1xuICBjb25zdCB6b25lU3RvcmUgPSB1c2VDb250ZXh0OChab25lU3RvcmVDb250ZXh0KTtcbiAgY29uc3Qgbm9kZVByb3BzID0gdXNlQXBwU3RvcmUoXG4gICAgdXNlU2hhbGxvdzQoKHMpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4gKF9hMiA9IHMuc3RhdGUuaW5kZXhlcy5ub2Rlc1tjb21wb25lbnRJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZmxhdERhdGEucHJvcHM7XG4gICAgfSlcbiAgKTtcbiAgY29uc3Qgbm9kZVR5cGUgPSB1c2VBcHBTdG9yZShcbiAgICAocykgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoX2EyID0gcy5zdGF0ZS5pbmRleGVzLm5vZGVzW2NvbXBvbmVudElkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5kYXRhLnR5cGU7XG4gICAgfVxuICApO1xuICBjb25zdCBub2RlUmVhZE9ubHkgPSB1c2VBcHBTdG9yZShcbiAgICB1c2VTaGFsbG93NCgocykgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoX2EyID0gcy5zdGF0ZS5pbmRleGVzLm5vZGVzW2NvbXBvbmVudElkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5kYXRhLnJlYWRPbmx5O1xuICAgIH0pXG4gICk7XG4gIGNvbnN0IGFwcFN0b3JlID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgY29uc3QgaXRlbSA9IHVzZU1lbW84KCgpID0+IHtcbiAgICBpZiAobm9kZVByb3BzKSB7XG4gICAgICBjb25zdCBleHBhbmRlZCA9IGV4cGFuZE5vZGUoe1xuICAgICAgICB0eXBlOiBub2RlVHlwZSxcbiAgICAgICAgcHJvcHM6IG5vZGVQcm9wc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZXhwYW5kZWQ7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpZXcgPSB6b25lU3RvcmUuZ2V0U3RhdGUoKS5wcmV2aWV3SW5kZXhbem9uZUNvbXBvdW5kXTtcbiAgICBpZiAoY29tcG9uZW50SWQgPT09IChwcmV2aWV3ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aWV3LnByb3BzLmlkKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcHJldmlldy5jb21wb25lbnRUeXBlLFxuICAgICAgICBwcm9wczogcHJldmlldy5wcm9wcyxcbiAgICAgICAgcHJldmlld1R5cGU6IHByZXZpZXcudHlwZSxcbiAgICAgICAgZWxlbWVudDogcHJldmlldy5lbGVtZW50XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSwgW2FwcFN0b3JlLCBjb21wb25lbnRJZCwgem9uZUNvbXBvdW5kLCBub2RlVHlwZSwgbm9kZVByb3BzXSk7XG4gIGNvbnN0IGNvbXBvbmVudENvbmZpZyA9IHVzZUFwcFN0b3JlKFxuICAgIChzKSA9PiAoaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS50eXBlKSA/IHMuY29uZmlnLmNvbXBvbmVudHNbaXRlbS50eXBlXSA6IG51bGxcbiAgKTtcbiAgY29uc3QgcHVja1Byb3BzID0gdXNlTWVtbzgoXG4gICAgKCkgPT4gKHtcbiAgICAgIHJlbmRlckRyb3Bab25lOiBEcm9wWm9uZUVkaXRQdXJlLFxuICAgICAgaXNFZGl0aW5nOiB0cnVlLFxuICAgICAgZHJhZ1JlZjogbnVsbCxcbiAgICAgIG1ldGFkYXRhOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgbWV0YWRhdGEpLCBjb21wb25lbnRDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBvbmVudENvbmZpZy5tZXRhZGF0YSlcbiAgICB9KSxcbiAgICBbbWV0YWRhdGEsIGNvbXBvbmVudENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29tcG9uZW50Q29uZmlnLm1ldGFkYXRhXVxuICApO1xuICBjb25zdCBvdmVycmlkZXMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5vdmVycmlkZXMpO1xuICBjb25zdCBpc0xvYWRpbmcgPSB1c2VBcHBTdG9yZShcbiAgICAocykgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoKF9hMiA9IHMuY29tcG9uZW50U3RhdGVbY29tcG9uZW50SWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmxvYWRpbmdDb3VudCkgPiAwO1xuICAgIH1cbiAgKTtcbiAgY29uc3QgaXNTZWxlY3RlZCA9IHVzZUFwcFN0b3JlKFxuICAgIChzKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgcmV0dXJuICgoX2EyID0gcy5zZWxlY3RlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYTIucHJvcHMuaWQpID09PSBjb21wb25lbnRJZCB8fCBmYWxzZTtcbiAgICB9XG4gICk7XG4gIGxldCBsYWJlbCA9IChfYiA9IChfYSA9IGNvbXBvbmVudENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29tcG9uZW50Q29uZmlnLmxhYmVsKSAhPSBudWxsID8gX2EgOiBpdGVtID09IG51bGwgPyB2b2lkIDAgOiBpdGVtLnR5cGUudG9TdHJpbmcoKSkgIT0gbnVsbCA/IF9iIDogXCJDb21wb25lbnRcIjtcbiAgY29uc3QgcmVuZGVyUHJldmlldyA9IHVzZU1lbW84KFxuICAgICgpID0+IGZ1bmN0aW9uIFByZXZpZXczKCkge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIGlmIChpdGVtICYmIFwiZWxlbWVudFwiIGluIGl0ZW0gJiYgaXRlbS5lbGVtZW50KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgLy8gU2FmZSB0byB1c2UgdGhpcyBzaW5jZSB0aGUgSFRNTCBpcyBzZXQgYnkgdGhlIHVzZXJcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjYoXCJkaXZcIiwgeyBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IGl0ZW0uZWxlbWVudC5vdXRlckhUTUwgfSB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihEcmF3ZXJJdGVtSW5uZXIsIHsgbmFtZTogbGFiZWwsIGNoaWxkcmVuOiAoX2EyID0gb3ZlcnJpZGVzLmNvbXBvbmVudEl0ZW0pICE9IG51bGwgPyBfYTIgOiBvdmVycmlkZXMuZHJhd2VySXRlbSB9KTtcbiAgICB9LFxuICAgIFtjb21wb25lbnRJZCwgbGFiZWwsIG92ZXJyaWRlc11cbiAgKTtcbiAgY29uc3QgZGVmYXVsdHNQcm9wcyA9IHVzZU1lbW84KFxuICAgICgpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGNvbXBvbmVudENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29tcG9uZW50Q29uZmlnLmRlZmF1bHRQcm9wcyksIGl0ZW0gPT0gbnVsbCA/IHZvaWQgMCA6IGl0ZW0ucHJvcHMpLCB7XG4gICAgICBwdWNrOiBwdWNrUHJvcHMsXG4gICAgICBlZGl0TW9kZTogdHJ1ZVxuICAgICAgLy8gREVQUkVDQVRFRFxuICAgIH0pLFxuICAgIFtjb21wb25lbnRDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBvbmVudENvbmZpZy5kZWZhdWx0UHJvcHMsIGl0ZW0gPT0gbnVsbCA/IHZvaWQgMCA6IGl0ZW0ucHJvcHMsIHB1Y2tQcm9wc11cbiAgKTtcbiAgY29uc3QgZGVmYXVsdGVkTm9kZSA9IHVzZU1lbW84KFxuICAgICgpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4geyB0eXBlOiAoX2EyID0gaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS50eXBlKSAhPSBudWxsID8gX2EyIDogbm9kZVR5cGUsIHByb3BzOiBkZWZhdWx0c1Byb3BzIH07XG4gICAgfSxcbiAgICBbaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS50eXBlLCBub2RlVHlwZSwgZGVmYXVsdHNQcm9wc11cbiAgKTtcbiAgY29uc3QgY29uZmlnID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuY29uZmlnKTtcbiAgY29uc3QgcGx1Z2lucyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnBsdWdpbnMpO1xuICBjb25zdCB1c2VyRmllbGRUcmFuc2Zvcm1zID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgY29uc3QgY29tYmluZWRGaWVsZFRyYW5zZm9ybXMgPSB1c2VNZW1vOChcbiAgICAoKSA9PiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZ2V0U2xvdFRyYW5zZm9ybShEcm9wWm9uZUVkaXRQdXJlLCAoc2xvdFByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MjYoQ29udGV4dFNsb3RSZW5kZXIsIHsgY29tcG9uZW50SWQsIHpvbmU6IHNsb3RQcm9wcy56b25lIH0pKSksIGdldElubGluZVRleHRUcmFuc2Zvcm0oKSksIHBsdWdpbnMucmVkdWNlKFxuICAgICAgKGFjYywgcGx1Z2luKSA9PiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgYWNjKSwgcGx1Z2luLmZpZWxkVHJhbnNmb3JtcyksXG4gICAgICB7fVxuICAgICkpLCB1c2VyRmllbGRUcmFuc2Zvcm1zKSxcbiAgICBbcGx1Z2lucywgdXNlckZpZWxkVHJhbnNmb3Jtc11cbiAgKTtcbiAgY29uc3QgdHJhbnNmb3JtZWRQcm9wcyA9IHVzZUZpZWxkVHJhbnNmb3JtcyhcbiAgICBjb25maWcsXG4gICAgZGVmYXVsdGVkTm9kZSxcbiAgICBjb21iaW5lZEZpZWxkVHJhbnNmb3JtcyxcbiAgICBub2RlUmVhZE9ubHksXG4gICAgaXNMb2FkaW5nXG4gICk7XG4gIGlmICghaXRlbSkgcmV0dXJuO1xuICBsZXQgUmVuZGVyMiA9IGNvbXBvbmVudENvbmZpZyA/IGNvbXBvbmVudENvbmZpZy5yZW5kZXIgOiAoKSA9PiAvKiBAX19QVVJFX18gKi8ganN4czExKFwiZGl2XCIsIHsgc3R5bGU6IHsgcGFkZGluZzogNDgsIHRleHRBbGlnbjogXCJjZW50ZXJcIiB9LCBjaGlsZHJlbjogW1xuICAgIFwiTm8gY29uZmlndXJhdGlvbiBmb3IgXCIsXG4gICAgaXRlbS50eXBlXG4gIF0gfSk7XG4gIGxldCBjb21wb25lbnRUeXBlID0gaXRlbS50eXBlO1xuICBjb25zdCBpc0luc2VydGluZyA9IFwicHJldmlld1R5cGVcIiBpbiBpdGVtID8gaXRlbS5wcmV2aWV3VHlwZSA9PT0gXCJpbnNlcnRcIiA6IGZhbHNlO1xuICBpZiAoaXNJbnNlcnRpbmcpIHtcbiAgICBSZW5kZXIyID0gcmVuZGVyUHJldmlldztcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI2KFxuICAgIERyYWdnYWJsZUNvbXBvbmVudCxcbiAgICB7XG4gICAgICBpZDogY29tcG9uZW50SWQsXG4gICAgICBjb21wb25lbnRUeXBlLFxuICAgICAgem9uZUNvbXBvdW5kLFxuICAgICAgZGVwdGg6IGRlcHRoICsgMSxcbiAgICAgIGluZGV4LFxuICAgICAgaXNMb2FkaW5nLFxuICAgICAgaXNTZWxlY3RlZCxcbiAgICAgIGxhYmVsLFxuICAgICAgYXV0b0RyYWdBeGlzOiBkcmFnQXhpcyxcbiAgICAgIHVzZXJEcmFnQXhpczogY29sbGlzaW9uQXhpcyxcbiAgICAgIGluRHJvcHBhYmxlWm9uZSxcbiAgICAgIGNoaWxkcmVuOiAoZHJhZ1JlZikgPT4gKGNvbXBvbmVudENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29tcG9uZW50Q29uZmlnLmlubGluZSkgJiYgIWlzSW5zZXJ0aW5nID8gLyogQF9fUFVSRV9fICovIGpzeDI2KEZyYWdtZW50NywgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI2KFxuICAgICAgICBSZW5kZXIyLFxuICAgICAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB0cmFuc2Zvcm1lZFByb3BzKSwge1xuICAgICAgICAgIHB1Y2s6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHRyYW5zZm9ybWVkUHJvcHMucHVjayksIHtcbiAgICAgICAgICAgIGRyYWdSZWZcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgKSB9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcImRpdlwiLCB7IHJlZjogZHJhZ1JlZiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyNihSZW5kZXIyLCBfX3NwcmVhZFZhbHVlcyh7fSwgdHJhbnNmb3JtZWRQcm9wcykpIH0pXG4gICAgfVxuICApO1xufTtcbnZhciBEcm9wWm9uZUNoaWxkTWVtbyA9IG1lbW8yKERyb3Bab25lQ2hpbGQpO1xudmFyIERyb3Bab25lRWRpdCA9IGZvcndhcmRSZWYzKFxuICBmdW5jdGlvbiBEcm9wWm9uZUVkaXRJbnRlcm5hbCh7XG4gICAgem9uZSxcbiAgICBhbGxvdyxcbiAgICBkaXNhbGxvdyxcbiAgICBzdHlsZSxcbiAgICBjbGFzc05hbWUsXG4gICAgbWluRW1wdHlIZWlnaHQ6IHVzZXJNaW5FbXB0eUhlaWdodCA9IDEyOCxcbiAgICBjb2xsaXNpb25BeGlzXG4gIH0sIHVzZXJSZWYpIHtcbiAgICBjb25zdCBjdHggPSB1c2VDb250ZXh0OChkcm9wWm9uZUNvbnRleHQpO1xuICAgIGNvbnN0IGFwcFN0b3JlQXBpID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgICBjb25zdCB7XG4gICAgICAvLyBUaGVzZSBhbGwgbmVlZCBzZXR0aW5nIHZpYSBjb250ZXh0XG4gICAgICBhcmVhSWQsXG4gICAgICBkZXB0aCA9IDAsXG4gICAgICByZWdpc3RlckxvY2FsWm9uZSxcbiAgICAgIHVucmVnaXN0ZXJMb2NhbFpvbmVcbiAgICB9ID0gY3R4ICE9IG51bGwgPyBjdHggOiB7fTtcbiAgICBjb25zdCBwYXRoID0gdXNlQXBwU3RvcmUoXG4gICAgICB1c2VTaGFsbG93NCgocykgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBhcmVhSWQgPyAoX2EgPSBzLnN0YXRlLmluZGV4ZXMubm9kZXNbYXJlYUlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnBhdGggOiBudWxsO1xuICAgICAgfSlcbiAgICApO1xuICAgIGxldCB6b25lQ29tcG91bmQgPSByb290RHJvcHBhYmxlSWQ7XG4gICAgaWYgKGFyZWFJZCkge1xuICAgICAgaWYgKHpvbmUgIT09IHJvb3REcm9wcGFibGVJZCkge1xuICAgICAgICB6b25lQ29tcG91bmQgPSBgJHthcmVhSWR9OiR7em9uZX1gO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpc1Jvb3Rab25lID0gem9uZUNvbXBvdW5kID09PSByb290RHJvcHBhYmxlSWQgfHwgem9uZSA9PT0gcm9vdERyb3BwYWJsZUlkIHx8IGFyZWFJZCA9PT0gXCJyb290XCI7XG4gICAgY29uc3QgaW5OZXh0RGVlcGVzdEFyZWEgPSB1c2VDb250ZXh0U3RvcmUoXG4gICAgICBab25lU3RvcmVDb250ZXh0LFxuICAgICAgKHMpID0+IHMubmV4dEFyZWFEZXB0aEluZGV4W2FyZWFJZCB8fCBcIlwiXVxuICAgICk7XG4gICAgY29uc3Qgem9uZUNvbnRlbnRJZHMgPSB1c2VBcHBTdG9yZShcbiAgICAgIHVzZVNoYWxsb3c0KChzKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHMuc3RhdGUuaW5kZXhlcy56b25lc1t6b25lQ29tcG91bmRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY29udGVudElkcztcbiAgICAgIH0pXG4gICAgKTtcbiAgICBjb25zdCB6b25lVHlwZSA9IHVzZUFwcFN0b3JlKFxuICAgICAgdXNlU2hhbGxvdzQoKHMpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gcy5zdGF0ZS5pbmRleGVzLnpvbmVzW3pvbmVDb21wb3VuZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS50eXBlO1xuICAgICAgfSlcbiAgICApO1xuICAgIHVzZUVmZmVjdDE4KCgpID0+IHtcbiAgICAgIGlmICghem9uZVR5cGUgfHwgem9uZVR5cGUgPT09IFwiZHJvcHpvbmVcIikge1xuICAgICAgICBpZiAoY3R4ID09IG51bGwgPyB2b2lkIDAgOiBjdHgucmVnaXN0ZXJab25lKSB7XG4gICAgICAgICAgY3R4ID09IG51bGwgPyB2b2lkIDAgOiBjdHgucmVnaXN0ZXJab25lKHpvbmVDb21wb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBbem9uZVR5cGUsIGFwcFN0b3JlQXBpXSk7XG4gICAgdXNlRWZmZWN0MTgoKCkgPT4ge1xuICAgICAgaWYgKHpvbmVUeXBlID09PSBcImRyb3B6b25lXCIpIHtcbiAgICAgICAgaWYgKHpvbmVDb21wb3VuZCAhPT0gcm9vdERyb3BwYWJsZUlkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJEcm9wWm9uZXMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2Ygc2xvdCBmaWVsZHMgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFB1Y2suIFBsZWFzZSBzZWUgdGhlIG1pZ3JhdGlvbiBndWlkZTogaHR0cHM6Ly93d3cucHVja2VkaXRvci5jb20vZG9jcy9ndWlkZXMvbWlncmF0aW9ucy9kcm9wem9uZXMtdG8tc2xvdHNcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBbem9uZVR5cGVdKTtcbiAgICBjb25zdCBjb250ZW50SWRzID0gdXNlTWVtbzgoKCkgPT4ge1xuICAgICAgcmV0dXJuIHpvbmVDb250ZW50SWRzIHx8IFtdO1xuICAgIH0sIFt6b25lQ29udGVudElkc10pO1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjYobnVsbCk7XG4gICAgY29uc3QgYWNjZXB0c1RhcmdldCA9IHVzZUNhbGxiYWNrMTEoXG4gICAgICAoY29tcG9uZW50VHlwZSkgPT4ge1xuICAgICAgICBpZiAoIWNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzYWxsb3cpIHtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0ZWRBbGxvdyA9IGFsbG93IHx8IFtdO1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkRGlzYWxsb3cgPSAoZGlzYWxsb3cgfHwgW10pLmZpbHRlcihcbiAgICAgICAgICAgIChpdGVtKSA9PiBkZWZhdWx0ZWRBbGxvdy5pbmRleE9mKGl0ZW0pID09PSAtMVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGZpbHRlcmVkRGlzYWxsb3cuaW5kZXhPZihjb21wb25lbnRUeXBlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYWxsb3cpIHtcbiAgICAgICAgICBpZiAoYWxsb3cuaW5kZXhPZihjb21wb25lbnRUeXBlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9LFxuICAgICAgW2FsbG93LCBkaXNhbGxvd11cbiAgICApO1xuICAgIGNvbnN0IHRhcmdldEFjY2VwdGVkID0gdXNlQ29udGV4dFN0b3JlKFpvbmVTdG9yZUNvbnRleHQsIChzKSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCBkcmFnZ2VkQ29tcG9uZW50VHlwZSA9IChfYSA9IHMuZHJhZ2dlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5kYXRhLmNvbXBvbmVudFR5cGU7XG4gICAgICByZXR1cm4gYWNjZXB0c1RhcmdldChkcmFnZ2VkQ29tcG9uZW50VHlwZSk7XG4gICAgfSk7XG4gICAgY29uc3QgaG92ZXJpbmdPdmVyQXJlYSA9IGluTmV4dERlZXBlc3RBcmVhIHx8IGlzUm9vdFpvbmU7XG4gICAgY29uc3QgaXNFbmFibGVkID0gdXNlQ29udGV4dFN0b3JlKFpvbmVTdG9yZUNvbnRleHQsIChzKSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBsZXQgX2lzRW5hYmxlZCA9IHRydWU7XG4gICAgICBjb25zdCBpc0RlZXBlc3Rab25lID0gKF9hID0gcy56b25lRGVwdGhJbmRleFt6b25lQ29tcG91bmRdKSAhPSBudWxsID8gX2EgOiBmYWxzZTtcbiAgICAgIF9pc0VuYWJsZWQgPSBpc0RlZXBlc3Rab25lO1xuICAgICAgaWYgKF9pc0VuYWJsZWQpIHtcbiAgICAgICAgX2lzRW5hYmxlZCA9IHRhcmdldEFjY2VwdGVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9pc0VuYWJsZWQ7XG4gICAgfSk7XG4gICAgdXNlRWZmZWN0MTgoKCkgPT4ge1xuICAgICAgaWYgKHJlZ2lzdGVyTG9jYWxab25lKSB7XG4gICAgICAgIHJlZ2lzdGVyTG9jYWxab25lKHpvbmVDb21wb3VuZCwgdGFyZ2V0QWNjZXB0ZWQgfHwgaXNFbmFibGVkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmICh1bnJlZ2lzdGVyTG9jYWxab25lKSB7XG4gICAgICAgICAgdW5yZWdpc3RlckxvY2FsWm9uZSh6b25lQ29tcG91bmQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sIFt0YXJnZXRBY2NlcHRlZCwgaXNFbmFibGVkLCB6b25lQ29tcG91bmRdKTtcbiAgICBjb25zdCBbY29udGVudElkc1dpdGhQcmV2aWV3LCBwcmV2aWV3XSA9IHVzZUNvbnRlbnRJZHNXaXRoUHJldmlldyhcbiAgICAgIGNvbnRlbnRJZHMsXG4gICAgICB6b25lQ29tcG91bmRcbiAgICApO1xuICAgIGNvbnN0IGlzRHJvcEVuYWJsZWQgPSBpc0VuYWJsZWQgJiYgKHByZXZpZXcgPyBjb250ZW50SWRzV2l0aFByZXZpZXcubGVuZ3RoID09PSAxIDogY29udGVudElkc1dpdGhQcmV2aWV3Lmxlbmd0aCA9PT0gMCk7XG4gICAgY29uc3Qgem9uZVN0b3JlID0gdXNlQ29udGV4dDgoWm9uZVN0b3JlQ29udGV4dCk7XG4gICAgdXNlRWZmZWN0MTgoKCkgPT4ge1xuICAgICAgY29uc3QgeyBlbmFibGVkSW5kZXggfSA9IHpvbmVTdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgZW5hYmxlZEluZGV4OiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBlbmFibGVkSW5kZXgpLCB7IFt6b25lQ29tcG91bmRdOiBpc0VuYWJsZWQgfSlcbiAgICAgIH0pO1xuICAgIH0sIFtpc0VuYWJsZWQsIHpvbmVTdG9yZSwgem9uZUNvbXBvdW5kXSk7XG4gICAgY29uc3QgZHJvcHBhYmxlQ29uZmlnID0ge1xuICAgICAgaWQ6IHpvbmVDb21wb3VuZCxcbiAgICAgIGNvbGxpc2lvblByaW9yaXR5OiBpc0VuYWJsZWQgPyBkZXB0aCA6IDAsXG4gICAgICBkaXNhYmxlZDogIWlzRHJvcEVuYWJsZWQsXG4gICAgICBjb2xsaXNpb25EZXRlY3RvcjogcG9pbnRlckludGVyc2VjdGlvbixcbiAgICAgIHR5cGU6IFwiZHJvcHpvbmVcIixcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYXJlYUlkLFxuICAgICAgICBkZXB0aCxcbiAgICAgICAgaXNEcm9wcGFibGVUYXJnZXQ6IHRhcmdldEFjY2VwdGVkLFxuICAgICAgICBwYXRoOiBwYXRoIHx8IFtdXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB7IHJlZjogZHJvcFJlZiB9ID0gdXNlRHJvcHBhYmxlMihkcm9wcGFibGVDb25maWcpO1xuICAgIGNvbnN0IGlzQXJlYVNlbGVjdGVkID0gdXNlQXBwU3RvcmUoXG4gICAgICAocykgPT4gKHMgPT0gbnVsbCA/IHZvaWQgMCA6IHMuc2VsZWN0ZWRJdGVtKSAmJiBhcmVhSWQgPT09IChzID09IG51bGwgPyB2b2lkIDAgOiBzLnNlbGVjdGVkSXRlbS5wcm9wcy5pZClcbiAgICApO1xuICAgIGNvbnN0IFtkcmFnQXhpc10gPSB1c2VEcmFnQXhpcyhyZWYsIGNvbGxpc2lvbkF4aXMpO1xuICAgIGNvbnN0IFttaW5FbXB0eUhlaWdodCwgaXNBbmltYXRpbmddID0gdXNlTWluRW1wdHlIZWlnaHQoe1xuICAgICAgem9uZUNvbXBvdW5kLFxuICAgICAgdXNlck1pbkVtcHR5SGVpZ2h0LFxuICAgICAgcmVmXG4gICAgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogYCR7Z2V0Q2xhc3NOYW1lMTkoe1xuICAgICAgICAgIGlzUm9vdFpvbmUsXG4gICAgICAgICAgaG92ZXJpbmdPdmVyQXJlYSxcbiAgICAgICAgICBpc0VuYWJsZWQsXG4gICAgICAgICAgaXNBcmVhU2VsZWN0ZWQsXG4gICAgICAgICAgaGFzQ2hpbGRyZW46IGNvbnRlbnRJZHMubGVuZ3RoID4gMCxcbiAgICAgICAgICBpc0FuaW1hdGluZ1xuICAgICAgICB9KX0ke2NsYXNzTmFtZSA/IGAgJHtjbGFzc05hbWV9YCA6IFwiXCJ9YCxcbiAgICAgICAgcmVmOiAobm9kZSkgPT4ge1xuICAgICAgICAgIGFzc2lnblJlZnMoW3JlZiwgZHJvcFJlZiwgdXNlclJlZl0sIG5vZGUpO1xuICAgICAgICB9LFxuICAgICAgICBcImRhdGEtdGVzdGlkXCI6IGBkcm9wem9uZToke3pvbmVDb21wb3VuZH1gLFxuICAgICAgICBcImRhdGEtcHVjay1kcm9wem9uZVwiOiB6b25lQ29tcG91bmQsXG4gICAgICAgIHN0eWxlOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdHlsZSksIHtcbiAgICAgICAgICBcIi0tbWluLWVtcHR5LWhlaWdodFwiOiBgJHttaW5FbXB0eUhlaWdodH1weGAsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBSRU5ERVJfREVCVUcgPyBnZXRSYW5kb21Db2xvcigpIDogc3R5bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0eWxlLmJhY2tncm91bmRDb2xvclxuICAgICAgICB9KSxcbiAgICAgICAgY2hpbGRyZW46IGNvbnRlbnRJZHNXaXRoUHJldmlldy5tYXAoKGNvbXBvbmVudElkLCBpKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcbiAgICAgICAgICAgIERyb3Bab25lQ2hpbGRNZW1vLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB6b25lQ29tcG91bmQsXG4gICAgICAgICAgICAgIGNvbXBvbmVudElkLFxuICAgICAgICAgICAgICBkcmFnQXhpcyxcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIGNvbGxpc2lvbkF4aXMsXG4gICAgICAgICAgICAgIGluRHJvcHBhYmxlWm9uZTogdGFyZ2V0QWNjZXB0ZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wb25lbnRJZFxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgKTtcbiAgfVxuKTtcbnZhciBEcm9wWm9uZVJlbmRlckl0ZW0gPSAoe1xuICBjb25maWcsXG4gIGl0ZW0sXG4gIG1ldGFkYXRhXG59KSA9PiB7XG4gIGNvbnN0IENvbXBvbmVudCA9IGNvbmZpZy5jb21wb25lbnRzW2l0ZW0udHlwZV07XG4gIGNvbnN0IHByb3BzID0gdXNlU2xvdHMoY29uZmlnLCBpdGVtLCAoc2xvdFByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MjYoU2xvdFJlbmRlclB1cmUsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHNsb3RQcm9wcyksIHsgY29uZmlnLCBtZXRhZGF0YSB9KSkpO1xuICBjb25zdCBuZXh0Q29udGV4dFZhbHVlID0gdXNlTWVtbzgoXG4gICAgKCkgPT4gKHtcbiAgICAgIGFyZWFJZDogcHJvcHMuaWQsXG4gICAgICBkZXB0aDogMVxuICAgIH0pLFxuICAgIFtwcm9wc11cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihEcm9wWm9uZVByb3ZpZGVyLCB7IHZhbHVlOiBuZXh0Q29udGV4dFZhbHVlLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI2KFxuICAgIENvbXBvbmVudC5yZW5kZXIsXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpLCB7XG4gICAgICBwdWNrOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcy5wdWNrKSwge1xuICAgICAgICByZW5kZXJEcm9wWm9uZTogRHJvcFpvbmVSZW5kZXJQdXJlLFxuICAgICAgICBtZXRhZGF0YTogX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIG1ldGFkYXRhKSwgQ29tcG9uZW50Lm1ldGFkYXRhKVxuICAgICAgfSlcbiAgICB9KVxuICApIH0sIHByb3BzLmlkKTtcbn07XG52YXIgRHJvcFpvbmVSZW5kZXJQdXJlID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MjYoRHJvcFpvbmVSZW5kZXIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xudmFyIERyb3Bab25lUmVuZGVyID0gZm9yd2FyZFJlZjMoXG4gIGZ1bmN0aW9uIERyb3Bab25lUmVuZGVySW50ZXJuYWwoeyBjbGFzc05hbWUsIHN0eWxlLCB6b25lIH0sIHJlZikge1xuICAgIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQ4KGRyb3Bab25lQ29udGV4dCk7XG4gICAgY29uc3QgeyBhcmVhSWQgPSBcInJvb3RcIiB9ID0gY3R4IHx8IHt9O1xuICAgIGNvbnN0IHsgY29uZmlnLCBkYXRhLCBtZXRhZGF0YSB9ID0gdXNlQ29udGV4dDgocmVuZGVyQ29udGV4dCk7XG4gICAgbGV0IHpvbmVDb21wb3VuZCA9IGAke2FyZWFJZH06JHt6b25lfWA7XG4gICAgbGV0IGNvbnRlbnQgPSAoZGF0YSA9PSBudWxsID8gdm9pZCAwIDogZGF0YS5jb250ZW50KSB8fCBbXTtcbiAgICB1c2VFZmZlY3QxOCgoKSA9PiB7XG4gICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgaWYgKGN0eCA9PSBudWxsID8gdm9pZCAwIDogY3R4LnJlZ2lzdGVyWm9uZSkge1xuICAgICAgICAgIGN0eCA9PSBudWxsID8gdm9pZCAwIDogY3R4LnJlZ2lzdGVyWm9uZSh6b25lQ29tcG91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgW2NvbnRlbnRdKTtcbiAgICBpZiAoIWRhdGEgfHwgIWNvbmZpZykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh6b25lQ29tcG91bmQgIT09IHJvb3REcm9wcGFibGVJZCkge1xuICAgICAgY29udGVudCA9IHNldHVwWm9uZShkYXRhLCB6b25lQ29tcG91bmQpLnpvbmVzW3pvbmVDb21wb3VuZF07XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjYoXCJkaXZcIiwgeyBjbGFzc05hbWUsIHN0eWxlLCByZWYsIGNoaWxkcmVuOiBjb250ZW50Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgQ29tcG9uZW50ID0gY29uZmlnLmNvbXBvbmVudHNbaXRlbS50eXBlXTtcbiAgICAgIGlmIChDb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcbiAgICAgICAgICBEcm9wWm9uZVJlbmRlckl0ZW0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgIG1ldGFkYXRhXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpdGVtLnByb3BzLmlkXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KSB9KTtcbiAgfVxuKTtcbnZhciBEcm9wWm9uZVB1cmUgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gyNihEcm9wWm9uZSwgX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSk7XG52YXIgRHJvcFpvbmUgPSBmb3J3YXJkUmVmMyhcbiAgZnVuY3Rpb24gRHJvcFpvbmUyKHByb3BzLCByZWYpIHtcbiAgICBjb25zdCBjdHggPSB1c2VDb250ZXh0OChkcm9wWm9uZUNvbnRleHQpO1xuICAgIGlmICgoY3R4ID09IG51bGwgPyB2b2lkIDAgOiBjdHgubW9kZSkgPT09IFwiZWRpdFwiKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI2KEZyYWdtZW50NywgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI2KERyb3Bab25lRWRpdCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpLCB7IHJlZiB9KSkgfSk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjYoRnJhZ21lbnQ3LCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjYoRHJvcFpvbmVSZW5kZXIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSwgeyByZWYgfSkpIH0pO1xuICB9XG4pO1xuXG4vLyBjb21wb25lbnRzL1JlbmRlci9pbmRleC50c3hcbmltcG9ydCBSZWFjdDMsIHsgdXNlTWVtbyBhcyB1c2VNZW1vOSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDI3IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgcmVuZGVyQ29udGV4dCA9IFJlYWN0My5jcmVhdGVDb250ZXh0KHtcbiAgY29uZmlnOiB7IGNvbXBvbmVudHM6IHt9IH0sXG4gIGRhdGE6IHsgcm9vdDoge30sIGNvbnRlbnQ6IFtdIH0sXG4gIG1ldGFkYXRhOiB7fVxufSk7XG5mdW5jdGlvbiBSZW5kZXIoe1xuICBjb25maWcsXG4gIGRhdGEsXG4gIG1ldGFkYXRhID0ge31cbn0pIHtcbiAgdmFyIF9hO1xuICBjb25zdCBkZWZhdWx0ZWREYXRhID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGF0YSksIHtcbiAgICByb290OiBkYXRhLnJvb3QgfHwge30sXG4gICAgY29udGVudDogZGF0YS5jb250ZW50IHx8IFtdXG4gIH0pO1xuICBjb25zdCByb290UHJvcHMgPSBcInByb3BzXCIgaW4gZGVmYXVsdGVkRGF0YS5yb290ID8gZGVmYXVsdGVkRGF0YS5yb290LnByb3BzIDogZGVmYXVsdGVkRGF0YS5yb290O1xuICBjb25zdCB0aXRsZSA9IChyb290UHJvcHMgPT0gbnVsbCA/IHZvaWQgMCA6IHJvb3RQcm9wcy50aXRsZSkgfHwgXCJcIjtcbiAgY29uc3QgcGFnZVByb3BzID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcm9vdFByb3BzKSwge1xuICAgIHB1Y2s6IHtcbiAgICAgIHJlbmRlckRyb3Bab25lOiBEcm9wWm9uZVB1cmUsXG4gICAgICBpc0VkaXRpbmc6IGZhbHNlLFxuICAgICAgZHJhZ1JlZjogbnVsbCxcbiAgICAgIG1ldGFkYXRhXG4gICAgfSxcbiAgICB0aXRsZSxcbiAgICBlZGl0TW9kZTogZmFsc2UsXG4gICAgaWQ6IFwicHVjay1yb290XCJcbiAgfSk7XG4gIGNvbnN0IHByb3BzV2l0aFNsb3RzID0gdXNlU2xvdHMoXG4gICAgY29uZmlnLFxuICAgIHsgdHlwZTogXCJyb290XCIsIHByb3BzOiBwYWdlUHJvcHMgfSxcbiAgICAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gyNyhTbG90UmVuZGVyLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHsgY29uZmlnLCBtZXRhZGF0YSB9KSlcbiAgKTtcbiAgY29uc3QgbmV4dENvbnRleHRWYWx1ZSA9IHVzZU1lbW85KFxuICAgICgpID0+ICh7XG4gICAgICBtb2RlOiBcInJlbmRlclwiLFxuICAgICAgZGVwdGg6IDBcbiAgICB9KSxcbiAgICBbXVxuICApO1xuICBpZiAoKF9hID0gY29uZmlnLnJvb3QpID09IG51bGwgPyB2b2lkIDAgOiBfYS5yZW5kZXIpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI3KHJlbmRlckNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgY29uZmlnLCBkYXRhOiBkZWZhdWx0ZWREYXRhLCBtZXRhZGF0YSB9LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI3KERyb3Bab25lUHJvdmlkZXIsIHsgdmFsdWU6IG5leHRDb250ZXh0VmFsdWUsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjcoY29uZmlnLnJvb3QucmVuZGVyLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wc1dpdGhTbG90cyksIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyNyhEcm9wWm9uZVJlbmRlclB1cmUsIHsgem9uZTogcm9vdFpvbmUgfSkgfSkpIH0pIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjcocmVuZGVyQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBjb25maWcsIGRhdGE6IGRlZmF1bHRlZERhdGEsIG1ldGFkYXRhIH0sIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjcoRHJvcFpvbmVQcm92aWRlciwgeyB2YWx1ZTogbmV4dENvbnRleHRWYWx1ZSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyNyhEcm9wWm9uZVJlbmRlclB1cmUsIHsgem9uZTogcm9vdFpvbmUgfSkgfSkgfSk7XG59XG5cbi8vIGxpYi91c2UtcHVjay50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDUsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDksIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxOSwgdXNlU3RhdGUgYXMgdXNlU3RhdGUxNyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY3JlYXRlU3RvcmUgYXMgY3JlYXRlU3RvcmU0LCB1c2VTdG9yZSBhcyB1c2VTdG9yZTMgfSBmcm9tIFwienVzdGFuZFwiO1xudmFyIGdlbmVyYXRlVXNlUHVjayA9IChzdG9yZSkgPT4ge1xuICBjb25zdCBoaXN0b3J5ID0ge1xuICAgIGJhY2s6IHN0b3JlLmhpc3RvcnkuYmFjayxcbiAgICBmb3J3YXJkOiBzdG9yZS5oaXN0b3J5LmZvcndhcmQsXG4gICAgc2V0SGlzdG9yaWVzOiBzdG9yZS5oaXN0b3J5LnNldEhpc3RvcmllcyxcbiAgICBzZXRIaXN0b3J5SW5kZXg6IHN0b3JlLmhpc3Rvcnkuc2V0SGlzdG9yeUluZGV4LFxuICAgIGhhc1Bhc3Q6IHN0b3JlLmhpc3RvcnkuaGFzUGFzdCgpLFxuICAgIGhhc0Z1dHVyZTogc3RvcmUuaGlzdG9yeS5oYXNGdXR1cmUoKSxcbiAgICBoaXN0b3JpZXM6IHN0b3JlLmhpc3RvcnkuaGlzdG9yaWVzLFxuICAgIGluZGV4OiBzdG9yZS5oaXN0b3J5LmluZGV4XG4gIH07XG4gIGNvbnN0IHN0b3JlRGF0YSA9IHtcbiAgICBhcHBTdGF0ZTogbWFrZVN0YXRlUHVibGljKHN0b3JlLnN0YXRlKSxcbiAgICBjb25maWc6IHN0b3JlLmNvbmZpZyxcbiAgICBkaXNwYXRjaDogc3RvcmUuZGlzcGF0Y2gsXG4gICAgZ2V0UGVybWlzc2lvbnM6IHN0b3JlLnBlcm1pc3Npb25zLmdldFBlcm1pc3Npb25zLFxuICAgIHJlZnJlc2hQZXJtaXNzaW9uczogc3RvcmUucGVybWlzc2lvbnMucmVmcmVzaFBlcm1pc3Npb25zLFxuICAgIGhpc3RvcnksXG4gICAgc2VsZWN0ZWRJdGVtOiBzdG9yZS5zZWxlY3RlZEl0ZW0gfHwgbnVsbCxcbiAgICBnZXRJdGVtQnlTZWxlY3RvcjogKHNlbGVjdG9yKSA9PiBnZXRJdGVtKHNlbGVjdG9yLCBzdG9yZS5zdGF0ZSksXG4gICAgZ2V0SXRlbUJ5SWQ6IChpZCkgPT4gc3RvcmUuc3RhdGUuaW5kZXhlcy5ub2Rlc1tpZF0uZGF0YSxcbiAgICBnZXRTZWxlY3RvckZvcklkOiAoaWQpID0+IGdldFNlbGVjdG9yRm9ySWQoc3RvcmUuc3RhdGUsIGlkKVxuICB9O1xuICByZXR1cm4gc3RvcmVEYXRhO1xufTtcbnZhciBVc2VQdWNrU3RvcmVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDUoXG4gIG51bGxcbik7XG52YXIgY29udmVydFRvUGlja2VkU3RvcmUgPSAoc3RvcmUpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBzdGF0ZTogc3RvcmUuc3RhdGUsXG4gICAgY29uZmlnOiBzdG9yZS5jb25maWcsXG4gICAgZGlzcGF0Y2g6IHN0b3JlLmRpc3BhdGNoLFxuICAgIHBlcm1pc3Npb25zOiBzdG9yZS5wZXJtaXNzaW9ucyxcbiAgICBoaXN0b3J5OiBzdG9yZS5oaXN0b3J5LFxuICAgIHNlbGVjdGVkSXRlbTogc3RvcmUuc2VsZWN0ZWRJdGVtXG4gIH07XG59O1xudmFyIHVzZVJlZ2lzdGVyVXNlUHVja1N0b3JlID0gKGFwcFN0b3JlKSA9PiB7XG4gIGNvbnN0IFt1c2VQdWNrU3RvcmVdID0gdXNlU3RhdGUxNyhcbiAgICAoKSA9PiBjcmVhdGVTdG9yZTQoXG4gICAgICAoKSA9PiBnZW5lcmF0ZVVzZVB1Y2soY29udmVydFRvUGlja2VkU3RvcmUoYXBwU3RvcmUuZ2V0U3RhdGUoKSkpXG4gICAgKVxuICApO1xuICB1c2VFZmZlY3QxOSgoKSA9PiB7XG4gICAgcmV0dXJuIGFwcFN0b3JlLnN1YnNjcmliZShcbiAgICAgIChzdG9yZSkgPT4gY29udmVydFRvUGlja2VkU3RvcmUoc3RvcmUpLFxuICAgICAgKHBpY2tlZFN0b3JlKSA9PiB7XG4gICAgICAgIHVzZVB1Y2tTdG9yZS5zZXRTdGF0ZShnZW5lcmF0ZVVzZVB1Y2socGlja2VkU3RvcmUpKTtcbiAgICAgIH1cbiAgICApO1xuICB9LCBbXSk7XG4gIHJldHVybiB1c2VQdWNrU3RvcmU7XG59O1xuZnVuY3Rpb24gY3JlYXRlVXNlUHVjaygpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVzZVB1Y2syKHNlbGVjdG9yKSB7XG4gICAgY29uc3QgdXNlUHVja0FwaSA9IHVzZUNvbnRleHQ5KFVzZVB1Y2tTdG9yZUNvbnRleHQpO1xuICAgIGlmICghdXNlUHVja0FwaSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidXNlUHVjayBtdXN0IGJlIHVzZWQgaW5zaWRlIDxQdWNrPi5cIik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHVzZVN0b3JlMyhcbiAgICAgIHVzZVB1Y2tBcGksXG4gICAgICBzZWxlY3RvciAhPSBudWxsID8gc2VsZWN0b3IgOiAocykgPT4gc1xuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmZ1bmN0aW9uIHVzZVB1Y2soKSB7XG4gIHVzZUVmZmVjdDE5KCgpID0+IHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIllvdSdyZSB1c2luZyB0aGUgYHVzZVB1Y2tgIG1ldGhvZCB3aXRob3V0IGEgc2VsZWN0b3IsIHdoaWNoIG1heSBjYXVzZSB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzLiBSZXBsYWNlIHdpdGggYGNyZWF0ZVVzZVB1Y2tgIGFuZCBwcm92aWRlIGEgc2VsZWN0b3IgZm9yIGltcHJvdmVkIHBlcmZvcm1hbmNlLlwiXG4gICAgKTtcbiAgfSwgW10pO1xuICByZXR1cm4gY3JlYXRlVXNlUHVjaygpKChzKSA9PiBzKTtcbn1cbmZ1bmN0aW9uIHVzZUdldFB1Y2soKSB7XG4gIGNvbnN0IHVzZVB1Y2tBcGkgPSB1c2VDb250ZXh0OShVc2VQdWNrU3RvcmVDb250ZXh0KTtcbiAgaWYgKCF1c2VQdWNrQXBpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlUHVja0dldCBtdXN0IGJlIHVzZWQgaW5zaWRlIDxQdWNrPi5cIik7XG4gIH1cbiAgcmV0dXJuIHVzZVB1Y2tBcGkuZ2V0U3RhdGU7XG59XG5cbi8vIGNvbXBvbmVudHMvUHVjay9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQge1xuICBjcmVhdGVDb250ZXh0IGFzIGNyZWF0ZUNvbnRleHQ4LFxuICB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazIwLFxuICB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQxMyxcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDI5LFxuICB1c2VNZW1vIGFzIHVzZU1lbW8yMCxcbiAgdXNlUmVmIGFzIHVzZVJlZjEyLFxuICB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTI1XG59IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBjb21wb25lbnRzL1NpZGViYXJTZWN0aW9uL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL1NpZGViYXJTZWN0aW9uL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0MTQgPSB7IFwiU2lkZWJhclNlY3Rpb25cIjogXCJfU2lkZWJhclNlY3Rpb25fOGJvajhfMVwiLCBcIlNpZGViYXJTZWN0aW9uLXRpdGxlXCI6IFwiX1NpZGViYXJTZWN0aW9uLXRpdGxlXzhib2o4XzEyXCIsIFwiU2lkZWJhclNlY3Rpb24tLW5vQm9yZGVyVG9wXCI6IFwiX1NpZGViYXJTZWN0aW9uLS1ub0JvcmRlclRvcF84Ym9qOF8yMFwiLCBcIlNpZGViYXJTZWN0aW9uLWNvbnRlbnRcIjogXCJfU2lkZWJhclNlY3Rpb24tY29udGVudF84Ym9qOF8yNFwiLCBcIlNpZGViYXJTZWN0aW9uLS1ub1BhZGRpbmdcIjogXCJfU2lkZWJhclNlY3Rpb24tLW5vUGFkZGluZ184Ym9qOF8yOFwiLCBcIlNpZGViYXJTZWN0aW9uLWJyZWFkY3J1bWJMYWJlbFwiOiBcIl9TaWRlYmFyU2VjdGlvbi1icmVhZGNydW1iTGFiZWxfOGJvajhfNDFcIiwgXCJTaWRlYmFyU2VjdGlvbi1icmVhZGNydW1ic1wiOiBcIl9TaWRlYmFyU2VjdGlvbi1icmVhZGNydW1ic184Ym9qOF83MFwiLCBcIlNpZGViYXJTZWN0aW9uLWJyZWFkY3J1bWJcIjogXCJfU2lkZWJhclNlY3Rpb24tYnJlYWRjcnVtYl84Ym9qOF80MVwiLCBcIlNpZGViYXJTZWN0aW9uLWhlYWRpbmdcIjogXCJfU2lkZWJhclNlY3Rpb24taGVhZGluZ184Ym9qOF84MlwiLCBcIlNpZGViYXJTZWN0aW9uLWxvYWRpbmdPdmVybGF5XCI6IFwiX1NpZGViYXJTZWN0aW9uLWxvYWRpbmdPdmVybGF5Xzhib2o4Xzg2XCIgfTtcblxuLy8gbGliL3VzZS1icmVhZGNydW1icy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZU1lbW8gYXMgdXNlTWVtbzEwIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlQnJlYWRjcnVtYnMgPSAocmVuZGVyQ291bnQpID0+IHtcbiAgY29uc3Qgc2VsZWN0ZWRJZCA9IHVzZUFwcFN0b3JlKChzKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSBzLnNlbGVjdGVkSXRlbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnByb3BzLmlkO1xuICB9KTtcbiAgY29uc3QgY29uZmlnID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuY29uZmlnKTtcbiAgY29uc3QgcGF0aCA9IHVzZUFwcFN0b3JlKChzKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSBzLnN0YXRlLmluZGV4ZXMubm9kZXNbc2VsZWN0ZWRJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5wYXRoO1xuICB9KTtcbiAgY29uc3QgYXBwU3RvcmUgPSB1c2VBcHBTdG9yZUFwaSgpO1xuICByZXR1cm4gdXNlTWVtbzEwKCgpID0+IHtcbiAgICBjb25zdCBicmVhZGNydW1icyA9IChwYXRoID09IG51bGwgPyB2b2lkIDAgOiBwYXRoLm1hcCgoem9uZUNvbXBvdW5kKSA9PiB7XG4gICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgIGNvbnN0IFtjb21wb25lbnRJZF0gPSB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpO1xuICAgICAgaWYgKGNvbXBvbmVudElkID09PSBcInJvb3RcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhYmVsOiBcIlBhZ2VcIixcbiAgICAgICAgICBzZWxlY3RvcjogbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3Qgbm9kZSA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGUuaW5kZXhlcy5ub2Rlc1tjb21wb25lbnRJZF07XG4gICAgICBjb25zdCBwYXJlbnRJZCA9IG5vZGUucGF0aFtub2RlLnBhdGgubGVuZ3RoIC0gMV07XG4gICAgICBjb25zdCBjb250ZW50SWRzID0gKChfYSA9IGFwcFN0b3JlLmdldFN0YXRlKCkuc3RhdGUuaW5kZXhlcy56b25lc1twYXJlbnRJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5jb250ZW50SWRzKSB8fCBbXTtcbiAgICAgIGNvbnN0IGluZGV4ID0gY29udGVudElkcy5pbmRleE9mKGNvbXBvbmVudElkKTtcbiAgICAgIGNvbnN0IGxhYmVsID0gbm9kZSA/IChfYyA9IChfYiA9IGNvbmZpZy5jb21wb25lbnRzW25vZGUuZGF0YS50eXBlXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmxhYmVsKSAhPSBudWxsID8gX2MgOiBub2RlLmRhdGEudHlwZSA6IFwiQ29tcG9uZW50XCI7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYWJlbCxcbiAgICAgICAgc2VsZWN0b3I6IG5vZGUgPyB7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgem9uZTogbm9kZS5wYXRoW25vZGUucGF0aC5sZW5ndGggLSAxXVxuICAgICAgICB9IDogbnVsbFxuICAgICAgfTtcbiAgICB9KSkgfHwgW107XG4gICAgaWYgKHJlbmRlckNvdW50KSB7XG4gICAgICByZXR1cm4gYnJlYWRjcnVtYnMuc2xpY2UoYnJlYWRjcnVtYnMubGVuZ3RoIC0gcmVuZGVyQ291bnQpO1xuICAgIH1cbiAgICByZXR1cm4gYnJlYWRjcnVtYnM7XG4gIH0sIFtwYXRoLCByZW5kZXJDb3VudF0pO1xufTtcblxuLy8gY29tcG9uZW50cy9TaWRlYmFyU2VjdGlvbi9pbmRleC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gyOCwganN4cyBhcyBqc3hzMTIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUyMCA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIlNpZGViYXJTZWN0aW9uXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE0KTtcbnZhciBTaWRlYmFyU2VjdGlvbiA9ICh7XG4gIGNoaWxkcmVuLFxuICB0aXRsZSxcbiAgYmFja2dyb3VuZCxcbiAgc2hvd0JyZWFkY3J1bWJzLFxuICBub0JvcmRlclRvcCxcbiAgbm9QYWRkaW5nLFxuICBpc0xvYWRpbmdcbn0pID0+IHtcbiAgY29uc3Qgc2V0VWkgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zZXRVaSk7XG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gdXNlQnJlYWRjcnVtYnMoMSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czEyKFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyMCh7IG5vQm9yZGVyVG9wLCBub1BhZGRpbmcgfSksXG4gICAgICBzdHlsZTogeyBiYWNrZ3JvdW5kIH0sXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTIwKFwidGl0bGVcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czEyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyMChcImJyZWFkY3J1bWJzXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgIHNob3dCcmVhZGNydW1icyA/IGJyZWFkY3J1bWJzLm1hcCgoYnJlYWRjcnVtYiwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeHMxMihcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjAoXCJicmVhZGNydW1iXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDI4KFxuICAgICAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTIwKFwiYnJlYWRjcnVtYkxhYmVsXCIpLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHNldFVpKHsgaXRlbVNlbGVjdG9yOiBicmVhZGNydW1iLnNlbGVjdG9yIH0pLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBicmVhZGNydW1iLmxhYmVsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjgoQ2hldnJvblJpZ2h0LCB7IHNpemU6IDE2IH0pXG4gICAgICAgICAgXSB9LCBpKSkgOiBudWxsLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyOChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjAoXCJoZWFkaW5nXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI4KEhlYWRpbmcsIHsgcmFuazogXCIyXCIsIHNpemU6IFwieHNcIiwgY2hpbGRyZW46IHRpdGxlIH0pIH0pXG4gICAgICAgIF0gfSkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyOChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjAoXCJjb250ZW50XCIpLCBjaGlsZHJlbiB9KSxcbiAgICAgICAgaXNMb2FkaW5nICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyOChcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjAoXCJsb2FkaW5nT3ZlcmxheVwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyOChMb2FkZXIsIHsgc2l6ZTogMzIgfSkgfSlcbiAgICAgIF1cbiAgICB9XG4gICk7XG59O1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvUHVjay9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE1ID0geyBcIlB1Y2tcIjogXCJfUHVja18xeXhsd18xOVwiLCBcIlB1Y2stcG9ydGFsXCI6IFwiX1B1Y2stcG9ydGFsXzF5eGx3XzMxXCIsIFwiUHVja0xheW91dC1pbm5lclwiOiBcIl9QdWNrTGF5b3V0LWlubmVyXzF5eGx3XzM4XCIsIFwiUHVja0xheW91dC0tbW91bnRlZFwiOiBcIl9QdWNrTGF5b3V0LS1tb3VudGVkXzF5eGx3XzU5XCIsIFwiUHVja0xheW91dC0tbGVmdFNpZGVCYXJWaXNpYmxlXCI6IFwiX1B1Y2tMYXlvdXQtLWxlZnRTaWRlQmFyVmlzaWJsZV8xeXhsd182M1wiLCBcIlB1Y2tMYXlvdXQtLXJpZ2h0U2lkZUJhclZpc2libGVcIjogXCJfUHVja0xheW91dC0tcmlnaHRTaWRlQmFyVmlzaWJsZV8xeXhsd182OVwiLCBcIlB1Y2tMYXlvdXQtbW91bnRlZFwiOiBcIl9QdWNrTGF5b3V0LW1vdW50ZWRfMXl4bHdfODNcIiwgXCJQdWNrTGF5b3V0XCI6IFwiX1B1Y2tMYXlvdXRfMXl4bHdfMzhcIiB9O1xuXG4vLyBjb21wb25lbnRzL1B1Y2svY29tcG9uZW50cy9GaWVsZHMvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL0ZpZWxkcy9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE2ID0geyBcIlB1Y2tGaWVsZHNcIjogXCJfUHVja0ZpZWxkc18xMGJoN18xXCIsIFwiUHVja0ZpZWxkcy0taXNMb2FkaW5nXCI6IFwiX1B1Y2tGaWVsZHMtLWlzTG9hZGluZ18xMGJoN182XCIsIFwiUHVja0ZpZWxkcy1sb2FkaW5nT3ZlcmxheVwiOiBcIl9QdWNrRmllbGRzLWxvYWRpbmdPdmVybGF5XzEwYmg3XzEwXCIsIFwiUHVja0ZpZWxkcy1sb2FkaW5nT3ZlcmxheUlubmVyXCI6IFwiX1B1Y2tGaWVsZHMtbG9hZGluZ092ZXJsYXlJbm5lcl8xMGJoN18yNVwiLCBcIlB1Y2tGaWVsZHMtZmllbGRcIjogXCJfUHVja0ZpZWxkcy1maWVsZF8xMGJoN18zMlwiLCBcIlB1Y2tGaWVsZHMtLXdyYXBGaWVsZHNcIjogXCJfUHVja0ZpZWxkcy0td3JhcEZpZWxkc18xMGJoN18zNlwiIH07XG5cbi8vIGNvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL0ZpZWxkcy9pbmRleC50c3hcbmltcG9ydCB7IG1lbW8gYXMgbWVtbzMsIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTIsIHVzZU1lbW8gYXMgdXNlTWVtbzExIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTaGFsbG93IGFzIHVzZVNoYWxsb3c1IH0gZnJvbSBcInp1c3RhbmQvcmVhY3Qvc2hhbGxvd1wiO1xuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQ4LCBqc3ggYXMganN4MjksIGpzeHMgYXMganN4czEzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMjEgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJQdWNrRmllbGRzXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE2KTtcbnZhciBEZWZhdWx0RmllbGRzID0gKHtcbiAgY2hpbGRyZW5cbn0pID0+IHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyOShGcmFnbWVudDgsIHsgY2hpbGRyZW4gfSk7XG59O1xudmFyIGNyZWF0ZU9uQ2hhbmdlID0gKGZpZWxkTmFtZSwgYXBwU3RvcmUpID0+ICh2YWx1ZSwgdXBkYXRlZFVpKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgbGV0IGN1cnJlbnRQcm9wcztcbiAgY29uc3QgeyBkaXNwYXRjaCwgc3RhdGUsIHNlbGVjdGVkSXRlbSwgcmVzb2x2ZUNvbXBvbmVudERhdGE6IHJlc29sdmVDb21wb25lbnREYXRhMiB9ID0gYXBwU3RvcmUuZ2V0U3RhdGUoKTtcbiAgY29uc3QgeyBkYXRhLCB1aSB9ID0gc3RhdGU7XG4gIGNvbnN0IHsgaXRlbVNlbGVjdG9yIH0gPSB1aTtcbiAgY29uc3Qgcm9vdFByb3BzID0gZGF0YS5yb290LnByb3BzIHx8IGRhdGEucm9vdDtcbiAgaWYgKHNlbGVjdGVkSXRlbSkge1xuICAgIGN1cnJlbnRQcm9wcyA9IHNlbGVjdGVkSXRlbS5wcm9wcztcbiAgfSBlbHNlIHtcbiAgICBjdXJyZW50UHJvcHMgPSByb290UHJvcHM7XG4gIH1cbiAgY29uc3QgbmV3UHJvcHMgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjdXJyZW50UHJvcHMpLCB7XG4gICAgW2ZpZWxkTmFtZV06IHZhbHVlXG4gIH0pO1xuICBpZiAoc2VsZWN0ZWRJdGVtICYmIGl0ZW1TZWxlY3Rvcikge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwicmVwbGFjZVwiLFxuICAgICAgZGVzdGluYXRpb25JbmRleDogaXRlbVNlbGVjdG9yLmluZGV4LFxuICAgICAgZGVzdGluYXRpb25ab25lOiBpdGVtU2VsZWN0b3Iuem9uZSB8fCByb290RHJvcHBhYmxlSWQsXG4gICAgICBkYXRhOiAoeWllbGQgcmVzb2x2ZUNvbXBvbmVudERhdGEyKFxuICAgICAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzZWxlY3RlZEl0ZW0pLCB7IHByb3BzOiBuZXdQcm9wcyB9KSxcbiAgICAgICAgXCJyZXBsYWNlXCJcbiAgICAgICkpLm5vZGUsXG4gICAgICB1aTogdXBkYXRlZFVpXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRhdGEucm9vdC5wcm9wcykge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInJlcGxhY2VSb290XCIsXG4gICAgICAgIHJvb3Q6ICh5aWVsZCByZXNvbHZlQ29tcG9uZW50RGF0YTIoXG4gICAgICAgICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGF0YS5yb290KSwgeyBwcm9wczogbmV3UHJvcHMgfSksXG4gICAgICAgICAgXCJyZXBsYWNlXCJcbiAgICAgICAgKSkubm9kZSxcbiAgICAgICAgdWk6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCB1aSksIHVwZGF0ZWRVaSksXG4gICAgICAgIHJlY29yZEhpc3Rvcnk6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwic2V0RGF0YVwiLFxuICAgICAgICBkYXRhOiB7IHJvb3Q6IG5ld1Byb3BzIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7XG52YXIgRmllbGRzQ2hpbGQgPSAoeyBmaWVsZE5hbWUgfSkgPT4ge1xuICBjb25zdCBmaWVsZCA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLmZpZWxkcy5maWVsZHNbZmllbGROYW1lXSk7XG4gIGNvbnN0IGlzUmVhZE9ubHkgPSB1c2VBcHBTdG9yZShcbiAgICAocykgPT4gKChzLnNlbGVjdGVkSXRlbSA/IHMuc2VsZWN0ZWRJdGVtLnJlYWRPbmx5IDogcy5zdGF0ZS5kYXRhLnJvb3QucmVhZE9ubHkpIHx8IHt9KVtmaWVsZE5hbWVdXG4gICk7XG4gIGNvbnN0IHZhbHVlID0gdXNlQXBwU3RvcmUoKHMpID0+IHtcbiAgICBjb25zdCByb290UHJvcHMgPSBzLnN0YXRlLmRhdGEucm9vdC5wcm9wcyB8fCBzLnN0YXRlLmRhdGEucm9vdDtcbiAgICByZXR1cm4gcy5zZWxlY3RlZEl0ZW0gPyBzLnNlbGVjdGVkSXRlbS5wcm9wc1tmaWVsZE5hbWVdIDogcm9vdFByb3BzW2ZpZWxkTmFtZV07XG4gIH0pO1xuICBjb25zdCBpZCA9IHVzZUFwcFN0b3JlKChzKSA9PiB7XG4gICAgaWYgKCFmaWVsZCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHMuc2VsZWN0ZWRJdGVtID8gYCR7cy5zZWxlY3RlZEl0ZW0ucHJvcHMuaWR9XyR7ZmllbGQudHlwZX1fJHtmaWVsZE5hbWV9YCA6IGByb290XyR7ZmllbGQudHlwZX1fJHtmaWVsZE5hbWV9YDtcbiAgfSk7XG4gIGNvbnN0IHBlcm1pc3Npb25zID0gdXNlQXBwU3RvcmUoXG4gICAgdXNlU2hhbGxvdzUoKHMpID0+IHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0ZWRJdGVtLCBwZXJtaXNzaW9uczogcGVybWlzc2lvbnMyIH0gPSBzO1xuICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbSA/IHBlcm1pc3Npb25zMi5nZXRQZXJtaXNzaW9ucyh7IGl0ZW06IHNlbGVjdGVkSXRlbSB9KSA6IHBlcm1pc3Npb25zMi5nZXRQZXJtaXNzaW9ucyh7IHJvb3Q6IHRydWUgfSk7XG4gICAgfSlcbiAgKTtcbiAgY29uc3QgYXBwU3RvcmUgPSB1c2VBcHBTdG9yZUFwaSgpO1xuICBjb25zdCBvbkNoYW5nZSA9IHVzZUNhbGxiYWNrMTIoY3JlYXRlT25DaGFuZ2UoZmllbGROYW1lLCBhcHBTdG9yZSksIFtcbiAgICBmaWVsZE5hbWVcbiAgXSk7XG4gIGNvbnN0IHsgdmlzaWJsZSA9IHRydWUgfSA9IGZpZWxkICE9IG51bGwgPyBmaWVsZCA6IHt9O1xuICBpZiAoIWZpZWxkIHx8ICFpZCB8fCAhdmlzaWJsZSkgcmV0dXJuIG51bGw7XG4gIGlmIChmaWVsZC50eXBlID09PSBcInNsb3RcIikgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjkoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTIxKFwiZmllbGRcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjkoXG4gICAgQXV0b0ZpZWxkUHJpdmF0ZSxcbiAgICB7XG4gICAgICBmaWVsZCxcbiAgICAgIG5hbWU6IGZpZWxkTmFtZSxcbiAgICAgIGlkLFxuICAgICAgcmVhZE9ubHk6ICFwZXJtaXNzaW9ucy5lZGl0IHx8IGlzUmVhZE9ubHksXG4gICAgICB2YWx1ZSxcbiAgICAgIG9uQ2hhbmdlXG4gICAgfVxuICApIH0sIGlkKTtcbn07XG52YXIgRmllbGRzQ2hpbGRNZW1vID0gbWVtbzMoRmllbGRzQ2hpbGQpO1xudmFyIEZpZWxkc0ludGVybmFsID0gKHsgd3JhcEZpZWxkcyA9IHRydWUgfSkgPT4ge1xuICBjb25zdCBvdmVycmlkZXMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5vdmVycmlkZXMpO1xuICBjb25zdCBjb21wb25lbnRSZXNvbHZpbmcgPSB1c2VBcHBTdG9yZSgocykgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbG9hZGluZ0NvdW50ID0gcy5zZWxlY3RlZEl0ZW0gPyAoX2EgPSBzLmNvbXBvbmVudFN0YXRlW3Muc2VsZWN0ZWRJdGVtLnByb3BzLmlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmxvYWRpbmdDb3VudCA6IChfYiA9IHMuY29tcG9uZW50U3RhdGVbXCJyb290XCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2IubG9hZGluZ0NvdW50O1xuICAgIHJldHVybiAobG9hZGluZ0NvdW50ICE9IG51bGwgPyBsb2FkaW5nQ291bnQgOiAwKSA+IDA7XG4gIH0pO1xuICBjb25zdCBpdGVtU2VsZWN0b3IgPSB1c2VBcHBTdG9yZSh1c2VTaGFsbG93NSgocykgPT4gcy5zdGF0ZS51aS5pdGVtU2VsZWN0b3IpKTtcbiAgY29uc3QgaWQgPSB1c2VBcHBTdG9yZSgocykgPT4ge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0gcy5zZWxlY3RlZEl0ZW0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5wcm9wcy5pZDtcbiAgfSk7XG4gIGNvbnN0IGFwcFN0b3JlID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgdXNlUmVnaXN0ZXJGaWVsZHNTbGljZShhcHBTdG9yZSwgaWQpO1xuICBjb25zdCBmaWVsZHNMb2FkaW5nID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuZmllbGRzLmxvYWRpbmcpO1xuICBjb25zdCBmaWVsZE5hbWVzID0gdXNlQXBwU3RvcmUoXG4gICAgdXNlU2hhbGxvdzUoKHMpID0+IHtcbiAgICAgIGlmIChzLmZpZWxkcy5pZCA9PT0gaWQpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHMuZmllbGRzLmZpZWxkcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW107XG4gICAgfSlcbiAgKTtcbiAgY29uc3QgaXNMb2FkaW5nID0gZmllbGRzTG9hZGluZyB8fCBjb21wb25lbnRSZXNvbHZpbmc7XG4gIGNvbnN0IFdyYXBwZXIgPSB1c2VNZW1vMTEoKCkgPT4gb3ZlcnJpZGVzLmZpZWxkcyB8fCBEZWZhdWx0RmllbGRzLCBbb3ZlcnJpZGVzXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czEzKFxuICAgIFwiZm9ybVwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjEoeyB3cmFwRmllbGRzIH0pLFxuICAgICAgb25TdWJtaXQ6IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjkoV3JhcHBlciwgeyBpc0xvYWRpbmcsIGl0ZW1TZWxlY3RvciwgY2hpbGRyZW46IGZpZWxkTmFtZXMubWFwKChmaWVsZE5hbWUpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gyOShGaWVsZHNDaGlsZE1lbW8sIHsgZmllbGROYW1lIH0sIGZpZWxkTmFtZSkpIH0pLFxuICAgICAgICBpc0xvYWRpbmcgJiYgLyogQF9fUFVSRV9fICovIGpzeDI5KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyMShcImxvYWRpbmdPdmVybGF5XCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI5KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyMShcImxvYWRpbmdPdmVybGF5SW5uZXJcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjkoTG9hZGVyLCB7IHNpemU6IDE2IH0pIH0pIH0pXG4gICAgICBdXG4gICAgfVxuICApO1xufTtcbnZhciBGaWVsZHMgPSBtZW1vMyhGaWVsZHNJbnRlcm5hbCk7XG5cbi8vIGNvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL0NvbXBvbmVudHMvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBsaWIvdXNlLWNvbXBvbmVudC1saXN0LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyMSwgdXNlU3RhdGUgYXMgdXNlU3RhdGUxOCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBjb21wb25lbnRzL0NvbXBvbmVudExpc3QvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvQ29tcG9uZW50TGlzdC9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE3ID0geyBcIkNvbXBvbmVudExpc3RcIjogXCJfQ29tcG9uZW50TGlzdF8xcnJsdF8xXCIsIFwiQ29tcG9uZW50TGlzdC0taXNFeHBhbmRlZFwiOiBcIl9Db21wb25lbnRMaXN0LS1pc0V4cGFuZGVkXzFycmx0XzVcIiwgXCJDb21wb25lbnRMaXN0LWNvbnRlbnRcIjogXCJfQ29tcG9uZW50TGlzdC1jb250ZW50XzFycmx0XzlcIiwgXCJDb21wb25lbnRMaXN0LXRpdGxlXCI6IFwiX0NvbXBvbmVudExpc3QtdGl0bGVfMXJybHRfMTdcIiwgXCJDb21wb25lbnRMaXN0LXRpdGxlSWNvblwiOiBcIl9Db21wb25lbnRMaXN0LXRpdGxlSWNvbl8xcnJsdF81M1wiIH07XG5cbi8vIGNvbXBvbmVudHMvQ29tcG9uZW50TGlzdC9pbmRleC50c3hcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyMCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDMwLCBqc3hzIGFzIGpzeHMxNCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTIyID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiQ29tcG9uZW50TGlzdFwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQxNyk7XG52YXIgQ29tcG9uZW50TGlzdEl0ZW0gPSAoe1xuICBuYW1lLFxuICBsYWJlbFxufSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IG92ZXJyaWRlcyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLm92ZXJyaWRlcyk7XG4gIGNvbnN0IGNhbkluc2VydCA9IHVzZUFwcFN0b3JlKFxuICAgIChzKSA9PiBzLnBlcm1pc3Npb25zLmdldFBlcm1pc3Npb25zKHtcbiAgICAgIHR5cGU6IG5hbWVcbiAgICB9KS5pbnNlcnRcbiAgKTtcbiAgdXNlRWZmZWN0MjAoKCkgPT4ge1xuICAgIGlmIChvdmVycmlkZXMuY29tcG9uZW50SXRlbSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIlRoZSBgY29tcG9uZW50SXRlbWAgb3ZlcnJpZGUgaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgcmVuYW1lZCB0byBgZHJhd2VySXRlbWBcIlxuICAgICAgKTtcbiAgICB9XG4gIH0sIFtvdmVycmlkZXNdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChEcmF3ZXIuSXRlbSwgeyBsYWJlbCwgbmFtZSwgaXNEcmFnRGlzYWJsZWQ6ICFjYW5JbnNlcnQsIGNoaWxkcmVuOiAoX2EgPSBvdmVycmlkZXMuY29tcG9uZW50SXRlbSkgIT0gbnVsbCA/IF9hIDogb3ZlcnJpZGVzLmRyYXdlckl0ZW0gfSk7XG59O1xudmFyIENvbXBvbmVudExpc3QgPSAoe1xuICBjaGlsZHJlbixcbiAgdGl0bGUsXG4gIGlkXG59KSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLmNvbmZpZyk7XG4gIGNvbnN0IHNldFVpID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuc2V0VWkpO1xuICBjb25zdCBjb21wb25lbnRMaXN0ID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuc3RhdGUudWkuY29tcG9uZW50TGlzdCk7XG4gIGNvbnN0IHsgZXhwYW5kZWQgPSB0cnVlIH0gPSBjb21wb25lbnRMaXN0W2lkXSB8fCB7fTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTIyKHsgaXNFeHBhbmRlZDogZXhwYW5kZWQgfSksIGNoaWxkcmVuOiBbXG4gICAgdGl0bGUgJiYgLyogQF9fUFVSRV9fICovIGpzeHMxNChcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjIoXCJ0aXRsZVwiKSxcbiAgICAgICAgb25DbGljazogKCkgPT4gc2V0VWkoe1xuICAgICAgICAgIGNvbXBvbmVudExpc3Q6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGNvbXBvbmVudExpc3QpLCB7XG4gICAgICAgICAgICBbaWRdOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjb21wb25lbnRMaXN0W2lkXSksIHtcbiAgICAgICAgICAgICAgZXhwYW5kZWQ6ICFleHBhbmRlZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KSxcbiAgICAgICAgdGl0bGU6IGV4cGFuZGVkID8gYENvbGxhcHNlJHt0aXRsZSA/IGAgJHt0aXRsZX1gIDogXCJcIn1gIDogYEV4cGFuZCR7dGl0bGUgPyBgICR7dGl0bGV9YCA6IFwiXCJ9YCxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjaGlsZHJlbjogdGl0bGUgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyMihcInRpdGxlSWNvblwiKSwgY2hpbGRyZW46IGV4cGFuZGVkID8gLyogQF9fUFVSRV9fICovIGpzeDMwKENoZXZyb25VcCwgeyBzaXplOiAxMiB9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChDaGV2cm9uRG93biwgeyBzaXplOiAxMiB9KSB9KVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTIyKFwiY29udGVudFwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChEcmF3ZXIsIHsgY2hpbGRyZW46IGNoaWxkcmVuIHx8IE9iamVjdC5rZXlzKGNvbmZpZy5jb21wb25lbnRzKS5tYXAoKGNvbXBvbmVudEtleSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcbiAgICAgICAgQ29tcG9uZW50TGlzdEl0ZW0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogKF9hID0gY29uZmlnLmNvbXBvbmVudHNbY29tcG9uZW50S2V5XVtcImxhYmVsXCJdKSAhPSBudWxsID8gX2EgOiBjb21wb25lbnRLZXksXG4gICAgICAgICAgbmFtZTogY29tcG9uZW50S2V5XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBvbmVudEtleVxuICAgICAgKTtcbiAgICB9KSB9KSB9KVxuICBdIH0pO1xufTtcbkNvbXBvbmVudExpc3QuSXRlbSA9IENvbXBvbmVudExpc3RJdGVtO1xuXG4vLyBsaWIvdXNlLWNvbXBvbmVudC1saXN0LnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDMxIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgdXNlQ29tcG9uZW50TGlzdCA9ICgpID0+IHtcbiAgY29uc3QgW2NvbXBvbmVudExpc3QsIHNldENvbXBvbmVudExpc3RdID0gdXNlU3RhdGUxOCgpO1xuICBjb25zdCBjb25maWcgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5jb25maWcpO1xuICBjb25zdCB1aUNvbXBvbmVudExpc3QgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZS51aS5jb21wb25lbnRMaXN0KTtcbiAgdXNlRWZmZWN0MjEoKCkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGlmIChPYmplY3Qua2V5cyh1aUNvbXBvbmVudExpc3QpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1hdGNoZWRDb21wb25lbnRzID0gW107XG4gICAgICBsZXQgX2NvbXBvbmVudExpc3Q7XG4gICAgICBfY29tcG9uZW50TGlzdCA9IE9iamVjdC5lbnRyaWVzKHVpQ29tcG9uZW50TGlzdCkubWFwKFxuICAgICAgICAoW2NhdGVnb3J5S2V5LCBjYXRlZ29yeV0pID0+IHtcbiAgICAgICAgICBpZiAoIWNhdGVnb3J5LmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXRlZ29yeS5jb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudE5hbWUpID0+IHtcbiAgICAgICAgICAgIG1hdGNoZWRDb21wb25lbnRzLnB1c2goY29tcG9uZW50TmFtZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGNhdGVnb3J5LnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMShcbiAgICAgICAgICAgIENvbXBvbmVudExpc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiBjYXRlZ29yeUtleSxcbiAgICAgICAgICAgICAgdGl0bGU6IGNhdGVnb3J5LnRpdGxlIHx8IGNhdGVnb3J5S2V5LFxuICAgICAgICAgICAgICBjaGlsZHJlbjogY2F0ZWdvcnkuY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudE5hbWUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudENvbmYgPSBjb25maWcuY29tcG9uZW50c1tjb21wb25lbnROYW1lXSB8fCB7fTtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMxKFxuICAgICAgICAgICAgICAgICAgQ29tcG9uZW50TGlzdC5JdGVtLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogKF9hMiA9IGNvbXBvbmVudENvbmZbXCJsYWJlbFwiXSkgIT0gbnVsbCA/IF9hMiA6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY29tcG9uZW50TmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2F0ZWdvcnlLZXlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc3QgcmVtYWluaW5nQ29tcG9uZW50cyA9IE9iamVjdC5rZXlzKGNvbmZpZy5jb21wb25lbnRzKS5maWx0ZXIoXG4gICAgICAgIChjb21wb25lbnQpID0+IG1hdGNoZWRDb21wb25lbnRzLmluZGV4T2YoY29tcG9uZW50KSA9PT0gLTFcbiAgICAgICk7XG4gICAgICBpZiAocmVtYWluaW5nQ29tcG9uZW50cy5sZW5ndGggPiAwICYmICEoKF9hID0gdWlDb21wb25lbnRMaXN0Lm90aGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY29tcG9uZW50cykgJiYgKChfYiA9IHVpQ29tcG9uZW50TGlzdC5vdGhlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnZpc2libGUpICE9PSBmYWxzZSkge1xuICAgICAgICBfY29tcG9uZW50TGlzdC5wdXNoKFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMShcbiAgICAgICAgICAgIENvbXBvbmVudExpc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIHRpdGxlOiAoKF9jID0gdWlDb21wb25lbnRMaXN0Lm90aGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2MudGl0bGUpIHx8IFwiT3RoZXJcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IHJlbWFpbmluZ0NvbXBvbmVudHMubWFwKChjb21wb25lbnROYW1lLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRDb25mID0gY29uZmlnLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gfHwge307XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMShcbiAgICAgICAgICAgICAgICAgIENvbXBvbmVudExpc3QuSXRlbSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY29tcG9uZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IChfYTIgPSBjb21wb25lbnRDb25mW1wibGFiZWxcIl0pICE9IG51bGwgPyBfYTIgOiBjb21wb25lbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudE5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwib3RoZXJcIlxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHNldENvbXBvbmVudExpc3QoX2NvbXBvbmVudExpc3QpO1xuICAgIH1cbiAgfSwgW2NvbmZpZy5jYXRlZ29yaWVzLCBjb25maWcuY29tcG9uZW50cywgdWlDb21wb25lbnRMaXN0XSk7XG4gIHJldHVybiBjb21wb25lbnRMaXN0O1xufTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvQ29tcG9uZW50cy9pbmRleC50c3hcbmltcG9ydCB7IHVzZU1lbW8gYXMgdXNlTWVtbzEyIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4MzIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBDb21wb25lbnRzID0gKCkgPT4ge1xuICBjb25zdCBvdmVycmlkZXMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5vdmVycmlkZXMpO1xuICBjb25zdCBjb21wb25lbnRMaXN0ID0gdXNlQ29tcG9uZW50TGlzdCgpO1xuICBjb25zdCBXcmFwcGVyID0gdXNlTWVtbzEyKCgpID0+IHtcbiAgICBpZiAob3ZlcnJpZGVzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJUaGUgYGNvbXBvbmVudHNgIG92ZXJyaWRlIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHJlbmFtZWQgdG8gYGRyYXdlcmBcIlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG92ZXJyaWRlcy5jb21wb25lbnRzIHx8IG92ZXJyaWRlcy5kcmF3ZXIgfHwgXCJkaXZcIjtcbiAgfSwgW292ZXJyaWRlc10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMyKFdyYXBwZXIsIHsgY2hpbGRyZW46IGNvbXBvbmVudExpc3QgPyBjb21wb25lbnRMaXN0IDogLyogQF9fUFVSRV9fICovIGpzeDMyKENvbXBvbmVudExpc3QsIHsgaWQ6IFwiYWxsXCIgfSkgfSk7XG59O1xuXG4vLyBjb21wb25lbnRzL1B1Y2svY29tcG9uZW50cy9QcmV2aWV3L2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTMsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyMywgdXNlUmVmIGFzIHVzZVJlZjcsIHVzZU1lbW8gYXMgdXNlTWVtbzEzIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNvbXBvbmVudHMvQXV0b0ZyYW1lL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7XG4gIGNyZWF0ZUNvbnRleHQgYXMgY3JlYXRlQ29udGV4dDYsXG4gIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDEwLFxuICB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MjIsXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlMTlcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgaGFzaCBmcm9tIFwib2JqZWN0LWhhc2hcIjtcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCBhcyBjcmVhdGVQb3J0YWwzIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQ5LCBqc3ggYXMganN4MzMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBzdHlsZVNlbGVjdG9yID0gJ3N0eWxlLCBsaW5rW3JlbD1cInN0eWxlc2hlZXRcIl0nO1xudmFyIGNvbGxlY3RTdHlsZXMgPSAoZG9jKSA9PiB7XG4gIGNvbnN0IGNvbGxlY3RlZCA9IFtdO1xuICBkb2MucXVlcnlTZWxlY3RvckFsbChzdHlsZVNlbGVjdG9yKS5mb3JFYWNoKChzdHlsZSkgPT4ge1xuICAgIGlmIChzdHlsZS50YWdOYW1lID09PSBcIlNUWUxFXCIpIHtcbiAgICAgIGNvbnN0IGhhc0NvbnRlbnQgPSAhIXN0eWxlLmlubmVySFRNTC50cmltKCk7XG4gICAgICBpZiAoaGFzQ29udGVudCkge1xuICAgICAgICBjb2xsZWN0ZWQucHVzaChzdHlsZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbGxlY3RlZC5wdXNoKHN0eWxlKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY29sbGVjdGVkO1xufTtcbnZhciBnZXRTdHlsZVNoZWV0ID0gKGVsKSA9PiB7XG4gIHJldHVybiBBcnJheS5mcm9tKGRvY3VtZW50LnN0eWxlU2hlZXRzKS5maW5kKChzcykgPT4ge1xuICAgIGNvbnN0IG93bmVyTm9kZSA9IHNzLm93bmVyTm9kZTtcbiAgICByZXR1cm4gb3duZXJOb2RlLmhyZWYgPT09IGVsLmhyZWY7XG4gIH0pO1xufTtcbnZhciBnZXRTdHlsZXMgPSAoc3R5bGVTaGVldCkgPT4ge1xuICBpZiAoc3R5bGVTaGVldCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gWy4uLkFycmF5LmZyb20oc3R5bGVTaGVldC5jc3NSdWxlcyldLm1hcCgocnVsZSkgPT4gcnVsZS5jc3NUZXh0KS5qb2luKFwiXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJBY2Nlc3MgdG8gc3R5bGVzaGVldCAlcyBpcyBkZW5pZWQuIElnbm9yaW5nXFx1MjAyNlwiLFxuICAgICAgICBzdHlsZVNoZWV0LmhyZWZcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBcIlwiO1xufTtcbnZhciBzeW5jQXR0cmlidXRlcyA9IChzb3VyY2VFbGVtZW50LCB0YXJnZXRFbGVtZW50KSA9PiB7XG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSBzb3VyY2VFbGVtZW50LmF0dHJpYnV0ZXM7XG4gIGlmICgoYXR0cmlidXRlcyA9PSBudWxsID8gdm9pZCAwIDogYXR0cmlidXRlcy5sZW5ndGgpID4gMCkge1xuICAgIEFycmF5LmZyb20oYXR0cmlidXRlcykuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XG4gICAgICB0YXJnZXRFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUubmFtZSwgYXR0cmlidXRlLnZhbHVlKTtcbiAgICB9KTtcbiAgfVxufTtcbnZhciBkZWZlciA9IChmbikgPT4gc2V0VGltZW91dChmbiwgMCk7XG52YXIgQ29weUhvc3RTdHlsZXMgPSAoe1xuICBjaGlsZHJlbixcbiAgZGVidWcgPSBmYWxzZSxcbiAgb25TdHlsZXNMb2FkZWQgPSAoKSA9PiBudWxsXG59KSA9PiB7XG4gIGNvbnN0IHsgZG9jdW1lbnQ6IGRvYywgd2luZG93OiB3aW4gfSA9IHVzZUZyYW1lKCk7XG4gIHVzZUVmZmVjdDIyKCgpID0+IHtcbiAgICBpZiAoIXdpbiB8fCAhZG9jKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGVsZW1lbnRzID0gW107XG4gICAgY29uc3QgaGFzaGVzID0ge307XG4gICAgY29uc3QgbG9va3VwRWwgPSAoZWwpID0+IGVsZW1lbnRzLmZpbmRJbmRleCgoZWxlbWVudE1hcCkgPT4gZWxlbWVudE1hcC5vcmlnaW5hbCA9PT0gZWwpO1xuICAgIGNvbnN0IG1pcnJvckVsID0gKGVsLCBpbmxpbmVTdHlsZXMgPSBmYWxzZSkgPT4gX19hc3luYyh2b2lkIDAsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBsZXQgbWlycm9yO1xuICAgICAgaWYgKGVsLm5vZGVOYW1lID09PSBcIkxJTktcIiAmJiBpbmxpbmVTdHlsZXMpIHtcbiAgICAgICAgbWlycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICBtaXJyb3IudHlwZSA9IFwidGV4dC9jc3NcIjtcbiAgICAgICAgbGV0IHN0eWxlU2hlZXQgPSBnZXRTdHlsZVNoZWV0KGVsKTtcbiAgICAgICAgaWYgKCFzdHlsZVNoZWV0KSB7XG4gICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZuID0gKCkgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3R5bGVTaGVldCA9IGdldFN0eWxlU2hlZXQoZWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0eWxlczIgPSBnZXRTdHlsZXMoc3R5bGVTaGVldCk7XG4gICAgICAgIGlmICghc3R5bGVzMikge1xuICAgICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBgVHJpZWQgdG8gbG9hZCBzdHlsZXMgZm9yIGxpbmsgZWxlbWVudCwgYnV0IGNvdWxkbid0IGZpbmQgdGhlbS4gU2tpcHBpbmcuLi5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbWlycm9yLmlubmVySFRNTCA9IHN0eWxlczI7XG4gICAgICAgIG1pcnJvci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIiwgZWwuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtaXJyb3IgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWlycm9yO1xuICAgIH0pO1xuICAgIGNvbnN0IGFkZEVsID0gKGVsKSA9PiBfX2FzeW5jKHZvaWQgMCwgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbG9va3VwRWwoZWwpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYFRyaWVkIHRvIGFkZCBhbiBlbGVtZW50IHRoYXQgd2FzIGFscmVhZHkgbWlycm9yZWQuIFVwZGF0aW5nIGluc3RlYWQuLi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgZWxlbWVudHNbaW5kZXhdLm1pcnJvci5pbm5lclRleHQgPSBlbC5pbm5lclRleHQ7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1pcnJvciA9IHlpZWxkIG1pcnJvckVsKGVsKTtcbiAgICAgIGlmICghbWlycm9yKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVsSGFzaCA9IGhhc2gobWlycm9yLm91dGVySFRNTCk7XG4gICAgICBpZiAoaGFzaGVzW2VsSGFzaF0pIHtcbiAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYGlmcmFtZSBhbHJlYWR5IGNvbnRhaW5zIGVsZW1lbnQgdGhhdCBpcyBiZWluZyBtaXJyb3JlZC4gU2tpcHBpbmcuLi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaGFzaGVzW2VsSGFzaF0gPSB0cnVlO1xuICAgICAgZG9jLmhlYWQuYXBwZW5kKG1pcnJvcik7XG4gICAgICBlbGVtZW50cy5wdXNoKHsgb3JpZ2luYWw6IGVsLCBtaXJyb3IgfSk7XG4gICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKGBBZGRlZCBzdHlsZSBub2RlICR7ZWwub3V0ZXJIVE1MfWApO1xuICAgIH0pO1xuICAgIGNvbnN0IHJlbW92ZUVsID0gKGVsKSA9PiB7XG4gICAgICB2YXIgX2EsIF9iO1xuICAgICAgY29uc3QgaW5kZXggPSBsb29rdXBFbChlbCk7XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIGlmIChkZWJ1ZylcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBUcmllZCB0byByZW1vdmUgYW4gZWxlbWVudCB0aGF0IGRpZCBub3QgZXhpc3QuIFNraXBwaW5nLi4uYFxuICAgICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVsSGFzaCA9IGhhc2goZWwub3V0ZXJIVE1MKTtcbiAgICAgIChfYiA9IChfYSA9IGVsZW1lbnRzW2luZGV4XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm1pcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIGhhc2hlc1tlbEhhc2hdO1xuICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZyhgUmVtb3ZlZCBzdHlsZSBub2RlICR7ZWwub3V0ZXJIVE1MfWApO1xuICAgIH07XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcbiAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiY2hpbGRMaXN0XCIpIHtcbiAgICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSB8fCBub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICBjb25zdCBlbCA9IG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFID8gbm9kZS5wYXJlbnRFbGVtZW50IDogbm9kZTtcbiAgICAgICAgICAgICAgaWYgKGVsICYmIGVsLm1hdGNoZXMoc3R5bGVTZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBkZWZlcigoKSA9PiBhZGRFbChlbCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbXV0YXRpb24ucmVtb3ZlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSB8fCBub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICBjb25zdCBlbCA9IG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFID8gbm9kZS5wYXJlbnRFbGVtZW50IDogbm9kZTtcbiAgICAgICAgICAgICAgaWYgKGVsICYmIGVsLm1hdGNoZXMoc3R5bGVTZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBkZWZlcigoKSA9PiByZW1vdmVFbChlbCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcmVudERvY3VtZW50ID0gd2luLnBhcmVudC5kb2N1bWVudDtcbiAgICBjb25zdCBjb2xsZWN0ZWRTdHlsZXMgPSBjb2xsZWN0U3R5bGVzKHBhcmVudERvY3VtZW50KTtcbiAgICBjb25zdCBocmVmcyA9IFtdO1xuICAgIGxldCBzdHlsZXNMb2FkZWQgPSAwO1xuICAgIGNvbnN0IHBhcmVudEh0bWwgPSBwYXJlbnREb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF07XG4gICAgc3luY0F0dHJpYnV0ZXMocGFyZW50SHRtbCwgZG9jLmRvY3VtZW50RWxlbWVudCk7XG4gICAgY29uc3QgcGFyZW50Qm9keSA9IHBhcmVudERvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcbiAgICBzeW5jQXR0cmlidXRlcyhwYXJlbnRCb2R5LCBkb2MuYm9keSk7XG4gICAgUHJvbWlzZS5hbGwoXG4gICAgICBjb2xsZWN0ZWRTdHlsZXMubWFwKChzdHlsZU5vZGUsIGkpID0+IF9fYXN5bmModm9pZCAwLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAoc3R5bGVOb2RlLm5vZGVOYW1lID09PSBcIkxJTktcIikge1xuICAgICAgICAgIGNvbnN0IGxpbmtIcmVmID0gc3R5bGVOb2RlLmhyZWY7XG4gICAgICAgICAgaWYgKGhyZWZzLmluZGV4T2YobGlua0hyZWYpID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaHJlZnMucHVzaChsaW5rSHJlZik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWlycm9yID0geWllbGQgbWlycm9yRWwoc3R5bGVOb2RlKTtcbiAgICAgICAgaWYgKCFtaXJyb3IpIHJldHVybjtcbiAgICAgICAgZWxlbWVudHMucHVzaCh7IG9yaWdpbmFsOiBzdHlsZU5vZGUsIG1pcnJvciB9KTtcbiAgICAgICAgcmV0dXJuIG1pcnJvcjtcbiAgICAgIH0pKVxuICAgICkudGhlbigobWlycm9yU3R5bGVzKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IG1pcnJvclN0eWxlcy5maWx0ZXIoXG4gICAgICAgIChlbCkgPT4gdHlwZW9mIGVsICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICApO1xuICAgICAgZmlsdGVyZWQuZm9yRWFjaCgobWlycm9yKSA9PiB7XG4gICAgICAgIG1pcnJvci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgc3R5bGVzTG9hZGVkID0gc3R5bGVzTG9hZGVkICsgMTtcbiAgICAgICAgICBpZiAoc3R5bGVzTG9hZGVkID49IGVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgb25TdHlsZXNMb2FkZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG1pcnJvci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgQXV0b0ZyYW1lIGNvdWxkbid0IGxvYWQgYSBzdHlsZXNoZWV0YCk7XG4gICAgICAgICAgc3R5bGVzTG9hZGVkID0gc3R5bGVzTG9hZGVkICsgMTtcbiAgICAgICAgICBpZiAoc3R5bGVzTG9hZGVkID49IGVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgb25TdHlsZXNMb2FkZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIGRvYy5oZWFkLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICBkb2MuaGVhZC5hcHBlbmQoLi4uZmlsdGVyZWQpO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShwYXJlbnREb2N1bWVudC5oZWFkLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbiAgICAgIGZpbHRlcmVkLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsSGFzaCA9IGhhc2goZWwub3V0ZXJIVE1MKTtcbiAgICAgICAgaGFzaGVzW2VsSGFzaF0gPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzMoRnJhZ21lbnQ5LCB7IGNoaWxkcmVuIH0pO1xufTtcbnZhciBhdXRvRnJhbWVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDYoe30pO1xudmFyIHVzZUZyYW1lID0gKCkgPT4gdXNlQ29udGV4dDEwKGF1dG9GcmFtZUNvbnRleHQpO1xuZnVuY3Rpb24gQXV0b0ZyYW1lKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY2xhc3NOYW1lLFxuICAgIGRlYnVnLFxuICAgIGlkLFxuICAgIG9uUmVhZHkgPSAoKSA9PiB7XG4gICAgfSxcbiAgICBvbk5vdFJlYWR5ID0gKCkgPT4ge1xuICAgIH0sXG4gICAgZnJhbWVSZWZcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiY2hpbGRyZW5cIixcbiAgICBcImNsYXNzTmFtZVwiLFxuICAgIFwiZGVidWdcIixcbiAgICBcImlkXCIsXG4gICAgXCJvblJlYWR5XCIsXG4gICAgXCJvbk5vdFJlYWR5XCIsXG4gICAgXCJmcmFtZVJlZlwiXG4gIF0pO1xuICBjb25zdCBbbG9hZGVkLCBzZXRMb2FkZWRdID0gdXNlU3RhdGUxOShmYWxzZSk7XG4gIGNvbnN0IFtjdHgsIHNldEN0eF0gPSB1c2VTdGF0ZTE5KHt9KTtcbiAgY29uc3QgW21vdW50VGFyZ2V0LCBzZXRNb3VudFRhcmdldF0gPSB1c2VTdGF0ZTE5KCk7XG4gIGNvbnN0IFtzdHlsZXNMb2FkZWQsIHNldFN0eWxlc0xvYWRlZF0gPSB1c2VTdGF0ZTE5KGZhbHNlKTtcbiAgdXNlRWZmZWN0MjIoKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKGZyYW1lUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGRvYyA9IGZyYW1lUmVmLmN1cnJlbnQuY29udGVudERvY3VtZW50O1xuICAgICAgY29uc3Qgd2luID0gZnJhbWVSZWYuY3VycmVudC5jb250ZW50V2luZG93O1xuICAgICAgc2V0Q3R4KHtcbiAgICAgICAgZG9jdW1lbnQ6IGRvYyB8fCB2b2lkIDAsXG4gICAgICAgIHdpbmRvdzogd2luIHx8IHZvaWQgMFxuICAgICAgfSk7XG4gICAgICBzZXRNb3VudFRhcmdldChcbiAgICAgICAgKF9hMiA9IGZyYW1lUmVmLmN1cnJlbnQuY29udGVudERvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmdldEVsZW1lbnRCeUlkKFwiZnJhbWUtcm9vdFwiKVxuICAgICAgKTtcbiAgICAgIGlmIChkb2MgJiYgd2luICYmIHN0eWxlc0xvYWRlZCkge1xuICAgICAgICBvblJlYWR5KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbk5vdFJlYWR5KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZnJhbWVSZWYsIGxvYWRlZCwgc3R5bGVzTG9hZGVkXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzMoXG4gICAgXCJpZnJhbWVcIixcbiAgICBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGlkLFxuICAgICAgc3JjRG9jOiAnPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5PjxkaXYgaWQ9XCJmcmFtZS1yb290XCIgZGF0YS1wdWNrLWVudHJ5PjwvZGl2PjwvYm9keT48L2h0bWw+JyxcbiAgICAgIHJlZjogZnJhbWVSZWYsXG4gICAgICBvbkxvYWQ6ICgpID0+IHtcbiAgICAgICAgc2V0TG9hZGVkKHRydWUpO1xuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzMoYXV0b0ZyYW1lQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogY3R4LCBjaGlsZHJlbjogbG9hZGVkICYmIG1vdW50VGFyZ2V0ICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gzMyhcbiAgICAgICAgQ29weUhvc3RTdHlsZXMsXG4gICAgICAgIHtcbiAgICAgICAgICBkZWJ1ZyxcbiAgICAgICAgICBvblN0eWxlc0xvYWRlZDogKCkgPT4gc2V0U3R5bGVzTG9hZGVkKHRydWUpLFxuICAgICAgICAgIGNoaWxkcmVuOiBjcmVhdGVQb3J0YWwzKGNoaWxkcmVuLCBtb3VudFRhcmdldClcbiAgICAgICAgfVxuICAgICAgKSB9KVxuICAgIH0pXG4gICk7XG59XG5BdXRvRnJhbWUuZGlzcGxheU5hbWUgPSBcIkF1dG9GcmFtZVwiO1xudmFyIEF1dG9GcmFtZV9kZWZhdWx0ID0gQXV0b0ZyYW1lO1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL1ByZXZpZXcvc3R5bGVzLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHlsZXNfbW9kdWxlX2RlZmF1bHQxOCA9IHsgXCJQdWNrUHJldmlld1wiOiBcIl9QdWNrUHJldmlld196MnJndV8xXCIsIFwiUHVja1ByZXZpZXctZnJhbWVcIjogXCJfUHVja1ByZXZpZXctZnJhbWVfejJyZ3VfNlwiIH07XG5cbi8vIGNvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL1ByZXZpZXcvaW5kZXgudHN4XG5pbXBvcnQgeyBGcmFnbWVudCBhcyBGcmFnbWVudDEwLCBqc3ggYXMganN4MzQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUyMyA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIlB1Y2tQcmV2aWV3XCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE4KTtcbnZhciB1c2VCdWJibGVJZnJhbWVFdmVudHMgPSAocmVmKSA9PiB7XG4gIGNvbnN0IHN0YXR1cyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnN0YXR1cyk7XG4gIHVzZUVmZmVjdDIzKCgpID0+IHtcbiAgICBpZiAocmVmLmN1cnJlbnQgJiYgc3RhdHVzID09PSBcIlJFQURZXCIpIHtcbiAgICAgIGNvbnN0IGlmcmFtZSA9IHJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgaGFuZGxlUG9pbnRlck1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZXZ0ID0gbmV3IEJ1YmJsZWRQb2ludGVyRXZlbnQoXCJwb2ludGVybW92ZVwiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBldmVudCksIHtcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgICAgIGNsaWVudFg6IGV2ZW50LmNsaWVudFgsXG4gICAgICAgICAgY2xpZW50WTogZXZlbnQuY2xpZW50WSxcbiAgICAgICAgICBvcmlnaW5hbFRhcmdldDogZXZlbnQudGFyZ2V0XG4gICAgICAgIH0pKTtcbiAgICAgICAgaWZyYW1lLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgIH07XG4gICAgICBjb25zdCByZWdpc3RlciA9ICgpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB1bnJlZ2lzdGVyKCk7XG4gICAgICAgIChfYSA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwicG9pbnRlcm1vdmVcIixcbiAgICAgICAgICBoYW5kbGVQb2ludGVyTW92ZSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IHVucmVnaXN0ZXIgPSAoKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgXCJwb2ludGVybW92ZVwiLFxuICAgICAgICAgIGhhbmRsZVBvaW50ZXJNb3ZlXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgICAgcmVnaXN0ZXIoKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHVucmVnaXN0ZXIoKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbc3RhdHVzXSk7XG59O1xudmFyIFByZXZpZXcyID0gKHsgaWQgPSBcInB1Y2stcHJldmlld1wiIH0pID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBTdG9yZSgocykgPT4gcy5kaXNwYXRjaCk7XG4gIGNvbnN0IHJvb3QgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZS5kYXRhLnJvb3QpO1xuICBjb25zdCBjb25maWcgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5jb25maWcpO1xuICBjb25zdCBzZXRTdGF0dXMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zZXRTdGF0dXMpO1xuICBjb25zdCBpZnJhbWUgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5pZnJhbWUpO1xuICBjb25zdCBvdmVycmlkZXMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5vdmVycmlkZXMpO1xuICBjb25zdCBtZXRhZGF0YSA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLm1ldGFkYXRhKTtcbiAgY29uc3QgcmVuZGVyRGF0YSA9IHVzZUFwcFN0b3JlKFxuICAgIChzKSA9PiBzLnN0YXRlLnVpLnByZXZpZXdNb2RlID09PSBcImVkaXRcIiA/IG51bGwgOiBzLnN0YXRlLmRhdGFcbiAgKTtcbiAgY29uc3QgUGFnZSA9IHVzZUNhbGxiYWNrMTMoXG4gICAgKHBhZ2VQcm9wcykgPT4ge1xuICAgICAgdmFyIF9hLCBfYjtcbiAgICAgIGNvbnN0IHByb3BzV2l0aFNsb3RzID0gdXNlU2xvdHMoXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgeyB0eXBlOiBcInJvb3RcIiwgcHJvcHM6IHBhZ2VQcm9wcyB9LFxuICAgICAgICBEcm9wWm9uZUVkaXRQdXJlXG4gICAgICApO1xuICAgICAgcmV0dXJuICgoX2EgPSBjb25maWcucm9vdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnJlbmRlcikgPyAoX2IgPSBjb25maWcucm9vdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnJlbmRlcihfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgIGlkOiBcInB1Y2stcm9vdFwiXG4gICAgICB9LCBwcm9wc1dpdGhTbG90cykpIDogLyogQF9fUFVSRV9fICovIGpzeDM0KEZyYWdtZW50MTAsIHsgY2hpbGRyZW46IHByb3BzV2l0aFNsb3RzLmNoaWxkcmVuIH0pO1xuICAgIH0sXG4gICAgW2NvbmZpZ11cbiAgKTtcbiAgY29uc3QgRnJhbWUgPSB1c2VNZW1vMTMoKCkgPT4gb3ZlcnJpZGVzLmlmcmFtZSwgW292ZXJyaWRlc10pO1xuICBjb25zdCByb290UHJvcHMgPSByb290LnByb3BzIHx8IHJvb3Q7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZjcobnVsbCk7XG4gIHVzZUJ1YmJsZUlmcmFtZUV2ZW50cyhyZWYpO1xuICBjb25zdCBpbm5lciA9ICFyZW5kZXJEYXRhID8gLyogQF9fUFVSRV9fICovIGpzeDM0KFxuICAgIFBhZ2UsXG4gICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcm9vdFByb3BzKSwge1xuICAgICAgcHVjazoge1xuICAgICAgICByZW5kZXJEcm9wWm9uZTogRHJvcFpvbmVQdXJlLFxuICAgICAgICBpc0VkaXRpbmc6IHRydWUsXG4gICAgICAgIGRyYWdSZWY6IG51bGwsXG4gICAgICAgIG1ldGFkYXRhXG4gICAgICB9LFxuICAgICAgZWRpdE1vZGU6IHRydWUsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDM0KERyb3Bab25lUHVyZSwgeyB6b25lOiByb290RHJvcHBhYmxlSWQgfSlcbiAgICB9KVxuICApIDogLyogQF9fUFVSRV9fICovIGpzeDM0KFJlbmRlciwgeyBkYXRhOiByZW5kZXJEYXRhLCBjb25maWcsIG1ldGFkYXRhIH0pO1xuICB1c2VFZmZlY3QyMygoKSA9PiB7XG4gICAgaWYgKCFpZnJhbWUuZW5hYmxlZCkge1xuICAgICAgc2V0U3RhdHVzKFwiUkVBRFlcIik7XG4gICAgfVxuICB9LCBbaWZyYW1lLmVuYWJsZWRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzNChcbiAgICBcImRpdlwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjMoKSxcbiAgICAgIGlkLFxuICAgICAgXCJkYXRhLXB1Y2stcHJldmlld1wiOiB0cnVlLFxuICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBlLnRhcmdldDtcbiAgICAgICAgaWYgKCFlbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stY29tcG9uZW50XCIpICYmICFlbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stZHJvcHpvbmVcIikpIHtcbiAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFwic2V0VWlcIiwgdWk6IHsgaXRlbVNlbGVjdG9yOiBudWxsIH0gfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogaWZyYW1lLmVuYWJsZWQgPyAvKiBAX19QVVJFX18gKi8ganN4MzQoXG4gICAgICAgIEF1dG9GcmFtZV9kZWZhdWx0LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwicHJldmlldy1mcmFtZVwiLFxuICAgICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjMoXCJmcmFtZVwiKSxcbiAgICAgICAgICBcImRhdGEtcmZkLWlmcmFtZVwiOiB0cnVlLFxuICAgICAgICAgIG9uUmVhZHk6ICgpID0+IHtcbiAgICAgICAgICAgIHNldFN0YXR1cyhcIlJFQURZXCIpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Ob3RSZWFkeTogKCkgPT4ge1xuICAgICAgICAgICAgc2V0U3RhdHVzKFwiTU9VTlRFRFwiKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZyYW1lUmVmOiByZWYsXG4gICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzNChhdXRvRnJhbWVDb250ZXh0LkNvbnN1bWVyLCB7IGNoaWxkcmVuOiAoeyBkb2N1bWVudDogZG9jdW1lbnQyIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChGcmFtZSkge1xuICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDM0KEZyYW1lLCB7IGRvY3VtZW50OiBkb2N1bWVudDIsIGNoaWxkcmVuOiBpbm5lciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbm5lcjtcbiAgICAgICAgICB9IH0pXG4gICAgICAgIH1cbiAgICAgICkgOiAvKiBAX19QVVJFX18gKi8ganN4MzQoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJwcmV2aWV3LWZyYW1lXCIsXG4gICAgICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyMyhcImZyYW1lXCIpLFxuICAgICAgICAgIHJlZixcbiAgICAgICAgICBcImRhdGEtcHVjay1lbnRyeVwiOiB0cnVlLFxuICAgICAgICAgIGNoaWxkcmVuOiBpbm5lclxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvT3V0bGluZS9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIGNvbXBvbmVudHMvTGF5ZXJUcmVlL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL0xheWVyVHJlZS9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE5ID0geyBcIkxheWVyVHJlZVwiOiBcIl9MYXllclRyZWVfN3J4MDRfMVwiLCBcIkxheWVyVHJlZS16b25lVGl0bGVcIjogXCJfTGF5ZXJUcmVlLXpvbmVUaXRsZV83cngwNF8xMVwiLCBcIkxheWVyVHJlZS1oZWxwZXJcIjogXCJfTGF5ZXJUcmVlLWhlbHBlcl83cngwNF8xN1wiLCBcIkxheWVyXCI6IFwiX0xheWVyXzdyeDA0XzFcIiwgXCJMYXllci1pbm5lclwiOiBcIl9MYXllci1pbm5lcl83cngwNF8yOVwiLCBcIkxheWVyLS1jb250YWluc1pvbmVcIjogXCJfTGF5ZXItLWNvbnRhaW5zWm9uZV83cngwNF8zNVwiLCBcIkxheWVyLWNsaWNrYWJsZVwiOiBcIl9MYXllci1jbGlja2FibGVfN3J4MDRfMzlcIiwgXCJMYXllci0taXNTZWxlY3RlZFwiOiBcIl9MYXllci0taXNTZWxlY3RlZF83cngwNF82MVwiLCBcIkxheWVyLWNoZXZyb25cIjogXCJfTGF5ZXItY2hldnJvbl83cngwNF83N1wiLCBcIkxheWVyLS1jaGlsZElzU2VsZWN0ZWRcIjogXCJfTGF5ZXItLWNoaWxkSXNTZWxlY3RlZF83cngwNF83OFwiLCBcIkxheWVyLXpvbmVzXCI6IFwiX0xheWVyLXpvbmVzXzdyeDA0XzgyXCIsIFwiTGF5ZXItdGl0bGVcIjogXCJfTGF5ZXItdGl0bGVfN3J4MDRfOTZcIiwgXCJMYXllci1uYW1lXCI6IFwiX0xheWVyLW5hbWVfN3J4MDRfMTA1XCIsIFwiTGF5ZXItaWNvblwiOiBcIl9MYXllci1pY29uXzdyeDA0XzExMVwiLCBcIkxheWVyLXpvbmVJY29uXCI6IFwiX0xheWVyLXpvbmVJY29uXzdyeDA0XzExNlwiIH07XG5cbi8vIGxpYi9zY3JvbGwtaW50by12aWV3LnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHNjcm9sbEludG9WaWV3ID0gKGVsKSA9PiB7XG4gIGNvbnN0IG9sZFN0eWxlID0gX19zcHJlYWRWYWx1ZXMoe30sIGVsLnN0eWxlKTtcbiAgZWwuc3R5bGUuc2Nyb2xsTWFyZ2luID0gXCIyNTZweFwiO1xuICBpZiAoZWwpIHtcbiAgICBlbCA9PSBudWxsID8gdm9pZCAwIDogZWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgICBlbC5zdHlsZS5zY3JvbGxNYXJnaW4gPSBvbGRTdHlsZS5zY3JvbGxNYXJnaW4gfHwgXCJcIjtcbiAgfVxufTtcblxuLy8gY29tcG9uZW50cy9MYXllclRyZWUvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazE0LCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQxMSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBsaWIvb24tc2Nyb2xsLWVuZC50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBvblNjcm9sbEVuZCA9IChmcmFtZSwgY2IpID0+IHtcbiAgbGV0IHNjcm9sbFRpbWVvdXQ7XG4gIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXQpO1xuICAgIHNjcm9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY2IoKTtcbiAgICAgIGZyYW1lID09IG51bGwgPyB2b2lkIDAgOiBmcmFtZS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGNhbGxiYWNrKTtcbiAgICB9LCA1MCk7XG4gIH07XG4gIGZyYW1lID09IG51bGwgPyB2b2lkIDAgOiBmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGNhbGxiYWNrKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKCFzY3JvbGxUaW1lb3V0KSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfSwgNTApO1xufTtcblxuLy8gY29tcG9uZW50cy9MYXllclRyZWUvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VTaGFsbG93IGFzIHVzZVNoYWxsb3c2IH0gZnJvbSBcInp1c3RhbmQvcmVhY3Qvc2hhbGxvd1wiO1xuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQxMSwganN4IGFzIGpzeDM1LCBqc3hzIGFzIGpzeHMxNSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTI0ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiTGF5ZXJUcmVlXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE5KTtcbnZhciBnZXRDbGFzc05hbWVMYXllciA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIkxheWVyXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE5KTtcbnZhciBMYXllciA9ICh7XG4gIGluZGV4LFxuICBpdGVtSWQsXG4gIHpvbmVDb21wb3VuZFxufSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLmNvbmZpZyk7XG4gIGNvbnN0IGl0ZW1TZWxlY3RvciA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnN0YXRlLnVpLml0ZW1TZWxlY3Rvcik7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuZGlzcGF0Y2gpO1xuICBjb25zdCBzZXRJdGVtU2VsZWN0b3IgPSB1c2VDYWxsYmFjazE0KFxuICAgIChpdGVtU2VsZWN0b3IyKSA9PiB7XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6IFwic2V0VWlcIiwgdWk6IHsgaXRlbVNlbGVjdG9yOiBpdGVtU2VsZWN0b3IyIH0gfSk7XG4gICAgfSxcbiAgICBbZGlzcGF0Y2hdXG4gICk7XG4gIGNvbnN0IHNlbGVjZWRJdGVtSWQgPSB1c2VBcHBTdG9yZSgocykgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgcmV0dXJuIChfYTIgPSBzLnNlbGVjdGVkSXRlbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5wcm9wcy5pZDtcbiAgfSk7XG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSBzZWxlY2VkSXRlbUlkID09PSBpdGVtSWQgfHwgaXRlbVNlbGVjdG9yICYmIGl0ZW1TZWxlY3Rvci56b25lID09PSByb290RHJvcHBhYmxlSWQgJiYgIXpvbmVDb21wb3VuZDtcbiAgY29uc3Qgbm9kZURhdGEgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZS5pbmRleGVzLm5vZGVzW2l0ZW1JZF0pO1xuICBjb25zdCB6b25lc0Zvckl0ZW0gPSB1c2VBcHBTdG9yZShcbiAgICB1c2VTaGFsbG93NihcbiAgICAgIChzKSA9PiBPYmplY3Qua2V5cyhzLnN0YXRlLmluZGV4ZXMuem9uZXMpLmZpbHRlcihcbiAgICAgICAgKHopID0+IHouc3BsaXQoXCI6XCIpWzBdID09PSBpdGVtSWRcbiAgICAgIClcbiAgICApXG4gICk7XG4gIGNvbnN0IGNvbnRhaW5zWm9uZSA9IHpvbmVzRm9ySXRlbS5sZW5ndGggPiAwO1xuICBjb25zdCB6b25lU3RvcmUgPSB1c2VDb250ZXh0MTEoWm9uZVN0b3JlQ29udGV4dCk7XG4gIGNvbnN0IGlzSG92ZXJpbmcgPSB1c2VDb250ZXh0U3RvcmUoXG4gICAgWm9uZVN0b3JlQ29udGV4dCxcbiAgICAocykgPT4gcy5ob3ZlcmluZ0NvbXBvbmVudCA9PT0gaXRlbUlkXG4gICk7XG4gIGNvbnN0IGNoaWxkSXNTZWxlY3RlZCA9IHVzZUFwcFN0b3JlKChzKSA9PiB7XG4gICAgdmFyIF9hMiwgX2I7XG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhID0gcy5zdGF0ZS5pbmRleGVzLm5vZGVzWyhfYTIgPSBzLnNlbGVjdGVkSXRlbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5wcm9wcy5pZF07XG4gICAgcmV0dXJuIChfYiA9IHNlbGVjdGVkRGF0YSA9PSBudWxsID8gdm9pZCAwIDogc2VsZWN0ZWREYXRhLnBhdGguc29tZSgoY2FuZGlkYXRlKSA9PiB7XG4gICAgICBjb25zdCBbY2FuZGlkYXRlSWRdID0gY2FuZGlkYXRlLnNwbGl0KFwiOlwiKTtcbiAgICAgIHJldHVybiBjYW5kaWRhdGVJZCA9PT0gaXRlbUlkO1xuICAgIH0pKSAhPSBudWxsID8gX2IgOiBmYWxzZTtcbiAgfSk7XG4gIGNvbnN0IGNvbXBvbmVudENvbmZpZyA9IGNvbmZpZy5jb21wb25lbnRzW25vZGVEYXRhLmRhdGEudHlwZV07XG4gIGNvbnN0IGxhYmVsID0gKF9hID0gY29tcG9uZW50Q29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBjb21wb25lbnRDb25maWdbXCJsYWJlbFwiXSkgIT0gbnVsbCA/IF9hIDogbm9kZURhdGEuZGF0YS50eXBlLnRvU3RyaW5nKCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czE1KFxuICAgIFwibGlcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZUxheWVyKHtcbiAgICAgICAgaXNTZWxlY3RlZCxcbiAgICAgICAgaXNIb3ZlcmluZyxcbiAgICAgICAgY29udGFpbnNab25lLFxuICAgICAgICBjaGlsZElzU2VsZWN0ZWRcbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDM1KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVMYXllcihcImlubmVyXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHMxNShcbiAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZUxheWVyKFwiY2xpY2thYmxlXCIpLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHNldEl0ZW1TZWxlY3RvcihudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBnZXRGcmFtZSgpO1xuICAgICAgICAgICAgICBjb25zdCBlbCA9IGZyYW1lID09IG51bGwgPyB2b2lkIDAgOiBmcmFtZS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGBbZGF0YS1wdWNrLWNvbXBvbmVudD1cIiR7aXRlbUlkfVwiXWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgICAgIHNldEl0ZW1TZWxlY3Rvcih7XG4gICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgIHpvbmU6IHpvbmVDb21wb3VuZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzY3JvbGxJbnRvVmlldyhlbCk7XG4gICAgICAgICAgICAgIG9uU2Nyb2xsRW5kKGZyYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0SXRlbVNlbGVjdG9yKHtcbiAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgem9uZTogem9uZUNvbXBvdW5kXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uTW91c2VFbnRlcjogKGUpID0+IHtcbiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgem9uZVN0b3JlLnNldFN0YXRlKHsgaG92ZXJpbmdDb21wb25lbnQ6IGl0ZW1JZCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChlKSA9PiB7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgIHpvbmVTdG9yZS5zZXRTdGF0ZSh7IGhvdmVyaW5nQ29tcG9uZW50OiBudWxsIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIGNvbnRhaW5zWm9uZSAmJiAvKiBAX19QVVJFX18gKi8ganN4MzUoXG4gICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZUxheWVyKFwiY2hldnJvblwiKSxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBpc1NlbGVjdGVkID8gXCJDb2xsYXBzZVwiIDogXCJFeHBhbmRcIixcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzUoQ2hldnJvbkRvd24sIHsgc2l6ZTogXCIxMlwiIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czE1KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWVMYXllcihcInRpdGxlXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzNShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTGF5ZXIoXCJpY29uXCIpLCBjaGlsZHJlbjogbm9kZURhdGEuZGF0YS50eXBlID09PSBcIlRleHRcIiB8fCBub2RlRGF0YS5kYXRhLnR5cGUgPT09IFwiSGVhZGluZ1wiID8gLyogQF9fUFVSRV9fICovIGpzeDM1KFR5cGUsIHsgc2l6ZTogXCIxNlwiIH0pIDogLyogQF9fUFVSRV9fICovIGpzeDM1KExheW91dEdyaWQsIHsgc2l6ZTogXCIxNlwiIH0pIH0pLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzNShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTGF5ZXIoXCJuYW1lXCIpLCBjaGlsZHJlbjogbGFiZWwgfSlcbiAgICAgICAgICAgICAgXSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgKSB9KSxcbiAgICAgICAgY29udGFpbnNab25lICYmIHpvbmVzRm9ySXRlbS5tYXAoKHN1YnpvbmUpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gzNShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lTGF5ZXIoXCJ6b25lc1wiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzNShMYXllclRyZWUsIHsgem9uZUNvbXBvdW5kOiBzdWJ6b25lIH0pIH0sIHN1YnpvbmUpKVxuICAgICAgXVxuICAgIH1cbiAgKTtcbn07XG52YXIgTGF5ZXJUcmVlID0gKHtcbiAgbGFiZWw6IF9sYWJlbCxcbiAgem9uZUNvbXBvdW5kXG59KSA9PiB7XG4gIGNvbnN0IGxhYmVsID0gdXNlQXBwU3RvcmUoKHMpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgaWYgKF9sYWJlbCkgcmV0dXJuIF9sYWJlbDtcbiAgICBpZiAoem9uZUNvbXBvdW5kID09PSByb290RHJvcHBhYmxlSWQpIHJldHVybjtcbiAgICBjb25zdCBbY29tcG9uZW50SWQsIHNsb3RJZF0gPSB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpO1xuICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSAoX2EgPSBzLnN0YXRlLmluZGV4ZXMubm9kZXNbY29tcG9uZW50SWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZGF0YS50eXBlO1xuICAgIGNvbnN0IGNvbmZpZ0ZvckNvbXBvbmVudCA9IGNvbXBvbmVudFR5cGUgJiYgY29tcG9uZW50VHlwZSAhPT0gcm9vdEFyZWFJZCA/IHMuY29uZmlnLmNvbXBvbmVudHNbY29tcG9uZW50VHlwZV0gOiBzLmNvbmZpZy5yb290O1xuICAgIHJldHVybiAoX2QgPSAoX2MgPSAoX2IgPSBjb25maWdGb3JDb21wb25lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmZpZ0ZvckNvbXBvbmVudC5maWVsZHMpID09IG51bGwgPyB2b2lkIDAgOiBfYltzbG90SWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2MubGFiZWwpICE9IG51bGwgPyBfZCA6IHNsb3RJZDtcbiAgfSk7XG4gIGNvbnN0IGNvbnRlbnRJZHMgPSB1c2VBcHBTdG9yZShcbiAgICB1c2VTaGFsbG93NihcbiAgICAgIChzKSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiB6b25lQ29tcG91bmQgPyAoX2IgPSAoX2EgPSBzLnN0YXRlLmluZGV4ZXMuem9uZXNbem9uZUNvbXBvdW5kXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNvbnRlbnRJZHMpICE9IG51bGwgPyBfYiA6IFtdIDogW107XG4gICAgICB9XG4gICAgKVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMxNShGcmFnbWVudDExLCB7IGNoaWxkcmVuOiBbXG4gICAgbGFiZWwgJiYgLyogQF9fUFVSRV9fICovIGpzeHMxNShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjQoXCJ6b25lVGl0bGVcIiksIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4MzUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI0KFwiem9uZUljb25cIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzUoTGF5ZXJzLCB7IHNpemU6IFwiMTZcIiB9KSB9KSxcbiAgICAgIGxhYmVsXG4gICAgXSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4czE1KFwidWxcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI0KCksIGNoaWxkcmVuOiBbXG4gICAgICBjb250ZW50SWRzLmxlbmd0aCA9PT0gMCAmJiAvKiBAX19QVVJFX18gKi8ganN4MzUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI0KFwiaGVscGVyXCIpLCBjaGlsZHJlbjogXCJObyBpdGVtc1wiIH0pLFxuICAgICAgY29udGVudElkcy5tYXAoKGl0ZW1JZCwgaSkgPT4ge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDM1KFxuICAgICAgICAgIExheWVyLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgICAgem9uZUNvbXBvdW5kXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpdGVtSWRcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgXSB9KVxuICBdIH0pO1xufTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvT3V0bGluZS9pbmRleC50c3hcbmltcG9ydCB7IHVzZU1lbW8gYXMgdXNlTWVtbzE0IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGxpYi9kYXRhL2ZpbmQtem9uZXMtZm9yLWFyZWEudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgZmluZFpvbmVzRm9yQXJlYSA9IChzdGF0ZSwgYXJlYSkgPT4ge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc3RhdGUuaW5kZXhlcy56b25lcykuZmlsdGVyKFxuICAgICh6b25lKSA9PiB6b25lLnNwbGl0KFwiOlwiKVswXSA9PT0gYXJlYVxuICApO1xufTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvT3V0bGluZS9pbmRleC50c3hcbmltcG9ydCB7IHVzZVNoYWxsb3cgYXMgdXNlU2hhbGxvdzcgfSBmcm9tIFwienVzdGFuZC9yZWFjdC9zaGFsbG93XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4MzYgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBPdXRsaW5lID0gKCkgPT4ge1xuICBjb25zdCBvdXRsaW5lT3ZlcnJpZGUgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5vdmVycmlkZXMub3V0bGluZSk7XG4gIGNvbnN0IHJvb3Rab25lcyA9IHVzZUFwcFN0b3JlKFxuICAgIHVzZVNoYWxsb3c3KChzKSA9PiBmaW5kWm9uZXNGb3JBcmVhKHMuc3RhdGUsIFwicm9vdFwiKSlcbiAgKTtcbiAgY29uc3QgV3JhcHBlciA9IHVzZU1lbW8xNCgoKSA9PiBvdXRsaW5lT3ZlcnJpZGUgfHwgXCJkaXZcIiwgW291dGxpbmVPdmVycmlkZV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDM2KFdyYXBwZXIsIHsgY2hpbGRyZW46IHJvb3Rab25lcy5tYXAoKHpvbmVDb21wb3VuZCkgPT4gLyogQF9fUFVSRV9fICovIGpzeDM2KFxuICAgIExheWVyVHJlZSxcbiAgICB7XG4gICAgICBsYWJlbDogcm9vdFpvbmVzLmxlbmd0aCA9PT0gMSA/IFwiXCIgOiB6b25lQ29tcG91bmQuc3BsaXQoXCI6XCIpWzFdLFxuICAgICAgem9uZUNvbXBvdW5kXG4gICAgfSxcbiAgICB6b25lQ29tcG91bmRcbiAgKSkgfSk7XG59O1xuXG4vLyBjb21wb25lbnRzL1B1Y2svY29tcG9uZW50cy9DYW52YXMvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHtcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2sxNSxcbiAgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDI1LFxuICB1c2VNZW1vIGFzIHVzZU1lbW8xNyxcbiAgdXNlUmVmIGFzIHVzZVJlZjksXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlMjFcbn0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNvbXBvbmVudHMvVmlld3BvcnRDb250cm9scy9pbmRleC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MjQsIHVzZU1lbW8gYXMgdXNlTWVtbzE1LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTIwIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9WaWV3cG9ydENvbnRyb2xzL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0MjAgPSB7IFwiVmlld3BvcnRDb250cm9sc1wiOiBcIl9WaWV3cG9ydENvbnRyb2xzX2dlanpyXzFcIiwgXCJWaWV3cG9ydENvbnRyb2xzLWRpdmlkZXJcIjogXCJfVmlld3BvcnRDb250cm9scy1kaXZpZGVyX2dlanpyXzE1XCIsIFwiVmlld3BvcnRDb250cm9scy16b29tU2VsZWN0XCI6IFwiX1ZpZXdwb3J0Q29udHJvbHMtem9vbVNlbGVjdF9nZWp6cl8yMVwiLCBcIlZpZXdwb3J0QnV0dG9uLS1pc0FjdGl2ZVwiOiBcIl9WaWV3cG9ydEJ1dHRvbi0taXNBY3RpdmVfZ2VqenJfMzhcIiwgXCJWaWV3cG9ydEJ1dHRvbi1pbm5lclwiOiBcIl9WaWV3cG9ydEJ1dHRvbi1pbm5lcl9nZWp6cl8zOFwiIH07XG5cbi8vIGNvbXBvbmVudHMvVmlld3BvcnRDb250cm9scy9pbmRleC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gzNywganN4cyBhcyBqc3hzMTYgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBpY29ucyA9IHtcbiAgU21hcnRwaG9uZTogLyogQF9fUFVSRV9fICovIGpzeDM3KFNtYXJ0cGhvbmUsIHsgc2l6ZTogMTYgfSksXG4gIFRhYmxldDogLyogQF9fUFVSRV9fICovIGpzeDM3KFRhYmxldCwgeyBzaXplOiAxNiB9KSxcbiAgTW9uaXRvcjogLyogQF9fUFVSRV9fICovIGpzeDM3KE1vbml0b3IsIHsgc2l6ZTogMTYgfSlcbn07XG52YXIgZ2V0Q2xhc3NOYW1lMjUgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJWaWV3cG9ydENvbnRyb2xzXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDIwKTtcbnZhciBnZXRDbGFzc05hbWVCdXR0b24gPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJWaWV3cG9ydEJ1dHRvblwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQyMCk7XG52YXIgVmlld3BvcnRCdXR0b24gPSAoe1xuICBjaGlsZHJlbixcbiAgaGVpZ2h0ID0gXCJhdXRvXCIsXG4gIHRpdGxlLFxuICB3aWR0aCxcbiAgb25DbGlja1xufSkgPT4ge1xuICBjb25zdCB2aWV3cG9ydHMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZS51aS52aWV3cG9ydHMpO1xuICBjb25zdCBbaXNBY3RpdmUsIHNldElzQWN0aXZlXSA9IHVzZVN0YXRlMjAoZmFsc2UpO1xuICB1c2VFZmZlY3QyNCgoKSA9PiB7XG4gICAgc2V0SXNBY3RpdmUod2lkdGggPT09IHZpZXdwb3J0cy5jdXJyZW50LndpZHRoKTtcbiAgfSwgW3dpZHRoLCB2aWV3cG9ydHMuY3VycmVudC53aWR0aF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDM3KFwic3BhblwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lQnV0dG9uKHsgaXNBY3RpdmUgfSksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzcoXG4gICAgSWNvbkJ1dHRvbixcbiAgICB7XG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgdGl0bGUsXG4gICAgICBkaXNhYmxlZDogaXNBY3RpdmUsXG4gICAgICBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBvbkNsaWNrKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDM3KFwic3BhblwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lQnV0dG9uKFwiaW5uZXJcIiksIGNoaWxkcmVuIH0pXG4gICAgfVxuICApIH0pO1xufTtcbnZhciBkZWZhdWx0Wm9vbU9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6IFwiMjUlXCIsIHZhbHVlOiAwLjI1IH0sXG4gIHsgbGFiZWw6IFwiNTAlXCIsIHZhbHVlOiAwLjUgfSxcbiAgeyBsYWJlbDogXCI3NSVcIiwgdmFsdWU6IDAuNzUgfSxcbiAgeyBsYWJlbDogXCIxMDAlXCIsIHZhbHVlOiAxIH0sXG4gIHsgbGFiZWw6IFwiMTI1JVwiLCB2YWx1ZTogMS4yNSB9LFxuICB7IGxhYmVsOiBcIjE1MCVcIiwgdmFsdWU6IDEuNSB9LFxuICB7IGxhYmVsOiBcIjIwMCVcIiwgdmFsdWU6IDIgfVxuXTtcbnZhciBWaWV3cG9ydENvbnRyb2xzID0gKHtcbiAgYXV0b1pvb20sXG4gIHpvb20sXG4gIG9uVmlld3BvcnRDaGFuZ2UsXG4gIG9uWm9vbVxufSkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCB2aWV3cG9ydHMgPSB1c2VBcHBTdG9yZSgocykgPT4gcy52aWV3cG9ydHMpO1xuICBjb25zdCBkZWZhdWx0c0NvbnRhaW5BdXRvWm9vbSA9IGRlZmF1bHRab29tT3B0aW9ucy5maW5kKFxuICAgIChvcHRpb24pID0+IG9wdGlvbi52YWx1ZSA9PT0gYXV0b1pvb21cbiAgKTtcbiAgY29uc3Qgem9vbU9wdGlvbnMgPSB1c2VNZW1vMTUoXG4gICAgKCkgPT4gW1xuICAgICAgLi4uZGVmYXVsdFpvb21PcHRpb25zLFxuICAgICAgLi4uZGVmYXVsdHNDb250YWluQXV0b1pvb20gPyBbXSA6IFtcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBhdXRvWm9vbSxcbiAgICAgICAgICBsYWJlbDogYCR7KGF1dG9ab29tICogMTAwKS50b0ZpeGVkKDApfSUgKEF1dG8pYFxuICAgICAgICB9XG4gICAgICBdXG4gICAgXS5maWx0ZXIoKGEpID0+IGEudmFsdWUgPD0gYXV0b1pvb20pLnNvcnQoKGEsIGIpID0+IGEudmFsdWUgPiBiLnZhbHVlID8gMSA6IC0xKSxcbiAgICBbYXV0b1pvb21dXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czE2KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyNSgpLCBjaGlsZHJlbjogW1xuICAgIHZpZXdwb3J0cy5tYXAoKHZpZXdwb3J0LCBpKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MzcoXG4gICAgICBWaWV3cG9ydEJ1dHRvbixcbiAgICAgIHtcbiAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydC5oZWlnaHQsXG4gICAgICAgIHdpZHRoOiB2aWV3cG9ydC53aWR0aCxcbiAgICAgICAgdGl0bGU6IHZpZXdwb3J0LmxhYmVsID8gYFN3aXRjaCB0byAke3ZpZXdwb3J0LmxhYmVsfSB2aWV3cG9ydGAgOiBcIlN3aXRjaCB2aWV3cG9ydFwiLFxuICAgICAgICBvbkNsaWNrOiBvblZpZXdwb3J0Q2hhbmdlLFxuICAgICAgICBjaGlsZHJlbjogdHlwZW9mIHZpZXdwb3J0Lmljb24gPT09IFwic3RyaW5nXCIgPyBpY29uc1t2aWV3cG9ydC5pY29uXSB8fCB2aWV3cG9ydC5pY29uIDogdmlld3BvcnQuaWNvbiB8fCBpY29ucy5TbWFydHBob25lXG4gICAgICB9LFxuICAgICAgaVxuICAgICkpLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjUoXCJkaXZpZGVyXCIpIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhcbiAgICAgIEljb25CdXR0b24sXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIHRpdGxlOiBcIlpvb20gdmlld3BvcnQgb3V0XCIsXG4gICAgICAgIGRpc2FibGVkOiB6b29tIDw9ICgoX2EgPSB6b29tT3B0aW9uc1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlKSxcbiAgICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIG9uWm9vbShcbiAgICAgICAgICAgIHpvb21PcHRpb25zW01hdGgubWF4KFxuICAgICAgICAgICAgICB6b29tT3B0aW9ucy5maW5kSW5kZXgoKG9wdGlvbikgPT4gb3B0aW9uLnZhbHVlID09PSB6b29tKSAtIDEsXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICldLnZhbHVlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhab29tT3V0LCB7IHNpemU6IDE2IH0pXG4gICAgICB9XG4gICAgKSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MzcoXG4gICAgICBJY29uQnV0dG9uLFxuICAgICAge1xuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICB0aXRsZTogXCJab29tIHZpZXdwb3J0IGluXCIsXG4gICAgICAgIGRpc2FibGVkOiB6b29tID49ICgoX2IgPSB6b29tT3B0aW9uc1t6b29tT3B0aW9ucy5sZW5ndGggLSAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnZhbHVlKSxcbiAgICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIG9uWm9vbShcbiAgICAgICAgICAgIHpvb21PcHRpb25zW01hdGgubWluKFxuICAgICAgICAgICAgICB6b29tT3B0aW9ucy5maW5kSW5kZXgoKG9wdGlvbikgPT4gb3B0aW9uLnZhbHVlID09PSB6b29tKSArIDEsXG4gICAgICAgICAgICAgIHpvb21PcHRpb25zLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICldLnZhbHVlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhab29tSW4sIHsgc2l6ZTogMTYgfSlcbiAgICAgIH1cbiAgICApLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjUoXCJkaXZpZGVyXCIpIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhcbiAgICAgIFwic2VsZWN0XCIsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjUoXCJ6b29tU2VsZWN0XCIpLFxuICAgICAgICB2YWx1ZTogem9vbS50b1N0cmluZygpLFxuICAgICAgICBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICAgIG9uWm9vbShwYXJzZUZsb2F0KGUuY3VycmVudFRhcmdldC52YWx1ZSkpO1xuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogem9vbU9wdGlvbnMubWFwKChvcHRpb24pID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gzNyhcbiAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiBvcHRpb24udmFsdWUsXG4gICAgICAgICAgICBsYWJlbDogb3B0aW9uLmxhYmVsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHRpb24ubGFiZWxcbiAgICAgICAgKSlcbiAgICAgIH1cbiAgICApXG4gIF0gfSk7XG59O1xuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL0NhbnZhcy9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDIxID0geyBcIlB1Y2tDYW52YXNcIjogXCJfUHVja0NhbnZhc18xOGpheV8xXCIsIFwiUHVja0NhbnZhcy1jb250cm9sc1wiOiBcIl9QdWNrQ2FudmFzLWNvbnRyb2xzXzE4amF5XzE2XCIsIFwiUHVja0NhbnZhcy1pbm5lclwiOiBcIl9QdWNrQ2FudmFzLWlubmVyXzE4amF5XzIxXCIsIFwiUHVja0NhbnZhcy1yb290XCI6IFwiX1B1Y2tDYW52YXMtcm9vdF8xOGpheV8zMFwiLCBcIlB1Y2tDYW52YXMtLXJlYWR5XCI6IFwiX1B1Y2tDYW52YXMtLXJlYWR5XzE4amF5XzU1XCIsIFwiUHVja0NhbnZhcy1sb2FkZXJcIjogXCJfUHVja0NhbnZhcy1sb2FkZXJfMThqYXlfNjBcIiwgXCJQdWNrQ2FudmFzLS1zaG93TG9hZGVyXCI6IFwiX1B1Y2tDYW52YXMtLXNob3dMb2FkZXJfMThqYXlfNzBcIiB9O1xuXG4vLyBjb21wb25lbnRzL1B1Y2svY29tcG9uZW50cy9DYW52YXMvaW5kZXgudHN4XG5pbXBvcnQgeyB1c2VTaGFsbG93IGFzIHVzZVNoYWxsb3c4IH0gZnJvbSBcInp1c3RhbmQvcmVhY3Qvc2hhbGxvd1wiO1xuXG4vLyBsaWIvZnJhbWUtY29udGV4dC50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQge1xuICBjcmVhdGVDb250ZXh0IGFzIGNyZWF0ZUNvbnRleHQ3LFxuICB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQxMixcbiAgdXNlUmVmIGFzIHVzZVJlZjgsXG4gIHVzZU1lbW8gYXMgdXNlTWVtbzE2XG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDM4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRnJhbWVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDcobnVsbCk7XG52YXIgRnJhbWVQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuXG59KSA9PiB7XG4gIGNvbnN0IGZyYW1lUmVmID0gdXNlUmVmOChudWxsKTtcbiAgY29uc3QgdmFsdWUgPSB1c2VNZW1vMTYoXG4gICAgKCkgPT4gKHtcbiAgICAgIGZyYW1lUmVmXG4gICAgfSksXG4gICAgW11cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzOChGcmFtZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWUsIGNoaWxkcmVuIH0pO1xufTtcbnZhciB1c2VDYW52YXNGcmFtZSA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQxMihGcmFtZUNvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZUNhbnZhc0ZyYW1lIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBGcmFtZVByb3ZpZGVyXCIpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvQ2FudmFzL2luZGV4LnRzeFxuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQxMiwganN4IGFzIGpzeDM5LCBqc3hzIGFzIGpzeHMxNyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTI2ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiUHVja0NhbnZhc1wiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQyMSk7XG52YXIgWk9PTV9PTl9DSEFOR0UgPSB0cnVlO1xudmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTA7XG52YXIgQ2FudmFzID0gKCkgPT4ge1xuICBjb25zdCB7IGZyYW1lUmVmIH0gPSB1c2VDYW52YXNGcmFtZSgpO1xuICBjb25zdCByZXNldEF1dG9ab29tID0gdXNlUmVzZXRBdXRvWm9vbShmcmFtZVJlZik7XG4gIGNvbnN0IHtcbiAgICBkaXNwYXRjaCxcbiAgICBvdmVycmlkZXMsXG4gICAgc2V0VWksXG4gICAgem9vbUNvbmZpZyxcbiAgICBzZXRab29tQ29uZmlnLFxuICAgIHN0YXR1cyxcbiAgICBpZnJhbWVcbiAgfSA9IHVzZUFwcFN0b3JlKFxuICAgIHVzZVNoYWxsb3c4KChzKSA9PiAoe1xuICAgICAgZGlzcGF0Y2g6IHMuZGlzcGF0Y2gsXG4gICAgICBvdmVycmlkZXM6IHMub3ZlcnJpZGVzLFxuICAgICAgc2V0VWk6IHMuc2V0VWksXG4gICAgICB6b29tQ29uZmlnOiBzLnpvb21Db25maWcsXG4gICAgICBzZXRab29tQ29uZmlnOiBzLnNldFpvb21Db25maWcsXG4gICAgICBzdGF0dXM6IHMuc3RhdHVzLFxuICAgICAgaWZyYW1lOiBzLmlmcmFtZVxuICAgIH0pKVxuICApO1xuICBjb25zdCB7XG4gICAgbGVmdFNpZGVCYXJWaXNpYmxlLFxuICAgIHJpZ2h0U2lkZUJhclZpc2libGUsXG4gICAgbGVmdFNpZGVCYXJXaWR0aCxcbiAgICByaWdodFNpZGVCYXJXaWR0aCxcbiAgICB2aWV3cG9ydHNcbiAgfSA9IHVzZUFwcFN0b3JlKFxuICAgIHVzZVNoYWxsb3c4KChzKSA9PiAoe1xuICAgICAgbGVmdFNpZGVCYXJWaXNpYmxlOiBzLnN0YXRlLnVpLmxlZnRTaWRlQmFyVmlzaWJsZSxcbiAgICAgIHJpZ2h0U2lkZUJhclZpc2libGU6IHMuc3RhdGUudWkucmlnaHRTaWRlQmFyVmlzaWJsZSxcbiAgICAgIGxlZnRTaWRlQmFyV2lkdGg6IHMuc3RhdGUudWkubGVmdFNpZGVCYXJXaWR0aCxcbiAgICAgIHJpZ2h0U2lkZUJhcldpZHRoOiBzLnN0YXRlLnVpLnJpZ2h0U2lkZUJhcldpZHRoLFxuICAgICAgdmlld3BvcnRzOiBzLnN0YXRlLnVpLnZpZXdwb3J0c1xuICAgIH0pKVxuICApO1xuICBjb25zdCBbc2hvd1RyYW5zaXRpb24sIHNldFNob3dUcmFuc2l0aW9uXSA9IHVzZVN0YXRlMjEoZmFsc2UpO1xuICBjb25zdCBpc1Jlc2l6aW5nUmVmID0gdXNlUmVmOShmYWxzZSk7XG4gIGNvbnN0IGRlZmF1bHRSZW5kZXIgPSB1c2VNZW1vMTcoKCkgPT4ge1xuICAgIGNvbnN0IFB1Y2tEZWZhdWx0ID0gKHsgY2hpbGRyZW4gfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeDM5KEZyYWdtZW50MTIsIHsgY2hpbGRyZW4gfSk7XG4gICAgcmV0dXJuIFB1Y2tEZWZhdWx0O1xuICB9LCBbXSk7XG4gIGNvbnN0IEN1c3RvbVByZXZpZXcgPSB1c2VNZW1vMTcoXG4gICAgKCkgPT4gb3ZlcnJpZGVzLnByZXZpZXcgfHwgZGVmYXVsdFJlbmRlcixcbiAgICBbb3ZlcnJpZGVzXVxuICApO1xuICBjb25zdCBnZXRGcmFtZURpbWVuc2lvbnMgPSB1c2VDYWxsYmFjazE1KCgpID0+IHtcbiAgICBpZiAoZnJhbWVSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgZnJhbWUgPSBmcmFtZVJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgYm94ID0gZ2V0Qm94KGZyYW1lKTtcbiAgICAgIHJldHVybiB7IHdpZHRoOiBib3guY29udGVudEJveC53aWR0aCwgaGVpZ2h0OiBib3guY29udGVudEJveC5oZWlnaHQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICB9LCBbZnJhbWVSZWZdKTtcbiAgdXNlRWZmZWN0MjUoKCkgPT4ge1xuICAgIHJlc2V0QXV0b1pvb20oKTtcbiAgfSwgW1xuICAgIGZyYW1lUmVmLFxuICAgIGxlZnRTaWRlQmFyVmlzaWJsZSxcbiAgICByaWdodFNpZGVCYXJWaXNpYmxlLFxuICAgIGxlZnRTaWRlQmFyV2lkdGgsXG4gICAgcmlnaHRTaWRlQmFyV2lkdGgsXG4gICAgdmlld3BvcnRzXG4gIF0pO1xuICB1c2VFZmZlY3QyNSgoKSA9PiB7XG4gICAgY29uc3QgeyBoZWlnaHQ6IGZyYW1lSGVpZ2h0IH0gPSBnZXRGcmFtZURpbWVuc2lvbnMoKTtcbiAgICBpZiAodmlld3BvcnRzLmN1cnJlbnQuaGVpZ2h0ID09PSBcImF1dG9cIikge1xuICAgICAgc2V0Wm9vbUNvbmZpZyhfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB6b29tQ29uZmlnKSwge1xuICAgICAgICByb290SGVpZ2h0OiBmcmFtZUhlaWdodCAvIHpvb21Db25maWcuem9vbVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW3pvb21Db25maWcuem9vbSwgZ2V0RnJhbWVEaW1lbnNpb25zLCBzZXRab29tQ29uZmlnXSk7XG4gIHVzZUVmZmVjdDI1KCgpID0+IHtcbiAgICBpZiAoWk9PTV9PTl9DSEFOR0UpIHtcbiAgICAgIHJlc2V0QXV0b1pvb20oKTtcbiAgICB9XG4gIH0sIFt2aWV3cG9ydHMuY3VycmVudC53aWR0aCwgdmlld3BvcnRzXSk7XG4gIHVzZUVmZmVjdDI1KCgpID0+IHtcbiAgICBpZiAoIWZyYW1lUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICBpZiAoIWlzUmVzaXppbmdSZWYuY3VycmVudCkge1xuICAgICAgICByZXNldEF1dG9ab29tKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShmcmFtZVJlZi5jdXJyZW50KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtmcmFtZVJlZi5jdXJyZW50XSk7XG4gIGNvbnN0IFtzaG93TG9hZGVyLCBzZXRTaG93TG9hZGVyXSA9IHVzZVN0YXRlMjEoZmFsc2UpO1xuICB1c2VFZmZlY3QyNSgoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRTaG93TG9hZGVyKHRydWUpO1xuICAgIH0sIDUwMCk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTcoXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI2KHtcbiAgICAgICAgcmVhZHk6IHN0YXR1cyA9PT0gXCJSRUFEWVwiIHx8ICFpZnJhbWUuZW5hYmxlZCB8fCAhaWZyYW1lLndhaXRGb3JTdHlsZXMsXG4gICAgICAgIHNob3dMb2FkZXJcbiAgICAgIH0pLFxuICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBlLnRhcmdldDtcbiAgICAgICAgaWYgKCFlbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stY29tcG9uZW50XCIpICYmICFlbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXB1Y2stZHJvcHpvbmVcIikpIHtcbiAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBcInNldFVpXCIsXG4gICAgICAgICAgICB1aTogeyBpdGVtU2VsZWN0b3I6IG51bGwgfSxcbiAgICAgICAgICAgIHJlY29yZEhpc3Rvcnk6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHZpZXdwb3J0cy5jb250cm9sc1Zpc2libGUgJiYgaWZyYW1lLmVuYWJsZWQgJiYgLyogQF9fUFVSRV9fICovIGpzeDM5KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyNihcImNvbnRyb2xzXCIpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDM5KFxuICAgICAgICAgIFZpZXdwb3J0Q29udHJvbHMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXV0b1pvb206IHpvb21Db25maWcuYXV0b1pvb20sXG4gICAgICAgICAgICB6b29tOiB6b29tQ29uZmlnLnpvb20sXG4gICAgICAgICAgICBvblZpZXdwb3J0Q2hhbmdlOiAodmlld3BvcnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0U2hvd1RyYW5zaXRpb24odHJ1ZSk7XG4gICAgICAgICAgICAgIGlzUmVzaXppbmdSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICAgIGNvbnN0IHVpVmlld3BvcnQgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB2aWV3cG9ydCksIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHZpZXdwb3J0LmhlaWdodCB8fCBcImF1dG9cIixcbiAgICAgICAgICAgICAgICB6b29tOiB6b29tQ29uZmlnLnpvb21cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1VpID0ge1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0czogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgdmlld3BvcnRzKSwgeyBjdXJyZW50OiB1aVZpZXdwb3J0IH0pXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHNldFVpKG5ld1VpKTtcbiAgICAgICAgICAgICAgaWYgKFpPT01fT05fQ0hBTkdFKSB7XG4gICAgICAgICAgICAgICAgcmVzZXRBdXRvWm9vbSh7XG4gICAgICAgICAgICAgICAgICB2aWV3cG9ydHM6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHZpZXdwb3J0cyksIHsgY3VycmVudDogdWlWaWV3cG9ydCB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25ab29tOiAoem9vbSkgPT4ge1xuICAgICAgICAgICAgICBzZXRTaG93VHJhbnNpdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgaXNSZXNpemluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2V0Wm9vbUNvbmZpZyhfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB6b29tQ29uZmlnKSwgeyB6b29tIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTcoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI2KFwiaW5uZXJcIiksIHJlZjogZnJhbWVSZWYsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDM5KFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyNihcInJvb3RcIiksXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGlmcmFtZS5lbmFibGVkID8gdmlld3BvcnRzLmN1cnJlbnQud2lkdGggOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHpvb21Db25maWcucm9vdEhlaWdodCxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGlmcmFtZS5lbmFibGVkID8gYHNjYWxlKCR7em9vbUNvbmZpZy56b29tfSlgIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHNob3dUcmFuc2l0aW9uID8gYHdpZHRoICR7VFJBTlNJVElPTl9EVVJBVElPTn1tcyBlYXNlLW91dCwgaGVpZ2h0ICR7VFJBTlNJVElPTl9EVVJBVElPTn1tcyBlYXNlLW91dCwgdHJhbnNmb3JtICR7VFJBTlNJVElPTl9EVVJBVElPTn1tcyBlYXNlLW91dGAgOiBcIlwiLFxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBpZnJhbWUuZW5hYmxlZCA/IHZvaWQgMCA6IFwiYXV0b1wiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHN1cHByZXNzSHlkcmF0aW9uV2FybmluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgaWQ6IFwicHVjay1jYW52YXMtcm9vdFwiLFxuICAgICAgICAgICAgICBvblRyYW5zaXRpb25FbmQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTaG93VHJhbnNpdGlvbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNSZXNpemluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzkoQ3VzdG9tUHJldmlldywgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDM5KFByZXZpZXcyLCB7fSkgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzOShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjYoXCJsb2FkZXJcIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzkoTG9hZGVyLCB7IHNpemU6IDI0IH0pIH0pXG4gICAgICAgIF0gfSlcbiAgICAgIF1cbiAgICB9XG4gICk7XG59O1xuXG4vLyBsaWIvdXNlLWxvYWRlZC1vdmVycmlkZXMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VNZW1vIGFzIHVzZU1lbW8xOCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBsaWIvbG9hZC1vdmVycmlkZXMudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgbG9hZE92ZXJyaWRlcyA9ICh7XG4gIG92ZXJyaWRlcyxcbiAgcGx1Z2luc1xufSkgPT4ge1xuICBjb25zdCBjb2xsZWN0ZWQgPSBfX3NwcmVhZFZhbHVlcyh7fSwgb3ZlcnJpZGVzKTtcbiAgcGx1Z2lucyA9PSBudWxsID8gdm9pZCAwIDogcGx1Z2lucy5mb3JFYWNoKChwbHVnaW4pID0+IHtcbiAgICBpZiAoIXBsdWdpbi5vdmVycmlkZXMpIHJldHVybjtcbiAgICBPYmplY3Qua2V5cyhwbHVnaW4ub3ZlcnJpZGVzKS5mb3JFYWNoKChfb3ZlcnJpZGVzVHlwZSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3Qgb3ZlcnJpZGVzVHlwZSA9IF9vdmVycmlkZXNUeXBlO1xuICAgICAgaWYgKCEoKF9hID0gcGx1Z2luLm92ZXJyaWRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hW292ZXJyaWRlc1R5cGVdKSkgcmV0dXJuO1xuICAgICAgaWYgKG92ZXJyaWRlc1R5cGUgPT09IFwiZmllbGRUeXBlc1wiKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZXMgPSBwbHVnaW4ub3ZlcnJpZGVzLmZpZWxkVHlwZXM7XG4gICAgICAgIE9iamVjdC5rZXlzKGZpZWxkVHlwZXMpLmZvckVhY2goKGZpZWxkVHlwZSkgPT4ge1xuICAgICAgICAgIGNvbGxlY3RlZC5maWVsZFR5cGVzID0gY29sbGVjdGVkLmZpZWxkVHlwZXMgfHwge307XG4gICAgICAgICAgY29uc3QgY2hpbGROb2RlMiA9IGNvbGxlY3RlZC5maWVsZFR5cGVzW2ZpZWxkVHlwZV07XG4gICAgICAgICAgY29uc3QgQ29tcDIgPSAocHJvcHMpID0+IGZpZWxkVHlwZXNbZmllbGRUeXBlXShfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZE5vZGUyID8gY2hpbGROb2RlMihwcm9wcykgOiBwcm9wcy5jaGlsZHJlblxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBjb2xsZWN0ZWQuZmllbGRUeXBlc1tmaWVsZFR5cGVdID0gQ29tcDI7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjaGlsZE5vZGUgPSBjb2xsZWN0ZWRbb3ZlcnJpZGVzVHlwZV07XG4gICAgICBjb25zdCBDb21wID0gKHByb3BzKSA9PiBwbHVnaW4ub3ZlcnJpZGVzW292ZXJyaWRlc1R5cGVdKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSwge1xuICAgICAgICBjaGlsZHJlbjogY2hpbGROb2RlID8gY2hpbGROb2RlKHByb3BzKSA6IHByb3BzLmNoaWxkcmVuXG4gICAgICB9KSk7XG4gICAgICBjb2xsZWN0ZWRbb3ZlcnJpZGVzVHlwZV0gPSBDb21wO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGNvbGxlY3RlZDtcbn07XG5cbi8vIGxpYi91c2UtbG9hZGVkLW92ZXJyaWRlcy50c1xudmFyIHVzZUxvYWRlZE92ZXJyaWRlcyA9ICh7XG4gIG92ZXJyaWRlcyxcbiAgcGx1Z2luc1xufSkgPT4ge1xuICByZXR1cm4gdXNlTWVtbzE4KCgpID0+IHtcbiAgICByZXR1cm4gbG9hZE92ZXJyaWRlcyh7IG92ZXJyaWRlcywgcGx1Z2lucyB9KTtcbiAgfSwgW3BsdWdpbnMsIG92ZXJyaWRlc10pO1xufTtcblxuLy8gY29tcG9uZW50cy9EZWZhdWx0T3ZlcnJpZGUvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQxMywganN4IGFzIGpzeDQwIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgRGVmYXVsdE92ZXJyaWRlID0gKHsgY2hpbGRyZW4gfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeDQwKEZyYWdtZW50MTMsIHsgY2hpbGRyZW4gfSk7XG5cbi8vIGxpYi91c2UtaW5qZWN0LWNzcy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyNiwgdXNlU3RhdGUgYXMgdXNlU3RhdGUyMiB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHN0eWxlcyA9IGBgO1xudmFyIHVzZUluamVjdFN0eWxlU2hlZXQgPSAoaW5pdGlhbFN0eWxlcywgaWZyYW1lRW5hYmxlZCkgPT4ge1xuICBjb25zdCBbZWwsIHNldEVsXSA9IHVzZVN0YXRlMjIoKTtcbiAgdXNlRWZmZWN0MjYoKCkgPT4ge1xuICAgIHNldEVsKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0MjYoKCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWVsIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwuaW5uZXJIVE1MID0gaW5pdGlhbFN0eWxlcztcbiAgICBpZiAoaWZyYW1lRW5hYmxlZCkge1xuICAgICAgY29uc3QgZnJhbWUgPSBnZXRGcmFtZSgpO1xuICAgICAgKF9hID0gZnJhbWUgPT0gbnVsbCA/IHZvaWQgMCA6IGZyYW1lLmhlYWQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5hcHBlbmRDaGlsZChlbCk7XG4gICAgfVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9LCBbaWZyYW1lRW5hYmxlZCwgZWxdKTtcbiAgcmV0dXJuIGVsO1xufTtcbnZhciB1c2VJbmplY3RHbG9iYWxDc3MgPSAoaWZyYW1lRW5hYmxlZCkgPT4ge1xuICByZXR1cm4gdXNlSW5qZWN0U3R5bGVTaGVldChzdHlsZXMsIGlmcmFtZUVuYWJsZWQpO1xufTtcblxuLy8gbGliL3VzZS1wcmV2aWV3LW1vZGUtaG90a2V5cy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTYgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VQcmV2aWV3TW9kZUhvdGtleXMgPSAoKSA9PiB7XG4gIGNvbnN0IGFwcFN0b3JlID0gdXNlQXBwU3RvcmVBcGkoKTtcbiAgY29uc3QgdG9nZ2xlSW50ZXJhY3RpdmUgPSB1c2VDYWxsYmFjazE2KCgpID0+IHtcbiAgICBjb25zdCBkaXNwYXRjaCA9IGFwcFN0b3JlLmdldFN0YXRlKCkuZGlzcGF0Y2g7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJzZXRVaVwiLFxuICAgICAgdWk6ICh1aSkgPT4gKHtcbiAgICAgICAgcHJldmlld01vZGU6IHVpLnByZXZpZXdNb2RlID09PSBcImVkaXRcIiA/IFwiaW50ZXJhY3RpdmVcIiA6IFwiZWRpdFwiXG4gICAgICB9KVxuICAgIH0pO1xuICB9LCBbYXBwU3RvcmVdKTtcbiAgdXNlSG90a2V5KHsgbWV0YTogdHJ1ZSwgaTogdHJ1ZSB9LCB0b2dnbGVJbnRlcmFjdGl2ZSk7XG4gIHVzZUhvdGtleSh7IGN0cmw6IHRydWUsIGk6IHRydWUgfSwgdG9nZ2xlSW50ZXJhY3RpdmUpO1xufTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2luZGV4LnRzeFxuaW1wb3J0IGZkZXEgZnJvbSBcImZhc3QtZGVlcC1lcXVhbFwiO1xuXG4vLyBjb21wb25lbnRzL1B1Y2svY29tcG9uZW50cy9IZWFkZXIvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgbWVtbyBhcyBtZW1vNCwgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2sxNywgdXNlTWVtbyBhcyB1c2VNZW1vMTksIHVzZVN0YXRlIGFzIHVzZVN0YXRlMjMgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gY29tcG9uZW50cy9NZW51QmFyL2luZGV4LnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gY3NzLW1vZHVsZTovaG9tZS9ydW5uZXIvd29yay9wdWNrL3B1Y2svcGFja2FnZXMvY29yZS9jb21wb25lbnRzL01lbnVCYXIvc3R5bGVzLm1vZHVsZS5jc3MjY3NzLW1vZHVsZVxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcbnZhciBzdHlsZXNfbW9kdWxlX2RlZmF1bHQyMiA9IHsgXCJNZW51QmFyXCI6IFwiX01lbnVCYXJfOHBmOGNfMVwiLCBcIk1lbnVCYXItLW1lbnVPcGVuXCI6IFwiX01lbnVCYXItLW1lbnVPcGVuXzhwZjhjXzE0XCIsIFwiTWVudUJhci1pbm5lclwiOiBcIl9NZW51QmFyLWlubmVyXzhwZjhjXzI5XCIsIFwiTWVudUJhci1oaXN0b3J5XCI6IFwiX01lbnVCYXItaGlzdG9yeV84cGY4Y180NVwiIH07XG5cbi8vIGNvbXBvbmVudHMvTWVudUJhci9pbmRleC50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50MTQsIGpzeCBhcyBqc3g0MSwganN4cyBhcyBqc3hzMTggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUyNyA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIk1lbnVCYXJcIiwgc3R5bGVzX21vZHVsZV9kZWZhdWx0MjIpO1xuZnVuY3Rpb24gTWVudUJhcih7XG4gIG1lbnVPcGVuID0gZmFsc2UsXG4gIHJlbmRlckhlYWRlckFjdGlvbnMsXG4gIHNldE1lbnVPcGVuXG59KSB7XG4gIGNvbnN0IGJhY2sgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5oaXN0b3J5LmJhY2spO1xuICBjb25zdCBmb3J3YXJkID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuaGlzdG9yeS5mb3J3YXJkKTtcbiAgY29uc3QgaGFzRnV0dXJlID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuaGlzdG9yeS5oYXNGdXR1cmUoKSk7XG4gIGNvbnN0IGhhc1Bhc3QgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5oaXN0b3J5Lmhhc1Bhc3QoKSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NDEoXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI3KHsgbWVudU9wZW4gfSksXG4gICAgICBvbkNsaWNrOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA2MzhweClcIikubWF0Y2hlcykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSBcIkFcIiAmJiAoKF9hID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RhcnRzV2l0aChcIiNcIikpKSB7XG4gICAgICAgICAgc2V0TWVudU9wZW4oZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzMTgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI3KFwiaW5uZXJcIiksIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI3KFwiaGlzdG9yeVwiKSwgY2hpbGRyZW46IFtcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4NDEoXG4gICAgICAgICAgICBJY29uQnV0dG9uLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICB0aXRsZTogXCJ1bmRvXCIsXG4gICAgICAgICAgICAgIGRpc2FibGVkOiAhaGFzUGFzdCxcbiAgICAgICAgICAgICAgb25DbGljazogYmFjayxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0MShVbmRvMiwgeyBzaXplOiAyMSB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDQxKFxuICAgICAgICAgICAgSWNvbkJ1dHRvbixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgdGl0bGU6IFwicmVkb1wiLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogIWhhc0Z1dHVyZSxcbiAgICAgICAgICAgICAgb25DbGljazogZm9yd2FyZCxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0MShSZWRvMiwgeyBzaXplOiAyMSB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgXSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDQxKEZyYWdtZW50MTQsIHsgY2hpbGRyZW46IHJlbmRlckhlYWRlckFjdGlvbnMgJiYgcmVuZGVySGVhZGVyQWN0aW9ucygpIH0pXG4gICAgICBdIH0pXG4gICAgfVxuICApO1xufVxuXG4vLyBjc3MtbW9kdWxlOi9ob21lL3J1bm5lci93b3JrL3B1Y2svcHVjay9wYWNrYWdlcy9jb3JlL2NvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL0hlYWRlci9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDIzID0geyBcIlB1Y2tIZWFkZXJcIjogXCJfUHVja0hlYWRlcl8xNXhucV8xXCIsIFwiUHVja0hlYWRlci1pbm5lclwiOiBcIl9QdWNrSGVhZGVyLWlubmVyXzE1eG5xXzEwXCIsIFwiUHVja0hlYWRlci10b2dnbGVcIjogXCJfUHVja0hlYWRlci10b2dnbGVfMTV4bnFfMjBcIiwgXCJQdWNrSGVhZGVyLS1yaWdodFNpZGVCYXJWaXNpYmxlXCI6IFwiX1B1Y2tIZWFkZXItLXJpZ2h0U2lkZUJhclZpc2libGVfMTV4bnFfMjdcIiwgXCJQdWNrSGVhZGVyLXJpZ2h0U2lkZUJhclRvZ2dsZVwiOiBcIl9QdWNrSGVhZGVyLXJpZ2h0U2lkZUJhclRvZ2dsZV8xNXhucV8yN1wiLCBcIlB1Y2tIZWFkZXItLWxlZnRTaWRlQmFyVmlzaWJsZVwiOiBcIl9QdWNrSGVhZGVyLS1sZWZ0U2lkZUJhclZpc2libGVfMTV4bnFfMjhcIiwgXCJQdWNrSGVhZGVyLWxlZnRTaWRlQmFyVG9nZ2xlXCI6IFwiX1B1Y2tIZWFkZXItbGVmdFNpZGVCYXJUb2dnbGVfMTV4bnFfMjhcIiwgXCJQdWNrSGVhZGVyLXRpdGxlXCI6IFwiX1B1Y2tIZWFkZXItdGl0bGVfMTV4bnFfMzJcIiwgXCJQdWNrSGVhZGVyLXBhdGhcIjogXCJfUHVja0hlYWRlci1wYXRoXzE1eG5xXzM2XCIsIFwiUHVja0hlYWRlci10b29sc1wiOiBcIl9QdWNrSGVhZGVyLXRvb2xzXzE1eG5xXzQzXCIsIFwiUHVja0hlYWRlci1tZW51QnV0dG9uXCI6IFwiX1B1Y2tIZWFkZXItbWVudUJ1dHRvbl8xNXhucV80OVwiLCBcIlB1Y2tIZWFkZXItLW1lbnVPcGVuXCI6IFwiX1B1Y2tIZWFkZXItLW1lbnVPcGVuXzE1eG5xXzU0XCIgfTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvSGVhZGVyL2luZGV4LnRzeFxuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQxNSwganN4IGFzIGpzeDQyLCBqc3hzIGFzIGpzeHMxOSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTI4ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiUHVja0hlYWRlclwiLCBzdHlsZXNfbW9kdWxlX2RlZmF1bHQyMyk7XG52YXIgSGVhZGVySW5uZXIgPSAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvblB1Ymxpc2gsXG4gICAgcmVuZGVySGVhZGVyLFxuICAgIHJlbmRlckhlYWRlckFjdGlvbnMsXG4gICAgaGVhZGVyVGl0bGUsXG4gICAgaGVhZGVyUGF0aCxcbiAgICBpZnJhbWU6IF9pZnJhbWVcbiAgfSA9IHVzZVByb3BzQ29udGV4dCgpO1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLmRpc3BhdGNoKTtcbiAgY29uc3QgYXBwU3RvcmUgPSB1c2VBcHBTdG9yZUFwaSgpO1xuICBjb25zdCBkZWZhdWx0SGVhZGVyUmVuZGVyID0gdXNlTWVtbzE5KCgpID0+IHtcbiAgICBpZiAocmVuZGVySGVhZGVyKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiYHJlbmRlckhlYWRlcmAgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBgb3ZlcnJpZGVzLmhlYWRlcmAgYW5kIHRoZSBgdXNlUHVja2AgaG9vayBpbnN0ZWFkXCJcbiAgICAgICk7XG4gICAgICBjb25zdCBSZW5kZXJIZWFkZXIgPSAoX2EpID0+IHtcbiAgICAgICAgdmFyIF9iID0gX2EsIHsgYWN0aW9ucyB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJhY3Rpb25zXCJdKTtcbiAgICAgICAgY29uc3QgQ29tcCA9IHJlbmRlckhlYWRlcjtcbiAgICAgICAgY29uc3QgYXBwU3RhdGUgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZSk7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NDIoQ29tcCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpLCB7IGRpc3BhdGNoLCBzdGF0ZTogYXBwU3RhdGUsIGNoaWxkcmVuOiBhY3Rpb25zIH0pKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gUmVuZGVySGVhZGVyO1xuICAgIH1cbiAgICByZXR1cm4gRGVmYXVsdE92ZXJyaWRlO1xuICB9LCBbcmVuZGVySGVhZGVyXSk7XG4gIGNvbnN0IGRlZmF1bHRIZWFkZXJBY3Rpb25zUmVuZGVyID0gdXNlTWVtbzE5KCgpID0+IHtcbiAgICBpZiAocmVuZGVySGVhZGVyQWN0aW9ucykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcImByZW5kZXJIZWFkZXJBY3Rpb25zYCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGBvdmVycmlkZXMuaGVhZGVyQWN0aW9uc2AgYW5kIHRoZSBgdXNlUHVja2AgaG9vayBpbnN0ZWFkLlwiXG4gICAgICApO1xuICAgICAgY29uc3QgUmVuZGVySGVhZGVyID0gKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IENvbXAgPSByZW5kZXJIZWFkZXJBY3Rpb25zO1xuICAgICAgICBjb25zdCBhcHBTdGF0ZSA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnN0YXRlKTtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g0MihDb21wLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHsgZGlzcGF0Y2gsIHN0YXRlOiBhcHBTdGF0ZSB9KSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFJlbmRlckhlYWRlcjtcbiAgICB9XG4gICAgcmV0dXJuIERlZmF1bHRPdmVycmlkZTtcbiAgfSwgW3JlbmRlckhlYWRlckFjdGlvbnNdKTtcbiAgY29uc3QgQ3VzdG9tSGVhZGVyID0gdXNlQXBwU3RvcmUoXG4gICAgKHMpID0+IHMub3ZlcnJpZGVzLmhlYWRlciB8fCBkZWZhdWx0SGVhZGVyUmVuZGVyXG4gICk7XG4gIGNvbnN0IEN1c3RvbUhlYWRlckFjdGlvbnMgPSB1c2VBcHBTdG9yZShcbiAgICAocykgPT4gcy5vdmVycmlkZXMuaGVhZGVyQWN0aW9ucyB8fCBkZWZhdWx0SGVhZGVyQWN0aW9uc1JlbmRlclxuICApO1xuICBjb25zdCBbbWVudU9wZW4sIHNldE1lbnVPcGVuXSA9IHVzZVN0YXRlMjMoZmFsc2UpO1xuICBjb25zdCByb290VGl0bGUgPSB1c2VBcHBTdG9yZSgocykgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3Qgcm9vdERhdGEgPSAoX2EgPSBzLnN0YXRlLmluZGV4ZXMubm9kZXNbXCJyb290XCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZGF0YTtcbiAgICByZXR1cm4gKF9iID0gcm9vdERhdGEucHJvcHMudGl0bGUpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gIH0pO1xuICBjb25zdCBsZWZ0U2lkZUJhclZpc2libGUgPSB1c2VBcHBTdG9yZSgocykgPT4gcy5zdGF0ZS51aS5sZWZ0U2lkZUJhclZpc2libGUpO1xuICBjb25zdCByaWdodFNpZGVCYXJWaXNpYmxlID0gdXNlQXBwU3RvcmUoXG4gICAgKHMpID0+IHMuc3RhdGUudWkucmlnaHRTaWRlQmFyVmlzaWJsZVxuICApO1xuICBjb25zdCB0b2dnbGVTaWRlYmFycyA9IHVzZUNhbGxiYWNrMTcoXG4gICAgKHNpZGViYXIpID0+IHtcbiAgICAgIGNvbnN0IHdpZGVyVmlld3BvcnQgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDYzOHB4KVwiKS5tYXRjaGVzO1xuICAgICAgY29uc3Qgc2lkZUJhclZpc2libGUgPSBzaWRlYmFyID09PSBcImxlZnRcIiA/IGxlZnRTaWRlQmFyVmlzaWJsZSA6IHJpZ2h0U2lkZUJhclZpc2libGU7XG4gICAgICBjb25zdCBvcHBvc2l0ZVNpZGVCYXIgPSBzaWRlYmFyID09PSBcImxlZnRcIiA/IFwicmlnaHRTaWRlQmFyVmlzaWJsZVwiIDogXCJsZWZ0U2lkZUJhclZpc2libGVcIjtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJzZXRVaVwiLFxuICAgICAgICB1aTogX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgIFtgJHtzaWRlYmFyfVNpZGVCYXJWaXNpYmxlYF06ICFzaWRlQmFyVmlzaWJsZVxuICAgICAgICB9LCAhd2lkZXJWaWV3cG9ydCA/IHsgW29wcG9zaXRlU2lkZUJhcl06IGZhbHNlIH0gOiB7fSlcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2Rpc3BhdGNoLCBsZWZ0U2lkZUJhclZpc2libGUsIHJpZ2h0U2lkZUJhclZpc2libGVdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NDIoXG4gICAgQ3VzdG9tSGVhZGVyLFxuICAgIHtcbiAgICAgIGFjdGlvbnM6IC8qIEBfX1BVUkVfXyAqLyBqc3g0MihGcmFnbWVudDE1LCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NDIoQ3VzdG9tSGVhZGVyQWN0aW9ucywgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQyKFxuICAgICAgICBCdXR0b24sXG4gICAgICAgIHtcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZS5kYXRhO1xuICAgICAgICAgICAgb25QdWJsaXNoICYmIG9uUHVibGlzaChkYXRhKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGljb246IC8qIEBfX1BVUkVfXyAqLyBqc3g0MihHbG9iZSwgeyBzaXplOiBcIjE0cHhcIiB9KSxcbiAgICAgICAgICBjaGlsZHJlbjogXCJQdWJsaXNoXCJcbiAgICAgICAgfVxuICAgICAgKSB9KSB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NDIoXG4gICAgICAgIFwiaGVhZGVyXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGdldENsYXNzTmFtZTI4KHsgbGVmdFNpZGVCYXJWaXNpYmxlLCByaWdodFNpZGVCYXJWaXNpYmxlIH0pLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czE5KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyOChcImlubmVyXCIpLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMxOShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjgoXCJ0b2dnbGVcIiksIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0MihcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjgoXCJsZWZ0U2lkZUJhclRvZ2dsZVwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0MihcbiAgICAgICAgICAgICAgICBJY29uQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNpZGViYXJzKFwibGVmdFwiKTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aXRsZTogXCJUb2dnbGUgbGVmdCBzaWRlYmFyXCIsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQyKFBhbmVsTGVmdCwgeyBmb2N1c2FibGU6IFwiZmFsc2VcIiB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKSB9KSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDQyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyOChcInJpZ2h0U2lkZUJhclRvZ2dsZVwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0MihcbiAgICAgICAgICAgICAgICBJY29uQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNpZGViYXJzKFwicmlnaHRcIik7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVG9nZ2xlIHJpZ2h0IHNpZGViYXJcIixcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NDIoUGFuZWxSaWdodCwgeyBmb2N1c2FibGU6IFwiZmFsc2VcIiB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKSB9KVxuICAgICAgICAgICAgXSB9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0MihcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjgoXCJ0aXRsZVwiKSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzMTkoSGVhZGluZywgeyByYW5rOiBcIjJcIiwgc2l6ZTogXCJ4c1wiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBoZWFkZXJUaXRsZSB8fCByb290VGl0bGUgfHwgXCJQYWdlXCIsXG4gICAgICAgICAgICAgIGhlYWRlclBhdGggJiYgLyogQF9fUFVSRV9fICovIGpzeHMxOShGcmFnbWVudDE1LCB7IGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDQyKFwiY29kZVwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjgoXCJwYXRoXCIpLCBjaGlsZHJlbjogaGVhZGVyUGF0aCB9KVxuICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICBdIH0pIH0pLFxuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMxOShcImRpdlwiLCB7IGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjgoXCJ0b29sc1wiKSwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDQyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUyOChcIm1lbnVCdXR0b25cIiksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NDIoXG4gICAgICAgICAgICAgICAgSWNvbkJ1dHRvbixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0TWVudU9wZW4oIW1lbnVPcGVuKTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aXRsZTogXCJUb2dnbGUgbWVudSBiYXJcIixcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBtZW51T3BlbiA/IC8qIEBfX1BVUkVfXyAqLyBqc3g0MihDaGV2cm9uVXAsIHsgZm9jdXNhYmxlOiBcImZhbHNlXCIgfSkgOiAvKiBAX19QVVJFX18gKi8ganN4NDIoQ2hldnJvbkRvd24sIHsgZm9jdXNhYmxlOiBcImZhbHNlXCIgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICkgfSksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0MihcbiAgICAgICAgICAgICAgICBNZW51QmFyLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoLFxuICAgICAgICAgICAgICAgICAgb25QdWJsaXNoLFxuICAgICAgICAgICAgICAgICAgbWVudU9wZW4sXG4gICAgICAgICAgICAgICAgICByZW5kZXJIZWFkZXJBY3Rpb25zOiAoKSA9PiAvKiBAX19QVVJFX18gKi8ganN4NDIoQ3VzdG9tSGVhZGVyQWN0aW9ucywgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQyKFxuICAgICAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXBwU3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25QdWJsaXNoICYmIG9uUHVibGlzaChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGljb246IC8qIEBfX1BVUkVfXyAqLyBqc3g0MihHbG9iZSwgeyBzaXplOiBcIjE0cHhcIiB9KSxcbiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJQdWJsaXNoXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKSB9KSxcbiAgICAgICAgICAgICAgICAgIHNldE1lbnVPcGVuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICBdIH0pXG4gICAgICAgICAgXSB9KVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufTtcbnZhciBIZWFkZXIgPSBtZW1vNChIZWFkZXJJbm5lcik7XG5cbi8vIGNvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL1NpZGViYXIvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyBjb21wb25lbnRzL1B1Y2svY29tcG9uZW50cy9SZXNpemVIYW5kbGUvaW5kZXgudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2sxOCwgdXNlUmVmIGFzIHVzZVJlZjEwIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvUmVzaXplSGFuZGxlL3N0eWxlcy5tb2R1bGUuY3NzI2Nzcy1tb2R1bGVcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG52YXIgc3R5bGVzX21vZHVsZV9kZWZhdWx0MjQgPSB7IFwiUmVzaXplSGFuZGxlXCI6IFwiX1Jlc2l6ZUhhbmRsZV8xNDRiZl8yXCIsIFwiUmVzaXplSGFuZGxlLS1sZWZ0XCI6IFwiX1Jlc2l6ZUhhbmRsZS0tbGVmdF8xNDRiZl8xNlwiLCBcIlJlc2l6ZUhhbmRsZS0tcmlnaHRcIjogXCJfUmVzaXplSGFuZGxlLS1yaWdodF8xNDRiZl8yMFwiIH07XG5cbi8vIGNvbXBvbmVudHMvUHVjay9jb21wb25lbnRzL1Jlc2l6ZUhhbmRsZS9pbmRleC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g0MyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGdldENsYXNzTmFtZTI5ID0gZ2V0X2NsYXNzX25hbWVfZmFjdG9yeV9kZWZhdWx0KFwiUmVzaXplSGFuZGxlXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDI0KTtcbnZhciBSZXNpemVIYW5kbGUgPSAoe1xuICBwb3NpdGlvbixcbiAgc2lkZWJhclJlZixcbiAgb25SZXNpemUsXG4gIG9uUmVzaXplRW5kXG59KSA9PiB7XG4gIGNvbnN0IHsgZnJhbWVSZWYgfSA9IHVzZUNhbnZhc0ZyYW1lKCk7XG4gIGNvbnN0IHJlc2V0QXV0b1pvb20gPSB1c2VSZXNldEF1dG9ab29tKGZyYW1lUmVmKTtcbiAgY29uc3QgaGFuZGxlUmVmID0gdXNlUmVmMTAobnVsbCk7XG4gIGNvbnN0IGlzRHJhZ2dpbmcgPSB1c2VSZWYxMChmYWxzZSk7XG4gIGNvbnN0IHN0YXJ0WCA9IHVzZVJlZjEwKDApO1xuICBjb25zdCBzdGFydFdpZHRoID0gdXNlUmVmMTAoMCk7XG4gIGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IHVzZUNhbGxiYWNrMTgoXG4gICAgKGUpID0+IHtcbiAgICAgIGlmICghaXNEcmFnZ2luZy5jdXJyZW50KSByZXR1cm47XG4gICAgICBjb25zdCBkZWx0YSA9IGUuY2xpZW50WCAtIHN0YXJ0WC5jdXJyZW50O1xuICAgICAgY29uc3QgbmV3V2lkdGggPSBwb3NpdGlvbiA9PT0gXCJsZWZ0XCIgPyBzdGFydFdpZHRoLmN1cnJlbnQgKyBkZWx0YSA6IHN0YXJ0V2lkdGguY3VycmVudCAtIGRlbHRhO1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCgxOTIsIG5ld1dpZHRoKTtcbiAgICAgIG9uUmVzaXplKHdpZHRoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIFtvblJlc2l6ZSwgcG9zaXRpb25dXG4gICk7XG4gIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSB1c2VDYWxsYmFjazE4KCgpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCFpc0RyYWdnaW5nLmN1cnJlbnQpIHJldHVybjtcbiAgICBpc0RyYWdnaW5nLmN1cnJlbnQgPSBmYWxzZTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiXCI7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS51c2VyU2VsZWN0ID0gXCJcIjtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXNpemUtb3ZlcmxheVwiKTtcbiAgICBpZiAob3ZlcmxheSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTtcbiAgICB9XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xuICAgIGNvbnN0IGZpbmFsV2lkdGggPSAoKF9hID0gc2lkZWJhclJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpIHx8IDA7XG4gICAgb25SZXNpemVFbmQoZmluYWxXaWR0aCk7XG4gICAgcmVzZXRBdXRvWm9vbSgpO1xuICB9LCBbb25SZXNpemVFbmRdKTtcbiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gdXNlQ2FsbGJhY2sxOChcbiAgICAoZSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgaXNEcmFnZ2luZy5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIHN0YXJ0WC5jdXJyZW50ID0gZS5jbGllbnRYO1xuICAgICAgc3RhcnRXaWR0aC5jdXJyZW50ID0gKChfYSA9IHNpZGViYXJSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKSB8fCAwO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImNvbC1yZXNpemVcIjtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9IFwibm9uZVwiO1xuICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBvdmVybGF5LmlkID0gXCJyZXNpemUtb3ZlcmxheVwiO1xuICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJlc2l6ZS1vdmVybGF5XCIsIFwiXCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgW3Bvc2l0aW9uLCBoYW5kbGVNb3VzZU1vdmUsIGhhbmRsZU1vdXNlVXBdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NDMoXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICByZWY6IGhhbmRsZVJlZixcbiAgICAgIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMjkoeyBbcG9zaXRpb25dOiB0cnVlIH0pLFxuICAgICAgb25Nb3VzZURvd246IGhhbmRsZU1vdXNlRG93blxuICAgIH1cbiAgKTtcbn07XG5cbi8vIGNzcy1tb2R1bGU6L2hvbWUvcnVubmVyL3dvcmsvcHVjay9wdWNrL3BhY2thZ2VzL2NvcmUvY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvU2lkZWJhci9zdHlsZXMubW9kdWxlLmNzcyNjc3MtbW9kdWxlXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xudmFyIHN0eWxlc19tb2R1bGVfZGVmYXVsdDI1ID0geyBcIlNpZGViYXJcIjogXCJfU2lkZWJhcl8xeGtzYl8xXCIsIFwiU2lkZWJhci0tbGVmdFwiOiBcIl9TaWRlYmFyLS1sZWZ0XzF4a3NiXzhcIiwgXCJTaWRlYmFyLS1yaWdodFwiOiBcIl9TaWRlYmFyLS1yaWdodF8xeGtzYl8xNFwiLCBcIlNpZGViYXItcmVzaXplSGFuZGxlXCI6IFwiX1NpZGViYXItcmVzaXplSGFuZGxlXzF4a3NiXzIwXCIgfTtcblxuLy8gY29tcG9uZW50cy9QdWNrL2NvbXBvbmVudHMvU2lkZWJhci9pbmRleC50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50MTYsIGpzeCBhcyBqc3g0NCwganN4cyBhcyBqc3hzMjAgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBnZXRDbGFzc05hbWUzMCA9IGdldF9jbGFzc19uYW1lX2ZhY3RvcnlfZGVmYXVsdChcIlNpZGViYXJcIiwgc3R5bGVzX21vZHVsZV9kZWZhdWx0MjUpO1xudmFyIFNpZGViYXIgPSAoe1xuICBwb3NpdGlvbixcbiAgc2lkZWJhclJlZixcbiAgaXNWaXNpYmxlLFxuICBvblJlc2l6ZSxcbiAgb25SZXNpemVFbmQsXG4gIGNoaWxkcmVuXG59KSA9PiB7XG4gIGlmICghaXNWaXNpYmxlKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMjAoRnJhZ21lbnQxNiwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0NChcImRpdlwiLCB7IHJlZjogc2lkZWJhclJlZiwgY2xhc3NOYW1lOiBnZXRDbGFzc05hbWUzMCh7IFtwb3NpdGlvbl06IHRydWUgfSksIGNoaWxkcmVuIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0NChcImRpdlwiLCB7IGNsYXNzTmFtZTogYCR7Z2V0Q2xhc3NOYW1lMzAoXCJyZXNpemVIYW5kbGVcIil9YCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0NChcbiAgICAgIFJlc2l6ZUhhbmRsZSxcbiAgICAgIHtcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIHNpZGViYXJSZWYsXG4gICAgICAgIG9uUmVzaXplLFxuICAgICAgICBvblJlc2l6ZUVuZFxuICAgICAgfVxuICAgICkgfSlcbiAgXSB9KTtcbn07XG5cbi8vIGxpYi91c2Utc2lkZWJhci1yZXNpemUudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazE5LCB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MjgsIHVzZVJlZiBhcyB1c2VSZWYxMSwgdXNlU3RhdGUgYXMgdXNlU3RhdGUyNCB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU2lkZWJhclJlc2l6ZShwb3NpdGlvbiwgZGlzcGF0Y2gpIHtcbiAgY29uc3QgW3dpZHRoLCBzZXRXaWR0aF0gPSB1c2VTdGF0ZTI0KG51bGwpO1xuICBjb25zdCBzaWRlYmFyUmVmID0gdXNlUmVmMTEobnVsbCk7XG4gIGNvbnN0IHN0b3JlV2lkdGggPSB1c2VBcHBTdG9yZShcbiAgICAocykgPT4gcG9zaXRpb24gPT09IFwibGVmdFwiID8gcy5zdGF0ZS51aS5sZWZ0U2lkZUJhcldpZHRoIDogcy5zdGF0ZS51aS5yaWdodFNpZGVCYXJXaWR0aFxuICApO1xuICB1c2VFZmZlY3QyOCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgIXN0b3JlV2lkdGgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNhdmVkV2lkdGhzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwdWNrLXNpZGViYXItd2lkdGhzXCIpO1xuICAgICAgICBpZiAoc2F2ZWRXaWR0aHMpIHtcbiAgICAgICAgICBjb25zdCB3aWR0aHMgPSBKU09OLnBhcnNlKHNhdmVkV2lkdGhzKTtcbiAgICAgICAgICBjb25zdCBzYXZlZFdpZHRoID0gd2lkdGhzW3Bvc2l0aW9uXTtcbiAgICAgICAgICBjb25zdCBrZXkgPSBwb3NpdGlvbiA9PT0gXCJsZWZ0XCIgPyBcImxlZnRTaWRlQmFyV2lkdGhcIiA6IFwicmlnaHRTaWRlQmFyV2lkdGhcIjtcbiAgICAgICAgICBpZiAoc2F2ZWRXaWR0aCkge1xuICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInNldFVpXCIsXG4gICAgICAgICAgICAgIHVpOiB7XG4gICAgICAgICAgICAgICAgW2tleV06IHNhdmVkV2lkdGhcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBGYWlsZWQgdG8gbG9hZCAke3Bvc2l0aW9ufSBzaWRlYmFyIHdpZHRoIGZyb20gbG9jYWxTdG9yYWdlYCxcbiAgICAgICAgICBlcnJvclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2Rpc3BhdGNoLCBwb3NpdGlvbiwgc3RvcmVXaWR0aF0pO1xuICB1c2VFZmZlY3QyOCgoKSA9PiB7XG4gICAgaWYgKHN0b3JlV2lkdGggIT09IHZvaWQgMCkge1xuICAgICAgc2V0V2lkdGgoc3RvcmVXaWR0aCk7XG4gICAgfVxuICB9LCBbc3RvcmVXaWR0aF0pO1xuICBjb25zdCBoYW5kbGVSZXNpemVFbmQgPSB1c2VDYWxsYmFjazE5KFxuICAgICh3aWR0aDIpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJzZXRVaVwiLFxuICAgICAgICB1aToge1xuICAgICAgICAgIFtwb3NpdGlvbiA9PT0gXCJsZWZ0XCIgPyBcImxlZnRTaWRlQmFyV2lkdGhcIiA6IFwicmlnaHRTaWRlQmFyV2lkdGhcIl06IHdpZHRoMlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxldCB3aWR0aHMgPSB7fTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNhdmVkV2lkdGhzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwdWNrLXNpZGViYXItd2lkdGhzXCIpO1xuICAgICAgICB3aWR0aHMgPSBzYXZlZFdpZHRocyA/IEpTT04ucGFyc2Uoc2F2ZWRXaWR0aHMpIDoge307XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBGYWlsZWQgdG8gc2F2ZSAke3Bvc2l0aW9ufSBzaWRlYmFyIHdpZHRoIHRvIGxvY2FsU3RvcmFnZWAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgIFwicHVjay1zaWRlYmFyLXdpZHRoc1wiLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHdpZHRocyksIHtcbiAgICAgICAgICAgIFtwb3NpdGlvbl06IHdpZHRoMlxuICAgICAgICAgIH0pKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDdXN0b21FdmVudChcInZpZXdwb3J0Y2hhbmdlXCIsIHtcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0sXG4gICAgW2Rpc3BhdGNoLCBwb3NpdGlvbl1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aCxcbiAgICBzZXRXaWR0aCxcbiAgICBzaWRlYmFyUmVmLFxuICAgIGhhbmRsZVJlc2l6ZUVuZFxuICB9O1xufVxuXG4vLyBjb21wb25lbnRzL1B1Y2svaW5kZXgudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4NDUsIGpzeHMgYXMganN4czIxIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZ2V0Q2xhc3NOYW1lMzEgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJQdWNrXCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE1KTtcbnZhciBnZXRMYXlvdXRDbGFzc05hbWUgPSBnZXRfY2xhc3NfbmFtZV9mYWN0b3J5X2RlZmF1bHQoXCJQdWNrTGF5b3V0XCIsIHN0eWxlc19tb2R1bGVfZGVmYXVsdDE1KTtcbnZhciBGaWVsZFNpZGVCYXIgPSAoKSA9PiB7XG4gIGNvbnN0IHRpdGxlID0gdXNlQXBwU3RvcmUoXG4gICAgKHMpID0+IHtcbiAgICAgIHZhciBfYSwgX2I7XG4gICAgICByZXR1cm4gcy5zZWxlY3RlZEl0ZW0gPyAoX2IgPSAoX2EgPSBzLmNvbmZpZy5jb21wb25lbnRzW3Muc2VsZWN0ZWRJdGVtLnR5cGVdKSA9PSBudWxsID8gdm9pZCAwIDogX2FbXCJsYWJlbFwiXSkgIT0gbnVsbCA/IF9iIDogcy5zZWxlY3RlZEl0ZW0udHlwZS50b1N0cmluZygpIDogXCJQYWdlXCI7XG4gICAgfVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDQ1KFNpZGViYXJTZWN0aW9uLCB7IG5vUGFkZGluZzogdHJ1ZSwgbm9Cb3JkZXJUb3A6IHRydWUsIHNob3dCcmVhZGNydW1iczogdHJ1ZSwgdGl0bGUsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NDUoRmllbGRzLCB7fSkgfSk7XG59O1xudmFyIHByb3BzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ4KHt9KTtcbmZ1bmN0aW9uIFByb3BzUHJvdmlkZXIocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g0NShwcm9wc0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHByb3BzLCBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4gfSk7XG59XG52YXIgdXNlUHJvcHNDb250ZXh0ID0gKCkgPT4gdXNlQ29udGV4dDEzKHByb3BzQ29udGV4dCk7XG5mdW5jdGlvbiBQdWNrUHJvdmlkZXIoeyBjaGlsZHJlbiB9KSB7XG4gIGNvbnN0IHtcbiAgICBjb25maWcsXG4gICAgZGF0YTogaW5pdGlhbERhdGEsXG4gICAgdWk6IGluaXRpYWxVaSxcbiAgICBvbkNoYW5nZSxcbiAgICBwZXJtaXNzaW9ucyA9IHt9LFxuICAgIHBsdWdpbnMsXG4gICAgb3ZlcnJpZGVzLFxuICAgIHZpZXdwb3J0cyA9IGRlZmF1bHRWaWV3cG9ydHMsXG4gICAgaWZyYW1lOiBfaWZyYW1lLFxuICAgIGluaXRpYWxIaXN0b3J5OiBfaW5pdGlhbEhpc3RvcnksXG4gICAgbWV0YWRhdGEsXG4gICAgb25BY3Rpb24sXG4gICAgZmllbGRUcmFuc2Zvcm1zXG4gIH0gPSB1c2VQcm9wc0NvbnRleHQoKTtcbiAgY29uc3QgaWZyYW1lID0gdXNlTWVtbzIwKFxuICAgICgpID0+IF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB3YWl0Rm9yU3R5bGVzOiB0cnVlXG4gICAgfSwgX2lmcmFtZSksXG4gICAgW19pZnJhbWVdXG4gICk7XG4gIGNvbnN0IFtnZW5lcmF0ZWRBcHBTdGF0ZV0gPSB1c2VTdGF0ZTI1KCgpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaTtcbiAgICBjb25zdCBpbml0aWFsID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGRlZmF1bHRBcHBTdGF0ZS51aSksIGluaXRpYWxVaSk7XG4gICAgbGV0IGNsaWVudFVpU3RhdGUgPSB7fTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNjM4cHgpXCIpLm1hdGNoZXMpIHtcbiAgICAgICAgY2xpZW50VWlTdGF0ZSA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGNsaWVudFVpU3RhdGUpLCB7XG4gICAgICAgICAgbGVmdFNpZGVCYXJWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICByaWdodFNpZGVCYXJWaXNpYmxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IHZpZXdwb3J0RGlmZmVyZW5jZXMgPSBPYmplY3QuZW50cmllcyh2aWV3cG9ydHMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xuICAgICAgICBrZXksXG4gICAgICAgIGRpZmY6IE1hdGguYWJzKHZpZXdwb3J0V2lkdGggLSB2YWx1ZS53aWR0aClcbiAgICAgIH0pKS5zb3J0KChhLCBiKSA9PiBhLmRpZmYgPiBiLmRpZmYgPyAxIDogLTEpO1xuICAgICAgY29uc3QgY2xvc2VzdFZpZXdwb3J0ID0gdmlld3BvcnREaWZmZXJlbmNlc1swXS5rZXk7XG4gICAgICBpZiAoaWZyYW1lLmVuYWJsZWQpIHtcbiAgICAgICAgY2xpZW50VWlTdGF0ZSA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGNsaWVudFVpU3RhdGUpLCB7XG4gICAgICAgICAgdmlld3BvcnRzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBpbml0aWFsLnZpZXdwb3J0cyksIHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGluaXRpYWwudmlld3BvcnRzLmN1cnJlbnQpLCB7XG4gICAgICAgICAgICAgIGhlaWdodDogKChfYiA9IChfYSA9IGluaXRpYWxVaSA9PSBudWxsID8gdm9pZCAwIDogaW5pdGlhbFVpLnZpZXdwb3J0cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5oZWlnaHQpIHx8ICgoX2MgPSB2aWV3cG9ydHNbY2xvc2VzdFZpZXdwb3J0XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmhlaWdodCkgfHwgXCJhdXRvXCIsXG4gICAgICAgICAgICAgIHdpZHRoOiAoKF9lID0gKF9kID0gaW5pdGlhbFVpID09IG51bGwgPyB2b2lkIDAgOiBpbml0aWFsVWkudmlld3BvcnRzKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLndpZHRoKSB8fCAoKF9mID0gdmlld3BvcnRzW2Nsb3Nlc3RWaWV3cG9ydF0pID09IG51bGwgPyB2b2lkIDAgOiBfZi53aWR0aClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cygoaW5pdGlhbERhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXRpYWxEYXRhLnJvb3QpIHx8IHt9KS5sZW5ndGggPiAwICYmICEoKF9nID0gaW5pdGlhbERhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXRpYWxEYXRhLnJvb3QpID09IG51bGwgPyB2b2lkIDAgOiBfZy5wcm9wcykpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJXYXJuaW5nOiBEZWZpbmluZyBwcm9wcyBvbiBgcm9vdGAgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBgcm9vdC5wcm9wc2AsIG9yIHJlcHVibGlzaCB0aGlzIHBhZ2UgdG8gbWlncmF0ZSBhdXRvbWF0aWNhbGx5LlwiXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCByb290UHJvcHMgPSAoKF9oID0gaW5pdGlhbERhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXRpYWxEYXRhLnJvb3QpID09IG51bGwgPyB2b2lkIDAgOiBfaC5wcm9wcykgfHwgKGluaXRpYWxEYXRhID09IG51bGwgPyB2b2lkIDAgOiBpbml0aWFsRGF0YS5yb290KSB8fCB7fTtcbiAgICBjb25zdCBkZWZhdWx0ZWRSb290UHJvcHMgPSBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgKF9pID0gY29uZmlnLnJvb3QpID09IG51bGwgPyB2b2lkIDAgOiBfaS5kZWZhdWx0UHJvcHMpLCByb290UHJvcHMpO1xuICAgIGNvbnN0IG5ld0FwcFN0YXRlID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdEFwcFN0YXRlKSwge1xuICAgICAgZGF0YTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgaW5pdGlhbERhdGEpLCB7XG4gICAgICAgIHJvb3Q6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGluaXRpYWxEYXRhID09IG51bGwgPyB2b2lkIDAgOiBpbml0aWFsRGF0YS5yb290KSwgeyBwcm9wczogZGVmYXVsdGVkUm9vdFByb3BzIH0pLFxuICAgICAgICBjb250ZW50OiBpbml0aWFsRGF0YS5jb250ZW50IHx8IFtdXG4gICAgICB9KSxcbiAgICAgIHVpOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBpbml0aWFsKSwgY2xpZW50VWlTdGF0ZSksIHtcbiAgICAgICAgLy8gU3RvcmUgY2F0ZWdvcmllcyB1bmRlciBjb21wb25lbnRMaXN0IG9uIHN0YXRlIHRvIGFsbG93IHJlbmRlciBmdW5jdGlvbnMgYW5kIHBsdWdpbnMgdG8gbW9kaWZ5XG4gICAgICAgIGNvbXBvbmVudExpc3Q6IGNvbmZpZy5jYXRlZ29yaWVzID8gT2JqZWN0LmVudHJpZXMoY29uZmlnLmNhdGVnb3JpZXMpLnJlZHVjZShcbiAgICAgICAgICAoYWNjLCBbY2F0ZWdvcnlOYW1lLCBjYXRlZ29yeV0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhY2MpLCB7XG4gICAgICAgICAgICAgIFtjYXRlZ29yeU5hbWVdOiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGNhdGVnb3J5LnRpdGxlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IGNhdGVnb3J5LmNvbXBvbmVudHMsXG4gICAgICAgICAgICAgICAgZXhwYW5kZWQ6IGNhdGVnb3J5LmRlZmF1bHRFeHBhbmRlZCxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBjYXRlZ29yeS52aXNpYmxlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAge31cbiAgICAgICAgKSA6IHt9XG4gICAgICB9KVxuICAgIH0pO1xuICAgIHJldHVybiB3YWxrQXBwU3RhdGUobmV3QXBwU3RhdGUsIGNvbmZpZyk7XG4gIH0pO1xuICBjb25zdCB7IGFwcGVuZERhdGEgPSB0cnVlIH0gPSBfaW5pdGlhbEhpc3RvcnkgfHwge307XG4gIGNvbnN0IFtibGVuZGVkSGlzdG9yaWVzXSA9IHVzZVN0YXRlMjUoXG4gICAgW1xuICAgICAgLi4uKF9pbml0aWFsSGlzdG9yeSA9PSBudWxsID8gdm9pZCAwIDogX2luaXRpYWxIaXN0b3J5Lmhpc3RvcmllcykgfHwgW10sXG4gICAgICAuLi5hcHBlbmREYXRhID8gW3sgc3RhdGU6IGdlbmVyYXRlZEFwcFN0YXRlIH1dIDogW11cbiAgICBdLm1hcCgoaGlzdG9yeSkgPT4ge1xuICAgICAgbGV0IG5ld1N0YXRlID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIGdlbmVyYXRlZEFwcFN0YXRlKSwgaGlzdG9yeS5zdGF0ZSk7XG4gICAgICBpZiAoIWhpc3Rvcnkuc3RhdGUuaW5kZXhlcykge1xuICAgICAgICBuZXdTdGF0ZSA9IHdhbGtBcHBTdGF0ZShuZXdTdGF0ZSwgY29uZmlnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBoaXN0b3J5KSwge1xuICAgICAgICBzdGF0ZTogbmV3U3RhdGVcbiAgICAgIH0pO1xuICAgIH0pXG4gICk7XG4gIGNvbnN0IGluaXRpYWxIaXN0b3J5SW5kZXggPSAoX2luaXRpYWxIaXN0b3J5ID09IG51bGwgPyB2b2lkIDAgOiBfaW5pdGlhbEhpc3RvcnkuaW5kZXgpIHx8IGJsZW5kZWRIaXN0b3JpZXMubGVuZ3RoIC0gMTtcbiAgY29uc3QgaW5pdGlhbEFwcFN0YXRlID0gYmxlbmRlZEhpc3Rvcmllc1tpbml0aWFsSGlzdG9yeUluZGV4XS5zdGF0ZTtcbiAgY29uc3QgbG9hZGVkT3ZlcnJpZGVzID0gdXNlTG9hZGVkT3ZlcnJpZGVzKHtcbiAgICBvdmVycmlkZXMsXG4gICAgcGx1Z2luc1xuICB9KTtcbiAgY29uc3QgbG9hZGVkRmllbGRUcmFuc2Zvcm1zID0gdXNlTWVtbzIwKCgpID0+IHtcbiAgICBjb25zdCBfcGx1Z2lucyA9IHBsdWdpbnMgfHwgW107XG4gICAgY29uc3QgcGx1Z2luRmllbGRUcmFuc2Zvcm1zID0gX3BsdWdpbnMucmVkdWNlKFxuICAgICAgKGFjYywgcGx1Z2luKSA9PiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgYWNjKSwgcGx1Z2luLmZpZWxkVHJhbnNmb3JtcyksXG4gICAgICB7fVxuICAgICk7XG4gICAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBwbHVnaW5GaWVsZFRyYW5zZm9ybXMpLCBmaWVsZFRyYW5zZm9ybXMpO1xuICB9LCBbZmllbGRUcmFuc2Zvcm1zLCBwbHVnaW5zXSk7XG4gIGNvbnN0IGdlbmVyYXRlQXBwU3RvcmUgPSB1c2VDYWxsYmFjazIwKFxuICAgIChzdGF0ZSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcGx1Z2luczogcGx1Z2lucyB8fCBbXSxcbiAgICAgICAgb3ZlcnJpZGVzOiBsb2FkZWRPdmVycmlkZXMsXG4gICAgICAgIHZpZXdwb3J0cyxcbiAgICAgICAgaWZyYW1lLFxuICAgICAgICBvbkFjdGlvbixcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIGZpZWxkVHJhbnNmb3JtczogbG9hZGVkRmllbGRUcmFuc2Zvcm1zXG4gICAgICB9O1xuICAgIH0sXG4gICAgW1xuICAgICAgaW5pdGlhbEFwcFN0YXRlLFxuICAgICAgY29uZmlnLFxuICAgICAgcGx1Z2lucyxcbiAgICAgIGxvYWRlZE92ZXJyaWRlcyxcbiAgICAgIHZpZXdwb3J0cyxcbiAgICAgIGlmcmFtZSxcbiAgICAgIG9uQWN0aW9uLFxuICAgICAgbWV0YWRhdGEsXG4gICAgICBsb2FkZWRGaWVsZFRyYW5zZm9ybXNcbiAgICBdXG4gICk7XG4gIGNvbnN0IFthcHBTdG9yZV0gPSB1c2VTdGF0ZTI1KFxuICAgICgpID0+IGNyZWF0ZUFwcFN0b3JlKGdlbmVyYXRlQXBwU3RvcmUoaW5pdGlhbEFwcFN0YXRlKSlcbiAgKTtcbiAgdXNlRWZmZWN0MjkoKCkgPT4ge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIHdpbmRvdy5fX1BVQ0tfSU5URVJOQUxfRE9fTk9UX1VTRSA9IHsgYXBwU3RvcmUgfTtcbiAgICB9XG4gIH0sIFthcHBTdG9yZV0pO1xuICB1c2VFZmZlY3QyOSgoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBhcHBTdG9yZS5nZXRTdGF0ZSgpLnN0YXRlO1xuICAgIGFwcFN0b3JlLnNldFN0YXRlKF9fc3ByZWFkVmFsdWVzKHt9LCBnZW5lcmF0ZUFwcFN0b3JlKHN0YXRlKSkpO1xuICB9LCBbY29uZmlnLCBwbHVnaW5zLCBsb2FkZWRPdmVycmlkZXMsIHZpZXdwb3J0cywgaWZyYW1lLCBvbkFjdGlvbiwgbWV0YWRhdGFdKTtcbiAgdXNlUmVnaXN0ZXJIaXN0b3J5U2xpY2UoYXBwU3RvcmUsIHtcbiAgICBoaXN0b3JpZXM6IGJsZW5kZWRIaXN0b3JpZXMsXG4gICAgaW5kZXg6IGluaXRpYWxIaXN0b3J5SW5kZXgsXG4gICAgaW5pdGlhbEFwcFN0YXRlXG4gIH0pO1xuICBjb25zdCBwcmV2aW91c0RhdGEgPSB1c2VSZWYxMihudWxsKTtcbiAgdXNlRWZmZWN0MjkoKCkgPT4ge1xuICAgIGFwcFN0b3JlLnN1YnNjcmliZShcbiAgICAgIChzKSA9PiBzLnN0YXRlLmRhdGEsXG4gICAgICAoZGF0YSkgPT4ge1xuICAgICAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgICAgICBpZiAoZmRlcShkYXRhLCBwcmV2aW91c0RhdGEuY3VycmVudCkpIHJldHVybjtcbiAgICAgICAgICBvbkNoYW5nZShkYXRhKTtcbiAgICAgICAgICBwcmV2aW91c0RhdGEuY3VycmVudCA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9LCBbXSk7XG4gIHVzZVJlZ2lzdGVyUGVybWlzc2lvbnNTbGljZShhcHBTdG9yZSwgcGVybWlzc2lvbnMpO1xuICBjb25zdCB1UHVja1N0b3JlID0gdXNlUmVnaXN0ZXJVc2VQdWNrU3RvcmUoYXBwU3RvcmUpO1xuICB1c2VFZmZlY3QyOSgoKSA9PiB7XG4gICAgY29uc3QgeyByZXNvbHZlQW5kQ29tbWl0RGF0YSB9ID0gYXBwU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICByZXNvbHZlQW5kQ29tbWl0RGF0YSgpO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NDUoYXBwU3RvcmVDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBhcHBTdG9yZSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0NShVc2VQdWNrU3RvcmVDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB1UHVja1N0b3JlLCBjaGlsZHJlbiB9KSB9KTtcbn1cbmZ1bmN0aW9uIFB1Y2tMYXlvdXQoeyBjaGlsZHJlbiB9KSB7XG4gIGNvbnN0IHtcbiAgICBpZnJhbWU6IF9pZnJhbWUsXG4gICAgZG5kLFxuICAgIGluaXRpYWxIaXN0b3J5OiBfaW5pdGlhbEhpc3RvcnlcbiAgfSA9IHVzZVByb3BzQ29udGV4dCgpO1xuICBjb25zdCBpZnJhbWUgPSB1c2VNZW1vMjAoXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHdhaXRGb3JTdHlsZXM6IHRydWVcbiAgICB9LCBfaWZyYW1lKSxcbiAgICBbX2lmcmFtZV1cbiAgKTtcbiAgdXNlSW5qZWN0R2xvYmFsQ3NzKGlmcmFtZS5lbmFibGVkKTtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBTdG9yZSgocykgPT4gcy5kaXNwYXRjaCk7XG4gIGNvbnN0IGxlZnRTaWRlQmFyVmlzaWJsZSA9IHVzZUFwcFN0b3JlKChzKSA9PiBzLnN0YXRlLnVpLmxlZnRTaWRlQmFyVmlzaWJsZSk7XG4gIGNvbnN0IHJpZ2h0U2lkZUJhclZpc2libGUgPSB1c2VBcHBTdG9yZShcbiAgICAocykgPT4gcy5zdGF0ZS51aS5yaWdodFNpZGVCYXJWaXNpYmxlXG4gICk7XG4gIGNvbnN0IHtcbiAgICB3aWR0aDogbGVmdFdpZHRoLFxuICAgIHNldFdpZHRoOiBzZXRMZWZ0V2lkdGgsXG4gICAgc2lkZWJhclJlZjogbGVmdFNpZGViYXJSZWYsXG4gICAgaGFuZGxlUmVzaXplRW5kOiBoYW5kbGVMZWZ0U2lkZWJhclJlc2l6ZUVuZFxuICB9ID0gdXNlU2lkZWJhclJlc2l6ZShcImxlZnRcIiwgZGlzcGF0Y2gpO1xuICBjb25zdCB7XG4gICAgd2lkdGg6IHJpZ2h0V2lkdGgsXG4gICAgc2V0V2lkdGg6IHNldFJpZ2h0V2lkdGgsXG4gICAgc2lkZWJhclJlZjogcmlnaHRTaWRlYmFyUmVmLFxuICAgIGhhbmRsZVJlc2l6ZUVuZDogaGFuZGxlUmlnaHRTaWRlYmFyUmVzaXplRW5kXG4gIH0gPSB1c2VTaWRlYmFyUmVzaXplKFwicmlnaHRcIiwgZGlzcGF0Y2gpO1xuICB1c2VFZmZlY3QyOSgoKSA9PiB7XG4gICAgaWYgKCF3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDYzOHB4KVwiKS5tYXRjaGVzKSB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwic2V0VWlcIixcbiAgICAgICAgdWk6IHtcbiAgICAgICAgICBsZWZ0U2lkZUJhclZpc2libGU6IGZhbHNlLFxuICAgICAgICAgIHJpZ2h0U2lkZUJhclZpc2libGU6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XG4gICAgICBpZiAoIXdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogNjM4cHgpXCIpLm1hdGNoZXMpIHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwic2V0VWlcIixcbiAgICAgICAgICB1aTogKHVpKSA9PiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgdWkpLCB1aS5yaWdodFNpZGVCYXJWaXNpYmxlID8geyBsZWZ0U2lkZUJhclZpc2libGU6IGZhbHNlIH0gOiB7fSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgY29uc3Qgb3ZlcnJpZGVzID0gdXNlQXBwU3RvcmUoKHMpID0+IHMub3ZlcnJpZGVzKTtcbiAgY29uc3QgQ3VzdG9tUHVjayA9IHVzZU1lbW8yMChcbiAgICAoKSA9PiBvdmVycmlkZXMucHVjayB8fCBEZWZhdWx0T3ZlcnJpZGUsXG4gICAgW292ZXJyaWRlc11cbiAgKTtcbiAgY29uc3QgW21vdW50ZWQsIHNldE1vdW50ZWRdID0gdXNlU3RhdGUyNShmYWxzZSk7XG4gIHVzZUVmZmVjdDI5KCgpID0+IHtcbiAgICBzZXRNb3VudGVkKHRydWUpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHJlYWR5ID0gdXNlQXBwU3RvcmUoKHMpID0+IHMuc3RhdHVzID09PSBcIlJFQURZXCIpO1xuICB1c2VNb25pdG9ySG90a2V5cygpO1xuICB1c2VFZmZlY3QyOSgoKSA9PiB7XG4gICAgaWYgKHJlYWR5ICYmIGlmcmFtZS5lbmFibGVkKSB7XG4gICAgICBjb25zdCBmcmFtZURvYyA9IGdldEZyYW1lKCk7XG4gICAgICBpZiAoZnJhbWVEb2MpIHtcbiAgICAgICAgcmV0dXJuIG1vbml0b3JIb3RrZXlzKGZyYW1lRG9jKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtyZWFkeSwgaWZyYW1lLmVuYWJsZWRdKTtcbiAgdXNlUHJldmlld01vZGVIb3RrZXlzKCk7XG4gIGNvbnN0IGxheW91dE9wdGlvbnMgPSB7fTtcbiAgaWYgKGxlZnRXaWR0aCkge1xuICAgIGxheW91dE9wdGlvbnNbXCItLXB1Y2stdXNlci1sZWZ0LXNpZGUtYmFyLXdpZHRoXCJdID0gYCR7bGVmdFdpZHRofXB4YDtcbiAgfVxuICBpZiAocmlnaHRXaWR0aCkge1xuICAgIGxheW91dE9wdGlvbnNbXCItLXB1Y2stdXNlci1yaWdodC1zaWRlLWJhci13aWR0aFwiXSA9IGAke3JpZ2h0V2lkdGh9cHhgO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czIxKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgUHVjayAke2dldENsYXNzTmFtZTMxKCl9YCwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4NDUoRHJhZ0Ryb3BDb250ZXh0LCB7IGRpc2FibGVBdXRvU2Nyb2xsOiBkbmQgPT0gbnVsbCA/IHZvaWQgMCA6IGRuZC5kaXNhYmxlQXV0b1Njcm9sbCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0NShDdXN0b21QdWNrLCB7IGNoaWxkcmVuOiBjaGlsZHJlbiB8fCAvKiBAX19QVVJFX18gKi8ganN4NDUoRnJhbWVQcm92aWRlciwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQ1KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiBnZXRMYXlvdXRDbGFzc05hbWUoe1xuICAgICAgICAgIGxlZnRTaWRlQmFyVmlzaWJsZSxcbiAgICAgICAgICBtb3VudGVkLFxuICAgICAgICAgIHJpZ2h0U2lkZUJhclZpc2libGVcbiAgICAgICAgfSksXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czIxKFxuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBnZXRMYXlvdXRDbGFzc05hbWUoXCJpbm5lclwiKSxcbiAgICAgICAgICAgIHN0eWxlOiBsYXlvdXRPcHRpb25zLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDQ1KEhlYWRlciwge30pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czIxKFxuICAgICAgICAgICAgICAgIFNpZGViYXIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwibGVmdFwiLFxuICAgICAgICAgICAgICAgICAgc2lkZWJhclJlZjogbGVmdFNpZGViYXJSZWYsXG4gICAgICAgICAgICAgICAgICBpc1Zpc2libGU6IGxlZnRTaWRlQmFyVmlzaWJsZSxcbiAgICAgICAgICAgICAgICAgIG9uUmVzaXplOiBzZXRMZWZ0V2lkdGgsXG4gICAgICAgICAgICAgICAgICBvblJlc2l6ZUVuZDogaGFuZGxlTGVmdFNpZGViYXJSZXNpemVFbmQsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4NDUoU2lkZWJhclNlY3Rpb24sIHsgdGl0bGU6IFwiQ29tcG9uZW50c1wiLCBub0JvcmRlclRvcDogdHJ1ZSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0NShDb21wb25lbnRzLCB7fSkgfSksXG4gICAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0NShTaWRlYmFyU2VjdGlvbiwgeyB0aXRsZTogXCJPdXRsaW5lXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NDUoT3V0bGluZSwge30pIH0pXG4gICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4NDUoQ2FudmFzLCB7fSksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g0NShcbiAgICAgICAgICAgICAgICBTaWRlYmFyLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgICAgICBzaWRlYmFyUmVmOiByaWdodFNpZGViYXJSZWYsXG4gICAgICAgICAgICAgICAgICBpc1Zpc2libGU6IHJpZ2h0U2lkZUJhclZpc2libGUsXG4gICAgICAgICAgICAgICAgICBvblJlc2l6ZTogc2V0UmlnaHRXaWR0aCxcbiAgICAgICAgICAgICAgICAgIG9uUmVzaXplRW5kOiBoYW5kbGVSaWdodFNpZGViYXJSZXNpemVFbmQsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQ1KEZpZWxkU2lkZUJhciwge30pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgKSB9KSB9KSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4NDUoXCJkaXZcIiwgeyBpZDogXCJwdWNrLXBvcnRhbC1yb290XCIsIGNsYXNzTmFtZTogZ2V0Q2xhc3NOYW1lMzEoXCJwb3J0YWxcIikgfSlcbiAgXSB9KTtcbn1cbmZ1bmN0aW9uIFB1Y2socHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g0NShQcm9wc1Byb3ZpZGVyLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3g0NShQdWNrUHJvdmlkZXIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQ1KFB1Y2tMYXlvdXQsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpIH0pKSB9KSk7XG59XG5QdWNrLkNvbXBvbmVudHMgPSBDb21wb25lbnRzO1xuUHVjay5GaWVsZHMgPSBGaWVsZHM7XG5QdWNrLk91dGxpbmUgPSBPdXRsaW5lO1xuUHVjay5QcmV2aWV3ID0gUHJldmlldzI7XG5cbi8vIGJ1bmRsZS9jb3JlLnRzXG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyB0eXBlcy9BUEkvaW5kZXgudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIHR5cGVzL0FQSS9Ecm9wWm9uZS50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gdHlwZXMvQVBJL1ZpZXdwb3J0cy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gdHlwZXMvQVBJL0ZpZWxkVHJhbnNmb3Jtcy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gdHlwZXMvaW5kZXgudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIHR5cGVzL0FwcFN0YXRlLnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gdHlwZXMvQ29uZmlnLnRzeFxuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gdHlwZXMvRGF0YS50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbi8vIHR5cGVzL0ZpZWxkcy50c1xuaW5pdF9yZWFjdF9pbXBvcnQoKTtcblxuLy8gdHlwZXMvUHJvcHMudHN4XG5pbml0X3JlYWN0X2ltcG9ydCgpO1xuXG4vLyB0eXBlcy9VdGlscy50c3hcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5cbmV4cG9ydCB7XG4gIG92ZXJyaWRlS2V5cyxcbiAgQWN0aW9uQmFyLFxuICBBY3Rpb24sXG4gIEdyb3VwLFxuICBMYWJlbCxcbiAgSWNvbkJ1dHRvbixcbiAgQnV0dG9uLFxuICBGaWVsZExhYmVsLFxuICBBdXRvRmllbGQsXG4gIHJlbmRlckNvbnRleHQsXG4gIFJlbmRlcixcbiAgcmVnaXN0ZXJPdmVybGF5UG9ydGFsLFxuICBzZXREZWVwLFxuICBEcm9wWm9uZSxcbiAgRHJhd2VyLFxuICBjcmVhdGVVc2VQdWNrLFxuICB1c2VQdWNrLFxuICB1c2VHZXRQdWNrLFxuICBQdWNrXG59O1xuLyohIEJ1bmRsZWQgbGljZW5zZSBpbmZvcm1hdGlvbjpcblxuY2xhc3NuYW1lcy9pbmRleC5qczpcbiAgKCohXG4gIFx0Q29weXJpZ2h0IChjKSAyMDE4IEplZCBXYXRzb24uXG4gIFx0TGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgXHRodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4gICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9zaGFyZWQvc3JjL3V0aWxzLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9kZWZhdWx0QXR0cmlidXRlcy5qczpcbiAgKCoqXG4gICAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC40NjguMCAtIElTQ1xuICAgKlxuICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS5cbiAgICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gICAqKVxuXG5sdWNpZGUtcmVhY3QvZGlzdC9lc20vSWNvbi5qczpcbiAgKCoqXG4gICAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC40NjguMCAtIElTQ1xuICAgKlxuICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS5cbiAgICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gICAqKVxuXG5sdWNpZGUtcmVhY3QvZGlzdC9lc20vY3JlYXRlTHVjaWRlSWNvbi5qczpcbiAgKCoqXG4gICAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC40NjguMCAtIElTQ1xuICAgKlxuICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS5cbiAgICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gICAqKVxuXG5sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvY2hldnJvbi1kb3duLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9jaGV2cm9uLXJpZ2h0LmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9jaGV2cm9uLXVwLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9jaXJjbGUtY2hlY2stYmlnLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9jb3B5LmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9jb3JuZXItbGVmdC11cC5qczpcbiAgKCoqXG4gICAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC40NjguMCAtIElTQ1xuICAgKlxuICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS5cbiAgICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gICAqKVxuXG5sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvZWxsaXBzaXMtdmVydGljYWwuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2dsb2JlLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9oYXNoLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9sYXllcnMuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2xheW91dC1ncmlkLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9saW5rLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9saXN0LmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9sb2NrLW9wZW4uanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL2xvY2suanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL21vbml0b3IuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3BhbmVsLWxlZnQuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3BhbmVsLXJpZ2h0LmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9wbHVzLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9yZWRvLTIuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3NlYXJjaC5qczpcbiAgKCoqXG4gICAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC40NjguMCAtIElTQ1xuICAgKlxuICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS5cbiAgICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gICAqKVxuXG5sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvc2xpZGVycy1ob3Jpem9udGFsLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy9zbWFydHBob25lLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy90YWJsZXQuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3RyYXNoLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy90eXBlLmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9pY29ucy91bmRvLTIuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3pvb20taW4uanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcblxubHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2ljb25zL3pvb20tb3V0LmpzOlxuICAoKipcbiAgICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjQ2OC4wIC0gSVNDXG4gICAqXG4gICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLlxuICAgKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAgICopXG5cbmx1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanM6XG4gICgqKlxuICAgKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNDY4LjAgLSBJU0NcbiAgICpcbiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gICAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICAgKilcbiovXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-QIGVND56.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/index.mjs":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/index.mjs ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Action: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Action),\n/* harmony export */   ActionBar: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.ActionBar),\n/* harmony export */   AutoField: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.AutoField),\n/* harmony export */   Button: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Button),\n/* harmony export */   Drawer: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Drawer),\n/* harmony export */   DropZone: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.DropZone),\n/* harmony export */   FieldLabel: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.FieldLabel),\n/* harmony export */   Group: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Group),\n/* harmony export */   IconButton: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.IconButton),\n/* harmony export */   Label: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Label),\n/* harmony export */   Puck: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Puck),\n/* harmony export */   Render: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.Render),\n/* harmony export */   createUsePuck: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.createUsePuck),\n/* harmony export */   migrate: () => (/* reexport safe */ _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_1__.migrate),\n/* harmony export */   overrideKeys: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.overrideKeys),\n/* harmony export */   registerOverlayPortal: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.registerOverlayPortal),\n/* harmony export */   renderContext: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.renderContext),\n/* harmony export */   resolveAllData: () => (/* reexport safe */ _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_1__.resolveAllData),\n/* harmony export */   setDeep: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.setDeep),\n/* harmony export */   transformProps: () => (/* reexport safe */ _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_1__.transformProps),\n/* harmony export */   useGetPuck: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.useGetPuck),\n/* harmony export */   usePuck: () => (/* reexport safe */ _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__.usePuck),\n/* harmony export */   walkTree: () => (/* reexport safe */ _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_1__.walkTree)\n/* harmony export */ });\n/* harmony import */ var _chunk_QIGVND56_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-QIGVND56.mjs */ \"(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-QIGVND56.mjs\");\n/* harmony import */ var _chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-OOLYDXKW.mjs */ \"(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/chunk-OOLYDXKW.mjs\");\n\n\n\n// bundle/index.ts\n(0,_chunk_OOLYDXKW_mjs__WEBPACK_IMPORTED_MODULE_1__.init_react_import)();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG1lYXN1cmVkK3B1Y2tAMC4yMC4yX0B0eXBlcytyZWFjdEAxOS4yLjdfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfX3JlYWN0QDE5LjIuMC9ub2RlX21vZHVsZXMvQG1lYXN1cmVkL3B1Y2svZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9COEI7QUFPQTs7QUFFOUI7QUFDQSxzRUFBaUI7QUF5QmYiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mZWRlcmljb2pvcmdlYm9uZWx0b3p6aS9EZXNrdG9wL1dvcmsvcHVjay9jb2RlL2Vjb3N5c3RlbS9wdWNrLWNvbmZpZ3Mvc2hhZGNuLXR3YmxvY2tzL25vZGVfbW9kdWxlcy8ucG5wbS9AbWVhc3VyZWQrcHVja0AwLjIwLjJfQHR5cGVzK3JlYWN0QDE5LjIuN19yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9fcmVhY3RAMTkuMi4wL25vZGVfbW9kdWxlcy9AbWVhc3VyZWQvcHVjay9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBY3Rpb24sXG4gIEFjdGlvbkJhcixcbiAgQXV0b0ZpZWxkLFxuICBCdXR0b24sXG4gIERyYXdlcixcbiAgRHJvcFpvbmUsXG4gIEZpZWxkTGFiZWwsXG4gIEdyb3VwLFxuICBJY29uQnV0dG9uLFxuICBMYWJlbCxcbiAgUHVjayxcbiAgUmVuZGVyLFxuICBjcmVhdGVVc2VQdWNrLFxuICBvdmVycmlkZUtleXMsXG4gIHJlZ2lzdGVyT3ZlcmxheVBvcnRhbCxcbiAgcmVuZGVyQ29udGV4dCxcbiAgc2V0RGVlcCxcbiAgdXNlR2V0UHVjayxcbiAgdXNlUHVja1xufSBmcm9tIFwiLi9jaHVuay1RSUdWTkQ1Ni5tanNcIjtcbmltcG9ydCB7XG4gIGluaXRfcmVhY3RfaW1wb3J0LFxuICBtaWdyYXRlLFxuICByZXNvbHZlQWxsRGF0YSxcbiAgdHJhbnNmb3JtUHJvcHMsXG4gIHdhbGtUcmVlXG59IGZyb20gXCIuL2NodW5rLU9PTFlEWEtXLm1qc1wiO1xuXG4vLyBidW5kbGUvaW5kZXgudHNcbmluaXRfcmVhY3RfaW1wb3J0KCk7XG5leHBvcnQge1xuICBBY3Rpb24sXG4gIEFjdGlvbkJhcixcbiAgQXV0b0ZpZWxkLFxuICBCdXR0b24sXG4gIERyYXdlcixcbiAgRHJvcFpvbmUsXG4gIEZpZWxkTGFiZWwsXG4gIEdyb3VwLFxuICBJY29uQnV0dG9uLFxuICBMYWJlbCxcbiAgUHVjayxcbiAgUmVuZGVyLFxuICBjcmVhdGVVc2VQdWNrLFxuICBtaWdyYXRlLFxuICBvdmVycmlkZUtleXMsXG4gIHJlZ2lzdGVyT3ZlcmxheVBvcnRhbCxcbiAgcmVuZGVyQ29udGV4dCxcbiAgcmVzb2x2ZUFsbERhdGEsXG4gIHNldERlZXAsXG4gIHRyYW5zZm9ybVByb3BzLFxuICB1c2VHZXRQdWNrLFxuICB1c2VQdWNrLFxuICB3YWxrVHJlZVxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@measured+puck@0.20.2_@types+react@19.2.7_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/@measured/puck/dist/index.mjs\n");

/***/ })

};
;